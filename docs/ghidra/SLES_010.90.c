typedef unsigned char   undefined;

typedef unsigned char    byte;
typedef unsigned int    dword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef unsigned short    wchar16;
typedef ulong u_long;

typedef uchar u_char;

typedef ushort u_short;

typedef struct VERTC VERTC, *PVERTC;

typedef struct CVECTOR CVECTOR, *PCVECTOR;

struct CVECTOR {
    u_char r;
    u_char g;
    u_char b;
    u_char cd;
};

struct VERTC {
    short vx;
    short vy;
    short vz;
    u_char tu;
    u_char tv;
    struct CVECTOR col;
};

typedef struct DECDCTENV DECDCTENV, *PDECDCTENV;

struct DECDCTENV {
    u_char iq_y[64];
    u_char iq_c[64];
    short dct[64];
};

typedef struct CdlLOC CdlLOC, *PCdlLOC;

struct CdlLOC {
    u_char minute;
    u_char second;
    u_char sector;
    u_char track;
};

typedef struct CdlATV CdlATV, *PCdlATV;

struct CdlATV {
    u_char val0;
    u_char val1;
    u_char val2;
    u_char val3;
};

typedef struct CdlFILE CdlFILE, *PCdlFILE;

struct CdlFILE {
    struct CdlLOC pos;
    u_long size;
    char name[16];
};

typedef struct EXEC EXEC, *PEXEC;

struct EXEC {
};

typedef void (*CdlCB)(u_char, u_char *);

typedef struct TILE_8 TILE_8, *PTILE_8;

struct TILE_8 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
};

typedef struct POLY_G3 POLY_G3, *PPOLY_G3;

struct POLY_G3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char pad1;
    short x1;
    short y1;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char pad2;
    short x2;
    short y2;
};

typedef struct POLY_F3 POLY_F3, *PPOLY_F3;

struct POLY_F3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
};

typedef struct POLY_F4 POLY_F4, *PPOLY_F4;

struct POLY_F4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    short x3;
    short y3;
};

typedef struct POLY_GT3 POLY_GT3, *PPOLY_GT3;

struct POLY_GT3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char p1;
    short x1;
    short y1;
    u_char u1;
    u_char $3;
    u_short tpage;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char p2;
    short x2;
    short y2;
    u_char u2;
    u_char v2;
    u_short pad2;
};

typedef struct POLY_FT4 POLY_FT4, *PPOLY_FT4;

struct POLY_FT4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
    short x1;
    short y1;
    u_char u1;
    u_char $3;
    u_short tpage;
    short x2;
    short y2;
    u_char u2;
    u_char v2;
    u_short pad1;
    short x3;
    short y3;
    u_char u3;
    u_char v3;
    u_short pad2;
};

typedef struct POLY_FT3 POLY_FT3, *PPOLY_FT3;

struct POLY_FT3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
    short x1;
    short y1;
    u_char u1;
    u_char $3;
    u_short tpage;
    short x2;
    short y2;
    u_char u2;
    u_char v2;
    u_short pad1;
};

typedef struct DR_MODE DR_MODE, *PDR_MODE;

struct DR_MODE {
    u_long tag;
    u_long code[2];
};

typedef struct LINE_F3 LINE_F3, *PLINE_F3;

struct LINE_F3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    u_long pad;
};

typedef struct DR_ENV DR_ENV, *PDR_ENV;

struct DR_ENV {
    u_long tag;
    u_long code[15];
};

typedef struct DR_OFFSET DR_OFFSET, *PDR_OFFSET;

struct DR_OFFSET {
    u_long tag;
    u_long code[2];
};

typedef struct RECT RECT, *PRECT;

struct RECT {
    short x;
    short y;
    short w;
    short h;
};

typedef struct POLY_G4 POLY_G4, *PPOLY_G4;

struct POLY_G4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char pad1;
    short x1;
    short y1;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char pad2;
    short x2;
    short y2;
    u_char r3;
    u_char g3;
    u_char b3;
    u_char pad3;
    short x3;
    short y3;
};

typedef struct TILE_16 TILE_16, *PTILE_16;

struct TILE_16 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
};

typedef struct SPRT_16 SPRT_16, *PSPRT_16;

struct SPRT_16 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
};

typedef struct LINE_G2 LINE_G2, *PLINE_G2;

struct LINE_G2 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char p1;
    short x1;
    short y1;
};

typedef struct TILE TILE, *PTILE;

struct TILE {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short w;
    short h;
};

typedef struct DISPENV DISPENV, *PDISPENV;

struct DISPENV {
    struct RECT disp;
    struct RECT screen;
    u_char isinter;
    u_char isrgb24;
    u_char pad0;
    u_char pad1;
};

typedef struct DR_AREA DR_AREA, *PDR_AREA;

struct DR_AREA {
    u_long tag;
    u_long code[2];
};

typedef struct LINE_F4 LINE_F4, *PLINE_F4;

struct LINE_F4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    short x3;
    short y3;
    u_long pad;
};

typedef struct SPRT_8 SPRT_8, *PSPRT_8;

struct SPRT_8 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
};

typedef struct SPRT SPRT, *PSPRT;

struct SPRT {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
    short w;
    short h;
};

typedef struct LINE_F2 LINE_F2, *PLINE_F2;

struct LINE_F2 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
};

typedef struct DR_TPAGE DR_TPAGE, *PDR_TPAGE;

struct DR_TPAGE {
    u_long tag;
    u_long code[1];
};

typedef struct DR_LOAD DR_LOAD, *PDR_LOAD;

struct DR_LOAD {
    u_long tag;
    u_long code[3];
    u_long p[13];
};

typedef struct LINE_G3 LINE_G3, *PLINE_G3;

struct LINE_G3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char p1;
    short x1;
    short y1;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char p2;
    short x2;
    short y2;
    u_long pad;
};

typedef struct DR_TWIN DR_TWIN, *PDR_TWIN;

struct DR_TWIN {
    u_long tag;
    u_long code[2];
};

typedef struct DR_MOVE DR_MOVE, *PDR_MOVE;

struct DR_MOVE {
    u_long tag;
    u_long code[5];
};

typedef struct TILE_1 TILE_1, *PTILE_1;

struct TILE_1 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
};

typedef struct LINE_G4 LINE_G4, *PLINE_G4;

struct LINE_G4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char p1;
    short x1;
    short y1;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char p2;
    short x2;
    short y2;
    u_char r3;
    u_char g3;
    u_char b3;
    u_char p3;
    short x3;
    short y3;
    u_long pad;
};

typedef struct DRAWENV DRAWENV, *PDRAWENV;

struct DRAWENV {
    struct RECT clip;
    short ofs[2];
    struct RECT tw;
    u_short tpage;
    u_char dtd;
    u_char dfe;
    u_char isbg;
    u_char r0;
    u_char g0;
    u_char b0;
    struct DR_ENV dr_env;
};

typedef struct POLY_GT4 POLY_GT4, *PPOLY_GT4;

struct POLY_GT4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    u_char u0;
    u_char $2;
    u_short clut;
    u_char r1;
    u_char g1;
    u_char b1;
    u_char p1;
    short x1;
    short y1;
    u_char u1;
    u_char $3;
    u_short tpage;
    u_char r2;
    u_char g2;
    u_char b2;
    u_char p2;
    short x2;
    short y2;
    u_char u2;
    u_char v2;
    u_short pad2;
    u_char r3;
    u_char g3;
    u_char b3;
    u_char p3;
    short x3;
    short y3;
    u_char u3;
    u_char v3;
    u_short pad3;
};

typedef int __jmp_buf[6];

typedef struct SpriteTOCEntry SpriteTOCEntry, *PSpriteTOCEntry;

struct SpriteTOCEntry { // Sprite table of contents entry (12 bytes). Part of Asset 600 container.
    uint sprite_id; // Unique sprite identifier
    uint size; // Size of sprite data in bytes
    uint offset; // Offset from BLB data start to sprite
};

typedef struct TileHeader TileHeader, *PTileHeader;

struct TileHeader { // Tile header from Asset 100 (0x064), 36 bytes. Contains level dimensions, spawn position, tile counts, and background colors. VERIFIED via runtime memory analysis.
    byte bg_r; // Background red (0-255)
    byte bg_g; // Background green (0-255)
    byte bg_b; // Background blue (0-255)
    byte pad_03; // Padding
    byte secondary_r; // Secondary color red
    byte secondary_g; // Secondary color green
    byte secondary_b; // Secondary color blue
    byte pad_07; // Padding
    ushort level_width; // Level width in tiles
    ushort level_height; // Level height in tiles
    ushort spawn_x; // VERIFIED: Player spawn X in tiles. Read by GetSpawnPosition (0x8007b458), stored at GameState+0x116 as (spawn_x*16+8)
    ushort spawn_y; // VERIFIED: Player spawn Y in tiles. Read by GetSpawnPosition (0x8007b458), stored at GameState+0x118 as (spawn_y*16+15)
    ushort count_16x16; // Number of 16x16 pixel tiles. Used by GetTotalTileCount.
    ushort count_8x8_a; // Primary 8x8 tile count. Used by GetTotalTileCount.
    ushort count_8x8_b; // Secondary 8x8 tile count (often 0). Used by GetTotalTileCount.
    ushort unknown_16; // Unknown bytes 0x16-0x17
    ushort unknown_18; // Unknown bytes 0x18-0x19
    ushort unknown_1a; // Unknown bytes 0x1A-0x1B
    ushort field_1c; // Unknown: Read by GetAsset100Field1C, stored at GameState+0x78. NO READER FOUND - may be legacy/unused. Boss=0, scrolling levels have value near/above height.
    ushort field_1e; // Unknown purpose
    ushort unknown_20; // Unknown byte 0x20
    ushort unknown_22; // Unknown byte 0x22
};

typedef struct SpriteFrameEntry SpriteFrameEntry, *PSpriteFrameEntry;

struct SpriteFrameEntry { // Sprite frame metadata (36 bytes). Contains origin offsets, dimensions, hitbox, and RLE data offset.
    ushort callback_id; // Callback ID (0=none, triggers FUN_8001c4a4 for SFX/particles)
    ushort unknown_02; // Unknown bytes 2-3
    ushort flip_flags; // 0=normal L-to-R decode, non-zero=horizontal mirror R-to-L (DecodeRLESprite)
    short origin_x; // Render X offset (signed)
    short origin_y; // Render Y offset (signed)
    ushort width; // Frame width in pixels (read by GetFrameMetadata)
    ushort height; // Frame height in pixels (read by GetFrameMetadata)
    ushort frame_delay; // Per-frame timing value (copied to entity+0xE6 in FUN_8001d748)
    ushort unknown_10; // Unknown bytes 0x10-0x11
    short hitbox_x; // Hitbox X offset (signed)
    short hitbox_y; // Hitbox Y offset (signed)
    ushort hitbox_width; // Hitbox width
    ushort hitbox_height; // Hitbox height
    ushort padding_1A; // Padding (always 0)
    ushort padding_1C; // Padding (always 0)
    ushort padding_1E; // Padding (always 0)
    uint rle_offset; // Offset to RLE data from sprite RLE base (read by GetFrameMetadata at +0x20)
};

typedef struct LevelDataContext LevelDataContext, *PLevelDataContext;

struct LevelDataContext { // Context structure for level/asset loading. Holds asset pointers, buffers, and loader callback. Located at GameState+0x84 (0x8009DCC4).
    int subBlockFlag; // Set to subBlockIndex or 1 - indicates which sub-block is loaded
    pointer pTileHeader; // Pointer to TileHeader (Asset 100). Read by GetSpawnPosition, GetAsset100Field1C, GetLevelDimensions, etc.
};

typedef struct SpriteHeader SpriteHeader, *PSpriteHeader;

struct SpriteHeader { // Sprite asset header (24 bytes for type 1, 36 bytes for type 2). Type 2 sprites have extra_frames field at 0x1C. Total frames = frame_count + extra_frames.
    ushort type; // 1=standard (24-byte header), 2=extended (36-byte header)
    ushort header_size; // 24 for type 1, 36 for type 2
    ushort frames_end; // Offset to RLE data = header_size + total_frames * 36
    ushort padding_06; // Always 0
    uint rle_size; // Approximate size of RLE pixel data
    uint sprite_id; // Unique sprite identifier (matches TOC)
    ushort frame_count; // Primary frame count (type 2: add extra_frames for total)
    ushort padding_12; // Always 0
    ushort unknown_flag; // 0 or 1
    ushort clut_garbage; // Always 0x815D - NOT used (palette loaded separately)
};

typedef struct SpriteContext SpriteContext, *PSpriteContext;

struct SpriteContext { // Runtime sprite context (20 bytes). Initialized by InitSpriteContext, used by GetFrameMetadata.
    pointer frame_metadata; // Pointer to first SpriteFrameEntry (base + header_size + first_frame_offset)
    pointer secondary_ptr; // Secondary pointer (from sprite header offset 4)
    pointer rle_data; // Pointer to RLE pixel data base
    ushort max_width; // Maximum width across all frames
    ushort max_height; // Maximum height across all frames
    ushort total_frame_count; // Total number of frames (type2: frame_count + extra_frames)
    byte unknown_12; // Unknown byte
    byte is_valid; // 1 = initialized/valid, 0 = invalid
};

typedef struct MATRIX MATRIX, *PMATRIX;

struct MATRIX {
    short m[3][3];
    long t[3];
};

typedef struct VECTOR VECTOR, *PVECTOR;

struct VECTOR {
    long vx;
    long vy;
    long vz;
    long pad;
};

typedef struct SVECTOR SVECTOR, *PSVECTOR;

struct SVECTOR {
    short vx;
    short vy;
    short vz;
    short pad;
};

typedef struct DVECTOR DVECTOR, *PDVECTOR;

struct DVECTOR {
    short vx;
    short vy;
};

typedef void (*DslCB)(u_char, u_char *);

typedef struct __jmp_buf_tag __jmp_buf_tag, *P__jmp_buf_tag;

typedef struct __sigset_t __sigset_t, *P__sigset_t;

struct __sigset_t {
    ulong __val[32];
};

struct __jmp_buf_tag {
    __jmp_buf __jmpbuf;
    int __mask_was_saved;
    struct __sigset_t __saved_mask;
};

typedef ulong size_t;

typedef struct LayerEntry LayerEntry, *PLayerEntry;

struct LayerEntry { // Layer definition from Asset 201. 92 bytes per layer. Contains position, dimensions, parallax scroll factors, scroll enable flags, and background color.
    ushort x_offset; // X position in tiles
    ushort y_offset; // Y position in tiles
    ushort width; // Layer width in tiles
    ushort height; // Layer height in tiles
    ushort level_width; // Level width in tiles (from Asset 100)
    ushort level_height; // Level height in tiles
    uint render_param; // Passed to layer render functions (low u16 used)
    uint scroll_x; // X parallax factor (0x10000 = 1.0, 0x8000 = 0.5)
    uint scroll_y; // Y parallax factor
};

typedef struct SpuVoiceAttr SpuVoiceAttr, *PSpuVoiceAttr;

typedef struct SpuVolume SpuVolume, *PSpuVolume;

struct SpuVolume {
    short left;
    short right;
};

struct SpuVoiceAttr {
    ulong voice;
    ulong mask;
    struct SpuVolume volume;
    struct SpuVolume volmode;
    struct SpuVolume volumex;
    ushort pitch;
    ushort note;
    ushort sample_note;
    short envx;
    ulong addr;
    ulong loop_addr;
    long a_mode;
    long s_mode;
    long r_mode;
    ushort ar;
    ushort dr;
    ushort sr;
    ushort rr;
    ushort sl;
    ushort adsr1;
    ushort adsr2;
};

typedef struct SpuExtAttr SpuExtAttr, *PSpuExtAttr;

struct SpuExtAttr {
    struct SpuVolume volume;
    long reverb;
    long mix;
};

typedef struct SpuCommonAttr SpuCommonAttr, *PSpuCommonAttr;

struct SpuCommonAttr {
    ulong mask;
    struct SpuVolume mvol;
    struct SpuVolume mvolmode;
    struct SpuVolume mvolx;
    struct SpuExtAttr cd;
    struct SpuExtAttr ext;
};



undefined4 null_??_1f800004;
undefined4 null_??_1f800008;
undefined4 null_??_1f80000c;
undefined4 null_??_1f800010;
undefined1 g_FrameReady;
undefined1 g_SkipVSync;
undefined4 null_00000007h_8009ae40;
undefined4 null_00000300h_8009ae44;
undefined DAT_8001039c;
undefined DAT_80010384;
pointer blbHeaderBufferBase;
undefined DAT_80010374;
undefined DAT_80010364;
undefined DAT_80010354;
undefined DAT_80010344;
pointer g_pOrderingTableBase;
undefined4 null_00000000h_8009ae58;
undefined DAT_800104ac;
undefined DAT_8001048c;
undefined LAB_8001991c;
undefined DAT_8001046c;
undefined LAB_80020288;
undefined4 g_GameStatePtr;
undefined ScaleXByEntityScale;
undefined ScaleYByEntityScale;
undefined DAT_8001044c;
undefined EntityUpdateCallback;
undefined DAT_8001042c;
undefined LAB_8001eeec;
undefined DAT_8001040c;
undefined LAB_8001f368;
undefined DAT_800103ec;
undefined LAB_8001f778;
undefined DAT_800103cc;
undefined LAB_8001fb0c;
undefined DAT_800103ac;
undefined EntityCallback_8001a2cc;
undefined EntityCallback_8001a2e8;
undefined DAT_800104cc;
undefined LAB_80020848;
undefined4 Magic1234;
undefined DAT_800104ec;
undefined DAT_8009b038;
undefined DAT_8009b074;
undefined DAT_8009b0bc;
undefined DAT_8009b104;
undefined1 null_01h_8009b198;
undefined1 null_00h_8009b199;
pointer g_pPlayerState;
undefined EntityCallback_8002700c;
undefined Callback_800271cc;
undefined *PTR_Callback_800271cc_800a598c;
undefined DAT_8001056c;
undefined DAT_800105cc;
undefined LAB_80026f34;
undefined LAB_80027bb8;
undefined4 null_FFFF0000h_800a5988;
undefined DAT_8001054c;
undefined LAB_80027e9c;
undefined DAT_8001050c;
undefined DAT_8001058c;
undefined DAT_800105ac;
undefined DAT_800105ec;
undefined LAB_80027418;
undefined LAB_80027860;
undefined LAB_8002a378;
undefined LAB_8002abc0;
undefined DAT_8009b174;
undefined DAT_8009b180;
undefined DAT_8009b18c;
undefined DAT_8001052c;
undefined LAB_80026c50;
undefined LAB_80026cd8;
undefined DAT_80010ba8;
undefined FUN_80030e54;
undefined LAB_80030fe0;
undefined DAT_80010b78;
undefined DAT_80010b98;
undefined LAB_80031588;
undefined DAT_80010b18;
undefined DAT_80010ab8;
undefined LAB_8003433c;
undefined DAT_8009b144;
undefined DAT_80010ad8;
undefined DAT_80010ae8;
undefined DAT_80010b00;
undefined DAT_80010aa8;
undefined DAT_80010a88;
undefined LAB_80034ae4;
undefined DAT_80010a68;
undefined LAB_80034ca8;
undefined DAT_80010a48;
undefined LAB_800350ec;
undefined LAB_800351bc;
undefined DAT_800109f0;
undefined LAB_80036470;
undefined DAT_800109d0;
undefined LAB_80036734;
undefined DAT_80010980;
undefined DAT_800109a0;
undefined LAB_800373a8;
undefined DAT_80010950;
undefined DAT_80010970;
undefined LAB_800379b0;
undefined DAT_80010930;
undefined LAB_80037c94;
undefined DAT_80010910;
undefined LAB_80037ed8;
undefined LAB_8003800c;
undefined DAT_800108f0;
undefined LAB_80038210;
undefined LAB_80038270;
undefined DAT_800108d0;
undefined LAB_80038468;
undefined DAT_8009b43c;
undefined DAT_8009b454;
undefined DAT_8009b46c;
undefined DAT_8009b484;
undefined4 null_00000000h_8009b3d8;
undefined DAT_8009b49c;
undefined4 null_00000000h_8009b3dc;
undefined4 null_00000000h_8009b3e0;
undefined4 null_00000000h_8009b3e4;
undefined4 null_00000000h_8009b3e8;
dword g_GameBLBFile;
undefined4 g_GameBLBSector;
undefined1 null_00h_800a59e8;
undefined DAT_8009b3ec;
undefined DAT_800a59fc;
undefined1 null_00h_800a59ec;
undefined4 null_00000000h_800a59f4;
undefined4 null_00000000h_800a59f8;
undefined1 null_00h_800a5a04;
undefined1 null_00h_800a5a0c;
undefined1 null_00h_800a5a0d;
undefined1 null_00h_800a59e9;
undefined1 null_00h_800a59ea;
undefined1 null_00h_800a59eb;
undefined4 null_00000000h_800a5a2c;
undefined DAT_800a5a42;
undefined4 null_00000000h_800a5a30;
undefined4 null_00000000h_800a5a38;
undefined2 null_0000h_800a5a40;
undefined4 null_00000000h_800a5a44;
undefined FUN_80039e5c;
undefined2 null_0000h_800a5a18;
undefined1 null_00h_800a5a1a;
undefined4 null_00000000h_800a5a20;
undefined4 null_00000000h_800a5a24;
undefined1 null_04h_800a6080;
undefined DAT_800a5a3e;
undefined1 null_00h_800a5a1b;
undefined2 null_0000h_8009b4cc;
undefined2 null_0000h_8009b4ce;
undefined4 null_00000000h_800a5a28;
undefined2 null_0000h_8009b4d0;
undefined2 null_0000h_8009b4d2;
undefined2 null_0000h_8009b4d4;
undefined4 null_00000000h_800a5a34;
undefined2 null_0000h_8009b4d6;
undefined2 null_0000h_8009b4d8;
undefined2 null_0000h_800a5a3c;
undefined2 null_0000h_8009b4da;
undefined FUN_80039f9c;
undefined4 null_??_800acb78;
undefined4 null_00000000h_800a5a10;
undefined4 null_00000000h_800a5a14;
undefined DAT_80010de4;
undefined FUN_8003acc8;
undefined EntityCallback_8003b190;
undefined DAT_8009b55c;
undefined DAT_8009b57c;
undefined DAT_8009b59c;
undefined DAT_8009b5bc;
undefined DAT_8009b5d4;
undefined DAT_8009b5ec;
undefined LAB_80040170;
undefined LAB_800403d8;
undefined DAT_80040518;
undefined LAB_80040300;
undefined FUN_8003ffa8;
undefined DAT_80010c64;
undefined LAB_80040800;
undefined DAT_800110e8;
undefined LAB_800438e4;
undefined LAB_80043ef0;
undefined DAT_80011088;
undefined LAB_80045314;
undefined DAT_8009b6b0;
undefined EntityCallback_80045410;
undefined *PTR_Callback_80046b38_800a5b4c;
undefined DAT_800111e8;
undefined LAB_80046a2c;
undefined LAB_80046a64;
undefined DAT_8009b854;
undefined4 null_FFFF0000h_800a5b48;
undefined EntityCallback_8003b218;
undefined Callback_80046b38;
undefined *PTR_Callback_80047ee4_800a5b6c;
undefined4 null_FFFF0000h_800a5b68;
undefined EntityCallback_800478dc;
undefined EntityCallback_80047a80;
undefined EntityCallback_80047384;
undefined EntityCallback_80047b30;
undefined EntityCallback_8004780c;
undefined EntityCallback_80047450;
undefined EntityCallback_80047768;
undefined EntityCallback_80047bf4;
undefined EntityCallback_80047548;
undefined EntityCallback_80047d84;
undefined Callback_800479d0;
undefined4 null_FFFF0000h_800a5b60;
undefined *PTR_Callback_800479d0_800a5b64;
undefined *PTR_FUN_800a5b74;
undefined DAT_80011308;
undefined4 null_FFFF0000h_800a5b70;
undefined DAT_80011328;
undefined DAT_80011348;
undefined LAB_800470f4;
undefined LAB_80047168;
undefined DAT_8009ba48;
undefined DAT_8009bacc;
undefined FUN_8001cc6c;
undefined2 null_FF60h_8009b860;
undefined2 null_FFE0h_8009b862;
undefined *PTR_Callback_8004906c_800a5b7c;
undefined *PTR_Callback_80048f40_800a5b84;
undefined4 null_FFFF0000h_800a5b78;
undefined4 null_FFFF0000h_800a5b80;
undefined *PTR_Callback_80048d60_800a5b8c;
undefined LAB_80048ab0;
undefined EntityCallback_8004839c;
undefined LAB_80048e2c;
undefined DAT_8009baf8;
undefined4 null_FFFF0000h_800a5b88;
undefined EntityCallback_80048a54;
undefined EntityCallback_80048d98;
undefined DAT_80011368;
undefined EntityCallback_80049278;
undefined EntityCallback_80046e40;
undefined EntityCallback_80046fe4;
undefined EntityCallback_80048538;
undefined EntityCallback_800493d8;
undefined EntityCallback_80049550;
undefined EntityCallback_800496c8;
undefined DAT_8009b878;
undefined EntityCallback_80048b48;
undefined DAT_8009b8c4;
undefined DAT_800112e8;
undefined LAB_8004992c;
undefined DAT_800115c8;
undefined LAB_8004f8ac;
undefined FUN_8004f704;
undefined FUN_8004fb58;
undefined *PTR_Callback_800505a0_800a5c7c;
undefined DAT_800115a8;
undefined LAB_8004fdb8;
undefined DAT_8009bbe0;
undefined EntityCallback_8004fd3c;
undefined4 null_FFFF0000h_800a5c78;
undefined Callback_800505a0;
undefined EntityCallback_8004fd68;
undefined DAT_800114e8;
undefined LAB_8005294c;
undefined LAB_80052a68;
undefined LAB_80052adc;
undefined DAT_80052c40;
undefined DAT_800114a8;
undefined LAB_8005334c;
undefined LAB_80053664;
undefined DAT_800113e8;
undefined LAB_80054aa8;
undefined LAB_80054c40;
undefined DAT_800116e8;
undefined LAB_80056718;
undefined ClayballTickCallback;
undefined EntityCallback_80056888;
undefined DAT_80011668;
undefined LAB_800584a8;
undefined DAT_800586b4;
undefined LAB_8005894c;
undefined DAT_8009c0f4;
undefined DAT_80011648;
undefined LAB_80058b50;
undefined LAB_80058aac;
undefined *PTR_PlayerStateCallback_0_800a5d24;
undefined *PTR_PlayerStateCallback_1_800a5d2c;
undefined *PTR_PlayerStateCallback_2_800a5d34;
undefined DAT_80011804;
undefined DAT_8009c174;
undefined PlayerTickCallback;
undefined4 null_FFFF0000h_800a5d20;
undefined4 null_FFFF0000h_800a5d28;
undefined ApplyEntityPositionUpdate;
undefined4 null_FFFF0000h_800a5d30;
undefined4 null_48608484h_8009c3a8;
undefined *PTR_PlayerStateCallback_3_800a5d3c;
undefined *PTR_Callback_8006ae58_800a5d44;
undefined *PTR_Callback_8006ae94_800a5d4c;
undefined *PTR_Callback_8006adbc_800a5d54;
undefined *PTR_PlayerState_QuickTurn_800a5d5c;
undefined *PTR_Callback_8006ad70_800a5d64;
undefined *PTR_PlayerBounceCallback_Primary_800a5d6c;
undefined *PTR_Callback_8006af28_800a5d74;
undefined *PTR_Callback_8006c95c_800a5d7c;
undefined *PTR_PlayerState_Death_800a5d84;
undefined4 null_FFFF0000h_800a5d38;
undefined4 null_FFFF0000h_800a5d40;
undefined4 null_FFFF0000h_800a5d48;
undefined4 null_FFFF0000h_800a5d50;
undefined4 null_FFFF0000h_800a5d58;
undefined4 null_FFFF0000h_800a5d60;
undefined4 null_FFFF0000h_800a5d68;
undefined4 null_FFFF0000h_800a5d70;
undefined4 null_FFFF0000h_800a5d78;
undefined4 null_FFFF0000h_800a5d80;
undefined *PTR_Callback_800682a4_800a5d8c;
undefined4 null_FFFF0000h_800a5d88;
undefined PlayerState_Falling;
undefined PlayerState_Jump;
undefined Callback_80069ef4;
undefined *PTR_Callback_8006d910_800a5d94;
undefined *PTR_Callback_80069ef4_800a5d9c;
undefined4 null_FFFF0000h_800a5d90;
undefined4 null_FFFF0000h_800a5d98;
undefined2 g_GameFlags;
undefined *PTR_Callback_800670bc_800a5da4;
undefined *PTR_Callback_80066f60_800a5dac;
undefined4 null_FFFF0000h_800a5da0;
undefined4 null_FFFF0000h_800a5da8;
undefined *PTR_PlayerState_PickupItem_800a5db4;
undefined4 null_FFFF0000h_800a5db0;
undefined *PTR_PlayerState_LevelExitTeleporter_800a5dbc;
undefined *PTR_PlayerState_CheckpointExit_800a5dc4;
undefined4 null_FFFF0000h_800a5db8;
undefined4 null_FFFF0000h_800a5dc0;
undefined *PTR_Callback_80069200_800a5dcc;
undefined Callback_80069200;
undefined EntityInitCallback_800694ac;
undefined4 null_FFFF0000h_800a5dc8;
undefined PlayerCallback_800650c4;
undefined PlayerCallback_800602e0;
pointer PTR_PTR_8009c288;
pointer PTR_PTR_8009c9c4;
undefined PlayerCallback_8005cc84;
undefined PlayerCallback_8006120c;
undefined PlayerCallback_8005f834;
undefined PlayerStateCallback_2;
pointer PTR_PTR_8009c2c0;
undefined DAT_8009c37c;
undefined DAT_8009c37e;
undefined DAT_8009c380;
undefined DAT_8009c2e0;
undefined DAT_8009c2e2;
undefined PlayerEntityCollisionHandler;
undefined *PTR_PlayerState_Running_800a5dd4;
undefined4 null_FFFF0000h_800a5dd0;
undefined *PTR_Callback_8006bdd4_800a5ddc;
undefined4 null_FFFF0000h_800a5de0;
undefined *PTR_Callback_8006bf2c_800a5de4;
undefined4 null_FFFF0000h_800a5de8;
undefined *PTR_Callback_8006c0d8_800a5dec;
undefined4 null_FFFF0000h_800a5df0;
undefined *PTR_Callback_8006c3ac_800a5df4;
undefined4 null_FFFF0000h_800a5dd8;
undefined *PTR_Callback_800698b8_800a5dfc;
undefined *PTR_Callback_80068f80_800a5e04;
undefined4 null_FFFF0000h_800a5df8;
undefined *PTR_PlayerState_JumpApex_800a5e0c;
undefined4 null_FFFF0000h_800a5e00;
undefined *PTR_PlayerState_WalkingRight_800a5e14;
undefined4 null_FFFF0000h_800a5e08;
undefined *PTR_PlayerState_WalkingLeft_800a5e1c;
undefined4 null_FFFF0000h_800a5e10;
undefined *PTR_Callback_80067fc8_800a5e24;
undefined4 null_FFFF0000h_800a5e18;
undefined *PTR_Callback_8006a6e4_800a5e2c;
undefined4 null_FFFF0000h_800a5e20;
undefined *PTR_Callback_8006a584_800a5e34;
undefined4 null_FFFF0000h_800a5e28;
undefined2 g_DefaultBGColorR;
undefined4 null_FFFF0000h_800a5e30;
undefined2 g_DefaultBGColorG;
undefined Callback_80067fc8;
undefined *PTR_Callback_80069a3c_800a5e3c;
undefined *PTR_PlayerState_SpecialMove2_800a5e44;
undefined PlayerState_WalkingRight;
undefined PlayerState_WalkingLeft;
undefined *PTR_Callback_80067a34_800a5e4c;
undefined4 null_FFFF0000h_800a5e38;
undefined4 null_FFFF0000h_800a5e40;
undefined4 null_FFFF0000h_800a5e48;
undefined *PTR_PlayerState_Jump_800a5e54;
undefined2 g_DefaultBGColorB;
undefined4 null_FFFF0000h_800a5e50;
undefined *PTR_PlayerState_Falling_800a5e5c;
undefined4 null_FFFF0000h_800a5e58;
undefined *PTR_Callback_80068130_800a5e64;
undefined4 null_FFFF0000h_800a5e60;
undefined *PTR_PlayerState_SpecialIdleAnim_800a5e6c;
undefined4 null_FFFF0000h_800a5e68;
undefined *PTR_Callback_8006d048_800a5e74;
undefined4 null_FFFF0000h_800a5e70;
undefined *PTR_Callback_8006d548_800a5e7c;
undefined4 null_FFFF0000h_800a5e78;
undefined *PTR_Callback_8006d3c8_800a5e84;
undefined4 null_FFFF0000h_800a5e80;
undefined *PTR_Callback_80069bbc_800a5e8c;
undefined *PTR_Callback_8006a940_800a5e94;
undefined *PTR_Callback_8006abf8_800a5e9c;
undefined *PTR_Callback_8006aa9c_800a5ea4;
undefined4 null_FFFF0000h_800a5e88;
undefined4 null_FFFF0000h_800a5e90;
undefined4 null_FFFF0000h_800a5e98;
undefined4 null_FFFF0000h_800a5ea0;
undefined *PTR_Callback_8006b974_800a5eac;
undefined *PTR_Callback_8006b3f8_800a5eb4;
undefined *PTR_Callback_8006b4f4_800a5ebc;
undefined4 null_FFFF0000h_800a5ea8;
undefined4 null_FFFF0000h_800a5eb0;
undefined4 null_FFFF0000h_800a5eb8;
undefined *PTR_Callback_8006b658_800a5ec4;
undefined4 null_FFFF0000h_800a5ec0;
undefined *PTR_Callback_8006d724_800a5ed0;
undefined4 null_FFFF0000h_800a5ecc;
undefined Callback_80068130;
undefined4 null_FFFF0000h_800a5ee4;
undefined4 null_FFFF0000h_800a5eec;
undefined *PTR_Callback_8006b7f8_800a5ed8;
undefined *PTR_PlayerState_LandingFromRide_800a5ee0;
undefined *PTR_PlayerState_SpecialMove1_800a5ee8;
undefined *PTR_PlayerState_StandingIdle_800a5ef0;
undefined4 null_FFFF0000h_800a5ed4;
undefined4 null_FFFF0000h_800a5edc;
undefined *PTR_Callback_8006bc04_800a5ef8;
undefined4 null_FFFF0000h_800a5ef4;
undefined PlayerCallback_8005bad0;
undefined FUN_8005c1c4;
undefined PlayerCallback_80061934;
undefined PlayerCallback_80066e38;
undefined *PTR_Callback_800672f4_800a5f00;
undefined PlayerCallback_8005cce0;
undefined4 null_FFFF0000h_800a5efc;
undefined PlayerCallback_8005bdb4;
undefined PlayerCallback_8005fb18;
undefined PlayerCallback_HandleMovementAndCollision;
undefined PlayerCallback_80062ad4;
undefined PlayerCallback_8005f540;
undefined PlayerStateCallback_0;
undefined *PTR_Callback_80069d3c_800a5f08;
undefined PlayerCallback_8005d0c8;
undefined4 null_FFFF0000h_800a5f04;
undefined PlayerCallback_8005fd3c;
undefined PlayerCallback_8005bb80;
undefined *PTR_Callback_80067f90_800a5f10;
undefined PlayerCallback_8005ff20;
undefined4 null_FFFF0000h_800a5f0c;
undefined PlayerCallback_800600e0;
undefined EntityInitCallback_80068514;
undefined PlayerCallback_8005bf5c;
undefined PlayerCallback_8005bbac;
undefined *PTR_Callback_800691d8_800a5f18;
undefined FUN_8005cf24;
undefined PlayerCallback_80064008;
undefined PlayerCallback_80064b40;
undefined4 null_FFFF0000h_800a5f14;
undefined EntityInitCallback_80069600;
undefined PlayerCallback_8005cec8;
undefined *PTR_Callback_800691e8_800a5f20;
undefined PlayerCallback_8005d25c;
undefined4 null_FFFF0000h_800a5f1c;
undefined PlayerCallback_800605d8;
undefined PlayerCallback_80060890;
undefined EntityInitCallback_8006a818;
undefined PlayerCallback_8005d404;
undefined PlayerCallback_8005bbe0;
undefined PlayerCallback_8005be6c;
undefined *PTR_Callback_8006b2dc_800a5f28;
undefined4 null_FFFF0000h_800a5f24;
undefined PlayerCallback_8005c0a0;
undefined Callback_80069ea4;
undefined *PTR_Callback_80069ea4_800a5f30;
undefined4 null_FFFF0000h_800a5f2c;
undefined FUN_8005ca60;
undefined PlayerCallback_80060a5c;
undefined PlayerCallback_80066990;
undefined PlayerCallback_80060c9c;
undefined *PTR_Callback_8006b634_800a5f38;
undefined4 null_FFFF0000h_800a5f34;
undefined PlayerCallback_8005f3d4;
undefined EntityInitCallback_8006b304;
undefined *PTR_Callback_8006bd80_800a5f40;
undefined4 null_FFFF0000h_800a5f3c;
undefined PlayerCallback_8005f430;
undefined PlayerCallback_8005daa4;
undefined *PTR_Callback_8006c0ac_800a5f48;
undefined PlayerCallback_8005dde0;
undefined4 null_FFFF0000h_800a5f44;
undefined *PTR_Callback_8006c278_800a5f50;
undefined EntityInitCallback_800683d4;
undefined PlayerCallback_8005e574;
undefined PlayerCallback_8006187c;
undefined4 null_FFFF0000h_800a5f4c;
undefined PlayerCallback_800625b4;
undefined PlayerCallback_8005e170;
undefined EntityInitCallback_8006c514;
undefined EntityInitCallback_8006c668;
undefined *PTR_Callback_8006c7cc_800a5f58;
undefined PlayerCallback_8005e450;
undefined4 null_FFFF0000h_800a5f54;
undefined PlayerCallback_8005bd60;
undefined EntityInitCallback_8006c7f8;
undefined EntityInitCallback_8006d270;
undefined *PTR_Callback_8006d6c8_800a5f60;
undefined4 null_FFFF0000h_800a5f5c;
undefined PlayerCallback_8005f604;
undefined PlayerCallback_80066c40;
undefined PlayerCallback_80060e24;
undefined PlayerCallback_8005bc3c;
undefined DAT_800117e4;
undefined LAB_8006dbbc;
undefined DAT_8009c254;
undefined DAT_800117c4;
undefined DAT_800117a4;
undefined LAB_8006e008;
undefined4 null_FFFF0000h_800a5f64;
undefined *PTR_Callback_8006e8f4_800a5f68;
undefined DAT_80011784;
undefined LAB_8006e77c;
undefined DAT_8009c3c4;
undefined EntityInitCallback_8006e8b0;
undefined Callback_8006e8f4;
undefined *PTR_Callback_8006fdf4_800a5f88;
undefined DAT_80011cf4;
undefined FinnMainTickHandler;
undefined DAT_8009ca34;
undefined4 null_FFFF0000h_800a5f84;
undefined EntityInitCallback_8006f190;
undefined *PTR_FinnDeathExplosion_800a5f90;
undefined4 null_FFFF0000h_800a5f8c;
undefined DAT_8009ca7c;
undefined EntityInitCallback_8006f224;
undefined EntityInitCallback_80070064;
undefined EntityInitCallback_8006f0a8;
undefined *PTR_Callback_80070094_800a5f98;
undefined4 null_FFFF0000h_800a5f94;
undefined *PTR_Callback_800729d8_800a5fa8;
undefined DAT_80011d34;
undefined DAT_80011d74;
undefined LAB_8007061c;
undefined DAT_8009cabc;
undefined4 null_FFFF0000h_800a5fa4;
undefined EntityInitCallback_800713f4;
undefined FUN_80071560;
undefined *PTR_Callback_8007301c_800a5fb0;
undefined4 null_FFFF0000h_800a5fac;
undefined *PTR_Callback_80072a98_800a5fb8;
undefined *PTR_Callback_80072de0_800a5fc0;
undefined4 null_FFFF0000h_800a5fb4;
undefined4 null_FFFF0000h_800a5fbc;
undefined *PTR_Callback_800728e8_800a5fc8;
undefined4 null_FFFF0000h_800a5fc4;
undefined *PTR_Callback_80072fc4_800a5fd0;
undefined *PTR_Callback_800727ec_800a5fd8;
undefined *PTR_Callback_80072ce8_800a5fe0;
undefined4 null_FFFF0000h_800a5fcc;
undefined4 null_FFFF0000h_800a5fd4;
undefined4 null_FFFF0000h_800a5fdc;
undefined EntityInitCallback_80071a30;
undefined EntityInitCallback_800726c8;
undefined *PTR_Callback_800727b4_800a5fe8;
undefined FUN_800717a0;
undefined4 null_FFFF0000h_800a5fe4;
undefined EntityInitCallback_80071ad4;
undefined EntityInitCallback_800716f0;
undefined EntityInitCallback_80072ba0;
undefined *PTR_Callback_80072cac_800a5ff0;
undefined4 null_FFFF0000h_800a5fec;
undefined DAT_80011d54;
undefined EntityInitCallback_80070804;
undefined EntityInitCallback_80070850;
undefined EntityInitCallback_8007174c;
undefined EntityInitCallback_80072054;
undefined EntityInitCallback_800730f8;
undefined DAT_80011dd4;
undefined LAB_800734fc;
undefined4 null_FFFF0000h_800a5ffc;
undefined *PTR_LAB_800a6000;
undefined DAT_80011db4;
undefined LAB_80073a88;
undefined LAB_80073b88;
undefined DAT_8009cadc;
undefined *PTR_LAB_800a6010;
undefined4 null_FFFF0000h_800a600c;
undefined *PTR_LAB_800a6020;
undefined DAT_80011e14;
undefined LAB_800742c8;
undefined LAB_80074a40;
undefined4 null_FFFF0000h_800a601c;
undefined DAT_8009caec;
undefined *PTR_LAB_800a6038;
undefined4 null_FFFF0000h_800a6034;
undefined DAT_8001208c;
undefined DAT_8009cbe8;
undefined DAT_80011ed4;
undefined DAT_80012034;
undefined2 null_00B2h_8009cb4c;
undefined2 null_0076h_8009cb4e;
undefined DAT_80011e94;
undefined LAB_80077940;
undefined1 null_00h_800a6045;
undefined *PTR_LAB_800a6054;
undefined DAT_80011eb4;
undefined DAT_80011fdc;
undefined DAT_800120ac;
undefined LAB_8007683c;
undefined4 null_28A0C119h_8009cc08;
undefined DAT_8009cbdc;
undefined DAT_8009cbf8;
undefined4 null_FFFF0000h_800a6050;
undefined2 null_002Ch_8009cb0c;
undefined2 null_0063h_8009cb0e;
undefined1 null_62h_8009cb10;
undefined DAT_8009cb00;
undefined DAT_800a6041;
undefined DAT_80011f2c;
undefined1 null_00h_800a6042;
undefined DAT_80011f84;
undefined DAT_8009cb24;
undefined DAT_8009cb38;
undefined DAT_800a6048;
undefined1 null_02h_800a607e;
undefined1 null_04h_800a607f;
undefined DAT_8009cbac;
undefined DAT_8009cbad;
undefined DAT_8009cbae;
undefined DAT_80011e54;
undefined DAT_80011e74;
undefined LAB_8007811c;
undefined LAB_800798b0;
undefined2 null_00C0h_8009cb7c;
undefined LAB_80079a08;
undefined2 null_0046h_8009cb7e;
undefined DAT_800a603c;
undefined LAB_80079c24;
undefined FUN_8007963c;
undefined DAT_800a6058;
undefined4 g_pLevelDataContext;
undefined4 g_pSecondarySpriteBank;
undefined4 null_00000000h_8009d1fc;
undefined2 null_0000h_8009d200;
undefined1 null_00h_800a6088;
undefined2 null_0000h_8009d202;
undefined2 null_0000h_8009d20c;
undefined4 null_00000000h_8009d21c;
undefined4 null_00000000h_8009d220;
undefined4 null_00000000h_8009d224;
undefined2 null_0000h_8009d228;
undefined2 null_0000h_8009d22a;
undefined2 null_0000h_8009d22c;
undefined2 null_0000h_8009d22e;
undefined2 null_0000h_8009d230;
undefined DAT_8009cc64;
undefined1 null_00h_800a6082;
undefined DAT_8009cc68;
undefined DAT_8009cc6a;
undefined DAT_8009cfa8;
undefined DAT_8009cfac;
undefined DAT_8009cfb0;
undefined4 g_SoundTable;
undefined4 g_SoundTableCount;
undefined1 g_SPUUploadBlockCount;
undefined1 null_00h_8009cc2f;
string s__8009d0fc;
undefined1 null_00h_8009cc18;
undefined4 null_00000000h_8009d1f8;
undefined1 null_00h_800a6087;
undefined4 null_00000000h_8009d214;
undefined DAT_8009cfd8;
undefined1 g_CDStreamEnabled;
undefined DAT_8009cfd9;
undefined2 null_0000h_8009cc30;
undefined4 g_FrameCounter;
undefined DAT_80012100;
undefined DAT_8009d5f8;
undefined GameStateCollisionCallback;
undefined LAB_80020f48;
undefined DAT_800a608c;
undefined DAT_800a6094;
undefined DAT_800a609c;
undefined4 g_MenuDemoRotationCounter;
pointer g_pPlayer1Input;
undefined DAT_8009d9c0;
undefined DAT_8009d9c1;
undefined DAT_8009d9c2;
undefined DAT_8009dab4;
undefined2 null_4000h_8009dae0;
undefined2 g_LevelCount;
undefined2 g_MovieCount;
undefined1 g_TotalMenuItems;
undefined4 g_LevelNameTable;
undefined *g_MenuItemNames;
pointer g_pPlayer2Input;
undefined2 g_GameStateBase;
undefined4 g_pCurrentInputState;
undefined DAT_800a60a8;
undefined2 g_DebugMenuScrollTop;
undefined2 g_DebugMenuCursor;
undefined LAB_000000a0;
undefined4 null_??_800ae3d8;
undefined4 null_??_800ae3dc;
undefined def_cbsync;
undefined def_cbready;
undefined def_cbread;
undefined SUB_000000b0;
undefined1 null_00h_8009df28;
undefined1 null_00h_8009df38;
undefined1 null_00h_8009df39;
undefined1 null_02h_8009df34;
undefined4 null_00000000h_8009df24;
undefined4 null_00000000h_8009df18;
undefined4 null_00000000h_8009df1c;
undefined DAT_8009de90;
undefined *PTR_CDROM_REG0_8009e1e0;
undefined *PTR_CDROM_REG3_8009e1ec;
undefined1 null_??_800a6178;
undefined *PTR_CDROM_REG1_8009e1e4;
undefined *PTR_CDROM_REG2_8009e1e8;
undefined *PTR_s_CdlSync_8009df40;
undefined DAT_8009dfe0;
undefined DAT_8009e0e0;
undefined4 null_00000000h_8009df2c;
undefined4 null_00000000h_8009df30;
undefined1 null_00h_8009e1f8;
undefined1 null_00h_8009e1f9;
undefined1 null_00h_8009e1fa;
undefined1 null_??_800a6168;
undefined1 null_??_800a6170;
undefined4 null_??_800a6180;
undefined4 null_??_800a6184;
undefined *PTR_s_NoIntr_8009dfc0;
undefined4 null_??_800a6188;
undefined DAT_8009e060;
undefined DAT_8009e160;
undefined *PTR_COMMON_DELAY_8009e1f0;
undefined *PTR_VOICE_00_LEFT_RIGHT_8009e1f4;
undefined callback;
undefined *PTR_null_00h_8009e1f8_8009e1fc;
undefined *PTR_DMA_CDROM_CHCR_8009e224;
undefined *PTR_CDROM_DELAY_8009e214;
undefined *PTR_DMA_DPCR_8009e218;
undefined *PTR_DMA_CDROM_MADR_8009e21c;
undefined *PTR_DMA_CDROM_BCR_8009e220;
undefined4 null_00000000h_8009e1c4;
undefined4 null_??_800a6190;
undefined4 null_FFFFFFFFh_8009e22c;
undefined2 null_??_800a6198;
undefined4 null_??_800a6798;
undefined4 null_??_800a7d90;
undefined4 null_00000000h_8009e228;
undefined DAT_800a679c;
undefined4 null_??_800a7e1c;
undefined DAT_800a8590;
undefined4 null_??_800a6790;
undefined4 null_??_800a6794;
undefined DAT_800a676c;
undefined4 null_??_800a7d94;
undefined4 null_??_800a7d98;
undefined4 null_??_800a7d9c;
undefined4 null_??_800a6194;
undefined4 null_00000000h_8009e254;
undefined4 null_00000000h_8009e258;
undefined4 null_00000000h_8009e25c;
undefined4 null_00000000h_8009e260;
undefined4 null_00000000h_8009e264;
undefined4 null_00000000h_8009e268;
undefined cb_data;
undefined4 null_00000000h_8009e230;
undefined4 null_00000000h_8009e23c;
undefined4 null_00000000h_8009e244;
undefined4 null_00000000h_8009e248;
undefined4 null_00000000h_8009e24c;
undefined4 null_00000000h_8009e250;
undefined cb_read;
undefined4 null_00000000h_8009e234;
undefined4 null_00000000h_8009e238;
undefined4 null_00000000h_8009e240;
undefined data_ready_callback;
undefined StCdInterrupt2;
undefined4 null_??_800acb6c;
undefined4 null_??_800a8594;
undefined4 null_??_800a85c8;
undefined4 null_??_800a85cc;
undefined4 null_??_800a85a8;
undefined4 null_??_800ae3bc;
undefined4 null_??_800ae3c4;
undefined4 null_??_800acba4;
undefined4 null_??_800acb60;
undefined2 null_??_800acb64;
undefined4 null_??_800ae3b8;
undefined4 null_00000000h_8009df3c;
undefined *PTR_CDROM_REG0_8009e27c;
undefined *PTR_CDROM_REG3_8009e288;
undefined4 null_??_800acb70;
undefined4 null_??_800a85e8;
undefined4 null_??_800a85ec;
undefined4 null_??_800acb74;
undefined4 null_??_800ae3c8;
undefined4 null_??_800acb94;
undefined4 null_??_800acb9c;
undefined4 null_??_800acb68;
undefined4 null_??_800ae3cc;
undefined4 null_??_800ae3d0;
undefined4 null_??_800acb98;
undefined *PTR_DMA_MDEC_OUT_CHCR_8009e30c;
undefined *PTR_CDROM_REG0_8009e2ec;
undefined *PTR_CDROM_REG3_8009e2f8;
undefined *PTR_CDROM_DELAY_8009e2fc;
undefined *PTR_COMMON_DELAY_8009e300;
undefined *PTR_CDROM_REG2_8009e2f4;
undefined *PTR_DMA_CDROM_CHCR_8009e31c;
undefined4 null_??_800acbb0;
undefined4 null_??_800ae3d4;
undefined4 null_00000000h_8009e334;
undefined4 null_??_800a85f0;
undefined *PTR_DMA_DICR_8009e308;
undefined *PTR_DMA_DPCR_8009e304;
dword DMA_MDEC_IN_MADR;
dword DMA_MDEC_IN_BCR;
dword DMA_MDEC_IN_CHCR;
undefined4 null_??_800acba8;
undefined4 null_??_800acbac;
undefined4 null_??_800a85f8;
undefined4 null_??_800acba0;
undefined4 null_00000000h_8009e33c;
undefined4 null_??_800a8600;
undefined _Pad1;
undefined4 null_??_800a8604;
undefined4 null_??_800a8608;
undefined4 null_??_800a860c;
undefined _IsVSync;
undefined *PTR_JOY_MCD_DATA_8009e340;
undefined *PTR_I_STAT_8009e344;
undefined LAB_000000c0;
undefined4 null_??_800a612c;
undefined4 null_??_800a6130;
undefined4 null_??_800a6124;
undefined4 null_??_800a6138;
undefined4 SENDPAD_OBJ_A4;
undefined SENDPAD_OBJ_B4;
undefined4 null_??_800a6134;
undefined4 null_??_800a6144;
undefined *PTR_GPU_REG1_8009e350;
undefined *PTR_TMR_HRETRACE_VAL_8009e354;
undefined4 null_00000000h_8009f474;
undefined4 null_00000000h_8009e358;
undefined4 null_00000000h_8009e35c;
undefined *PTR_PTR_8009f440;
undefined2 null_0000h_8009e3ba;
undefined *PTR_I_MASK_8009f448;
undefined4 null_00000000h_8009e3f4;
undefined *PTR_I_STAT_8009f444;
undefined *PTR_DMA_DPCR_8009f44c;
undefined DAT_8009e3f0;
undefined DAT_8009f3d0;
undefined2 null_0000h_8009e3b8;
undefined4 null_00000000h_8009f450;
undefined4 null_00000000h_8009e3bc;
undefined2 null_0000h_8009e3e8;
undefined2 null_0000h_8009e3ea;
undefined4 null_00000000h_8009e3ec;
undefined *PTR_TMR_HRETRACE_MODE_8009f478;
undefined4 null_00000000h_8009f454;
undefined trapIntrVSync;
undefined setIntrVSync;
undefined *PTR_DMA_DICR_8009f47c;
undefined trapIntrDMA;
undefined4 null_00000000h_8009f480;
undefined setIntrDMA;
undefined *PTR_DMA_MDEC_IN_MADR_8009f4a0;
undefined4 null_00000000h_8009f4a4;
undefined *PTR_printf_800a0084;
undefined4 null_00000000h_8009f628;
undefined4 null_00000000h_8009f62c;
undefined FntPrint;
undefined DAT_8009f4a8;
undefined DAT_8009f630;
undefined DAT_8009f830;
undefined2 null_??_800aca10;
undefined2 null_??_800aca14;
undefined DAT_8009f4ac;
undefined DAT_8009f4ad;
undefined DAT_8009f4ae;
undefined DAT_8009f4b0;
undefined DAT_8009f4b2;
undefined DAT_8009f4b4;
undefined DAT_8009f4b6;
undefined DAT_8009f4c4;
undefined DAT_8009f4c8;
undefined DAT_8009f4cc;
undefined DAT_8009f4d0;
undefined DAT_8009f4d4;
undefined1 null_??_800a8610;
undefined DAT_800a8a10;
undefined4 null_00000000h_800a0030;
undefined DAT_8009f4af;
undefined *PTR_s_0123456789ABCDEF_800a0034;
undefined *PTR_PTR_800a0080;
undefined2 null_0000h_800a008c;
undefined2 null_0000h_800a008e;
pointer PTR_s_$Id:_sys.c,v_1.129_1996/12/25_03_800a0040;
undefined DAT_800a0108;
undefined4 null_00000000h_800a0098;
undefined DAT_800a011c;
undefined1 null_00h_800a0088;
undefined1 null_00h_800a0089;
undefined2 null_0000h_800a00f4;
undefined1 null_00h_800a008a;
undefined1 null_00h_800a008b;
undefined4 null_00000000h_800a0094;
undefined DAT_80012f6c;
undefined DAT_800a0130;
undefined4 null_00000000h_800a0138;
undefined4 null_00000000h_800a013c;
undefined4 null_00000000h_800a0140;
undefined2 null_0000h_800a00f6;
undefined2 null_0000h_800a00f8;
undefined2 null_0000h_800a00fa;
undefined2 null_0000h_800a00fc;
undefined2 null_0000h_800a00fe;
undefined2 null_0000h_800a0100;
undefined2 null_0000h_800a0102;
undefined4 null_00000000h_800a0104;
undefined *PTR_GPU_REG1_800a015c;
undefined *PTR_DMA_DPCR_800a0178;
undefined *PTR_DMA_OTC_CHCR_800a0174;
undefined *PTR_DMA_OTC_MADR_800a016c;
undefined *PTR_DMA_OTC_BCR_800a0170;
undefined4 null_??_800aca18;
undefined4 null_??_800aca1c;
undefined4 null_??_800aca20;
undefined4 null_??_800aca24;
undefined4 null_??_800aca28;
undefined4 null_??_800aca2c;
undefined4 null_??_800aca30;
undefined4 null_??_800aca34;
undefined4 null_??_800aca38;
undefined4 null_??_800aca3c;
undefined4 null_??_800aca40;
undefined4 null_??_800aca44;
undefined4 null_??_800aca48;
undefined *PTR_GPU_REG0_800a0158;
undefined *PTR_DMA_GPU_MADR_800a0160;
undefined *PTR_DMA_GPU_BCR_800a0164;
undefined *PTR_DMA_GPU_CHCR_800a0168;
undefined DAT_800aca5c;
undefined4 null_00000000h_800a0194;
undefined DAT_800acbb8;
undefined4 null_00000000h_800a0090;
undefined DAT_800acbbc;
undefined DAT_800acbc0;
undefined DAT_800acbc4;
undefined _exeque;
undefined4 null_00000000h_800a017c;
undefined4 null_00000000h_800a0180;
undefined4 null_00000000h_800a0184;
undefined4 null_00000000h_800a018c;
undefined4 null_00000000h_800a0190;
undefined4 null_00000000h_800a0198;
undefined4 null_00000000h_800a019c;
undefined4 null_00000000h_800a01a0;
undefined4 null_00000000h_800a01a4;
undefined4 null_000001FFh_800a01a8;
undefined4 null_000001FFh_800a01c0;
uint null;
undefined4 null_00000000h_800a01f0;
undefined DAT_800a0200;
undefined4 PATCHGTE_OBJ_68;
undefined DecDCTReset;
undefined4 null_??_800a6154;
undefined4 null_13101002h_800a4204;
undefined4 null_13101002h_800a4244;
undefined4 null_5A825A82h_800a4288;
undefined DAT_800a4200;
undefined DAT_800a4284;
undefined *PTR_MDEC_REG1_800a4344;
undefined *PTR_DMA_MDEC_IN_CHCR_800a4318;
undefined *PTR_DMA_MDEC_OUT_CHCR_800a4324;
undefined *PTR_DMA_DPCR_800a4348;
undefined *PTR_DMA_MDEC_IN_MADR_800a4310;
undefined *PTR_DMA_MDEC_IN_BCR_800a4314;
undefined *PTR_MDEC_REG0_800a4340;
undefined *PTR_DMA_MDEC_OUT_MADR_800a431c;
undefined *PTR_DMA_MDEC_OUT_BCR_800a4320;
undefined4 VLC_C_OBJ_0;
undefined4 null_00000000h_8008e538;
undefined4 null_00000000h_8008e53c;
undefined4 null_00000000h_8008e540;
undefined4 null_00000000h_8008e544;
undefined4 null_00000000h_8008e548;
undefined4 null_00000000h_8008e54c;
undefined4 VLC_C_OBJ_370;
undefined4 null_00000000h_8008e530;
undefined4 null_00000000h_8008e534;
undefined1 null_07h_800a434c;
pointer PTR_FUN_800907d0;
undefined DAT_800ae3e4;
undefined4 null_00200000h_800a60b0;
undefined4 null_00000000h_800a515c;
undefined4 null_00004000h_800a60b4;
undefined4 null_00000000h_800a5160;
undefined4 null_00000000h_800a5164;
undefined4 null_??_800a6164;
dword g_BLBHeaderBase;
undefined *PTR_FUN_800907e0;
undefined4 null_00000000h_800a51ac;
undefined4 null_00000000h_800a51b0;
undefined4 null_00000000h_800a51b4;
undefined4 null_00000000h_800a51b8;
undefined2 null_C000h_800a51ea;
undefined4 null_00000000h_800a55ec;
undefined4 null_00000000h_800a5610;
undefined4 null_00000000h_800a5650;
undefined4 null_00000000h_800a518c;
undefined4 null_00000000h_800a5654;
undefined4 null_00000000h_800a5190;
undefined4 null_00000000h_800a5658;
undefined4 null_00000000h_800a5194;
undefined4 null_0000FFFEh_800a565c;
undefined4 null_00000000h_800a5198;
undefined4 null_00000000h_800a519c;
undefined4 null_00000000h_800a51a4;
undefined2 null_0000h_800a51a8;
undefined2 null_0000h_800a51aa;
undefined _spu_FiDMA;
undefined4 null_00000000h_800a5188;
undefined4 null_00000000h_800a55f0;
undefined *PTR_DMA_DPCR_800a5604;
undefined *PTR_VOICE_00_LEFT_RIGHT_800a55f4;
undefined2 null_??_800acb80;
undefined DAT_800a5634;
undefined2 null_0000h_800a560c;
undefined4 null_00000000h_800a5614;
undefined4 null_00000002h_800a5618;
undefined4 null_00000003h_800a561c;
undefined4 null_00000008h_800a5620;
undefined4 null_00000007h_800a5624;
undefined4 null_00000001h_800a5628;
undefined4 null_00000000h_800a562c;
undefined4 null_00000000h_800a5630;
undefined4 null_00000000h_800a5644;
undefined *PTR_DMA_SPU_MADR_800a55f8;
undefined *PTR_DMA_SPU_BCR_800a55fc;
undefined *PTR_DMA_SPU_CHCR_800a5600;
undefined4 null_00000000h_800a5648;
undefined4 null_00000000h_800a564c;
undefined *PTR_SPU_DELAY_800a5608;
undefined2 null_??_800acb82;
undefined2 null_??_800acb84;
undefined2 null_??_800acb86;
undefined2 null_C000h_800a51bc;

// WARNING: Instruction at (ram,0x8001004c) overlaps instruction at (ram,0x80010048)
// 

void memset(undefined4 *param_1,int param_2,undefined1 param_3)

{
  undefined4 uVar1;
  
  uVar1 = CONCAT22(CONCAT11(param_3,param_3),CONCAT11(param_3,param_3));
  for (param_2 = param_2 + -0x10; -1 < param_2; param_2 = param_2 + -0x10) {
    *param_1 = uVar1;
    param_1[1] = uVar1;
    param_1[2] = uVar1;
    param_1[3] = uVar1;
    param_1 = param_1 + 4;
  }
  param_2 = param_2 + 0x10;
  *(undefined1 *)param_1 = param_3;
  if (param_2 != 0) {
    while( true ) {
      param_1 = (undefined4 *)((int)param_1 + 1);
      param_2 = param_2 + -1;
      if (param_2 == 0) break;
      *(undefined1 *)param_1 = param_3;
    }
  }
  return;
}



undefined4 DecodeRLESprite(undefined4 param_1,int *param_2,short param_3)

{
  undefined1 *puVar1;
  undefined1 uVar2;
  undefined1 uVar3;
  undefined1 uVar4;
  undefined1 uVar5;
  undefined1 uVar6;
  undefined1 uVar7;
  undefined1 uVar8;
  undefined1 uVar9;
  ushort uVar10;
  int iVar11;
  undefined1 *puVar12;
  undefined1 *puVar13;
  undefined1 *puVar14;
  uint uVar15;
  int iVar16;
  ushort *puVar17;
  int iVar18;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  
  iVar16 = *param_2;
  puVar17 = (ushort *)param_2[3];
  puVar12 = (undefined1 *)param_2[4];
  puVar13 = (undefined1 *)param_2[2];
  iVar18 = param_2[1];
  puVar14 = puVar13;
  null____1f800004 = unaff_s0;
  null____1f800008 = unaff_s1;
  null____1f80000c = unaff_s2;
  null____1f800010 = unaff_s3;
  if ((short)param_2[5] == 0) {
    for (; iVar16 != 0; iVar16 = iVar16 + -1) {
      uVar10 = *puVar17;
      uVar15 = uVar10 & 0xff;
      if ((uVar10 & 0x8000) != 0) {
        param_3 = param_3 + -1;
        if (param_3 == -1) goto LAB_800102e4;
        puVar13 = puVar14 + iVar18;
        puVar14 = puVar13;
      }
      puVar13 = puVar13 + ((uVar10 & 0x7f00) >> 8);
      if ((uVar15 - 1 & 0xffff) != 0xffff) {
        for (iVar11 = uVar15 - 9; -1 < iVar11; iVar11 = iVar11 + -8) {
          uVar2 = *puVar12;
          uVar3 = puVar12[1];
          uVar4 = puVar12[2];
          uVar5 = puVar12[3];
          uVar6 = puVar12[4];
          uVar7 = puVar12[5];
          uVar8 = puVar12[6];
          uVar9 = puVar12[7];
          puVar12 = puVar12 + 8;
          *puVar13 = uVar2;
          puVar13[1] = uVar3;
          puVar13[2] = uVar4;
          puVar13[3] = uVar5;
          puVar13[4] = uVar6;
          puVar13[5] = uVar7;
          puVar13[6] = uVar8;
          puVar13[7] = uVar9;
          puVar13 = puVar13 + 8;
        }
        for (iVar11 = iVar11 + 4; -1 < iVar11; iVar11 = iVar11 + -4) {
          uVar2 = *puVar12;
          uVar3 = puVar12[1];
          uVar4 = puVar12[2];
          uVar5 = puVar12[3];
          puVar12 = puVar12 + 4;
          *puVar13 = uVar2;
          puVar13[1] = uVar3;
          puVar13[2] = uVar4;
          puVar13[3] = uVar5;
          puVar13 = puVar13 + 4;
        }
        iVar11 = iVar11 + 4;
        do {
          uVar2 = *puVar12;
          puVar12 = puVar12 + 1;
          iVar11 = iVar11 + -1;
          *puVar13 = uVar2;
          puVar13 = puVar13 + 1;
        } while (-1 < iVar11);
      }
      puVar17 = puVar17 + 1;
    }
  }
  else {
    for (; iVar16 != 0; iVar16 = iVar16 + -1) {
      uVar10 = *puVar17;
      uVar15 = uVar10 & 0xff;
      if ((uVar10 & 0x8000) != 0) {
        param_3 = param_3 + -1;
        if (param_3 == -1) {
LAB_800102e4:
          if (iVar16 != 0) {
            *param_2 = iVar16;
            param_2[3] = (int)puVar17;
            param_2[4] = (int)puVar12;
            param_2[2] = (int)puVar14;
            return 0;
          }
          return 1;
        }
        puVar13 = puVar14 + iVar18;
        puVar14 = puVar13;
      }
      puVar13 = puVar13 + -((uVar10 & 0x7f00) >> 8);
      if ((uVar15 - 1 & 0xffff) != 0xffff) {
        for (iVar11 = uVar15 - 9; -1 < iVar11; iVar11 = iVar11 + -8) {
          uVar2 = *puVar12;
          uVar3 = puVar12[1];
          uVar4 = puVar12[2];
          uVar5 = puVar12[3];
          uVar6 = puVar12[4];
          uVar7 = puVar12[5];
          uVar8 = puVar12[6];
          puVar1 = puVar12 + 7;
          puVar12 = puVar12 + 8;
          puVar13[-7] = *puVar1;
          puVar13[-6] = uVar8;
          puVar13[-5] = uVar7;
          puVar13[-4] = uVar6;
          puVar13[-3] = uVar5;
          puVar13[-2] = uVar4;
          puVar13[-1] = uVar3;
          *puVar13 = uVar2;
          puVar13 = puVar13 + -8;
        }
        for (iVar11 = iVar11 + 4; -1 < iVar11; iVar11 = iVar11 + -4) {
          uVar2 = *puVar12;
          uVar3 = puVar12[1];
          uVar4 = puVar12[2];
          puVar1 = puVar12 + 3;
          puVar12 = puVar12 + 4;
          puVar13[-3] = *puVar1;
          puVar13[-2] = uVar4;
          puVar13[-1] = uVar3;
          *puVar13 = uVar2;
          puVar13 = puVar13 + -4;
        }
        iVar11 = iVar11 + 4;
        do {
          uVar2 = *puVar12;
          puVar12 = puVar12 + 1;
          iVar11 = iVar11 + -1;
          *puVar13 = uVar2;
          puVar13 = puVar13 + -1;
        } while (-1 < iVar11);
      }
      puVar17 = puVar17 + 1;
    }
  }
  return 1;
}



undefined1 GetFrameReadyFlag(void)

{
  return g_FrameReady;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible S_IH.OBJ/SpuInitHot

void SsUtReverbOn(void)

{
  FUN_80088958(1);
  return;
}



void InitGraphicsSystem(short *param_1)

{
  int iVar1;
  
  iVar1 = GetFrameReadyFlag();
  *(uint *)(param_1 + 0x5328) = iVar1 + 0xfU & 0xfffffff0;
  ResetGraph(0);
  SetGraphDebug(0);
  VSyncCallback((f *)0x800131fc);
  *param_1 = 0x140;
  param_1[1] = 0x100;
  SetDefDrawEnv((DRAWENV *)(param_1 + 2),0,0,(int)*param_1,0x100);
  SetDefDrawEnv((DRAWENV *)(param_1 + 0x2822),0,0x100,(int)*param_1,(int)param_1[1]);
  SetDefDispEnv((DISPENV *)(param_1 + 0x30),0,0x100,(int)*param_1,(int)param_1[1]);
  SetDefDispEnv((DISPENV *)(param_1 + 0x2850),0,0,(int)*param_1,(int)param_1[1]);
  param_1[0x35] = 0x18;
  param_1[0x2855] = 0x18;
  param_1[0x34] = 0;
  param_1[0x2854] = 0;
  param_1[0x36] = 0;
  param_1[0x2856] = 0;
  *(undefined1 *)(param_1 + 0xe) = 1;
  *(undefined1 *)((int)param_1 + 0x1d) = 0;
  *(undefined1 *)(param_1 + 0xf) = 0;
  *(undefined1 *)((int)param_1 + 0x1f) = 0;
  *(undefined1 *)(param_1 + 0x282e) = 1;
  *(undefined1 *)((int)param_1 + 0x505d) = 0;
  *(undefined1 *)(param_1 + 0x282f) = 0;
  *(undefined1 *)((int)param_1 + 0x505f) = 0;
  *(undefined1 *)(param_1 + 0x5044) = 0;
  *(DRAWENV **)(param_1 + 0x5042) = (DRAWENV *)(param_1 + 2);
  param_1[0x37] = param_1[1];
  param_1[0x2857] = param_1[1];
  ClearOTag(*(u_long **)(param_1 + 0x3a),1);
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x1014) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x1658) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x25fc) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x2dd0) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x3734) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x4228) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0x5042) + 0x503c) = 0;
  param_1[0x5045] = 0;
  *(undefined1 *)((int)param_1 + 0xa29d) = 0x10;
  InitVRAMSlotTable(param_1,0,1);
  param_1[0x5184] = 0;
  param_1[0x5185] = 0;
  SwapBuffersAndClearOT(param_1);
  SwapBuffersAndClearOT(param_1);
  return;
}



void ClearOrderingTables(int param_1)

{
  g_FrameReady = 0;
  g_SkipVSync = 1;
  ClearOTag(*(u_long **)(param_1 + 0x74),1);
  ClearOTag(*(u_long **)(param_1 + 0x50b4),1);
  return;
}



// Flush Debug Font And End Frame - Frame Finalization
// 
// Called last in main game loop to flush debug text and signal frame completion.
// 
// OPERATIONS:
// 1. FntFlush(-1) - Flush all queued debug font text to VRAM
// 2. g_FrameReady = 1 - Signal frame complete (for debugger/profiler?)
// 3. g_SkipVSync = 0 - Reset vsync skip flag for next frame
// 
// PARAMETERS:
//   None (uses globals)
// 
// GLOBALS WRITTEN:
//   g_FrameReady: Frame completion flag
//   g_SkipVSync: VSync skip flag (reset to 0)
// 
// DEBUG FONT: The PSY-Q FntPrint system queues text during the frame,
// then FntFlush renders it all to VRAM in one batch at frame end.
// 
// FRAME TIMING: Resetting g_SkipVSync ensures default behavior is to
// wait for vblank unless explicitly set otherwise during the frame.

void FlushDebugFontAndEndFrame(void)

{
  FntFlush(-1);
  g_FrameReady = 1;
  g_SkipVSync = 0;
  return;
}



// Wait For VBlank If Needed - Conditional VSync
// 
// Called in main loop after entity processing to optionally synchronize
// to vertical blank. Can be disabled via g_SkipVSync flag for benchmarking
// or special rendering modes.
// 
// ALGORITHM:
// 1. If g_SkipVSync == 0:
//    - VSync(0) - Wait for next vblank
// 2. Else:
//    - Skip VSync (run as fast as possible)
// 
// PARAMETERS:
//   None (uses global flag)
// 
// GLOBALS:
//   g_SkipVSync: 0 = normal vsync, 1 = skip vsync
// 
// FRAME TIMING: When enabled, locks game to 60 FPS (NTSC) or 50 FPS (PAL).
// When disabled, game runs unlocked for testing or loading screens.
// 
// Set by FlushDebugFontAndEndFrame @ 0x80013500 (resets to 0 each frame).

void WaitForVBlankIfNeeded(void)

{
  if (g_SkipVSync == '\0') {
    VSync(0);
  }
  return;
}



// SwapBuffersAndClearOT - Called twice at end of InitGraphicsSystem and in game loop.
// Performs double-buffer swap:
// 1. Sets g_SkipVSync = 1
// 2. VSync(-1) to get current frame
// 3. PutDispEnv/PutDrawEnv - swap display/draw environments
// 4. DrawOTag - submit primitives
// 5. Toggles buffer index (0  1)
// 6. ClearOTag - clear ordering table for next frame
// 7. Clears various primitive count fields

void SwapBuffersAndClearOT(int param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  
  g_SkipVSync = 1;
  iVar1 = VSync(-1);
  PutDispEnv((DISPENV *)(*(int *)(param_1 + 0xa084) + 0x5c));
  PutDrawEnv(*(DRAWENV **)(param_1 + 0xa084));
  DrawOTag(*(u_long **)(*(int *)(param_1 + 0xa084) + 0x70));
  uVar3 = *(byte *)(param_1 + 0xa088) + 1 & 1;
  iVar2 = param_1 + uVar3 * 0x5040 + 4;
  *(char *)(param_1 + 0xa088) = (char)uVar3;
  *(int *)(param_1 + 0xa084) = iVar2;
  ClearOTag(*(u_long **)(iVar2 + 0x70),1);
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x1014) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x1658) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x25fc) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x2dd0) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x3734) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x4228) = 0;
  *(undefined2 *)(*(int *)(param_1 + 0xa084) + 0x503c) = 0;
  *(int *)(param_1 + 0xa308) = iVar1;
  return;
}



undefined4 FUN_800138f0(short *param_1,short *param_2,char param_3,short param_4,short param_5)

{
  char cVar1;
  ushort uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  short local_28;
  short local_26;
  
  if (param_3 == '\0') {
    uVar2 = (short)(param_4 + 1 >> 2) + 1;
  }
  else if (param_3 == '\x01') {
    uVar2 = (short)(param_4 + 1 >> 1) + 1;
  }
  else {
    uVar2 = param_4 + 1;
  }
  param_2[2] = uVar2 & 0xfffe;
  iVar4 = param_2[2] * 2 + 0xf;
  param_2[3] = param_5;
  if (iVar4 < 0) {
    iVar4 = param_2[2] * 2 + 0x1e;
  }
  uVar3 = (int)param_5 + 0xf;
  if ((int)uVar3 < 0) {
    uVar3 = (int)param_5 + 0x1e;
  }
  uVar6 = iVar4 >> 4 & 0xff;
  uVar5 = uVar3 >> 4 & 0xff;
  cVar1 = FUN_80014a9c(param_1,&local_28,uVar6,uVar5);
  if ((cVar1 == '\0') &&
     (cVar1 = FUN_80014cf8(param_1,&local_28,uVar6,uVar5,param_3), cVar1 == '\0')) {
    uVar5 = FUN_800150c4(param_1);
    uVar7 = (iVar4 >> 4) + 1;
    uVar6 = uVar7 & 0xff;
    cVar1 = '\0';
    if (uVar6 <= (uVar5 & 0xff)) {
      do {
        cVar1 = FUN_80014a9c(param_1,&local_28,uVar6,uVar3 >> 4 & 0xff);
        uVar7 = uVar7 + 1;
        uVar6 = uVar7 & 0xff;
        if ((uVar5 & 0xff) < uVar6) break;
      } while (cVar1 == '\0');
    }
    if (cVar1 == '\0') {
      return 0;
    }
  }
  *param_2 = *param_1 + local_28 * 8;
  param_2[1] = local_26 * 0x10 + 0x100;
  return 1;
}



void FUN_80013ab0(short *param_1,undefined4 param_2,undefined4 param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined2 local_res4;
  undefined2 uStackX_6;
  undefined2 uStackX_a;
  
  uStackX_a = (short)((uint)param_3 >> 0x10);
  uVar2 = (int)uStackX_a + 0xf;
  if ((int)uVar2 < 0) {
    uVar2 = (int)uStackX_a + 0x1e;
  }
  local_res4 = (short)param_2;
  uVar1 = (int)local_res4 - (int)*param_1 >> 3;
  uStackX_6 = (short)((uint)param_2 >> 0x10);
  uVar3 = uVar1 & 0xffff;
  FUN_80015134(param_1,uVar3 | (uStackX_6 + -0x100 >> 4) << 0x10,uVar2 >> 4 & 0xff,uVar3,
               (short)uVar1);
  return;
}



// Initializes VRAM texture page slot table from Asset 101 configuration.
// param_1: blbHeaderBufferBase
// param_2: bank_a_count (from Asset 101 field 0)
// param_3: bank_b_count (from Asset 101 field 1)
// 
// Creates (bank_a_count + bank_b_count) * 3 entries at blbHeaderBufferBase + 0xa2a0.
// Each entry is 8 bytes. Bank A entries start at y=0xF0, Bank B at y=0x1F0.
// Stores slot count at +0xa300 and +0xa302.

void InitVRAMSlotTable(int param_1,ushort param_2,byte param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  int iVar5;
  byte bVar6;
  byte bVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  ushort uVar11;
  
  uVar8 = 0;
  sVar9 = 0xf0;
  sVar10 = (param_2 & 0xff) + (ushort)param_3;
  *(short *)(param_1 + 0xa300) = sVar10 * 0x20;
  *(short *)(param_1 + 0xa302) = sVar10 * 0x10;
  *(undefined2 *)(param_1 + 0xa304) = 0;
  *(undefined2 *)(param_1 + 0xa306) = 0;
  for (uVar11 = 0; bVar6 = 0, (uVar11 & 0xff) < (param_2 & 0xff); uVar11 = uVar11 + 1) {
    do {
      iVar5 = (uVar8 & 0xff) * 8 + param_1;
      uVar1 = (&null_00000007h_8009ae40)[(uint)bVar6 * 2];
      uVar2 = (&null_00000300h_8009ae44)[(uint)bVar6 * 2];
      uVar3 = iVar5 + 0xa2a3U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a3U) - uVar3);
      *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | uVar1 >> (3 - uVar3) * 8;
      uVar3 = iVar5 + 0xa2a0U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a0U) - uVar3);
      *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar3) * 8 | uVar1 << uVar3 * 8;
      uVar1 = iVar5 + 0xa2a7U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a7U) - uVar1);
      *puVar4 = *puVar4 & -1 << (uVar1 + 1) * 8 | uVar2 >> (3 - uVar1) * 8;
      uVar1 = iVar5 + 0xa2a4U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a4U) - uVar1);
      *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar1) * 8 | uVar2 << uVar1 * 8;
      *(short *)(iVar5 + 0xa2a6) = sVar9;
      bVar6 = bVar6 + 1;
      uVar8 = uVar8 + 1;
    } while (bVar6 < 3);
    sVar9 = sVar9 + -0x10;
  }
  sVar10 = 0x1f0;
  for (bVar6 = 0; bVar7 = 0, bVar6 < param_3; bVar6 = bVar6 + 1) {
    do {
      iVar5 = (uVar8 & 0xff) * 8 + param_1;
      uVar1 = (&null_00000007h_8009ae40)[(uint)bVar7 * 2];
      uVar2 = (&null_00000300h_8009ae44)[(uint)bVar7 * 2];
      uVar3 = iVar5 + 0xa2a3U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a3U) - uVar3);
      *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | uVar1 >> (3 - uVar3) * 8;
      uVar3 = iVar5 + 0xa2a0U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a0U) - uVar3);
      *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar3) * 8 | uVar1 << uVar3 * 8;
      uVar1 = iVar5 + 0xa2a7U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a7U) - uVar1);
      *puVar4 = *puVar4 & -1 << (uVar1 + 1) * 8 | uVar2 >> (3 - uVar1) * 8;
      uVar1 = iVar5 + 0xa2a4U & 3;
      puVar4 = (uint *)((iVar5 + 0xa2a4U) - uVar1);
      *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar1) * 8 | uVar2 << uVar1 * 8;
      *(short *)(iVar5 + 0xa2a6) = sVar10;
      bVar7 = bVar7 + 1;
      uVar8 = uVar8 + 1;
    } while (bVar7 < 3);
    sVar10 = sVar10 + -0x10;
  }
  uVar8 = uVar8 & 0xff;
  if (uVar8 < 0xc) {
    do {
      iVar5 = uVar8 << 0x10;
      uVar8 = uVar8 + 1;
      iVar5 = param_1 + (iVar5 >> 0xd);
      *(undefined1 *)(iVar5 + 0xa2a0) = 0;
      *(undefined2 *)(iVar5 + 0xa2a2) = 0;
    } while ((int)(uVar8 * 0x10000) >> 0x10 < 0xc);
  }
  *(byte *)(param_1 + 0xa29d) = '\x10' - param_3;
  FUN_800149e8(param_1);
  return;
}



undefined4 FUN_80013d10(int param_1,uint param_2,byte param_3)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  char cVar4;
  short sVar5;
  uint uVar6;
  short sVar7;
  short sVar8;
  uint uVar9;
  undefined4 uVar10;
  undefined2 *puVar11;
  byte *pbVar12;
  undefined2 local_30;
  ushort local_2e;
  
  pbVar12 = (byte *)(param_1 + 0xa2a0);
  uVar9 = param_1 + 0xa2a4;
  for (sVar7 = 0; sVar7 < 0xc; sVar7 = sVar7 + 1) {
    if ((((*pbVar12 & 2) != 0) && ((*pbVar12 & 1) == param_3)) &&
       (uVar6 = 1, *(short *)(uVar9 - 2) != -1)) {
      sVar8 = 0;
      do {
        sVar5 = sVar8 + 1;
        if ((*(ushort *)(uVar9 - 2) & uVar6) == 0) {
          uVar6 = *(ushort *)(uVar9 - 2) | uVar6;
          *(short *)(uVar9 - 2) = (short)uVar6;
          uVar1 = uVar9 + 3 & 3;
          uVar2 = uVar9 & 3;
          uVar6 = (*(int *)((uVar9 + 3) - uVar1) << (3 - uVar1) * 8 |
                  uVar6 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar2) * 8 |
                  *(uint *)(uVar9 - uVar2) >> uVar2 * 8;
          uVar9 = param_2 + 3 & 3;
          puVar3 = (uint *)((param_2 + 3) - uVar9);
          *puVar3 = *puVar3 & -1 << (uVar9 + 1) * 8 | uVar6 >> (3 - uVar9) * 8;
          uVar9 = param_2 & 3;
          *(uint *)(param_2 - uVar9) =
               *(uint *)(param_2 - uVar9) & 0xffffffffU >> (4 - uVar9) * 8 | uVar6 << uVar9 * 8;
          *(short *)(param_2 + 2) = *(short *)(param_2 + 2) + sVar8;
          goto joined_r0x80013de4;
        }
        uVar6 = uVar6 << 1;
        sVar8 = sVar5;
      } while (sVar5 < 0x10);
    }
    uVar9 = uVar9 + 8;
    pbVar12 = pbVar12 + 8;
  }
  pbVar12 = (byte *)(param_1 + 0xa2a0);
  sVar7 = 0;
  puVar11 = (undefined2 *)(param_1 + 0xa2a4);
  do {
    if (0xb < sVar7) {
      return 0;
    }
    if ((*pbVar12 & 2) == 0) {
      uVar10 = 0x10;
      if (param_3 == 1) {
        uVar10 = 0x100;
      }
      cVar4 = FUN_800138f0(param_1,&local_30,2,uVar10,0x10);
      if (cVar4 != '\0') {
        *pbVar12 = param_3 | 2;
        puVar11[-1] = 1;
        *puVar11 = local_30;
        puVar11[1] = local_2e;
        uVar9 = (int)puVar11 + 3U & 3;
        uVar6 = (uint)puVar11 & 3;
        uVar6 = (*(int *)(((int)puVar11 + 3U) - uVar9) << (3 - uVar9) * 8 |
                (uint)local_2e & 0xffffffffU >> (uVar9 + 1) * 8) & -1 << (4 - uVar6) * 8 |
                *(uint *)((int)puVar11 - uVar6) >> uVar6 * 8;
        uVar9 = param_2 + 3 & 3;
        puVar3 = (uint *)((param_2 + 3) - uVar9);
        *puVar3 = *puVar3 & -1 << (uVar9 + 1) * 8 | uVar6 >> (3 - uVar9) * 8;
        uVar9 = param_2 & 3;
        *(uint *)(param_2 - uVar9) =
             *(uint *)(param_2 - uVar9) & 0xffffffffU >> (4 - uVar9) * 8 | uVar6 << uVar9 * 8;
joined_r0x80013de4:
        if (param_3 == 1) {
          *(short *)(param_1 + 0xa304) = *(short *)(param_1 + 0xa304) + 1;
        }
        else {
          *(short *)(param_1 + 0xa306) = *(short *)(param_1 + 0xa306) + 1;
        }
        return 1;
      }
    }
    puVar11 = puVar11 + 4;
    pbVar12 = pbVar12 + 8;
    sVar7 = sVar7 + 1;
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x800140c4)

void FUN_80013f50(short *param_1,short *param_2)

{
  undefined1 *puVar1;
  short sVar2;
  uint uVar3;
  undefined2 uVar4;
  int iVar5;
  short *psVar6;
  short sVar7;
  byte *pbVar8;
  undefined4 local_30;
  undefined4 local_2c;
  undefined1 local_24 [4];
  undefined1 auStack_20 [8];
  undefined2 local_18;
  undefined2 local_16;
  
  pbVar8 = (byte *)(param_1 + 0x5150);
  sVar7 = 0;
  psVar6 = param_1 + 0x5153;
  do {
    if (0xb < sVar7) {
      return;
    }
    if (((*pbVar8 & 2) != 0) && (psVar6[-1] == *param_2)) {
      if ((int)*psVar6 == (int)(short)(param_2[1] & 0xfff0)) {
        uVar3 = 1 << ((int)param_2[1] - (int)*psVar6 & 0x1fU);
        if (((ushort)psVar6[-2] & uVar3) != 0) {
          if ((*pbVar8 & 1) == 0) {
            param_1[0x5183] = param_1[0x5183] + -1;
          }
          else {
            param_1[0x5182] = param_1[0x5182] + -1;
          }
        }
        uVar3 = (uint)(ushort)psVar6[-2] & ~uVar3;
        psVar6[-2] = (short)uVar3;
        if ((uVar3 == 0) && ((*pbVar8 & 4) == 0)) {
          uVar4 = 0x10;
          if ((*pbVar8 & 1) != 0) {
            uVar4 = 0x100;
          }
          sVar7 = psVar6[-1];
          sVar2 = *psVar6;
          local_2c = CONCAT22(0x10,uVar4);
          local_30 = CONCAT22(sVar2,sVar7);
          puVar1 = local_24 + 3;
          uVar3 = (uint)puVar1 & 3;
          *(uint *)(puVar1 + -uVar3) =
               *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | local_30 >> (3 - uVar3) * 8;
          local_24 = (undefined1  [4])local_30;
          puVar1 = auStack_20 + 3;
          uVar3 = (uint)puVar1 & 3;
          *(uint *)(puVar1 + -uVar3) =
               *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | local_2c >> (3 - uVar3) * 8;
          auStack_20._0_4_ = local_2c;
          uVar3 = (int)sVar7 - (int)*param_1 >> 3;
          iVar5 = sVar2 + -0x100 >> 4;
          local_16 = (undefined2)iVar5;
          local_18 = (undefined2)uVar3;
          FUN_80015134(param_1,uVar3 & 0xffff | iVar5 << 0x10,1);
          *pbVar8 = 0;
          return;
        }
      }
    }
    psVar6 = psVar6 + 4;
    pbVar8 = pbVar8 + 8;
    sVar7 = sVar7 + 1;
  } while( true );
}



int FUN_80014278(short *param_1,short *param_2,char param_3)

{
  short sVar1;
  bool bVar2;
  uint uVar3;
  short sVar4;
  uint uVar5;
  ushort uVar6;
  uint uVar7;
  
  sVar1 = param_1[0x5045];
  uVar3 = (int)sVar1 / 0xb0;
  uVar7 = (int)sVar1 % 0xb0;
  uVar6 = (ushort)uVar7;
  if (param_3 == '\x01') {
    bVar2 = (uVar7 & 0xff) < 0xaf;
  }
  else {
    uVar5 = uVar3 & 0xff;
    if (param_3 != '\x02') goto LAB_80014320;
    bVar2 = (uVar7 & 0xff) < 0xad;
  }
  uVar5 = uVar3 & 0xff;
  if (!bVar2) {
    param_1[0x5045] = sVar1 - ((uVar6 & 0xff) - 0xb0);
    uVar6 = 0;
    uVar5 = uVar3 + 1 & 0xff;
  }
LAB_80014320:
  sVar4 = *param_1;
  param_2[1] = (short)(uVar5 << 4);
  *param_2 = sVar4 + (uVar6 & 0xff) * 4;
  if (param_3 == '\0') {
    sVar4 = param_1[0x5045] + 1;
  }
  else if (param_3 == '\x01') {
    sVar4 = param_1[0x5045] + 2;
  }
  else {
    sVar4 = param_1[0x5045] + 4;
  }
  param_1[0x5045] = sVar4;
  return (int)sVar1;
}



void FUN_800143a4(int param_1,undefined4 param_2,uint param_3)

{
  *(undefined4 *)(param_1 + 0xa640) = param_2;
  if (param_3 >> 4 < 0x10000) {
    *(uint *)(param_1 + 0xa644) = param_3;
  }
  else {
    *(undefined4 *)(param_1 + 0xa644) = 0xffff0;
  }
  return;
}



// Heap allocator - allocates (param_2 * param_3 + 0x13) >> 4 blocks from free list at base+0xa648.
// If param_4=0, writes block count to start. Returns pointer+4 (data area).

int AllocateFromHeap(int param_1,int param_2,int param_3,char param_4)

{
  ushort uVar1;
  undefined2 uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  
  uVar1 = *(ushort *)(param_1 + 0xa648);
  uVar4 = param_2 * param_3 + 0x13U >> 4;
  uVar7 = 0xffff;
  while( true ) {
    uVar6 = (uint)uVar1;
    if (uVar6 == 0xffff) {
      return 0;
    }
    iVar5 = param_1 + uVar6 * 8;
    if (uVar4 <= *(ushort *)(iVar5 + 0xa324)) break;
    uVar1 = *(ushort *)(iVar5 + 0xa326);
    uVar7 = uVar6;
  }
  if (param_4 == '\0') {
    **(uint **)(iVar5 + 0xa320) = uVar4;
  }
  iVar3 = *(int *)(iVar5 + 0xa320);
  *(uint *)(iVar5 + 0xa320) = iVar3 + uVar4 * 0x10;
  *(short *)(iVar5 + 0xa324) = *(short *)(iVar5 + 0xa324) - (short)uVar4;
  uVar4 = *(ushort *)(param_1 + 0xa64c) - uVar4;
  uVar2 = (undefined2)uVar4;
  *(undefined2 *)(param_1 + 0xa64c) = uVar2;
  iVar3 = iVar3 + 4;
  if ((uVar4 & 0xffff) < (uint)*(ushort *)(param_1 + 0xa64e)) {
    *(undefined2 *)(param_1 + 0xa64e) = uVar2;
  }
  if (*(short *)(iVar5 + 0xa324) != 0) {
    return iVar3;
  }
  if (uVar7 == 0xffff) {
    *(undefined2 *)(param_1 + 0xa648) = *(undefined2 *)(iVar5 + 0xa326);
  }
  else {
    *(undefined2 *)(param_1 + uVar7 * 8 + 0xa326) = *(undefined2 *)(iVar5 + 0xa326);
  }
  *(undefined2 *)(param_1 + uVar6 * 8 + 0xa326) = *(undefined2 *)(param_1 + 0xa64a);
  *(ushort *)(param_1 + 0xa64a) = uVar1;
  return iVar3;
}



void FreeFromHeap(int param_1,int param_2,int param_3,char param_4)

{
  ushort uVar1;
  undefined4 *puVar2;
  short sVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  
  puVar10 = (undefined4 *)(param_2 + -4);
  if (param_4 == '\0') {
    uVar4 = (uint)*(ushort *)(param_2 + -4);
  }
  else {
    uVar4 = param_3 + 0x13U >> 4;
  }
  puVar9 = puVar10 + (uVar4 & 0xffff) * 4;
  *puVar10 = 0;
  uVar1 = *(ushort *)(param_1 + 0xa648);
  uVar7 = 0xffff;
  while( true ) {
    uVar8 = (uint)uVar1;
    sVar3 = (short)uVar4;
    if (uVar8 == 0xffff) break;
    iVar6 = param_1 + uVar8 * 8;
    puVar2 = *(undefined4 **)(iVar6 + 0xa320);
    if (puVar9 < puVar2) break;
    if (puVar10 == puVar2 + (uint)*(ushort *)(iVar6 + 0xa324) * 4) {
      *(ushort *)(iVar6 + 0xa324) = *(ushort *)(iVar6 + 0xa324) + sVar3;
      *(short *)(param_1 + 0xa64c) = *(short *)(param_1 + 0xa64c) + sVar3;
      uVar1 = *(ushort *)(iVar6 + 0xa326);
      if (uVar1 == 0xffff) {
        return;
      }
      iVar5 = param_1 + (uint)uVar1 * 8;
      if (puVar9 != *(undefined4 **)(iVar5 + 0xa320)) {
        return;
      }
      *(short *)(iVar6 + 0xa324) = *(short *)(iVar6 + 0xa324) + *(short *)(iVar5 + 0xa324);
      *(undefined2 *)(iVar6 + 0xa326) = *(undefined2 *)(iVar5 + 0xa326);
      *(undefined2 *)(iVar5 + 0xa326) = *(undefined2 *)(param_1 + 0xa64a);
      *(ushort *)(param_1 + 0xa64a) = uVar1;
      return;
    }
    if (puVar9 == puVar2) {
      *(undefined4 **)(iVar6 + 0xa320) = puVar10;
      *(short *)(iVar6 + 0xa324) = *(short *)(iVar6 + 0xa324) + sVar3;
      *(short *)(param_1 + 0xa64c) = *(short *)(param_1 + 0xa64c) + sVar3;
      return;
    }
    uVar1 = *(ushort *)(iVar6 + 0xa326);
    uVar7 = uVar8;
  }
  uVar1 = *(ushort *)(param_1 + 0xa64a);
  if (uVar1 != 0xffff) {
    iVar6 = param_1 + (uint)uVar1 * 8;
    *(undefined2 *)(param_1 + 0xa64a) = *(undefined2 *)(iVar6 + 0xa326);
    *(undefined4 **)(iVar6 + 0xa320) = puVar10;
    *(short *)(iVar6 + 0xa324) = sVar3;
    *(short *)(param_1 + 0xa64c) = *(short *)(param_1 + 0xa64c) + sVar3;
    if (uVar7 == 0xffff) {
      *(undefined2 *)(iVar6 + 0xa326) = *(undefined2 *)(param_1 + 0xa648);
      *(ushort *)(param_1 + 0xa648) = uVar1;
    }
    else {
      param_1 = param_1 + uVar7 * 8;
      *(undefined2 *)(iVar6 + 0xa326) = *(undefined2 *)(param_1 + 0xa326);
      *(ushort *)(param_1 + 0xa326) = uVar1;
    }
  }
  return;
}



void FUN_80014854(int param_1)

{
  uint uVar1;
  undefined2 uVar2;
  ushort uVar3;
  
  uVar3 = 1;
  *(undefined2 *)(param_1 + 0xa326) = 0xffff;
  uVar2 = (undefined2)(*(uint *)(param_1 + 0xa644) >> 4);
  *(undefined2 *)(param_1 + 0xa64c) = uVar2;
  *(undefined2 *)(param_1 + 0xa648) = 0;
  *(undefined2 *)(param_1 + 0xa64a) = 1;
  *(undefined2 *)(param_1 + 0xa64e) = uVar2;
  *(undefined4 *)(param_1 + 0xa320) = *(undefined4 *)(param_1 + 0xa640);
  *(undefined2 *)(param_1 + 0xa324) = *(undefined2 *)(param_1 + 0xa64c);
  uVar1 = 1;
  do {
    uVar3 = uVar3 + 1;
    *(ushort *)(param_1 + uVar1 * 8 + 0xa326) = uVar3;
    uVar1 = (uint)uVar3;
  } while (uVar3 < 99);
  *(undefined2 *)(param_1 + 0xa63e) = 0xffff;
  return;
}



void FUN_80014968(int param_1,undefined4 param_2)

{
  ushort uVar1;
  int iVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  uint uVar5;
  
  uVar1 = *(ushort *)(param_1 + 0xa648);
  while( true ) {
    uVar5 = (uint)uVar1;
    if (uVar5 == 0xffff) break;
    iVar2 = param_1 + uVar5 * 8;
    puVar4 = *(undefined4 **)(iVar2 + 0xa320);
    puVar3 = puVar4 + (uint)*(ushort *)(iVar2 + 0xa324) * 4;
    for (; puVar4 != puVar3; puVar4 = puVar4 + 1) {
      *puVar4 = param_2;
    }
    uVar1 = *(ushort *)(param_1 + uVar5 * 8 + 0xa326);
  }
  return;
}



void FUN_800149e8(int param_1)

{
  undefined1 uVar1;
  int iVar2;
  uint uVar3;
  byte bVar4;
  
  bVar4 = 0;
  do {
    uVar3 = (uint)bVar4;
    bVar4 = bVar4 + 1;
    uVar1 = *(undefined1 *)(param_1 + 0xa29d);
    iVar2 = param_1 + uVar3 * 6;
    *(undefined1 *)(iVar2 + 0xa08f) = 0xfe;
    *(undefined1 *)(iVar2 + 0xa090) = 0xfe;
    *(undefined2 *)(iVar2 + 0xa08c) = 0;
    *(undefined1 *)(iVar2 + 0xa08e) = uVar1;
  } while (bVar4 < 0x58);
  *(undefined1 *)(param_1 + 0xa08f) = 0xff;
  *(undefined1 *)(param_1 + 0xa090) = 0x58;
  *(undefined2 *)(param_1 + 0xa08c) = 0;
  *(undefined1 *)(param_1 + 0xa29c) = 0;
  *(undefined1 *)(param_1 + 0xa29e) = 0x58;
  return;
}



undefined4 FUN_80014a9c(int param_1,ushort *param_2,char param_3,uint param_4)

{
  byte bVar1;
  byte bVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  byte bVar9;
  uint uVar10;
  uint uVar11;
  ushort uVar12;
  byte bVar2;
  
  uVar12 = 0;
  bVar9 = *(byte *)(param_1 + 0xa29c);
  uVar10 = param_4 & 0xff;
  do {
    uVar11 = (uint)bVar9;
    if (uVar11 == 0xff) {
      return 0;
    }
    iVar7 = param_1 + uVar11 * 6;
    if ((*(char *)(iVar7 + 0xa090) == param_3) && (uVar10 <= *(byte *)(iVar7 + 0xa08e))) {
      uVar5 = 1;
      bVar9 = 0;
      uVar8 = (uint)*(ushort *)(iVar7 + 0xa08c);
      uVar4 = 0;
      if (*(byte *)(param_1 + 0xa29d) != 0) {
        do {
          bVar9 = bVar9 + 1;
          if ((uVar5 & uVar8) == 0) {
            if (bVar9 == uVar10) break;
          }
          else {
            bVar9 = 0;
          }
          uVar4 = uVar4 + 1;
          uVar5 = uVar5 << 1;
        } while ((uVar4 & 0xff) < (uint)*(byte *)(param_1 + 0xa29d));
        if ((uVar4 & 0xff) < (uint)*(byte *)(param_1 + 0xa29d)) {
          if (uVar8 == 0) {
            *(char *)(param_1 + 0xa29e) =
                 *(char *)(param_1 + 0xa29e) - *(char *)(param_1 + uVar11 * 6 + 0xa090);
          }
          uVar4 = uVar4 - (param_4 - 1);
          uVar6 = 1 << (uVar4 & 0x1f);
          uVar5 = 0;
          if (uVar10 != 0) {
            do {
              uVar8 = uVar8 | uVar6;
              uVar5 = uVar5 + 1;
              uVar6 = uVar6 << 1;
            } while ((uVar5 & 0xff) < uVar10);
          }
          uVar10 = 1;
          bVar2 = 0;
          bVar1 = 0;
          *(short *)(param_1 + uVar11 * 6 + 0xa08c) = (short)uVar8;
          *param_2 = uVar12 & 0xff;
          param_2[1] = (ushort)uVar4 & 0xff;
          bVar3 = 0;
          if (*(byte *)(param_1 + 0xa29d) != 0) {
            do {
              bVar9 = bVar9 + 1;
              bVar1 = bVar2;
              if ((uVar10 & uVar8 & 0xffff) == 0) {
                if (bVar2 <= bVar9) {
                  bVar1 = bVar9;
                }
              }
              else {
                bVar9 = 0;
              }
              bVar3 = bVar3 + 1;
              uVar10 = uVar10 << 1;
              bVar2 = bVar1;
            } while (bVar3 < *(byte *)(param_1 + 0xa29d));
          }
          *(byte *)(param_1 + uVar11 * 6 + 0xa08e) = bVar1;
          return 1;
        }
      }
    }
    iVar7 = param_1 + uVar11 * 6;
    bVar9 = *(byte *)(iVar7 + 0xa08f);
    uVar12 = uVar12 + *(byte *)(iVar7 + 0xa090);
  } while( true );
}



undefined4 FUN_80014cf8(int param_1,ushort *param_2,byte param_3,byte param_4,char param_5)

{
  char cVar1;
  byte bVar2;
  uint uVar3;
  char cVar4;
  int iVar5;
  ushort uVar6;
  ushort uVar7;
  ushort uVar8;
  int iVar9;
  uint uVar10;
  byte bVar11;
  
  bVar11 = 0;
  bVar2 = *(byte *)(param_1 + 0xa29c);
  do {
    uVar10 = (uint)bVar2;
    if (uVar10 == 0xff) {
      return 0;
    }
    iVar5 = param_1 + uVar10 * 6;
    bVar2 = *(byte *)(iVar5 + 0xa090);
    if ((param_3 <= bVar2) && (*(short *)(iVar5 + 0xa08c) == 0)) {
      cVar1 = '\0';
      if (param_5 == '\x01') {
        cVar4 = '\x10';
      }
      else {
        cVar4 = '\b';
        if (param_5 == '\x02') {
          cVar4 = ' ';
        }
      }
      if ((byte)(cVar4 - param_3) < (bVar11 & 7)) {
        cVar1 = '\b' - (bVar11 & 7);
        bVar2 = bVar2 - cVar1;
      }
      if (param_3 <= bVar2) {
        uVar3 = uVar10;
        if (cVar1 != '\0') {
          uVar3 = FUN_80015074(param_1);
          iVar9 = param_1 + (uVar3 & 0xff) * 6;
          *(undefined1 *)(iVar9 + 0xa08e) = *(undefined1 *)(param_1 + 0xa29d);
          iVar5 = param_1 + uVar10 * 6;
          *(undefined1 *)(iVar9 + 0xa08f) = *(undefined1 *)(iVar5 + 0xa08f);
          cVar4 = *(char *)(iVar5 + 0xa090);
          bVar11 = bVar11 + cVar1;
          *(undefined2 *)(iVar9 + 0xa08c) = 0;
          *(char *)(iVar9 + 0xa090) = cVar4 - cVar1;
          *(char *)(iVar5 + 0xa08f) = (char)uVar3;
          *(char *)(iVar5 + 0xa090) = cVar1;
          uVar10 = uVar3 & 0xff;
        }
        iVar5 = param_1 + uVar10 * 6;
        if (*(byte *)(iVar5 + 0xa090) != param_3) {
          bVar2 = FUN_80015074(param_1);
          iVar9 = param_1 + (uint)bVar2 * 6;
          *(undefined1 *)(iVar9 + 0xa08e) = *(undefined1 *)(param_1 + 0xa29d);
          *(undefined1 *)(iVar9 + 0xa08f) = *(undefined1 *)(iVar5 + 0xa08f);
          cVar4 = *(char *)(iVar5 + 0xa090);
          *(undefined2 *)(iVar9 + 0xa08c) = 0;
          *(byte *)(iVar9 + 0xa090) = cVar4 - param_3;
          *(byte *)(iVar5 + 0xa08f) = bVar2;
          *(byte *)(iVar5 + 0xa090) = param_3;
        }
        uVar7 = 0;
        uVar6 = 1;
        bVar2 = 0;
        uVar8 = 0;
        if (param_4 != 0) {
          do {
            uVar7 = uVar8 | uVar6;
            bVar2 = bVar2 + 1;
            uVar6 = uVar6 << 1;
            uVar8 = uVar7;
          } while (bVar2 < param_4);
        }
        iVar5 = param_1 + (uVar3 & 0xff) * 6;
        *(ushort *)(iVar5 + 0xa08c) = uVar7;
        *(byte *)(iVar5 + 0xa08e) = *(char *)(param_1 + 0xa29d) - param_4;
        *param_2 = (ushort)bVar11;
        param_2[1] = 0;
        *(char *)(param_1 + 0xa29e) =
             *(char *)(param_1 + 0xa29e) - (*(char *)(iVar5 + 0xa090) + cVar1);
        return 1;
      }
    }
    iVar5 = param_1 + uVar10 * 6;
    bVar2 = *(byte *)(iVar5 + 0xa08f);
    bVar11 = bVar11 + *(char *)(iVar5 + 0xa090);
  } while( true );
}



uint FUN_80015074(int param_1)

{
  uint uVar1;
  byte bVar2;
  
  bVar2 = 0;
  uVar1 = 0;
  do {
    if (*(char *)(param_1 + uVar1 * 6 + 0xa08f) == -2) {
      return uVar1;
    }
    bVar2 = bVar2 + 1;
    uVar1 = (uint)bVar2;
  } while (bVar2 < 0x58);
  return 0;
}



byte FUN_800150c4(int param_1)

{
  byte bVar1;
  int iVar2;
  byte bVar3;
  
  bVar3 = 0;
  bVar1 = *(byte *)(param_1 + 0xa29c);
  while (bVar1 != 0xff) {
    iVar2 = param_1 + (uint)bVar1 * 6;
    bVar1 = *(byte *)(iVar2 + 0xa090);
    if (bVar3 < bVar1) {
      bVar3 = bVar1;
    }
    bVar1 = *(byte *)(iVar2 + 0xa08f);
  }
  return bVar3;
}



void FUN_80015134(int param_1,undefined4 param_2,byte param_3)

{
  byte bVar1;
  int iVar2;
  byte bVar3;
  int iVar4;
  uint uVar5;
  byte bVar6;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  short local_res4;
  short sStackX_6;
  byte bVar7;
  
  uVar5 = 0;
  bVar6 = *(byte *)(param_1 + 0xa29c);
  uVar10 = 0xff;
  while( true ) {
    uVar9 = (uint)bVar6;
    if (uVar9 == 0xff) {
      return;
    }
    local_res4 = (short)param_2;
    if ((uVar5 & 0xff) == (int)local_res4) break;
    iVar4 = param_1 + uVar9 * 6;
    bVar6 = *(byte *)(iVar4 + 0xa08f);
    uVar5 = uVar5 + *(byte *)(iVar4 + 0xa090);
    uVar10 = uVar9;
  }
  bVar6 = 0;
  uVar8 = (uint)*(ushort *)(param_1 + uVar9 * 6 + 0xa08c);
  sStackX_6 = (short)((uint)param_2 >> 0x10);
  uVar5 = 1 << ((int)sStackX_6 & 0x1fU);
  if (param_3 != 0) {
    do {
      uVar8 = uVar8 ^ uVar5;
      bVar6 = bVar6 + 1;
      uVar5 = uVar5 << 1;
    } while (bVar6 < param_3);
  }
  uVar5 = 1;
  bVar7 = 0;
  bVar6 = 0;
  bVar1 = 0;
  *(short *)(param_1 + uVar9 * 6 + 0xa08c) = (short)uVar8;
  bVar3 = 0;
  if (*(byte *)(param_1 + 0xa29d) != 0) {
    do {
      bVar1 = bVar1 + 1;
      bVar6 = bVar7;
      if ((uVar5 & uVar8 & 0xffff) == 0) {
        if (bVar7 <= bVar1) {
          bVar6 = bVar1;
        }
      }
      else {
        bVar1 = 0;
      }
      bVar3 = bVar3 + 1;
      uVar5 = uVar5 << 1;
      bVar7 = bVar6;
    } while (bVar3 < *(byte *)(param_1 + 0xa29d));
  }
  iVar4 = param_1 + uVar9 * 6;
  *(byte *)(iVar4 + 0xa08e) = bVar6;
  if ((uVar8 & 0xffff) == 0) {
    *(char *)(param_1 + 0xa29e) = *(char *)(param_1 + 0xa29e) + *(char *)(iVar4 + 0xa090);
    if ((uVar10 != 0xff) && (iVar2 = param_1 + uVar10 * 6, *(short *)(iVar2 + 0xa08c) == 0)) {
      *(undefined1 *)(iVar2 + 0xa08f) = *(undefined1 *)(iVar4 + 0xa08f);
      *(char *)(iVar2 + 0xa090) = *(char *)(iVar2 + 0xa090) + *(char *)(iVar4 + 0xa090);
      *(undefined1 *)(iVar4 + 0xa08f) = 0xfe;
      *(undefined1 *)(iVar4 + 0xa090) = 0xfe;
      uVar9 = uVar10;
    }
    iVar4 = param_1 + uVar9 * 6;
    if ((*(byte *)(iVar4 + 0xa08f) != 0xff) &&
       (param_1 = param_1 + (uint)*(byte *)(iVar4 + 0xa08f) * 6, *(short *)(param_1 + 0xa08c) == 0))
    {
      *(undefined1 *)(iVar4 + 0xa08f) = *(undefined1 *)(param_1 + 0xa08f);
      *(char *)(iVar4 + 0xa090) = *(char *)(iVar4 + 0xa090) + *(char *)(param_1 + 0xa090);
      *(undefined1 *)(param_1 + 0xa08f) = 0xfe;
      *(undefined1 *)(param_1 + 0xa090) = 0xfe;
    }
  }
  return;
}



void FUN_80015424(void)

{
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff

void FUN_80015434(void)

{
  return;
}



// Initializes basic entity with minimal vtable setup.
// 
// Called from SetupAlternateEntitySpriteContext @ 0x80033EF4 and InitColoredOverlayEntity @
// 0x80034894.
// 
// Algorithm:
// 1. Sets vtable @ entity+0x0C = 0x8001039C
// 2. Stores param_2 @ entity+0x08
// 3. Zeros fields @ entity+0x00, +0x02, +0x04, +0x06
// 4. Sets enable flag @ entity+0x0A = 1
// 
// Parameters:
// - param_1: Entity structure pointer (u16*)
// - param_2: Size or ID value (u16)
// 
// Entity Structure (minimum 0x10 bytes):
// - +0x00-0x06: Zeroed fields (positions/state)
// - +0x08: Size/ID parameter
// - +0x0A: Enable flag (1)
// - +0x0C: Vtable pointer (0x8001039C)
// 
// Cross-References:
// - Called by: SetupAlternateEntitySpriteContext @ 0x80033EF4 (Type A secondary object)
// - Called by: InitColoredOverlayEntity @ 0x80034894 (before color setup)
// - Vtable: 0x8001039C (basic entity methods)
// 
// Notes:
// - This is a minimal entity initialization (no sprite/animation)
// - Used for simple objects like UI elements or helpers
// - Smaller structure size (0x10 bytes) vs full entities (0x10C+)
// 
// Verified via Ghidra decompilation 2025-01-13.

void InitBasicEntityWithVtable(undefined2 *param_1,undefined2 param_2)

{
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  param_1[4] = param_2;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  return;
}



undefined2 *
InitSpriteRenderContext
          (undefined2 *param_1,undefined2 param_2,short param_3,short param_4,undefined1 param_5)

{
  undefined *puVar1;
  char cVar2;
  byte bVar3;
  u_short uVar4;
  
  param_1[4] = param_2;
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined **)(param_1 + 6) = &DAT_80010384;
  *(undefined1 *)(param_1 + 0x1a) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x35) = 0x40;
  *(undefined1 *)(param_1 + 0x1b) = 0x40;
  param_1[3] = param_4;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined1 *)((int)param_1 + 0x37) = 0;
  *(undefined1 *)(param_1 + 0x1c) = 0;
  *(undefined1 *)((int)param_1 + 0x2f) = 1;
  param_1[2] = param_3;
  *(undefined1 *)((int)param_1 + 0x33) = 1;
  *(undefined1 *)(param_1 + 0x19) = param_5;
  puVar1 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0xe) = 0x10000;
  *(undefined4 *)(param_1 + 0x10) = 0x10000;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  cVar2 = FUN_800138f0(puVar1,param_1 + 8,*(undefined1 *)(param_1 + 0x19),(int)param_3,(int)param_4)
  ;
  *(char *)(param_1 + 0x17) = cVar2;
  if (cVar2 != '\0') {
    uVar4 = GetTPage((uint)*(byte *)(param_1 + 0x19),0,(int)(short)param_1[8] & 0xffffffc0,
                     (int)(short)param_1[9] & 0xffffff00);
    param_1[0x12] = uVar4;
    if (*(char *)(param_1 + 0x19) == '\0') {
      bVar3 = *(char *)(param_1 + 8) << 2;
    }
    else if (*(char *)(param_1 + 0x19) == '\x01') {
      bVar3 = (*(byte *)(param_1 + 8) & 0x3f) << 1;
    }
    else {
      bVar3 = *(byte *)(param_1 + 8) & 0x3f;
    }
    *(byte *)(param_1 + 0x18) = bVar3;
    *(char *)((int)param_1 + 0x31) = (char)param_1[9];
  }
  if ((*(char *)(param_1 + 0x19) == '\x02') ||
     (cVar2 = FUN_80013d10(blbHeaderBufferBase,param_1 + 0xc), cVar2 == '\0')) {
    param_1[0x13] = 0;
  }
  else {
    uVar4 = GetClut((int)(short)param_1[0xc],(int)(short)param_1[0xd]);
    param_1[0x13] = uVar4;
  }
  return param_1;
}



void FUN_80015614(undefined2 *param_1,undefined2 param_2)

{
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  *(undefined **)(param_1 + 6) = &DAT_80010384;
  *(undefined1 *)(param_1 + 0x1a) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x35) = 0x40;
  *(undefined1 *)(param_1 + 0x1b) = 0x40;
  param_1[4] = param_2;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined1 *)((int)param_1 + 0x37) = 0;
  *(undefined1 *)(param_1 + 0x1c) = 0;
  *(undefined1 *)((int)param_1 + 0x2f) = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 0x19) = 0;
  *(undefined1 *)((int)param_1 + 0x33) = 1;
  *(undefined4 *)(param_1 + 0xe) = 0x10000;
  *(undefined4 *)(param_1 + 0x10) = 0x10000;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  *(undefined1 *)(param_1 + 0x17) = 0;
  param_1[0x12] = 0;
  *(undefined1 *)(param_1 + 0x18) = 0;
  *(undefined1 *)((int)param_1 + 0x31) = 0;
  return;
}



// Initializes tilemap layer rendering structures.
// Sets up SPRT_16 and DR_TPAGE primitives for tile rendering.
// All layers use 16x16 grid regardless of tile size.

void InitTilemapLayerRendering
               (undefined2 *param_1,undefined4 param_2,undefined2 param_3,undefined4 param_4,
               undefined4 param_5,uint param_6,uint param_7,undefined2 param_8,undefined2 param_9,
               undefined1 param_10)

{
  uint uVar1;
  uint *puVar2;
  undefined *puVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  ushort uVar9;
  
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  param_1[4] = param_3;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  puVar3 = blbHeaderBufferBase;
  *(undefined **)(param_1 + 6) = &DAT_80010374;
  uVar9 = *(ushort *)(puVar3 + 2);
  *(undefined1 *)(param_1 + 0x40) = param_10;
  *(undefined4 *)(param_1 + 0x38) = param_2;
  *(undefined4 *)(param_1 + 0x34) = param_4;
  *(undefined4 *)(param_1 + 0x36) = param_5;
  uVar1 = (int)param_1 + 0x77U & 3;
  puVar2 = (uint *)(((int)param_1 + 0x77U) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | param_6 >> (3 - uVar1) * 8;
  uVar1 = (uint)(param_1 + 0x3a) & 3;
  puVar2 = (uint *)((int)(param_1 + 0x3a) - uVar1);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | param_6 << uVar1 * 8;
  uVar1 = (int)param_1 + 0x7bU & 3;
  puVar2 = (uint *)(((int)param_1 + 0x7bU) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | param_7 >> (3 - uVar1) * 8;
  uVar1 = (uint)(param_1 + 0x3c) & 3;
  puVar2 = (uint *)((int)(param_1 + 0x3c) - uVar1);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | param_7 << uVar1 * 8;
  puVar3 = blbHeaderBufferBase;
  param_1[0x3e] = param_8;
  param_1[0x3f] = param_9;
  uVar8 = ((int)((uint)uVar9 << 0x10) >> 0x14) + 1;
  uVar1 = (uVar8 & 0xff) * 0x15;
  uVar4 = AllocateFromHeap(puVar3,0x10,uVar1,0);
  puVar3 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 8) = uVar4;
  uVar4 = AllocateFromHeap(puVar3,0x10,uVar1,0);
  puVar3 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 10) = uVar4;
  uVar4 = AllocateFromHeap(puVar3,8,uVar1,0);
  puVar3 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0xc) = uVar4;
  uVar4 = AllocateFromHeap(puVar3,8,uVar1,0);
  *(undefined4 *)(param_1 + 0xe) = uVar4;
  CatPrim(*(void **)(param_1 + 0xc),*(void **)(param_1 + 8));
  iVar7 = 1;
  *(undefined4 *)(param_1 + 0x2c) = *(undefined4 *)(param_1 + 0xc);
  *(undefined4 *)(param_1 + 0x30) = *(undefined4 *)(param_1 + 8);
  if (1 < uVar1) {
    do {
      iVar6 = (short)iVar7 * 8;
      CatPrim(*(void **)(param_1 + 0x30),(void *)(*(int *)(param_1 + 0xc) + iVar6));
      iVar5 = (short)iVar7 * 0x10;
      CatPrim((void *)(*(int *)(param_1 + 0xc) + iVar6),(void *)(*(int *)(param_1 + 8) + iVar5));
      iVar7 = iVar7 + 1;
      *(int *)(param_1 + 0x30) = *(int *)(param_1 + 8) + iVar5;
    } while (iVar7 * 0x10000 >> 0x10 < (int)uVar1);
  }
  iVar7 = 1;
  CatPrim(*(void **)(param_1 + 0xe),*(void **)(param_1 + 10));
  *(undefined4 *)(param_1 + 0x32) = *(undefined4 *)(param_1 + 10);
  *(undefined4 *)(param_1 + 0x2e) = *(undefined4 *)(param_1 + 0xe);
  uVar1 = (uVar8 & 0xff) * 0x15;
  if (1 < uVar1) {
    do {
      iVar6 = (short)iVar7 * 8;
      CatPrim(*(void **)(param_1 + 0x32),(void *)(*(int *)(param_1 + 0xe) + iVar6));
      iVar5 = (short)iVar7 * 0x10;
      CatPrim((void *)(*(int *)(param_1 + 0xe) + iVar6),(void *)(*(int *)(param_1 + 10) + iVar5));
      iVar7 = iVar7 + 1;
      *(int *)(param_1 + 0x32) = *(int *)(param_1 + 10) + iVar5;
    } while (iVar7 * 0x10000 >> 0x10 < (int)uVar1);
  }
  uVar9 = (ushort)uVar8 & 0xff;
  RenderTilemapSprites16x16((int)param_1,0,0,0,0,0,0,0,0x15,uVar9);
  RenderTilemapSprites16x16((int)param_1,1,0,0,0,0,0,0,0x15,uVar9);
  iVar7 = (int)(short)param_1[0x3e];
  if ((iVar7 != 0) && (iVar7 < 0x15)) {
    RenderTilemapSprites16x16
              ((int)param_1,0,(short)((uint)(iVar7 << 0x14) >> 0x10),0,param_1[0x3e],0,0,0,
               0x15 - param_1[0x3e],uVar9);
    RenderTilemapSprites16x16
              ((int)param_1,1,(short)(((uint)(ushort)param_1[0x3e] << 0x14) >> 0x10),0,param_1[0x3e]
               ,0,0,0,0x15 - param_1[0x3e],uVar9);
  }
  iVar7 = (int)(short)param_1[0x3f];
  if ((iVar7 != 0) && (iVar7 < (int)(uVar8 & 0xff))) {
    RenderTilemapSprites16x16
              ((int)param_1,0,0,(short)((uint)(iVar7 << 0x14) >> 0x10),0,param_1[0x3f],0,0,0x15,
               (short)(((uVar8 & 0xff) - (uint)(ushort)param_1[0x3f]) * 0x10000 >> 0x10));
    RenderTilemapSprites16x16
              ((int)param_1,1,0,(short)(((uint)(ushort)param_1[0x3f] << 0x14) >> 0x10),0,
               param_1[0x3f],0,0,0x15,
               (short)(((uVar8 & 0xff) - (uint)(ushort)param_1[0x3f]) * 0x10000 >> 0x10));
  }
  param_1[0x28] = 0;
  param_1[0x29] = 0;
  param_1[0x2a] = 0;
  param_1[0x2b] = 0;
  return;
}



// Renders tilemap tiles as SPRT_16 primitives (16x16 sprites).
// All tiles are rendered on a 16-pixel grid regardless of native tile size.
// 8x8 tiles are stretched to 16x16 to fill the grid cell.
// 
// Key operations:
// - tilemap_entry & 0xFFF = 12-bit tile index (1-based, 0=transparent)
// - tilemap_entry >> 12 = 4-bit color tint index
// - Tile lookup table at ctx+0x68 (8 bytes per tile)
// - Color tint table at ctx+0x70 (3 bytes per entry, RGB)
// 
// Params: (layer_ctx, buffer_idx, screen_x, screen_y, start_col, start_row, tile_x, tile_y, cols,
// rows)

void RenderTilemapSprites16x16
               (int layer_ctx,uint buffer_idx,short screen_x,short screen_y,ushort start_col,
               short start_row,short tile_x,short tile_y,short cols,short rows)

{
  u_char uVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  u_char *puVar6;
  void *p0;
  ushort *puVar7;
  SPRT_16 *p;
  DR_TPAGE *p_00;
  uint uVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  short local_68;
  short local_60;
  short local_58;
  short local_50;
  short local_48;
  short local_40;
  short local_38;
  
  iVar10 = (buffer_idx & 0xff) * 4 + layer_ctx;
  local_50 = 0;
  local_60 = start_row;
  uVar8 = ((int)((uint)*(ushort *)(blbHeaderBufferBase + 2) << 0x10) >> 0x14) + 1U & 0xff;
  local_58 = tile_y;
  local_68 = screen_y;
  for (; local_50 < rows; local_50 = local_50 + 1) {
    uVar9 = (uint)start_col;
    local_40 = tile_x;
    iVar11 = (int)local_58;
    local_48 = screen_x;
    for (local_38 = 0; local_38 < cols; local_38 = local_38 + 1) {
      iVar5 = (int)*(short *)(layer_ctx + 0x74);
      iVar4 = (int)local_40;
      iVar3 = (int)*(short *)(layer_ctx + 0x76);
      puVar7 = (ushort *)
               (*(int *)(layer_ctx + 0x6c) +
               ((iVar4 - iVar5) + (iVar11 - iVar3) * (int)*(short *)(layer_ctx + 0x78)) * 2);
      if (*puVar7 == 0 ||
          (iVar3 + *(short *)(layer_ctx + 0x7a) <= iVar11 ||
          (iVar11 < iVar3 || (iVar5 + *(short *)(layer_ctx + 0x78) <= iVar4 || iVar4 < iVar5)))) {
        iVar3 = (int)((uVar9 + local_60 * 0x15) * 0x10000) >> 0x10;
        iVar4 = iVar3 * 8;
        p0 = (void *)(*(int *)(iVar10 + 0x18) + iVar4);
        if (iVar3 == uVar8 * 0x15 + -1) {
          *(void **)(iVar10 + 0x60) = p0;
        }
        else {
          CatPrim(p0,(void *)(*(int *)(iVar10 + 0x18) + iVar4 + 8));
        }
        *(undefined1 *)((int)p0 + 3) = 0;
      }
      else {
        iVar3 = (int)((uVar9 + local_60 * 0x15) * 0x10000) >> 0x10;
        p_00 = (DR_TPAGE *)(*(int *)(iVar10 + 0x18) + iVar3 * 8);
        p = (SPRT_16 *)(*(int *)(iVar10 + 0x10) + iVar3 * 0x10);
        CatPrim(p_00,p);
        if (iVar3 == uVar8 * 0x15 + -1) {
          *(SPRT_16 **)(iVar10 + 0x60) = p;
        }
        uVar2 = *puVar7;
        puVar7 = (ushort *)(*(int *)(layer_ctx + 0x68) + (uVar2 & 0xfff) * 8);
        puVar6 = (u_char *)(*(int *)(layer_ctx + 0x70) + (uint)(uVar2 >> 0xc) * 3);
        SetSprt16(p);
        SetSemiTrans(p,(uint)(byte)puVar7[3]);
        SetShadeTex(p,0);
        p->r0 = *puVar6;
        p->g0 = puVar6[1];
        uVar1 = puVar6[2];
        p->x0 = local_48;
        p->b0 = uVar1;
        p->y0 = local_68;
        p->u0 = (u_char)puVar7[2];
        p->_2 = *(u_char *)((int)puVar7 + 5);
        p->clut = puVar7[1];
        SetDrawTPage(p_00,0,0,(uint)*puVar7 | (uint)*(byte *)(layer_ctx + 0x80) << 5);
      }
      uVar9 = uVar9 + 1;
      if (0x14 < (int)(uVar9 * 0x10000) >> 0x10) {
        uVar9 = 0;
      }
      local_48 = local_48 + 0x10;
      local_40 = local_40 + 1;
    }
    local_60 = local_60 + 1;
    if ((int)uVar8 <= (int)local_60) {
      local_60 = 0;
    }
    local_68 = local_68 + 0x10;
    local_58 = local_58 + 1;
  }
  return;
}



// Initializes a 16x16 tilemap layer with SPRT_16 primitives.
// Used for layers that fit within visibility constraints.
// All tiles rendered as 16x16 sprites on 16-pixel grid.

undefined2 *
InitTilemapLayer16x16
          (undefined2 *param_1,undefined4 param_2,undefined2 param_3,int param_4,ushort *param_5,
          uint param_6,uint param_7,short param_8,undefined1 param_9,undefined1 param_10,
          byte param_11)

{
  u_char uVar1;
  ushort uVar2;
  uint *puVar3;
  undefined *puVar4;
  byte bVar5;
  undefined4 uVar6;
  uint uVar7;
  int iVar8;
  void *p1;
  uint uVar9;
  int tpage;
  ushort *puVar10;
  undefined4 *puVar11;
  u_char *puVar12;
  int *piVar13;
  int iVar14;
  u_short *puVar15;
  SPRT_16 *p;
  short sVar16;
  ushort uVar17;
  ushort *puVar18;
  ushort uVar19;
  undefined1 local_1c0 [352];
  int local_60;
  ushort local_58;
  ushort local_50;
  byte local_48;
  short local_40;
  undefined2 *local_38;
  undefined1 *local_30;
  
  *(undefined4 *)(param_1 + 0x34) = param_2;
  param_1[4] = param_3;
  iVar14 = 0;
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined **)(param_1 + 6) = &DAT_80010364;
  *(undefined1 *)(param_1 + 0x36) = param_9;
  *(undefined1 *)((int)param_1 + 0x6d) = param_10;
  uVar9 = (int)param_1 + 99U & 3;
  puVar3 = (uint *)(((int)param_1 + 99U) - uVar9);
  *puVar3 = *puVar3 & -1 << (uVar9 + 1) * 8 | param_6 >> (3 - uVar9) * 8;
  uVar9 = (uint)(param_1 + 0x30) & 3;
  puVar3 = (uint *)((int)(param_1 + 0x30) - uVar9);
  *puVar3 = *puVar3 & 0xffffffffU >> (4 - uVar9) * 8 | param_6 << uVar9 * 8;
  uVar9 = (int)param_1 + 0x67U & 3;
  puVar3 = (uint *)(((int)param_1 + 0x67U) - uVar9);
  *puVar3 = *puVar3 & -1 << (uVar9 + 1) * 8 | param_7 >> (3 - uVar9) * 8;
  uVar9 = (uint)(param_1 + 0x32) & 3;
  puVar3 = (uint *)((int)(param_1 + 0x32) - uVar9);
  *puVar3 = *puVar3 & 0xffffffffU >> (4 - uVar9) * 8 | param_7 << uVar9 * 8;
  local_60 = param_4;
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,8,0x2c,0);
  puVar4 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 8) = uVar6;
  uVar6 = AllocateFromHeap(puVar4,8,0x2c,0);
  *(undefined4 *)(param_1 + 10) = uVar6;
  iVar8 = 0;
  while (iVar8 = iVar8 >> 0x10, iVar8 < 0x2c) {
    uVar9 = iVar8 % 0xb + 5;
    if (10 < (iVar8 % 0x16) * 0x10000 >> 0x10) {
      uVar9 = iVar8 % 0xb + 0x15;
    }
    tpage = ((iVar8 / 0x16) * 0x80 & 0xffffU) + (uVar9 & 0xffff) + (uint)param_11 * 0x20;
    iVar14 = iVar14 + 1;
    SetDrawTPage((DR_TPAGE *)(*(int *)(param_1 + 8) + iVar8 * 8),0,0,tpage);
    SetDrawTPage((DR_TPAGE *)(*(int *)(param_1 + 10) + iVar8 * 8),0,0,tpage);
    iVar8 = iVar14 * 0x10000;
  }
  local_30 = local_1c0;
  local_48 = 0;
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x10,(int)param_8,0);
  puVar4 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0xc) = uVar6;
  uVar6 = AllocateFromHeap(puVar4,0x10,(int)param_8,0);
  *(undefined4 *)(param_1 + 0xe) = uVar6;
  local_58 = param_1[0x30] << 4;
  local_50 = param_1[0x31] << 4;
  for (; iVar8 = 0, local_48 < 2; local_48 = local_48 + 1) {
    iVar14 = 0;
    do {
      *(undefined4 *)(local_30 + (iVar14 >> 0xe)) = 0;
      iVar8 = iVar8 + 1;
      iVar14 = iVar8 * 0x10000;
    } while (iVar8 * 0x10000 >> 0x10 < 0x2c);
    local_38 = param_1 + (uint)local_48 * 2;
    p = *(SPRT_16 **)(local_38 + 0xc);
    local_40 = 0;
    puVar18 = param_5;
    uVar19 = local_50;
    while( true ) {
      bVar5 = local_48;
      sVar16 = 0;
      if ((short)param_1[0x33] <= local_40) break;
      puVar15 = &p->clut;
      uVar17 = local_58;
      for (; sVar16 < (short)param_1[0x32]; sVar16 = sVar16 + 1) {
        uVar2 = *puVar18;
        if (uVar2 != 0) {
          puVar10 = (ushort *)(local_60 + (uVar2 & 0xfff) * 8);
          puVar12 = (u_char *)(*(int *)(param_1 + 0x34) + (uint)(uVar2 >> 0xc) * 3);
          SetSprt16(p);
          SetSemiTrans(p,(uint)(byte)puVar10[3]);
          SetShadeTex(p,0);
          *(u_char *)(puVar15 + -5) = *puVar12;
          *(u_char *)((int)puVar15 + -9) = puVar12[1];
          uVar1 = puVar12[2];
          puVar15[-3] = uVar17;
          puVar15[-2] = uVar19;
          *(u_char *)(puVar15 + -4) = uVar1;
          *(u_char *)(puVar15 + -1) = (u_char)puVar10[2];
          *(u_char *)((int)puVar15 + -1) = *(u_char *)((int)puVar10 + 5);
          *puVar15 = puVar10[1];
          uVar7 = (uint)*puVar10;
          uVar9 = ((uVar7 & 0x180) >> 7) * 0x16 + 0xfffb + (uVar7 & 0xf);
          if (0xf < (uVar7 & 0x1f)) {
            uVar9 = uVar9 + 0xb;
          }
          piVar13 = (int *)(local_30 + (uVar9 & 0xffff) * 4);
          if (*piVar13 == 0) {
            iVar14 = (uVar9 & 0xffff) * 8;
            CatPrim((void *)(*(int *)(local_38 + 8) + iVar14),p);
            iVar8 = *(int *)(local_38 + 8);
            piVar13[0x2c] = (int)p;
            *piVar13 = iVar8 + iVar14;
          }
          else {
            CatPrim((void *)piVar13[0x2c],p);
            piVar13[0x2c] = (int)p;
          }
          puVar15 = puVar15 + 8;
          p = p + 1;
        }
        puVar18 = puVar18 + 1;
        uVar17 = uVar17 + 0x10;
      }
      uVar19 = uVar19 + 0x10;
      local_40 = local_40 + 1;
    }
    iVar14 = 0;
    *(undefined4 *)(param_1 + (uint)local_48 * 2 + 0x28) = 0;
    iVar8 = 0;
    do {
      puVar11 = (undefined4 *)(local_30 + (iVar8 >> 0xe));
      p1 = (void *)*puVar11;
      if (p1 != (void *)0x0) {
        if (*(int *)(param_1 + (uint)bVar5 * 2 + 0x28) == 0) {
          *(void **)(param_1 + (uint)bVar5 * 2 + 0x28) = p1;
        }
        else {
          CatPrim(*(void **)(param_1 + (uint)bVar5 * 2 + 0x2c),p1);
        }
        *(undefined4 *)(param_1 + (uint)bVar5 * 2 + 0x2c) = puVar11[0x2c];
      }
      iVar14 = iVar14 + 1;
      iVar8 = iVar14 * 0x10000;
    } while (iVar14 * 0x10000 >> 0x10 < 0x2c);
  }
  return param_1;
}



undefined2 *
InitTileLayerPrimitives
          (undefined2 *param_1,undefined4 param_2,undefined2 param_3,int param_4,ushort *param_5,
          uint param_6,uint param_7,short param_8,undefined2 param_9,undefined2 param_10,
          byte param_11)

{
  u_char uVar1;
  short sVar2;
  short sVar3;
  uint *puVar4;
  undefined *puVar5;
  undefined4 uVar6;
  ushort uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  u_char *puVar12;
  int *piVar13;
  ushort *puVar14;
  u_short *puVar15;
  SPRT_16 *p;
  DR_TPAGE *p_00;
  ushort uVar16;
  ushort uVar17;
  ushort uVar18;
  ushort *local_68;
  byte local_50;
  ushort local_48;
  
  *(undefined4 *)(param_1 + 0x3c) = param_2;
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  param_1[4] = param_3;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined **)(param_1 + 6) = &DAT_80010354;
  param_1[0x3e] = param_9;
  param_1[0x3f] = param_10;
  uVar9 = (int)param_1 + 0x73U & 3;
  puVar4 = (uint *)(((int)param_1 + 0x73U) - uVar9);
  *puVar4 = *puVar4 & -1 << (uVar9 + 1) * 8 | param_6 >> (3 - uVar9) * 8;
  uVar9 = (uint)(param_1 + 0x38) & 3;
  puVar4 = (uint *)((int)(param_1 + 0x38) - uVar9);
  *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar9) * 8 | param_6 << uVar9 * 8;
  uVar9 = (int)param_1 + 0x77U & 3;
  puVar4 = (uint *)(((int)param_1 + 0x77U) - uVar9);
  *puVar4 = *puVar4 & -1 << (uVar9 + 1) * 8 | param_7 >> (3 - uVar9) * 8;
  uVar9 = (uint)(param_1 + 0x3a) & 3;
  puVar4 = (uint *)((int)(param_1 + 0x3a) - uVar9);
  *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar9) * 8 | param_7 << uVar9 * 8;
  iVar10 = (int)param_8;
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x10,iVar10,0);
  puVar5 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 8) = uVar6;
  uVar6 = AllocateFromHeap(puVar5,0x10,iVar10,0);
  puVar5 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 10) = uVar6;
  uVar6 = AllocateFromHeap(puVar5,8,iVar10,0);
  puVar5 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0xc) = uVar6;
  uVar6 = AllocateFromHeap(puVar5,8,iVar10,0);
  *(undefined4 *)(param_1 + 0xe) = uVar6;
  if (param_1[0x3e] == 0) {
    sVar2 = param_1[0x3b];
  }
  else {
    sVar2 = param_1[0x3a];
  }
  iVar11 = (int)sVar2;
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,8,iVar11,0);
  puVar5 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0x34) = uVar6;
  uVar6 = AllocateFromHeap(puVar5,8,iVar11,0);
  iVar10 = 0;
  *(undefined4 *)(param_1 + 0x36) = uVar6;
  if (0 < iVar11) {
    do {
      iVar8 = (iVar10 << 0x10) >> 0xd;
      *(undefined4 *)(iVar8 + *(int *)(param_1 + 0x34)) = 0;
      iVar10 = iVar10 + 1;
      *(undefined4 *)(iVar8 + *(int *)(param_1 + 0x36)) = 0;
    } while (iVar10 * 0x10000 >> 0x10 < iVar11);
  }
  local_50 = 0;
  sVar2 = param_1[0x38];
  sVar3 = param_1[0x39];
  while( true ) {
    uVar9 = (uint)local_50;
    uVar18 = 0;
    if (1 < uVar9) break;
    local_68 = param_5;
    p = *(SPRT_16 **)(param_1 + uVar9 * 2 + 8);
    p_00 = *(DR_TPAGE **)(param_1 + uVar9 * 2 + 0xc);
    local_48 = sVar3 << 4;
    for (; uVar16 = 0, (short)uVar18 < (short)param_1[0x3b]; uVar18 = uVar18 + 1) {
      puVar15 = &p->clut;
      uVar17 = sVar2 << 4;
      for (; (short)uVar16 < (short)param_1[0x3a]; uVar16 = uVar16 + 1) {
        uVar7 = *local_68;
        if (uVar7 != 0) {
          puVar14 = (ushort *)(param_4 + (uVar7 & 0xfff) * 8);
          puVar12 = (u_char *)(*(int *)(param_1 + 0x3c) + (uint)(uVar7 >> 0xc) * 3);
          SetSprt16(p);
          SetSemiTrans(p,(uint)(byte)puVar14[3]);
          SetShadeTex(p,0);
          *(u_char *)(puVar15 + -5) = *puVar12;
          *(u_char *)((int)puVar15 + -9) = puVar12[1];
          uVar1 = puVar12[2];
          puVar15[-3] = uVar17;
          puVar15[-2] = local_48;
          *(u_char *)(puVar15 + -4) = uVar1;
          *(u_char *)(puVar15 + -1) = (u_char)puVar14[2];
          *(u_char *)((int)puVar15 + -1) = *(u_char *)((int)puVar14 + 5);
          *puVar15 = puVar14[1];
          SetDrawTPage(p_00,0,0,(uint)*puVar14 | (uint)param_11 << 5);
          uVar7 = uVar18;
          if (param_1[0x3e] != 0) {
            uVar7 = uVar16;
          }
          piVar13 = (int *)(*(int *)(param_1 + uVar9 * 2 + 0x34) + (uint)uVar7 * 8);
          if (*piVar13 == 0) {
            *piVar13 = (int)p_00;
          }
          else {
            CatPrim((void *)piVar13[1],p_00);
          }
          piVar13[1] = (int)p_00;
          puVar15 = puVar15 + 8;
          p_00 = p_00 + 1;
          CatPrim((void *)piVar13[1],p);
          piVar13[1] = (int)p;
          p = p + 1;
        }
        uVar17 = uVar17 + 0x10;
        local_68 = local_68 + 1;
      }
      local_48 = local_48 + 0x10;
    }
    local_50 = local_50 + 1;
  }
  return param_1;
}



void FUN_8001889c(undefined2 *param_1,undefined2 param_2)

{
  *(undefined **)(param_1 + 6) = &DAT_8001039c;
  *(undefined1 *)(param_1 + 5) = 1;
  param_1[4] = param_2;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  *(undefined **)(param_1 + 6) = &DAT_80010344;
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined1 *)(param_1 + 0x2a) = 0;
  return;
}



// WARNING: Removing unreachable block (ram,0x80019064)
// WARNING: Removing unreachable block (ram,0x80018f44)
// WARNING: Removing unreachable block (ram,0x80019098)
// WARNING: Removing unreachable block (ram,0x80019134)
// WARNING: Removing unreachable block (ram,0x80019154)
// Loads sprite frame data to VRAM by sprite hash ID. Manages a cache of 20 slots (0x18 bytes each)
// to avoid reloading already-cached sprites.

void LoadSpriteFramesToVRAM(int param_1,int param_2)

{
  undefined1 *puVar1;
  uint uVar2;
  uint *puVar3;
  undefined *puVar4;
  char cVar5;
  u_short uVar6;
  ushort uVar7;
  int iVar8;
  int *piVar9;
  u_long *p;
  short sVar10;
  int iVar11;
  short *psVar12;
  int *piVar13;
  ushort uVar14;
  int local_50;
  u_long *local_4c;
  uint uStack_44;
  undefined2 local_40;
  undefined1 local_3e;
  undefined1 auStack_38 [8];
  RECT local_30;
  
  iVar11 = 0;
  iVar8 = 0;
  do {
    iVar11 = iVar11 + 1;
    if (*(int *)(param_1 + (iVar8 >> 0x10) * 0x18) == param_2) {
      return;
    }
    iVar8 = iVar11 * 0x10000;
  } while (iVar11 * 0x10000 >> 0x10 < 0x14);
  iVar11 = 0;
  iVar8 = 0;
  do {
    sVar10 = (short)iVar11;
    iVar11 = iVar11 + 1;
    if (*(int *)(param_1 + (iVar8 >> 0x10) * 0x18) == 0) break;
    iVar8 = iVar11 * 0x10000;
    sVar10 = (short)iVar11;
  } while (iVar11 * 0x10000 >> 0x10 < 0x14);
  if (sVar10 < 0x14) {
    piVar13 = (int *)(param_1 + sVar10 * 0x18);
    *piVar13 = param_2;
    FUN_8007bbec(&local_50);
    *(undefined2 *)(piVar13 + 4) = local_40;
    puVar1 = auStack_38 + 3;
    uVar2 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar2) =
         *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uStack_44 >> (3 - uVar2) * 8;
    auStack_38._0_4_ = uStack_44;
    uVar2 = (int)piVar13 + 0xbU & 3;
    puVar3 = (uint *)(((int)piVar13 + 0xbU) - uVar2);
    *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | uStack_44 >> (3 - uVar2) * 8;
    uVar2 = (uint)(piVar13 + 2) & 3;
    puVar3 = (uint *)((int)(piVar13 + 2) - uVar2);
    *puVar3 = *puVar3 & 0xffffffffU >> (4 - uVar2) * 8 | uStack_44 << uVar2 * 8;
    *(undefined1 *)(piVar13 + 5) = local_3e;
    cVar5 = FUN_80013d10(blbHeaderBufferBase,piVar13 + 3,1);
    if (cVar5 == '\0') {
      *(undefined2 *)((int)piVar13 + 0x12) = 0;
    }
    else {
      uVar6 = GetClut((int)(short)piVar13[3],(int)*(short *)((int)piVar13 + 0xe));
      *(u_short *)((int)piVar13 + 0x12) = uVar6;
    }
    LoadClut(local_4c,(int)(short)piVar13[3],(int)*(short *)((int)piVar13 + 0xe));
    DrawSync(0);
    piVar9 = (int *)AllocateFromHeap(blbHeaderBufferBase,0x14,(short)piVar13[4],0);
    psVar12 = (short *)((int)piVar9 + 6);
    piVar13[1] = (int)piVar9;
    for (uVar14 = 0; puVar4 = blbHeaderBufferBase,
        (int)(short)uVar14 < (int)(uint)*(ushort *)(piVar13 + 4); uVar14 = uVar14 + 1) {
      iVar8 = local_50 + (uint)uVar14 * 0x24;
      *piVar9 = iVar8;
      uVar7 = *(short *)(iVar8 + 10) + 3U & 0xfffc;
      cVar5 = FUN_800138f0(puVar4,piVar9 + 1,1,(int)(short)uVar7,(int)*(short *)(iVar8 + 0xc));
      *(char *)(psVar12 + 5) = cVar5;
      if (cVar5 != '\0') {
        uVar6 = GetTPage(1,0,(int)psVar12[-1] & 0xffffffc0,(int)*psVar12 & 0xffffff00);
        psVar12[3] = uVar6;
        *(byte *)(psVar12 + 4) = (*(byte *)(psVar12 + -1) & 0x3f) << 1;
        *(char *)((int)psVar12 + 9) = (char)*psVar12;
        iVar11 = (int)(short)uVar7;
        p = (u_long *)AllocateFromHeap(blbHeaderBufferBase,1,iVar11 * *(short *)(iVar8 + 0xc),0);
        memset(p,uVar7 * *(short *)(iVar8 + 0xc),0);
        RenderSprite(&local_50,uVar14,p,iVar11,0,0);
        local_30.x = psVar12[-1];
        local_30.y = *psVar12;
        local_30.w = (short)(iVar11 >> 1);
        local_30.h = *(short *)(iVar8 + 0xc);
        LoadImage(&local_30,p);
        FreeFromHeap(blbHeaderBufferBase,p,0,0);
        DrawSync(0);
      }
      psVar12 = psVar12 + 10;
      piVar9 = piVar9 + 5;
    }
  }
  return;
}



// Iterates an array of sprite hash IDs (terminated by 0) and calls LoadSpriteFramesToVRAM for each
// non-zero entry.

void LoadSpriteHashArrayToVRAM(undefined4 param_1,int *param_2)

{
  int iVar1;
  
  iVar1 = *param_2;
  while (iVar1 != 0) {
    iVar1 = *param_2;
    param_2 = param_2 + 1;
    LoadSpriteFramesToVRAM(param_1,iVar1);
    iVar1 = *param_2;
  }
  return;
}



void FreeLayerRenderSlot(int param_1,uint param_2)

{
  int iVar1;
  undefined2 *puVar2;
  undefined4 *puVar3;
  int iVar4;
  
  iVar1 = param_1 + (param_2 & 0xff) * 0x18;
  if (*(short *)(iVar1 + 0x12) != 0) {
    FUN_80013f50(blbHeaderBufferBase,iVar1 + 0xc);
  }
  iVar4 = 0;
  if (*(short *)(iVar1 + 0x10) != 0) {
    puVar2 = (undefined2 *)(*(int *)(iVar1 + 4) + 10);
    do {
      if (*(char *)(puVar2 + 3) != '\0') {
        FUN_80013ab0(blbHeaderBufferBase,*(undefined4 *)(puVar2 + -3),CONCAT22(*puVar2,puVar2[-1]));
      }
      iVar4 = iVar4 + 1;
      puVar2 = puVar2 + 10;
    } while (iVar4 * 0x10000 >> 0x10 < (int)(uint)*(ushort *)(iVar1 + 0x10));
  }
  puVar3 = (undefined4 *)(param_1 + (param_2 & 0xff) * 0x18);
  FreeFromHeap(blbHeaderBufferBase,puVar3[1],0,0);
  *puVar3 = 0;
  return;
}



void FreeAllLayerRenderSlots(int param_1)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = 0;
  iVar1 = 0;
  do {
    if (*(int *)(param_1 + (iVar1 >> 0x10) * 0x18) != 0) {
      FreeLayerRenderSlot(param_1,uVar2 & 0xff);
    }
    uVar2 = uVar2 + 1;
    iVar1 = uVar2 * 0x10000;
  } while ((int)(uVar2 * 0x10000) >> 0x10 < 0x14);
  return;
}



// Zeros a 32-bit entity field.
// 
// Called from InitFullEntityWithAnimation @ 0x8001C6C8 during entity initialization.
// 
// Algorithm:
// 1. Sets *param_1 = 0
// 
// Parameters:
// - param_1: Pointer to u32 field
// 
// Cross-References:
// - Called by: InitFullEntityWithAnimation @ 0x8001C6C8 (with entity+0x8C)
// 
// Notes:
// - Simple utility to zero a field
// - Used during entity initialization to clear state
// - Called with entity+0x8C offset (likely state flags or counter)
// 
// Verified via Ghidra decompilation 2025-01-13.

void ZeroEntityField(undefined4 *param_1)

{
  *param_1 = 0;
  return;
}



void FUN_800195b0(undefined4 *param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  
  iVar3 = 0;
  iVar1 = 0;
  do {
    piVar2 = (int *)(g_pOrderingTableBase + (iVar1 >> 0x10) * 0x18);
    iVar3 = iVar3 + 1;
    if (*piVar2 == param_2) goto LAB_80019604;
    iVar1 = iVar3 * 0x10000;
  } while (iVar3 * 0x10000 >> 0x10 < 0x14);
  piVar2 = (int *)0x0;
LAB_80019604:
  *param_1 = piVar2;
  return;
}



undefined2 FUN_8001963c(int *param_1)

{
  return *(undefined2 *)(*param_1 + 0x10);
}



undefined4 FUN_80019650(int *param_1,uint param_2)

{
  return *(undefined4 *)((param_2 & 0xffff) * 0x14 + *(int *)(*param_1 + 4));
}



void FUN_800196d8(void)

{
  FreeAllLayerRenderSlots(&null_00000000h_8009ae58);
  return;
}



void FUN_80019700(void)

{
  short sVar1;
  int iVar2;
  
  iVar2 = 0;
  do {
    sVar1 = (short)iVar2;
    iVar2 = iVar2 + 1;
    (&null_00000000h_8009ae58)[sVar1 * 6] = 0;
  } while (iVar2 * 0x10000 >> 0x10 < 0x14);
  return;
}



// Initializes menu/UI entity with standard vtable.
// 
// Called from ShowPauseMenuHUD @ 0x8002B22C to create pause menu shadow entity.
// 
// Algorithm:
// 1. Sets vtable @ entity+0x0C = 0x800104AC
// 2. Zeros positions/state:
//    - entity+0x00 = 0
//    - entity+0x02 = 0
//    - entity+0x04 = 0
//    - entity+0x06 = 0
//    - entity+0x08 = 0
//    - entity+0x0A = 0
// 3. Stores param_2 @ entity+0x10
// 4. Sets enable flag @ entity+0x14 = 1
// 5. Zeros entity+0x12 = 0
// 
// Parameters:
// - param_1: Entity structure pointer (u16*)
// - param_2: Size or ID value (u16)
// 
// Entity Structure (minimum 0x16 bytes):
// - +0x00-0x0A: Zeroed fields (x, y, vx, vy, state)
// - +0x0C: Vtable pointer (0x800104AC)
// - +0x10: Size/ID parameter
// - +0x12: Zeroed field
// - +0x14: Enable flag (1)
// 
// Cross-References:
// - Called by: ShowPauseMenuHUD @ 0x8002B22C
// - Vtable: 0x800104AC (menu entity methods)
// 
// Notes:
// - Similar to InitBasicEntityWithVtable but:
//   * Uses different vtable (0x800104AC vs 0x8001039C)
//   * Zeros more fields (6 u16s vs 4)
//   * Parameter stored at different offset (+0x10 vs +0x08)
//   * Enable flag at different offset (+0x14 vs +0x0A)
// - Used specifically for pause menu UI elements
// 
// Verified via Ghidra decompilation 2025-01-13.

void InitMenuEntityWithVtable(undefined2 *param_1,undefined2 param_2)

{
  *(undefined **)(param_1 + 0xc) = &DAT_800104ac;
  *param_1 = 0;
  param_1[1] = 0;
  *(undefined4 *)(param_1 + 2) = 0;
  param_1[4] = 0;
  param_1[5] = 0;
  *(undefined4 *)(param_1 + 6) = 0;
  param_1[8] = param_2;
  *(undefined1 *)(param_1 + 10) = 1;
  param_1[9] = 0;
  return;
}



void FUN_80019790(undefined2 *param_1,undefined1 param_2)

{
  undefined *puVar1;
  u_short uVar2;
  
  *(undefined **)(param_1 + 0xc) = &DAT_800104ac;
  *param_1 = 0;
  param_1[1] = 0;
  *(undefined4 *)(param_1 + 2) = 0;
  *(undefined1 *)(param_1 + 10) = 1;
  *(undefined1 *)(param_1 + 0x1a) = param_2;
  puVar1 = blbHeaderBufferBase;
  param_1[4] = 0;
  param_1[5] = 0;
  *(undefined4 *)(param_1 + 6) = 0;
  param_1[8] = 0;
  param_1[9] = 0;
  *(undefined **)(param_1 + 0xc) = &DAT_8001048c;
  FUN_80013d10(puVar1,param_1 + 0x14,param_2);
  uVar2 = GetClut((int)(short)param_1[0x14],(int)(short)param_1[0x15]);
  param_1[0x16] = uVar2;
  *(undefined4 *)(param_1 + 0xe) = 0;
  *(undefined1 *)((int)param_1 + 0x35) = 0;
  *(undefined1 *)(param_1 + 0x1b) = 0xff;
  *(undefined1 *)((int)param_1 + 0x37) = 0;
  *(undefined1 *)(param_1 + 0x1c) = 1;
  *(undefined1 *)((int)param_1 + 0x39) = 0;
  *(undefined4 *)(param_1 + 0x10) = 0;
  *(undefined4 *)(param_1 + 0x12) = 0;
  param_1[0x17] = 0;
  param_1[0x18] = 0;
  param_1[0x19] = 0;
  *(undefined1 *)(param_1 + 10) = 0;
  return;
}



void FUN_80019cf8(int param_1,u_long *param_2)

{
  RECT local_10;
  
  if (*(char *)(param_1 + 0x34) == '\0') {
    local_10.x = *(short *)(param_1 + 0x28);
    local_10.y = *(short *)(param_1 + 0x2a);
    local_10.w = 0x10;
    local_10.h = 1;
    LoadImage(&local_10,param_2);
  }
  else if (*(char *)(param_1 + 0x34) == '\x01') {
    LoadClut(param_2,(int)*(short *)(param_1 + 0x28),(int)*(short *)(param_1 + 0x2a));
  }
  return;
}



void FUN_80019d74(undefined *param_1,undefined4 *param_2,uint param_3)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  undefined4 uVar6;
  uint uVar7;
  undefined *puVar8;
  undefined4 uVar9;
  uint uVar10;
  uint uVar11;
  undefined4 uVar12;
  uint uVar13;
  undefined4 *puVar14;
  undefined4 *puVar15;
  undefined8 uVar16;
  
  if (param_1[0x34] == '\0') {
    uVar2 = *(uint *)(param_1 + 0x1c);
    uVar10 = 2;
    uVar5 = 0;
    puVar8 = param_1;
    if (uVar2 == 0) {
      param_3 = 0x10;
      puVar8 = blbHeaderBufferBase;
      uVar16 = AllocateFromHeap();
      uVar5 = (uint)((ulonglong)uVar16 >> 0x20);
      *(int *)(param_1 + 0x1c) = (int)uVar16;
      uVar2 = *(uint *)(param_1 + 0x1c);
    }
    uVar4 = (int)param_2 + 3U & 3;
    uVar3 = (uint)param_2 & 3;
    uVar3 = (*(int *)(((int)param_2 + 3U) - uVar4) << (3 - uVar4) * 8 |
            uVar5 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar3) * 8 |
            *(uint *)((int)param_2 - uVar3) >> uVar3 * 8;
    uVar5 = (int)param_2 + 7U & 3;
    uVar4 = (uint)(param_2 + 1) & 3;
    uVar7 = (*(int *)(((int)param_2 + 7U) - uVar5) << (3 - uVar5) * 8 |
            (uint)puVar8 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar4) * 8 |
            *(uint *)((int)(param_2 + 1) - uVar4) >> uVar4 * 8;
    uVar5 = (int)param_2 + 0xbU & 3;
    uVar4 = (uint)(param_2 + 2) & 3;
    uVar11 = (*(int *)(((int)param_2 + 0xbU) - uVar5) << (3 - uVar5) * 8 |
             uVar10 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar4) * 8 |
             *(uint *)((int)(param_2 + 2) - uVar4) >> uVar4 * 8;
    uVar5 = (int)param_2 + 0xfU & 3;
    uVar10 = (uint)(param_2 + 3) & 3;
    uVar13 = (*(int *)(((int)param_2 + 0xfU) - uVar5) << (3 - uVar5) * 8 |
             param_3 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar10) * 8 |
             *(uint *)((int)(param_2 + 3) - uVar10) >> uVar10 * 8;
    uVar5 = uVar2 + 3 & 3;
    puVar1 = (uint *)((uVar2 + 3) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar3 >> (3 - uVar5) * 8;
    uVar5 = uVar2 & 3;
    *(uint *)(uVar2 - uVar5) =
         *(uint *)(uVar2 - uVar5) & 0xffffffffU >> (4 - uVar5) * 8 | uVar3 << uVar5 * 8;
    uVar5 = uVar2 + 7 & 3;
    puVar1 = (uint *)((uVar2 + 7) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar7 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 4 & 3;
    puVar1 = (uint *)((uVar2 + 4) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar7 << uVar5 * 8;
    uVar5 = uVar2 + 0xb & 3;
    puVar1 = (uint *)((uVar2 + 0xb) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar11 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 8 & 3;
    puVar1 = (uint *)((uVar2 + 8) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar11 << uVar5 * 8;
    uVar5 = uVar2 + 0xf & 3;
    puVar1 = (uint *)((uVar2 + 0xf) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar13 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 0xc & 3;
    puVar1 = (uint *)((uVar2 + 0xc) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar13 << uVar5 * 8;
    uVar5 = (int)param_2 + 0x13U & 3;
    uVar10 = (uint)(param_2 + 4) & 3;
    uVar4 = (*(int *)(((int)param_2 + 0x13U) - uVar5) << (3 - uVar5) * 8 |
            uVar3 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar10) * 8 |
            *(uint *)((int)(param_2 + 4) - uVar10) >> uVar10 * 8;
    uVar5 = (int)param_2 + 0x17U & 3;
    uVar10 = (uint)(param_2 + 5) & 3;
    uVar3 = (*(int *)(((int)param_2 + 0x17U) - uVar5) << (3 - uVar5) * 8 |
            uVar7 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar10) * 8 |
            *(uint *)((int)(param_2 + 5) - uVar10) >> uVar10 * 8;
    uVar5 = (int)param_2 + 0x1bU & 3;
    uVar10 = (uint)(param_2 + 6) & 3;
    uVar7 = (*(int *)(((int)param_2 + 0x1bU) - uVar5) << (3 - uVar5) * 8 |
            uVar11 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar10) * 8 |
            *(uint *)((int)(param_2 + 6) - uVar10) >> uVar10 * 8;
    uVar5 = (int)param_2 + 0x1fU & 3;
    uVar10 = (uint)(param_2 + 7) & 3;
    uVar10 = (*(int *)(((int)param_2 + 0x1fU) - uVar5) << (3 - uVar5) * 8 |
             uVar13 & 0xffffffffU >> (uVar5 + 1) * 8) & -1 << (4 - uVar10) * 8 |
             *(uint *)((int)(param_2 + 7) - uVar10) >> uVar10 * 8;
    uVar5 = uVar2 + 0x13 & 3;
    puVar1 = (uint *)((uVar2 + 0x13) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar4 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 0x10 & 3;
    puVar1 = (uint *)((uVar2 + 0x10) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar4 << uVar5 * 8;
    uVar5 = uVar2 + 0x17 & 3;
    puVar1 = (uint *)((uVar2 + 0x17) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar3 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 0x14 & 3;
    puVar1 = (uint *)((uVar2 + 0x14) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar3 << uVar5 * 8;
    uVar5 = uVar2 + 0x1b & 3;
    puVar1 = (uint *)((uVar2 + 0x1b) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar7 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 0x18 & 3;
    puVar1 = (uint *)((uVar2 + 0x18) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar7 << uVar5 * 8;
    uVar5 = uVar2 + 0x1f & 3;
    puVar1 = (uint *)((uVar2 + 0x1f) - uVar5);
    *puVar1 = *puVar1 & -1 << (uVar5 + 1) * 8 | uVar10 >> (3 - uVar5) * 8;
    uVar5 = uVar2 + 0x1c & 3;
    puVar1 = (uint *)((uVar2 + 0x1c) - uVar5);
    *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar5) * 8 | uVar10 << uVar5 * 8;
  }
  else if (param_1[0x34] == '\x01') {
    uVar2 = 2;
    uVar5 = 1;
    puVar8 = param_1;
    if (*(int *)(param_1 + 0x1c) == 0) {
      puVar8 = blbHeaderBufferBase;
      uVar16 = AllocateFromHeap(blbHeaderBufferBase,2,0x100,0);
      uVar5 = (uint)((ulonglong)uVar16 >> 0x20);
      *(int *)(param_1 + 0x1c) = (int)uVar16;
    }
    puVar14 = *(undefined4 **)(param_1 + 0x1c);
    uVar10 = ((uint)param_2 | (uint)puVar14) & 3;
    puVar15 = param_2 + 0x80;
    if (uVar10 == 0) {
      do {
        uVar6 = param_2[1];
        uVar9 = param_2[2];
        uVar12 = param_2[3];
        *puVar14 = *param_2;
        puVar14[1] = uVar6;
        puVar14[2] = uVar9;
        puVar14[3] = uVar12;
        param_2 = param_2 + 4;
        puVar14 = puVar14 + 4;
      } while (param_2 != puVar15);
    }
    else {
      do {
        uVar4 = (int)param_2 + 3U & 3;
        uVar3 = (uint)param_2 & 3;
        uVar10 = (*(int *)(((int)param_2 + 3U) - uVar4) << (3 - uVar4) * 8 |
                 uVar10 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar3) * 8 |
                 *(uint *)((int)param_2 - uVar3) >> uVar3 * 8;
        uVar4 = (int)param_2 + 7U & 3;
        uVar3 = (uint)(param_2 + 1) & 3;
        uVar5 = (*(int *)(((int)param_2 + 7U) - uVar4) << (3 - uVar4) * 8 |
                uVar5 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar3) * 8 |
                *(uint *)((int)(param_2 + 1) - uVar3) >> uVar3 * 8;
        uVar4 = (int)param_2 + 0xbU & 3;
        uVar3 = (uint)(param_2 + 2) & 3;
        puVar8 = (undefined *)
                 ((*(int *)(((int)param_2 + 0xbU) - uVar4) << (3 - uVar4) * 8 |
                  (uint)puVar8 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar3) * 8 |
                 *(uint *)((int)(param_2 + 2) - uVar3) >> uVar3 * 8);
        uVar4 = (int)param_2 + 0xfU & 3;
        uVar3 = (uint)(param_2 + 3) & 3;
        uVar2 = (*(int *)(((int)param_2 + 0xfU) - uVar4) << (3 - uVar4) * 8 |
                uVar2 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar3) * 8 |
                *(uint *)((int)(param_2 + 3) - uVar3) >> uVar3 * 8;
        uVar4 = (int)puVar14 + 3U & 3;
        puVar1 = (uint *)(((int)puVar14 + 3U) - uVar4);
        *puVar1 = *puVar1 & -1 << (uVar4 + 1) * 8 | uVar10 >> (3 - uVar4) * 8;
        uVar4 = (uint)puVar14 & 3;
        *(uint *)((int)puVar14 - uVar4) =
             *(uint *)((int)puVar14 - uVar4) & 0xffffffffU >> (4 - uVar4) * 8 | uVar10 << uVar4 * 8;
        uVar4 = (int)puVar14 + 7U & 3;
        puVar1 = (uint *)(((int)puVar14 + 7U) - uVar4);
        *puVar1 = *puVar1 & -1 << (uVar4 + 1) * 8 | uVar5 >> (3 - uVar4) * 8;
        uVar4 = (uint)(puVar14 + 1) & 3;
        puVar1 = (uint *)((int)(puVar14 + 1) - uVar4);
        *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar4) * 8 | uVar5 << uVar4 * 8;
        uVar4 = (int)puVar14 + 0xbU & 3;
        puVar1 = (uint *)(((int)puVar14 + 0xbU) - uVar4);
        *puVar1 = *puVar1 & -1 << (uVar4 + 1) * 8 | (uint)puVar8 >> (3 - uVar4) * 8;
        uVar4 = (uint)(puVar14 + 2) & 3;
        puVar1 = (uint *)((int)(puVar14 + 2) - uVar4);
        *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar4) * 8 | (int)puVar8 << uVar4 * 8;
        uVar4 = (int)puVar14 + 0xfU & 3;
        puVar1 = (uint *)(((int)puVar14 + 0xfU) - uVar4);
        *puVar1 = *puVar1 & -1 << (uVar4 + 1) * 8 | uVar2 >> (3 - uVar4) * 8;
        uVar4 = (uint)(puVar14 + 3) & 3;
        puVar1 = (uint *)((int)(puVar14 + 3) - uVar4);
        *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar4) * 8 | uVar2 << uVar4 * 8;
        param_2 = param_2 + 4;
        puVar14 = puVar14 + 4;
      } while (param_2 != puVar15);
    }
  }
  return;
}



void FUN_80019f2c(undefined4 *param_1,undefined1 param_2,undefined1 param_3,undefined1 param_4,
                 undefined1 param_5)

{
  if (param_1[7] != 0) {
    *(undefined1 *)((int)param_1 + 0x35) = param_3;
    *(undefined1 *)((int)param_1 + 0x36) = param_4;
    *(undefined1 *)((int)param_1 + 0x37) = param_5;
    *(undefined1 *)(param_1 + 0xe) = param_2;
    *(undefined1 *)((int)param_1 + 0x39) = param_2;
    *param_1 = 0xffff0000;
    param_1[1] = &LAB_8001991c;
  }
  return;
}



void InitEntityStruct(undefined2 *param_1,undefined2 param_2)

{
  *(undefined **)(param_1 + 0xc) = &DAT_800104ac;
  *param_1 = 0;
  param_1[1] = 0;
  *(undefined4 *)(param_1 + 2) = 0;
  *(undefined1 *)(param_1 + 10) = 1;
  param_1[4] = 0;
  param_1[5] = 0;
  *(undefined4 *)(param_1 + 6) = 0;
  param_1[8] = param_2;
  param_1[9] = 0;
  *(undefined **)(param_1 + 0xc) = &DAT_8001046c;
  *(undefined4 *)(param_1 + 4) = 0xffff0000;
  *(undefined1 **)(param_1 + 6) = &LAB_80020288;
  param_1[0xe] = 0;
  param_1[0xf] = 0;
  *(undefined4 *)(param_1 + 0x10) = 0;
  param_1[0x12] = 0;
  param_1[0x13] = 0;
  *(undefined4 *)(param_1 + 0x14) = 0;
  param_1[0x16] = 0;
  param_1[0x17] = 0;
  *(undefined4 *)(param_1 + 0x18) = 0;
  param_1[0x34] = 0;
  param_1[0x35] = 0;
  *(undefined4 *)(param_1 + 0x1a) = 0;
  *(undefined1 *)(param_1 + 0x3a) = 0;
  *(undefined1 *)((int)param_1 + 0x75) = 0;
  param_1[0x1c] = 0;
  param_1[0x1d] = 0;
  param_1[0x1e] = 0;
  param_1[0x1f] = 0;
  param_1[0x20] = 0;
  param_1[0x21] = 0;
  param_1[0x22] = 0;
  param_1[0x23] = 0;
  param_1[0x24] = 0;
  param_1[0x25] = 0;
  param_1[0x26] = 0;
  param_1[0x27] = 0;
  *(undefined1 *)((int)param_1 + 0x77) = 0;
  param_1[0x38] = 0;
  *(undefined4 *)(param_1 + 0x28) = 0x10000;
  *(undefined4 *)(param_1 + 0x2a) = 0x10000;
  *(undefined4 *)(param_1 + 0x2c) = 0x10000;
  *(undefined4 *)(param_1 + 0x2e) = 0x10000;
  param_1[0x39] = 0;
  *(undefined4 *)(param_1 + 0x30) = 0x10000;
  *(undefined4 *)(param_1 + 0x32) = 0x10000;
  param_1[0x36] = 0;
  param_1[0x37] = 0;
  *(undefined1 *)(param_1 + 0x3b) = 0;
  return;
}



int ScaleXByEntityScale(int param_1,short param_2)

{
  int iVar1;
  
  iVar1 = (int)param_2;
  if (*(int *)(param_1 + 0x58) != 0x10000) {
    iVar1 = iVar1 * *(int *)(param_1 + 0x58) >> 0x10;
  }
  return iVar1;
}



int ScaleYByEntityScale(int param_1,short param_2)

{
  int iVar1;
  
  iVar1 = (int)param_2;
  if (*(int *)(param_1 + 0x5c) != 0x10000) {
    iVar1 = iVar1 * *(int *)(param_1 + 0x5c) >> 0x10;
  }
  return iVar1;
}



int EntityCallback_8001a2cc(undefined4 param_1,short param_2)

{
  return (int)param_2 + (int)*(short *)(g_GameStatePtr + 0x44);
}



int EntityCallback_8001a2e8(undefined4 param_1,short param_2)

{
  return (int)param_2 + (int)*(short *)(g_GameStatePtr + 0x46);
}



void FUN_8001a3ac(int param_1,short param_2,short param_3,short param_4,undefined1 param_5)

{
  undefined4 uVar1;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
  uVar1 = InitSpriteRenderContext
                    (uVar1,(int)param_2,(int)(short)(param_3 + 3U & 0xfffc),(int)param_4,param_5);
  *(undefined4 *)(param_1 + 0x34) = uVar1;
  return;
}



void FUN_8001a448(int param_1,uint param_2)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  undefined8 uVar5;
  
  uVar5 = FUN_8001a49c();
  uVar1 = param_1 + 0x4bU & 3;
  uVar4 = param_1 + 0x48U & 3;
  uVar3 = (*(int *)((param_1 + 0x4bU) - uVar1) << (3 - uVar1) * 8 |
          (uint)uVar5 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar4) * 8 |
          *(uint *)((param_1 + 0x48U) - uVar4) >> uVar4 * 8;
  uVar1 = param_1 + 0x4fU & 3;
  uVar4 = param_1 + 0x4cU & 3;
  uVar4 = (*(int *)((param_1 + 0x4fU) - uVar1) << (3 - uVar1) * 8 |
          (uint)((ulonglong)uVar5 >> 0x20) & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar4) * 8
          | *(uint *)((param_1 + 0x4cU) - uVar4) >> uVar4 * 8;
  uVar1 = param_2 + 3 & 3;
  puVar2 = (uint *)((param_2 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar3 >> (3 - uVar1) * 8;
  uVar1 = param_2 & 3;
  *(uint *)(param_2 - uVar1) =
       *(uint *)(param_2 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar3 << uVar1 * 8;
  uVar1 = param_2 + 7 & 3;
  puVar2 = (uint *)((param_2 + 7) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar4 >> (3 - uVar1) * 8;
  uVar1 = param_2 + 4 & 3;
  puVar2 = (uint *)((param_2 + 4) - uVar1);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | uVar4 << uVar1 * 8;
  return;
}



void FUN_8001a49c(int param_1,undefined4 param_2,short param_3)

{
  short sVar1;
  undefined2 uVar2;
  int iVar3;
  int iVar4;
  short sVar5;
  short in_t0;
  code *pcVar6;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  short local_50;
  short local_40;
  short local_28;
  
  if (*(char *)(param_1 + 0x77) != '\0') {
    return;
  }
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar4 = (int)*(short *)(param_1 + 0x26);
    sVar5 = *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x40);
    if (iVar4 == 0) {
      *(short *)(param_1 + 0x48) = sVar5;
    }
    else {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        param_3 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar3 = param_3 + iVar3;
      }
      uVar2 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
      *(undefined2 *)(param_1 + 0x48) = uVar2;
    }
    sVar5 = *(short *)(param_1 + 0x44) + *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x40) +
            -1;
    iVar4 = (int)*(short *)(param_1 + 0x26);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      sVar1 = *(short *)(param_1 + 0x24);
      unaff_s2 = unaff_s4;
      goto joined_r0x8001a6e4;
    }
LAB_8001a714:
    *(short *)(param_1 + 0x4c) = sVar5;
  }
  else {
    sVar5 = ((*(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x40)) - *(short *)(param_1 + 0x44))
            + 1;
    iVar4 = (int)*(short *)(param_1 + 0x26);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar3 = in_t0 + iVar3;
      }
      sVar5 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
    }
    *(short *)(param_1 + 0x48) = sVar5;
    iVar4 = (int)*(short *)(param_1 + 0x26);
    sVar5 = *(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x40);
    if (iVar4 == 0) goto LAB_8001a714;
    if (iVar4 < 1) {
      pcVar6 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar6 = *(code **)(iVar3 + -4);
    }
    sVar1 = *(short *)(param_1 + 0x24);
joined_r0x8001a6e4:
    iVar3 = (int)sVar1;
    if (0 < iVar4 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    uVar2 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
    *(undefined2 *)(param_1 + 0x4c) = uVar2;
  }
  if (*(char *)(param_1 + 0x75) == '\0') {
    iVar4 = (int)*(short *)(param_1 + 0x2e);
    sVar5 = *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x42);
    if (iVar4 == 0) {
      *(short *)(param_1 + 0x4a) = sVar5;
    }
    else {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar4 << 0x10) {
        iVar3 = unaff_s6 + iVar3;
      }
      uVar2 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
      *(undefined2 *)(param_1 + 0x4a) = uVar2;
    }
    sVar5 = *(short *)(param_1 + 0x46) + *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x42) +
            -1;
    iVar4 = (int)*(short *)(param_1 + 0x2e);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_28 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      sVar1 = *(short *)(param_1 + 0x2c);
      goto joined_r0x8001a95c;
    }
  }
  else {
    sVar5 = ((*(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0x42)) - *(short *)(param_1 + 0x46))
            + 1;
    iVar4 = (int)*(short *)(param_1 + 0x2e);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_50 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar4 << 0x10) {
        iVar3 = local_50 + iVar3;
      }
      sVar5 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
    }
    *(short *)(param_1 + 0x4a) = sVar5;
    iVar4 = (int)*(short *)(param_1 + 0x2e);
    sVar5 = *(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0x42);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar6 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_40 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar6 = *(code **)(iVar3 + -4);
      }
      sVar1 = *(short *)(param_1 + 0x2c);
      local_28 = local_40;
joined_r0x8001a95c:
      iVar3 = (int)sVar1;
      if (0 < iVar4 << 0x10) {
        iVar3 = local_28 + iVar3;
      }
      uVar2 = (*pcVar6)(param_1 + iVar3,(int)sVar5);
      *(undefined2 *)(param_1 + 0x4e) = uVar2;
      goto LAB_8001a9a0;
    }
  }
  *(short *)(param_1 + 0x4e) = sVar5;
LAB_8001a9a0:
  *(undefined1 *)(param_1 + 0x77) = 1;
  return;
}



void FUN_8001aab4(int param_1,char param_2)

{
  if (param_2 == '\x02') {
    param_2 = *(char *)(param_1 + 0x74) == '\0';
  }
  *(char *)(param_1 + 0x74) = param_2;
  *(undefined1 *)(param_1 + 0x76) = 1;
  return;
}



bool FUN_8001b360(int param_1,short param_2,short param_3)

{
  bool bVar1;
  
  FUN_8001a49c();
  bVar1 = false;
  if (((*(short *)(param_1 + 0x48) <= param_2) && (param_2 <= *(short *)(param_1 + 0x4c))) &&
     (*(short *)(param_1 + 0x4a) <= param_3)) {
    bVar1 = param_3 <= *(short *)(param_1 + 0x4e);
  }
  return bVar1;
}



bool FUN_8001b3f0(int param_1,undefined4 param_2,undefined4 param_3)

{
  bool bVar1;
  undefined2 local_res4;
  undefined2 uStackX_6;
  undefined2 local_res8;
  undefined2 uStackX_a;
  
  FUN_8001a49c();
  local_res8 = (short)param_3;
  bVar1 = false;
  if (((*(short *)(param_1 + 0x48) <= local_res8) &&
      (local_res4 = (short)param_2, bVar1 = false, local_res4 <= *(short *)(param_1 + 0x4c))) &&
     (uStackX_a = (short)((uint)param_3 >> 0x10), bVar1 = false,
     *(short *)(param_1 + 0x4a) <= uStackX_a)) {
    uStackX_6 = (short)((uint)param_2 >> 0x10);
    bVar1 = uStackX_6 <= *(short *)(param_1 + 0x4e);
  }
  return bVar1;
}



// Collision Check Wrapper
// 
// Wraps CheckEntityCollision @ 0x800226f8 with entity bounding box data.
// 
// PARAMETERS:
//   param_1 - Entity pointer
//   param_2 - Type mask (2=clayball, etc.)
//   param_3 - Message code (0x1000=COLLECTED, 0x1007=alternate)
//   param_4 - Message value
// 
// Passes entity bbox (entity+0x48/0x4c) to collision system.
// 
// Referenced in: ClayballTickCallback, docs/reference/entity-types.md

void CollisionCheckWrapper(int param_1,undefined2 param_2,undefined2 param_3,undefined4 param_4)

{
  FUN_8001a49c();
  CheckEntityCollision
            (g_GameStatePtr,*(undefined4 *)(param_1 + 0x48),*(undefined4 *)(param_1 + 0x4c),param_2,
             param_3,param_4,param_1);
  return;
}



void FUN_8001b594(int param_1,undefined2 param_2,undefined2 param_3,undefined4 param_4)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  short in_t0;
  code *pcVar5;
  short unaff_s2;
  
  iVar4 = (int)*(short *)(param_1 + 0x26);
  sVar1 = *(short *)(param_1 + 0x68);
  if (iVar4 != 0) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      in_t0 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar4 << 0x10) {
      iVar3 = in_t0 + iVar3;
    }
    sVar1 = (*pcVar5)(param_1 + iVar3,(int)sVar1);
  }
  iVar4 = (int)*(short *)(param_1 + 0x2e);
  sVar2 = *(short *)(param_1 + 0x6a);
  if (iVar4 != 0) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar4 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    sVar2 = (*pcVar5)(param_1 + iVar3,(int)sVar2);
  }
  FUN_800224d0(g_GameStatePtr,(int)sVar1,(int)sVar2,param_2,param_3,param_4,param_1);
  return;
}



undefined1 FUN_8001b8c4(int param_1,undefined2 param_2)

{
  undefined1 uVar1;
  
  FUN_8001a49c();
  uVar1 = FUN_80023194(g_GameStatePtr,*(undefined4 *)(param_1 + 0x48),
                       *(undefined4 *)(param_1 + 0x4c),param_2);
  return uVar1;
}



undefined4 FUN_8001b92c(int param_1)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  short in_t0;
  code *pcVar5;
  short sVar6;
  short sVar7;
  short unaff_s4;
  short unaff_s6;
  short local_58;
  short local_56;
  short local_30;
  
  if (*(char *)(param_1 + 0x74) == '\0') {
    local_58 = *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x38);
    sVar1 = *(short *)(param_1 + 0x3c) + *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x38) +
            -1;
  }
  else {
    local_58 = ((*(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x38)) -
               *(short *)(param_1 + 0x3c)) + 1;
    sVar1 = *(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x38);
  }
  if (*(char *)(param_1 + 0x75) == '\0') {
    local_56 = *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x3a);
    sVar2 = *(short *)(param_1 + 0x3e) + *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x3a) +
            -1;
  }
  else {
    local_56 = ((*(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0x3a)) -
               *(short *)(param_1 + 0x3e)) + 1;
    sVar2 = *(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0x3a);
  }
  if (*(int *)(param_1 + 0x60) == 0x10000) {
    sVar6 = *(short *)(g_GameStatePtr + 0x44);
  }
  else {
    sVar6 = (short)((uint)((int)*(short *)(g_GameStatePtr + 0x44) * *(int *)(param_1 + 0x60)) >>
                   0x10);
  }
  if (*(int *)(param_1 + 100) == 0x10000) {
    sVar7 = *(short *)(g_GameStatePtr + 0x46);
  }
  else {
    sVar7 = (short)((uint)((int)*(short *)(g_GameStatePtr + 0x46) * *(int *)(param_1 + 100)) >> 0x10
                   );
  }
  iVar4 = (int)*(short *)(param_1 + 0x26);
  if (iVar4 != 0) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      in_t0 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar4 << 0x10) {
      iVar3 = in_t0 + iVar3;
    }
    sVar1 = (*pcVar5)(param_1 + iVar3,(int)sVar1);
  }
  if (-0x11 < (int)sVar1 - (int)sVar6) {
    iVar4 = (int)*(short *)(param_1 + 0x26);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar5 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar3 = unaff_s4 + iVar3;
      }
      local_58 = (*pcVar5)(param_1 + iVar3,(int)local_58);
    }
    if ((int)local_58 - (int)sVar6 <= *(short *)blbHeaderBufferBase + 0x10) {
      iVar4 = (int)*(short *)(param_1 + 0x2e);
      if (iVar4 != 0) {
        if (iVar4 < 1) {
          pcVar5 = *(code **)(param_1 + 0x30);
        }
        else {
          iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar5 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(param_1 + 0x2c);
        if (0 < iVar4 << 0x10) {
          iVar3 = unaff_s6 + iVar3;
        }
        sVar2 = (*pcVar5)(param_1 + iVar3,(int)sVar2);
      }
      if (-0x11 < (int)sVar2 - (int)sVar7) {
        iVar4 = (int)*(short *)(param_1 + 0x2e);
        if (iVar4 != 0) {
          if (iVar4 < 1) {
            pcVar5 = *(code **)(param_1 + 0x30);
          }
          else {
            iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
            local_30 = (short)*(undefined4 *)(iVar3 + -8);
            pcVar5 = *(code **)(iVar3 + -4);
          }
          iVar3 = (int)*(short *)(param_1 + 0x2c);
          if (0 < iVar4 << 0x10) {
            iVar3 = local_30 + iVar3;
          }
          local_56 = (*pcVar5)(param_1 + iVar3,(int)local_56);
        }
        if ((int)local_56 - (int)sVar7 <= *(short *)(blbHeaderBufferBase + 2) + 0x10) {
          return 0;
        }
      }
    }
  }
  return 1;
}



bool FUN_8001c178(int param_1)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  short in_t2;
  code *pcVar5;
  short sVar6;
  short local_16;
  
  if (*(char *)(param_1 + 0x74) == '\0') {
    sVar1 = *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x38);
    sVar2 = *(short *)(param_1 + 0x3c) + *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0x38) +
            -1;
  }
  else {
    sVar1 = ((*(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x38)) - *(short *)(param_1 + 0x3c))
            + 1;
    sVar2 = *(short *)(param_1 + 0x68) - *(short *)(param_1 + 0x38);
  }
  if (*(char *)(param_1 + 0x75) == '\0') {
    local_16 = *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x3a);
  }
  else {
    local_16 = ((*(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0x3a)) -
               *(short *)(param_1 + 0x3e)) + 1;
  }
  if (*(int *)(param_1 + 100) == 0x10000) {
    sVar6 = *(short *)(g_GameStatePtr + 0x46);
  }
  else {
    sVar6 = (short)((uint)((int)*(short *)(g_GameStatePtr + 0x46) * *(int *)(param_1 + 100)) >> 0x10
                   );
  }
  iVar4 = (int)*(short *)(param_1 + 0x2e);
  if (iVar4 != 0) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar4 << 0x10) {
      iVar3 = in_t2 + iVar3;
    }
    local_16 = (*pcVar5)(param_1 + iVar3,(int)local_16,param_1,pcVar5,sVar1,sVar2);
  }
  return *(short *)(blbHeaderBufferBase + 2) + 0x10 < (int)local_16 - (int)sVar6;
}



void FUN_8001c364(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = *(int *)(g_GameStatePtr + 0x11c);
  if (iVar5 == 0x10000) {
    *(undefined4 *)(param_1 + 0x24) = 0;
    *(undefined4 *)(param_1 + 0x28) = 0;
    *(undefined4 *)(param_1 + 0x2c) = 0;
    *(undefined4 *)(param_1 + 0x30) = 0;
  }
  else {
    *(undefined4 *)(param_1 + 0x24) = 0xffff0000;
    *(code **)(param_1 + 0x28) = ScaleXByEntityScale;
    *(undefined4 *)(param_1 + 0x2c) = 0xffff0000;
    *(code **)(param_1 + 0x30) = ScaleYByEntityScale;
    *(int *)(param_1 + 0x58) = iVar5;
    iVar1 = *(int *)(param_1 + 0x58);
    iVar4 = (int)*(short *)(param_1 + 0x68) << 0x10;
    if (iVar1 == 0) {
      trap(0x1c00);
    }
    if ((iVar1 == -1) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    *(int *)(param_1 + 0x5c) = iVar5;
    iVar3 = *(int *)(param_1 + 0x5c);
    iVar2 = (int)*(short *)(param_1 + 0x6a) << 0x10;
    if (iVar3 == 0) {
      trap(0x1c00);
    }
    if ((iVar3 == -1) && (iVar2 == -0x80000000)) {
      trap(0x1800);
    }
    *(int *)(param_1 + 0x50) = iVar5;
    *(int *)(param_1 + 0x54) = iVar5;
    *(short *)(param_1 + 0x68) = (short)(iVar4 / iVar1);
    *(short *)(param_1 + 0x6a) = (short)(iVar2 / iVar3);
  }
  return;
}



void FUN_8001c4a4(int param_1,undefined4 param_2)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short sVar5;
  
  if (*(int *)(param_1 + 0x60) == 0x10000) {
    sVar5 = *(short *)(g_GameStatePtr + 0x44);
  }
  else {
    sVar5 = (short)((uint)((int)*(short *)(g_GameStatePtr + 0x44) * *(int *)(param_1 + 0x60)) >>
                   0x10);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  sVar1 = *(short *)(param_1 + 0x68);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      in_t0 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar2 = in_t0 + iVar2;
    }
    sVar1 = (*pcVar4)(param_1 + iVar2,(int)sVar1);
  }
  PlaySoundEffect(param_2,(int)sVar1 - (int)sVar5,0);
  return;
}



void FUN_8001c5b4(int param_1,int param_2)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short sVar5;
  
  if (-1 < param_2) {
    if (*(int *)(param_1 + 0x60) == 0x10000) {
      sVar5 = *(short *)(g_GameStatePtr + 0x44);
    }
    else {
      sVar5 = (short)((uint)((int)*(short *)(g_GameStatePtr + 0x44) * *(int *)(param_1 + 0x60)) >>
                     0x10);
    }
    iVar3 = (int)*(short *)(param_1 + 0x26);
    sVar1 = *(short *)(param_1 + 0x68);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar3 << 0x10) {
        iVar2 = in_t0 + iVar2;
      }
      sVar1 = (*pcVar4)(param_1 + iVar2,(int)sVar1);
    }
    FUN_8007ca28(param_2,(int)sVar1 - (int)sVar5);
  }
  return;
}



// Initializes complete entity structure with animation and sprite support.
// 
// Called from InitAlternateEntity @ 0x80033D3C and other entity initialization functions.
// 
// Algorithm:
// 1. Calls InitEntityStruct(entity, size) - basic entity setup
// 2. Sets vtable @ entity+0x18 = 0x8001044C
// 3. Calls ClearSpriteContextWrapper(entity + 0x78)
// 4. Calls ZeroEntityField(entity + 0x8C)
// 5. Calls InitEntityAnimationState(entity) - animation setup
// 
// Parameters:
// - param_1: Entity structure pointer
// - param_2: Size value (typically 0x44C for alternate entities)
// 
// Entity Structure (minimum 0x8C+ bytes):
// - +0x18: Vtable pointer (0x8001044C)
// - +0x78: Sprite context area (cleared)
// - +0x8C: Entity field (zeroed)
// - Additional animation state fields set by InitEntityAnimationState
// 
// Cross-References:
// - Called by: InitAlternateEntity @ 0x80033D3C
// - Calls: InitEntityStruct
// - Calls: ClearSpriteContextWrapper @ 0x8007BBC0
// - Calls: ZeroEntityField @ 0x8001954C
// - Calls: InitEntityAnimationState
// 
// Notes:
// - This is a high-level initialization function for complex entities
// - Sets up both rendering (sprite context) and logic (animation state)
// - Vtable 0x8001044C likely contains standard entity update/render methods
// 
// Verified via Ghidra decompilation 2025-01-13.

int InitFullEntityWithAnimation(int param_1,short param_2)

{
  InitEntityStruct(param_1,(int)param_2);
  *(undefined **)(param_1 + 0x18) = &DAT_8001044c;
  ClearSpriteContextWrapper(param_1 + 0x78);
  ZeroEntityField(param_1 + 0x8c);
  InitEntityAnimationState(param_1);
  return param_1;
}



// Core entity sprite initialization. Takes entity ptr, 32-bit sprite ID (hardcoded in calling
// function), z_order, x, y, flags. Calls AllocSpriteRenderContext to allocate 0x3C byte render
// context, then InitSpriteContext to look up sprite by ID in tertiary (ctx+0x70/0x40) or secondary
// bank. Sprite ID is the hash value seen in InitEntity_* function names.

undefined4 *
InitEntitySprite(undefined4 *param_1,undefined4 param_2,short param_3,undefined2 param_4,
                undefined2 param_5,undefined1 param_6)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  
  InitEntityStruct(param_1,0x44c);
  param_1[6] = &DAT_8001044c;
  ClearSpriteContextWrapper(param_1 + 0x1e);
  ZeroEntityField(param_1 + 0x23);
  InitEntityAnimationState(param_1);
  *(undefined1 *)((int)param_1 + 0xf7) = param_6;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  if (*(char *)((int)param_1 + 0xf7) == '\0') {
    AllocSpriteRenderContext(param_1,(int)param_3,param_2);
  }
  else {
    FUN_8001d024(param_1,(int)param_3);
  }
  *(undefined2 *)(param_1 + 0x1a) = param_4;
  *(undefined2 *)((int)param_1 + 0x6a) = param_5;
  SetEntitySpriteId(param_1,param_2,1);
  iVar3 = param_1[0xd];
  if (iVar3 != 0) {
    uVar1 = *(undefined1 *)(g_GameStatePtr + 0x125);
    uVar2 = *(undefined1 *)(g_GameStatePtr + 0x126);
    *(undefined1 *)(iVar3 + 0x34) = *(undefined1 *)(g_GameStatePtr + 0x124);
    *(undefined1 *)(iVar3 + 0x35) = uVar1;
    *(undefined1 *)(iVar3 + 0x36) = uVar2;
    *(undefined1 *)(param_1[0xd] + 0x33) = 1;
  }
  return param_1;
}



undefined4 *
InitEntityWithSprite
          (undefined4 *param_1,undefined4 *param_2,short param_3,undefined2 param_4,
          undefined2 param_5)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  
  InitEntityStruct(param_1,0x44c);
  param_1[6] = &DAT_8001044c;
  ClearSpriteContextWrapper(param_1 + 0x1e);
  ZeroEntityField(param_1 + 0x23);
  InitEntityAnimationState(param_1);
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  FUN_8001cea4(param_1,(int)param_3,param_2);
  *(undefined2 *)(param_1 + 0x1a) = param_4;
  *(undefined2 *)((int)param_1 + 0x6a) = param_5;
  SetEntitySpriteId(param_1,*param_2,1);
  iVar3 = param_1[0xd];
  if (iVar3 != 0) {
    uVar1 = *(undefined1 *)(g_GameStatePtr + 0x125);
    uVar2 = *(undefined1 *)(g_GameStatePtr + 0x126);
    *(undefined1 *)(iVar3 + 0x34) = *(undefined1 *)(g_GameStatePtr + 0x124);
    *(undefined1 *)(iVar3 + 0x35) = uVar1;
    *(undefined1 *)(iVar3 + 0x36) = uVar2;
    *(undefined1 *)(param_1[0xd] + 0x33) = 1;
  }
  return param_1;
}



void InitEntityAnimationState(int param_1)

{
  undefined *puVar1;
  undefined4 uVar2;
  
  *(undefined1 *)(param_1 + 0xfe) = 1;
  *(undefined1 *)(param_1 + 0xfd) = 0;
  *(undefined1 *)(param_1 + 0xf6) = 1;
  *(undefined1 *)(param_1 + 0xf7) = 0;
  *(undefined1 *)(param_1 + 0xf8) = 0;
  *(undefined2 *)(param_1 + 0x6c) = 0;
  *(undefined2 *)(param_1 + 0x6e) = 0;
  *(undefined4 *)(param_1 + 0xcc) = 0;
  *(undefined2 *)(param_1 + 0xda) = 0;
  *(undefined2 *)(param_1 + 0xdc) = 0;
  *(undefined2 *)(param_1 + 0xde) = 0;
  *(undefined1 *)(param_1 + 0xf0) = 0;
  *(undefined1 *)(param_1 + 0xf1) = 1;
  *(undefined1 *)(param_1 + 0xf2) = 1;
  *(undefined2 *)(param_1 + 0xec) = 0;
  *(undefined4 *)(param_1 + 0xb4) = 0;
  *(undefined4 *)(param_1 + 0xb8) = 0;
  *(undefined2 *)(param_1 + 0xe6) = 0;
  *(undefined2 *)(param_1 + 0xe8) = 0;
  *(undefined2 *)(param_1 + 0xe0) = 0;
  *(undefined4 *)(param_1 + 0x94) = 0;
  *(undefined2 *)(param_1 + 0x98) = 0;
  *(undefined2 *)(param_1 + 0x9a) = 0;
  *(undefined4 *)(param_1 + 0x9c) = 0;
  *(undefined2 *)(param_1 + 0xa0) = 0;
  *(undefined2 *)(param_1 + 0xa2) = 0;
  *(undefined4 *)(param_1 + 0xa4) = 0;
  *(undefined2 *)(param_1 + 0xa8) = 0;
  *(undefined2 *)(param_1 + 0xaa) = 0;
  *(undefined4 *)(param_1 + 0xac) = 0;
  *(undefined4 *)(param_1 + 0xb0) = 0;
  puVar1 = blbHeaderBufferBase;
  *(undefined4 *)(param_1 + 0xd4) = 0;
  uVar2 = AllocateFromHeap(puVar1,0x18,1,0);
  *(undefined4 *)(param_1 + 0x90) = uVar2;
  *(undefined4 *)(param_1 + 0xd0) = 0;
  *(undefined2 *)(param_1 + 0xea) = 0;
  *(undefined1 *)(param_1 + 0xf9) = 0;
  *(undefined2 *)(param_1 + 0xee) = 0;
  *(undefined1 *)(param_1 + 0xfa) = 0;
  *(undefined1 *)(param_1 + 0xfb) = 0;
  *(undefined1 *)(param_1 + 0xfc) = 0;
  return;
}



void FUN_8001ca60(int param_1,uint param_2)

{
  int iVar1;
  
  *(undefined **)(param_1 + 0x18) = &DAT_8001044c;
  if (*(int *)(param_1 + 0xb0) != 0) {
    FreeFromHeap(blbHeaderBufferBase,*(int *)(param_1 + 0xb0),0,0);
  }
  FreeFromHeap(blbHeaderBufferBase,*(undefined4 *)(param_1 + 0x90),4,0);
  iVar1 = *(int *)(param_1 + 0x34);
  *(undefined **)(param_1 + 0x18) = &DAT_8001046c;
  if (iVar1 != 0) {
    (**(code **)(*(int *)(iVar1 + 0xc) + 0x14))(iVar1 + *(short *)(*(int *)(iVar1 + 0xc) + 0x10),3);
  }
  *(undefined **)(param_1 + 0x18) = &DAT_800104ac;
  if ((param_2 & 1) != 0) {
    FreeFromHeap(blbHeaderBufferBase,param_1,0,0);
  }
  return;
}



void EntityUpdateCallback(int param_1)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  
  TickEntityAnimation();
  iVar3 = (int)*(short *)(param_1 + 0x1e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x20);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x20));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0x1c);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    (*pcVar4)(param_1 + iVar2);
  }
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined1 *)(param_1 + 0x77) = 0;
  if (((uVar1 & 3) == 1) && (ApplyPendingSpriteState(param_1), (uVar1 >> 3 & 1) != 0)) {
    UpdateSpriteFrameData(param_1);
  }
  return;
}



void FUN_8001cc6c(int param_1)

{
  short sVar1;
  
  if (*(char *)(param_1 + 0x74) == '\0') {
    sVar1 = *(short *)(param_1 + 0x68) + *(short *)(param_1 + 0xe6);
  }
  else {
    sVar1 = *(short *)(param_1 + 0x68) - *(short *)(param_1 + 0xe6);
  }
  *(short *)(param_1 + 0x68) = sVar1;
  if (*(char *)(param_1 + 0x75) == '\0') {
    sVar1 = *(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0xe8);
  }
  else {
    sVar1 = *(short *)(param_1 + 0x6a) - *(short *)(param_1 + 0xe8);
  }
  *(short *)(param_1 + 0x6a) = sVar1;
  *(undefined2 *)(param_1 + 0xe6) = 0;
  *(undefined2 *)(param_1 + 0xe8) = 0;
  return;
}



void AllocSpriteRenderContext(int param_1,short param_2,undefined4 param_3)

{
  undefined1 *puVar1;
  uint uVar2;
  undefined *puVar3;
  undefined2 uVar4;
  uint uVar5;
  uint uVar6;
  undefined4 uVar7;
  int iVar8;
  ushort uVar9;
  undefined1 local_20 [8];
  
  uVar5 = InitSpriteContext(param_1 + 0x78,param_3);
  uVar2 = param_1 + 0x87U & 3;
  uVar6 = param_1 + 0x84U & 3;
  uVar5 = (*(int *)((param_1 + 0x87U) - uVar2) << (3 - uVar2) * 8 |
          uVar5 & 0xffffffffU >> (uVar2 + 1) * 8) & -1 << (4 - uVar6) * 8 |
          *(uint *)((param_1 + 0x84U) - uVar6) >> uVar6 * 8;
  puVar1 = local_20 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uVar5 >> (3 - uVar2) * 8;
  local_20._0_2_ = (undefined2)uVar5;
  uVar2 = param_1 + 0x87U & 3;
  uVar6 = param_1 + 0x84U & 3;
  uVar6 = (*(int *)((param_1 + 0x87U) - uVar2) << (3 - uVar2) * 8 |
          uVar5 & 0xffffffffU >> (uVar2 + 1) * 8) & -1 << (4 - uVar6) * 8 |
          *(uint *)((param_1 + 0x84U) - uVar6) >> uVar6 * 8;
  puVar1 = local_20 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uVar6 >> (3 - uVar2) * 8;
  local_20._2_2_ = (undefined2)(uVar6 >> 0x10);
  uVar4 = local_20._2_2_;
  uVar9 = local_20._0_2_ + 3;
  local_20._0_4_ = uVar6;
  uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
  iVar8 = InitSpriteRenderContext
                    (uVar7,(int)param_2,(int)(short)(uVar9 & 0xfffc),(int)(short)uVar4,1);
  *(int *)(param_1 + 0x34) = iVar8;
  puVar3 = blbHeaderBufferBase;
  iVar8 = (int)*(short *)(iVar8 + 4) * (int)*(short *)(iVar8 + 6);
  *(int *)(param_1 + 0xd4) = iVar8;
  uVar7 = AllocateFromHeap(puVar3,1,iVar8,0);
  *(undefined4 *)(param_1 + 0xb0) = uVar7;
  return;
}



void FUN_8001cea4(int param_1,short param_2,int *param_3)

{
  undefined1 *puVar1;
  uint uVar2;
  undefined *puVar3;
  undefined4 uVar4;
  int iVar5;
  short sVar6;
  short sVar7;
  undefined1 auStack_38 [12];
  uint uStack_2c;
  short local_20;
  undefined1 local_1e [6];
  
  sVar6 = 0;
  sVar7 = 0;
  InitSpriteContext(param_1 + 0x78,*param_3);
  for (; *param_3 != 0; param_3 = param_3 + 1) {
    FUN_8007bbec(auStack_38);
    puVar1 = local_1e + 1;
    uVar2 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar2) =
         *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uStack_2c >> (3 - uVar2) * 8;
    local_20 = (short)uStack_2c;
    if (sVar6 < local_20) {
      puVar1 = local_1e + 1;
      uVar2 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar2) =
           *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uStack_2c >> (3 - uVar2) * 8;
      sVar6 = local_20;
    }
    puVar1 = local_1e + 1;
    uVar2 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar2) =
         *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uStack_2c >> (3 - uVar2) * 8;
    local_1e._0_2_ = (undefined2)(uStack_2c >> 0x10);
    if (sVar7 < (short)local_1e._0_2_) {
      puVar1 = local_1e + 1;
      uVar2 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar2) =
           *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | uStack_2c >> (3 - uVar2) * 8;
      sVar7 = local_1e._0_2_;
    }
  }
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
  iVar5 = InitSpriteRenderContext(uVar4,(int)param_2,(int)(short)(sVar6 + 3U & 0xfffc),(int)sVar7,1)
  ;
  *(int *)(param_1 + 0x34) = iVar5;
  puVar3 = blbHeaderBufferBase;
  iVar5 = (int)*(short *)(iVar5 + 4) * (int)*(short *)(iVar5 + 6);
  *(int *)(param_1 + 0xd4) = iVar5;
  uVar4 = AllocateFromHeap(puVar3,1,iVar5,0);
  *(undefined4 *)(param_1 + 0xb0) = uVar4;
  return;
}



void FUN_8001d024(int param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
  uVar1 = FUN_80015614(uVar1,(int)param_2);
  *(undefined4 *)(param_1 + 0x34) = uVar1;
  return;
}



void SetEntitySpriteId(int param_1,undefined4 param_2,ushort param_3)

{
  *(undefined4 *)(param_1 + 200) = 0xffff;
  *(ushort *)(param_1 + 0xe0) = param_3 | 0x1fc;
  *(undefined4 *)(param_1 + 0xbc) = param_2;
  *(undefined4 *)(param_1 + 0xc0) = 0;
  *(undefined4 *)(param_1 + 0xc4) = 0;
  *(undefined1 *)(param_1 + 0xf3) = 0;
  *(undefined1 *)(param_1 + 0xf4) = 1;
  *(undefined1 *)(param_1 + 0xf5) = 1;
  return;
}



void FUN_8001d0b0(int param_1,undefined4 param_2,ushort param_3)

{
  *(ushort *)(param_1 + 0xe0) = param_3 | 4;
  *(undefined4 *)(param_1 + 0xbc) = param_2;
  return;
}



void FUN_8001d0c0(int param_1,uint param_2)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(uint *)(param_1 + 0xc0) = param_2 & 0xffff;
  uVar2 = uVar1 & 0xfdff;
  *(ushort *)(param_1 + 0xe0) = uVar2 | 8;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar2 | 9;
  }
  return;
}



void FUN_8001d0f0(int param_1,undefined4 param_2)

{
  ushort uVar1;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined4 *)(param_1 + 0xc0) = param_2;
  *(ushort *)(param_1 + 0xe0) = uVar1 | 0x208;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar1 | 0x209;
  }
  return;
}



void FUN_8001d170(int param_1,undefined4 param_2)

{
  ushort uVar1;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined4 *)(param_1 + 0xc4) = param_2;
  *(ushort *)(param_1 + 0xe0) = uVar1 | 0x410;
  if ((uVar1 & 4) != 0) {
    *(undefined4 *)(param_1 + 0xc0) = *(undefined4 *)(param_1 + 0xc4);
    *(ushort *)(param_1 + 0xe0) = *(ushort *)(param_1 + 0xe0) | 0x208;
  }
  if ((*(ushort *)(param_1 + 0xe0) & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = *(ushort *)(param_1 + 0xe0) | 1;
  }
  return;
}



void FUN_8001d1c0(int param_1,uint param_2)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(uint *)(param_1 + 200) = param_2 & 0xffff;
  uVar2 = uVar1 & 0xf7ff;
  *(ushort *)(param_1 + 0xe0) = uVar2 | 0x20;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar2 | 0x21;
  }
  return;
}



void FUN_8001d1f0(int param_1,undefined4 param_2)

{
  ushort uVar1;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined4 *)(param_1 + 200) = param_2;
  *(ushort *)(param_1 + 0xe0) = uVar1 | 0x820;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar1 | 0x821;
  }
  return;
}



void FUN_8001d218(int param_1,undefined1 param_2)

{
  ushort uVar1;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined1 *)(param_1 + 0xf5) = param_2;
  *(ushort *)(param_1 + 0xe0) = uVar1 | 0x100;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar1 | 0x101;
  }
  return;
}



void EntitySetRenderFlags(int param_1,undefined1 param_2)

{
  ushort uVar1;
  
  uVar1 = *(ushort *)(param_1 + 0xe0);
  *(undefined1 *)(param_1 + 0xf4) = param_2;
  *(ushort *)(param_1 + 0xe0) = uVar1 | 0x80;
  if ((uVar1 & 3) == 0) {
    *(ushort *)(param_1 + 0xe0) = uVar1 | 0x81;
  }
  return;
}



void TickEntityAnimation(int param_1,undefined4 param_2,short param_3)

{
  short sVar1;
  ushort uVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  code *pcVar8;
  uint uVar9;
  
  uVar9 = 0;
  if (*(char *)(param_1 + 0xf2) != '\0') {
    sVar1 = *(short *)(param_1 + 0xec);
    if ((sVar1 == 0) || (*(short *)(param_1 + 0xec) = sVar1 + -1, sVar1 == 1)) {
      if (*(short *)(param_1 + 0xda) == *(short *)(param_1 + 0xde)) {
        if (((*(ushort *)(param_1 + 0xe0) & 3) == 0) &&
           (iVar6 = (int)*(short *)(param_1 + 10), iVar6 != 0)) {
          if (iVar6 < 1) {
            pcVar8 = *(code **)(param_1 + 0xc);
          }
          else {
            iVar4 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xc));
            param_3 = (short)*(undefined4 *)(iVar4 + -8);
            pcVar8 = *(code **)(iVar4 + -4);
          }
          iVar4 = (int)*(short *)(param_1 + 8);
          if (0 < iVar6 << 0x10) {
            iVar4 = param_3 + iVar4;
          }
          (*pcVar8)(param_1 + iVar4,2,0,param_1);
        }
        uVar7 = (uint)*(ushort *)(param_1 + 0xe0);
        uVar5 = uVar7 & 3;
        if (uVar5 == 3) {
          uVar9 = *(ushort *)(param_1 + 0xe0) >> 3 & 1;
          ApplyPendingSpriteState(param_1);
          goto LAB_8001d39c;
        }
      }
      else {
LAB_8001d39c:
        uVar7 = (uint)*(ushort *)(param_1 + 0xe0);
        uVar5 = uVar7 & 3;
      }
      if (uVar5 == 2) {
        uVar9 = uVar7 >> 3 & 1;
        ApplyPendingSpriteState(param_1);
      }
    }
  }
  if ((*(ushort *)(param_1 + 0xe0) & 3) == 1) {
    uVar9 = *(ushort *)(param_1 + 0xe0) >> 3 & 1;
    ApplyPendingSpriteState(param_1);
  }
  bVar3 = false;
  if (*(short *)(param_1 + 0xda) == *(short *)(param_1 + 0xde)) {
    bVar3 = *(char *)(param_1 + 0xf1) == '\0';
  }
  if (*(char *)(param_1 + 0xf2) != '\0') {
    if (uVar9 != 0) goto LAB_8001d464;
    if (*(short *)(param_1 + 0xec) == 0) {
      FUN_8001d4bc(param_1);
    }
  }
  if (uVar9 == 0) {
    if (*(short *)(param_1 + 0xec) != 0) {
      return;
    }
    if (*(char *)(param_1 + 0xf2) == '\0') {
      return;
    }
    if (bVar3) {
      return;
    }
  }
LAB_8001d464:
  UpdateSpriteFrameData(param_1);
  uVar2 = *(ushort *)(param_1 + 0xe0);
  if (((uVar2 & 3) == 1) && (ApplyPendingSpriteState(param_1), (uVar2 >> 3 & 1) != 0)) {
    UpdateSpriteFrameData(param_1);
  }
  return;
}



void FUN_8001d4bc(int param_1)

{
  int iVar1;
  
  iVar1 = (int)*(short *)(param_1 + 0xda);
  if (iVar1 == *(short *)(param_1 + 0xde)) {
    if (*(char *)(param_1 + 0xf1) != '\0') {
      *(undefined2 *)(param_1 + 0xda) = *(undefined2 *)(param_1 + 0xdc);
    }
  }
  else if (*(char *)(param_1 + 0xf0) == '\0') {
    *(short *)(param_1 + 0xda) = (short)(iVar1 + 1);
    if ((int)*(short *)(param_1 + 0xd8) <= (iVar1 + 1) * 0x10000 >> 0x10) {
      *(undefined2 *)(param_1 + 0xda) = 0;
    }
  }
  else {
    *(short *)(param_1 + 0xda) = (short)(iVar1 + -1);
    if ((iVar1 + -1) * 0x10000 < 0) {
      *(short *)(param_1 + 0xda) = *(short *)(param_1 + 0xd8) + -1;
    }
  }
  return;
}



void ApplyPendingSpriteState(int param_1)

{
  ushort uVar1;
  undefined2 uVar2;
  
  if ((*(ushort *)(param_1 + 0xe0) & 4) != 0) {
    *(undefined4 *)(param_1 + 0xcc) = *(undefined4 *)(param_1 + 0xbc);
    if (*(char *)(param_1 + 0xf7) == '\0') {
      InitSpriteContext(param_1 + 0x78);
      *(undefined2 *)(param_1 + 0xd8) = *(undefined2 *)(param_1 + 0x88);
    }
    else {
      FUN_800195b0(param_1 + 0x8c);
      uVar2 = FUN_8001963c(param_1 + 0x8c);
      *(undefined2 *)(param_1 + 0xd8) = uVar2;
    }
    *(undefined1 *)(param_1 + 0xf8) = 1;
  }
  uVar1 = *(ushort *)(param_1 + 0xe0);
  if ((uVar1 & 8) != 0) {
    if ((uVar1 & 0x200) == 0) {
      if (*(short *)(param_1 + 0xc0) == -1) {
        *(short *)(param_1 + 0xda) = *(short *)(param_1 + 0xd8) + -1;
      }
      else {
        *(short *)(param_1 + 0xda) = (short)*(undefined4 *)(param_1 + 0xc0);
      }
    }
    else {
      uVar2 = FUN_8001e6ac(param_1,*(undefined4 *)(param_1 + 0xc0));
      *(undefined2 *)(param_1 + 0xda) = uVar2;
    }
    uVar1 = *(ushort *)(param_1 + 0xe0);
  }
  if ((uVar1 & 0x10) != 0) {
    if ((uVar1 & 0x400) == 0) {
      if (*(short *)(param_1 + 0xc4) == -1) {
        *(short *)(param_1 + 0xdc) = *(short *)(param_1 + 0xd8) + -1;
      }
      else {
        *(short *)(param_1 + 0xdc) = (short)*(undefined4 *)(param_1 + 0xc4);
      }
    }
    else {
      uVar2 = FUN_8001e6ac(param_1,*(undefined4 *)(param_1 + 0xc4));
      *(undefined2 *)(param_1 + 0xdc) = uVar2;
    }
  }
  if ((*(ushort *)(param_1 + 0xe0) & 0x20) != 0) {
    if ((*(ushort *)(param_1 + 0xe0) & 0x800) == 0) {
      if (*(short *)(param_1 + 200) == -1) {
        *(short *)(param_1 + 0xde) = *(short *)(param_1 + 0xd8) + -1;
      }
      else {
        *(short *)(param_1 + 0xde) = (short)*(undefined4 *)(param_1 + 200);
      }
    }
    else {
      uVar2 = FUN_8001e6ac(param_1,*(undefined4 *)(param_1 + 200));
      *(undefined2 *)(param_1 + 0xde) = uVar2;
    }
  }
  if ((*(ushort *)(param_1 + 0xe0) & 0x40) != 0) {
    *(undefined1 *)(param_1 + 0xf0) = *(undefined1 *)(param_1 + 0xf3);
  }
  if ((*(ushort *)(param_1 + 0xe0) & 0x80) != 0) {
    *(undefined1 *)(param_1 + 0xf1) = *(undefined1 *)(param_1 + 0xf4);
  }
  if ((*(ushort *)(param_1 + 0xe0) & 0x100) != 0) {
    *(undefined1 *)(param_1 + 0xf2) = *(undefined1 *)(param_1 + 0xf5);
  }
  *(undefined2 *)(param_1 + 0xe0) = 0;
  return;
}



void UpdateSpriteFrameData(int param_1)

{
  ushort uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  int *piVar9;
  short unaff_s2;
  code *pcVar10;
  
  if (*(char *)(param_1 + 0xf7) == '\0') {
    piVar9 = (int *)(*(int *)(param_1 + 0x78) + (uint)*(ushort *)(param_1 + 0xda) * 0x24);
  }
  else {
    piVar9 = (int *)FUN_80019650(param_1 + 0x8c,*(undefined2 *)(param_1 + 0xda));
  }
  uVar1 = *(ushort *)(piVar9 + 1);
  uVar3 = (uint)*(byte *)(param_1 + 0xfe);
  *(ushort *)(param_1 + 0xec) = uVar1;
  if (uVar3 != 0) {
    uVar3 = (uint)uVar1 << 1;
    *(short *)(param_1 + 0xec) = (short)uVar3;
  }
  uVar7 = (int)piVar9 + 9U & 3;
  uVar4 = (int)piVar9 + 6U & 3;
  uVar4 = (*(int *)(((int)piVar9 + 9U) - uVar7) << (3 - uVar7) * 8 |
          uVar3 & 0xffffffffU >> (uVar7 + 1) * 8) & -1 << (4 - uVar4) * 8 |
          *(uint *)(((int)piVar9 + 6U) - uVar4) >> uVar4 * 8;
  uVar3 = (int)piVar9 + 0xdU & 3;
  uVar7 = (int)piVar9 + 10U & 3;
  uVar7 = (*(int *)(((int)piVar9 + 0xdU) - uVar3) << (3 - uVar3) * 8 |
          (uint)uVar1 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar7) * 8 |
          *(uint *)(((int)piVar9 + 10U) - uVar7) >> uVar7 * 8;
  uVar3 = param_1 + 0x3bU & 3;
  puVar2 = (uint *)((param_1 + 0x3bU) - uVar3);
  *puVar2 = *puVar2 & -1 << (uVar3 + 1) * 8 | uVar4 >> (3 - uVar3) * 8;
  uVar3 = param_1 + 0x38U & 3;
  puVar2 = (uint *)((param_1 + 0x38U) - uVar3);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar3) * 8 | uVar4 << uVar3 * 8;
  uVar3 = param_1 + 0x3fU & 3;
  puVar2 = (uint *)((param_1 + 0x3fU) - uVar3);
  *puVar2 = *puVar2 & -1 << (uVar3 + 1) * 8 | uVar7 >> (3 - uVar3) * 8;
  uVar3 = param_1 + 0x3cU & 3;
  puVar2 = (uint *)((param_1 + 0x3cU) - uVar3);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar3) * 8 | uVar7 << uVar3 * 8;
  *(undefined2 *)(param_1 + 0xe6) = *(undefined2 *)((int)piVar9 + 0xe);
  uVar3 = (uint)*(ushort *)(param_1 + 0xec);
  iVar8 = (int)*(short *)(param_1 + 0xe6) << 0x10;
  if (uVar3 == 0) {
    trap(0x1c00);
  }
  if ((uVar3 == 0xffffffff) && (iVar8 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0xe8) = (short)piVar9[4];
  uVar7 = (uint)*(ushort *)(param_1 + 0xec);
  iVar5 = (int)*(short *)(param_1 + 0xe8) << 0x10;
  uVar4 = iVar5 / (int)uVar7;
  if (uVar7 == 0) {
    trap(0x1c00);
  }
  if ((uVar7 == 0xffffffff) && (iVar5 == -0x80000000)) {
    trap(0x1800);
  }
  *(int *)(param_1 + 0xb4) = iVar8 / (int)uVar3;
  *(uint *)(param_1 + 0xb8) = uVar4;
  uVar3 = (int)piVar9 + 0x15U & 3;
  uVar6 = (int)piVar9 + 0x12U & 3;
  uVar6 = (*(int *)(((int)piVar9 + 0x15U) - uVar3) << (3 - uVar3) * 8 |
          uVar4 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar6) * 8 |
          *(uint *)(((int)piVar9 + 0x12U) - uVar6) >> uVar6 * 8;
  uVar3 = (int)piVar9 + 0x19U & 3;
  uVar4 = (int)piVar9 + 0x16U & 3;
  uVar7 = (*(int *)(((int)piVar9 + 0x19U) - uVar3) << (3 - uVar3) * 8 |
          uVar7 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar4) * 8 |
          *(uint *)(((int)piVar9 + 0x16U) - uVar4) >> uVar4 * 8;
  uVar3 = param_1 + 0x43U & 3;
  puVar2 = (uint *)((param_1 + 0x43U) - uVar3);
  *puVar2 = *puVar2 & -1 << (uVar3 + 1) * 8 | uVar6 >> (3 - uVar3) * 8;
  uVar3 = param_1 + 0x40U & 3;
  puVar2 = (uint *)((param_1 + 0x40U) - uVar3);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar3) * 8 | uVar6 << uVar3 * 8;
  uVar3 = param_1 + 0x47U & 3;
  puVar2 = (uint *)((param_1 + 0x47U) - uVar3);
  *puVar2 = *puVar2 & -1 << (uVar3 + 1) * 8 | uVar7 >> (3 - uVar3) * 8;
  uVar3 = param_1 + 0x44U & 3;
  puVar2 = (uint *)((param_1 + 0x44U) - uVar3);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar3) * 8 | uVar7 << uVar3 * 8;
  if (*(int *)(param_1 + 0x34) != 0) {
    *(undefined2 *)(*(int *)(param_1 + 0x34) + 6) = *(undefined2 *)(param_1 + 0x3e);
    *(ushort *)(*(int *)(param_1 + 0x34) + 4) = *(short *)(param_1 + 0x3c) + 3U & 0xfffc;
  }
  *(undefined1 *)(param_1 + 0x76) = 1;
  if (*piVar9 != 0) {
    if ((piVar9[7] & 1U) != 0) {
      FUN_8001c4a4(param_1);
    }
    iVar8 = (int)*(short *)(param_1 + 10);
    if (iVar8 != 0) {
      if (iVar8 < 1) {
        pcVar10 = *(code **)(param_1 + 0xc);
      }
      else {
        iVar5 = iVar8 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar10 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(param_1 + 8);
      if (0 < iVar8 << 0x10) {
        iVar5 = unaff_s2 + iVar5;
      }
      (*pcVar10)(param_1 + iVar5,1,*piVar9,param_1);
    }
  }
  return;
}



int FUN_8001e6ac(int param_1,int param_2)

{
  int *piVar1;
  uint uVar2;
  ushort uVar3;
  int iVar4;
  short sVar5;
  
  if (*(char *)(param_1 + 0xf7) == '\0') {
    uVar3 = 0;
    do {
      iVar4 = (int)(short)uVar3;
      uVar2 = (uint)uVar3;
      if (*(short *)(param_1 + 0xd8) <= iVar4) goto LAB_8001e770;
      uVar3 = uVar3 + 1;
    } while (*(int *)(*(int *)(param_1 + 0x78) + uVar2 * 0x24) != param_2);
  }
  else {
    sVar5 = 0;
    if (0 < *(short *)(param_1 + 0xd8)) {
      do {
        piVar1 = (int *)FUN_80019650(param_1 + 0x8c,sVar5);
        if (*piVar1 == param_2) {
          return (int)sVar5;
        }
        sVar5 = sVar5 + 1;
      } while (sVar5 < *(short *)(param_1 + 0xd8));
    }
LAB_8001e770:
    iVar4 = -1;
  }
  return iVar4;
}



void FUN_8001e790(int param_1,undefined4 param_2,undefined2 param_3)

{
  *(undefined2 *)(param_1 + 0xe2) = 0;
  *(undefined2 *)(param_1 + 0xe4) = param_3;
  *(undefined4 *)(param_1 + 0x94) = param_2;
  FUN_8001e7b8();
  return;
}



void FUN_8001e7b8(int param_1,undefined4 param_2,short param_3)

{
  short sVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *puVar4;
  code *pcVar5;
  int iVar6;
  short unaff_s2;
  short local_30;
  short sStack_2e;
  short local_2c;
  
  if (*(short *)(param_1 + 0xaa) != 0) {
    uVar2 = *(undefined4 *)(param_1 + 0xa8);
    pcVar5 = *(code **)(param_1 + 0xac);
    *(undefined2 *)(param_1 + 0xa8) = 0;
    *(undefined2 *)(param_1 + 0xaa) = 0;
    *(undefined4 *)(param_1 + 0xac) = 0;
    sStack_2e = (short)((uint)uVar2 >> 0x10);
    iVar6 = (int)sStack_2e;
    if (0 < iVar6) {
      local_2c = (short)pcVar5;
      iVar3 = iVar6 * 8 + *(int *)(param_1 + local_2c);
      param_3 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    local_30 = (short)uVar2;
    iVar3 = (int)local_30;
    if (0 < iVar6 << 0x10) {
      iVar3 = param_3 + iVar3;
    }
    (*pcVar5)(param_1 + iVar3);
  }
  puVar4 = (undefined4 *)(*(short *)(param_1 + 0xe2) * 8 + *(int *)(param_1 + 0x94));
  uVar2 = puVar4[1];
  *(undefined4 *)(param_1 + 0xa0) = *puVar4;
  *(undefined4 *)(param_1 + 0xa4) = uVar2;
  sVar1 = *(short *)(param_1 + 0xe2) + 1;
  *(short *)(param_1 + 0xe2) = sVar1;
  if (*(short *)(param_1 + 0xe4) <= sVar1) {
    *(undefined4 *)(param_1 + 0x94) = 0;
  }
  iVar6 = (int)*(short *)(param_1 + 0xa2);
  if (iVar6 < 1) {
    pcVar5 = *(code **)(param_1 + 0xa4);
  }
  else {
    iVar3 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xa4));
    unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
    pcVar5 = *(code **)(iVar3 + -4);
  }
  iVar3 = (int)*(short *)(param_1 + 0xa0);
  if (0 < iVar6 << 0x10) {
    iVar3 = unaff_s2 + iVar3;
  }
  (*pcVar5)(param_1 + iVar3);
  return;
}



void EntityProcessCallbackQueue(int param_1,undefined4 param_2,short param_3)

{
  undefined4 uVar1;
  int iVar2;
  code *pcVar3;
  int iVar4;
  short unaff_s2;
  short local_40;
  short sStack_3e;
  short local_3c;
  
  if (*(short *)(param_1 + 0xaa) != 0) {
    uVar1 = *(undefined4 *)(param_1 + 0xa8);
    pcVar3 = *(code **)(param_1 + 0xac);
    *(undefined2 *)(param_1 + 0xa8) = 0;
    *(undefined2 *)(param_1 + 0xaa) = 0;
    *(undefined4 *)(param_1 + 0xac) = 0;
    sStack_3e = (short)((uint)uVar1 >> 0x10);
    iVar4 = (int)sStack_3e;
    if (0 < iVar4) {
      local_3c = (short)pcVar3;
      iVar2 = iVar4 * 8 + *(int *)(param_1 + local_3c);
      param_3 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar3 = *(code **)(iVar2 + -4);
    }
    local_40 = (short)uVar1;
    iVar2 = (int)local_40;
    if (0 < iVar4 << 0x10) {
      iVar2 = param_3 + iVar2;
    }
    (*pcVar3)(param_1 + iVar2);
  }
  if (*(short *)(param_1 + 0x9a) == 0) {
    if (*(int *)(param_1 + 0x94) == 0) {
      *(undefined2 *)(param_1 + 0xa0) = 0;
      *(undefined2 *)(param_1 + 0xa2) = 0;
      *(undefined4 *)(param_1 + 0xa4) = 0;
    }
    else {
      FUN_8001e7b8(param_1);
    }
  }
  else {
    *(undefined4 *)(param_1 + 0xa0) = *(undefined4 *)(param_1 + 0x98);
    *(undefined4 *)(param_1 + 0xa4) = *(undefined4 *)(param_1 + 0x9c);
    iVar4 = (int)*(short *)(param_1 + 0xa2);
    *(undefined2 *)(param_1 + 0x98) = 0;
    *(undefined2 *)(param_1 + 0x9a) = 0;
    *(undefined4 *)(param_1 + 0x9c) = 0;
    if (iVar4 < 1) {
      pcVar3 = *(code **)(param_1 + 0xa4);
    }
    else {
      iVar2 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xa4));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar3 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0xa0);
    if (0 < iVar4 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    (*pcVar3)(param_1 + iVar2);
  }
  return;
}



void EntitySetState(int param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uVar1;
  int iVar2;
  code *pcVar3;
  int iVar4;
  short in_t0;
  short unaff_s2;
  short local_40;
  short sStack_3e;
  short local_3c;
  
  *(undefined2 *)(param_1 + 0xa0) = 0;
  *(undefined2 *)(param_1 + 0xa2) = 0;
  *(undefined4 *)(param_1 + 0xa4) = 0;
  if (*(short *)(param_1 + 0xaa) != 0) {
    uVar1 = *(undefined4 *)(param_1 + 0xa8);
    pcVar3 = *(code **)(param_1 + 0xac);
    *(undefined2 *)(param_1 + 0xa8) = 0;
    *(undefined2 *)(param_1 + 0xaa) = 0;
    *(undefined4 *)(param_1 + 0xac) = 0;
    sStack_3e = (short)((uint)uVar1 >> 0x10);
    iVar4 = (int)sStack_3e;
    if (0 < iVar4) {
      local_3c = (short)pcVar3;
      iVar2 = iVar4 * 8 + *(int *)(param_1 + local_3c);
      in_t0 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar3 = *(code **)(iVar2 + -4);
    }
    local_40 = (short)uVar1;
    iVar2 = (int)local_40;
    if (0 < iVar4 << 0x10) {
      iVar2 = in_t0 + iVar2;
    }
    (*pcVar3)(param_1 + iVar2);
  }
  if (*(short *)(param_1 + 0xa2) == 0) {
    *(undefined4 *)(param_1 + 0x94) = 0;
    *(undefined2 *)(param_1 + 0x98) = 0;
    *(undefined2 *)(param_1 + 0x9a) = 0;
    *(undefined4 *)(param_1 + 0x9c) = 0;
    *(undefined4 *)(param_1 + 0xa0) = param_2;
    *(undefined4 *)(param_1 + 0xa4) = param_3;
    iVar4 = (int)*(short *)(param_1 + 0xa2);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar3 = *(code **)(param_1 + 0xa4);
      }
      else {
        iVar2 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xa4));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar3 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(param_1 + 0xa0);
      if (0 < iVar4 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar3)(param_1 + iVar2);
    }
  }
  return;
}



void EntitySetCallback(int param_1,undefined4 param_2,undefined4 param_3)

{
  int iVar1;
  int iVar2;
  short in_t0;
  code *pcVar3;
  
  iVar2 = (int)*(short *)(param_1 + 0xaa);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(param_1 + 0xac);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0xac));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0xa8);
    if (0 < iVar2 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    (*pcVar3)(param_1 + iVar1);
  }
  *(undefined4 *)(param_1 + 0xa8) = param_2;
  *(undefined4 *)(param_1 + 0xac) = param_3;
  return;
}



void InitLayerRenderContext_Standard
               (undefined4 *param_1,undefined4 param_2,short param_3,undefined4 param_4,
               undefined4 param_5,uint param_6,uint param_7,undefined2 param_8,undefined2 param_9,
               undefined1 param_10,char param_11,byte param_12)

{
  undefined1 *puVar1;
  uint uVar2;
  uint *puVar3;
  undefined4 uVar4;
  short sVar5;
  short sVar6;
  undefined1 auStack_58 [4];
  int local_54;
  int local_50;
  uint local_4c;
  
  param_1[6] = &DAT_800104ac;
  *(undefined2 *)param_1 = 0;
  *(undefined2 *)((int)param_1 + 2) = 0;
  param_1[1] = 0;
  sVar6 = 0;
  *(undefined2 *)(param_1 + 2) = 0;
  *(undefined2 *)((int)param_1 + 10) = 0;
  param_1[3] = 0;
  *(undefined2 *)(param_1 + 4) = 30000;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined1 *)(param_1 + 0xe) = param_10;
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  param_1[6] = &DAT_8001042c;
  *(undefined2 *)(param_1 + 0xd) = param_8;
  *(undefined2 *)((int)param_1 + 0x36) = param_9;
  *(char *)((int)param_1 + 0x39) = param_11;
  if (*(char *)(param_1 + 0xe) != '\0') {
    sVar6 = *(short *)(param_1 + 0xd);
  }
  sVar5 = 0;
  if (param_11 != '\0') {
    sVar5 = *(short *)((int)param_1 + 0x36);
  }
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x84,1,0);
  uVar2 = (uint)&stack0xffffffa7 & 3;
  puVar3 = (uint *)(&stack0xffffffa7 + -uVar2);
  *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | param_6 >> (3 - uVar2) * 8;
  puVar1 = auStack_58 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | param_7 >> (3 - uVar2) * 8;
  auStack_58 = (undefined1  [4])param_7;
  local_54 = (int)sVar6;
  local_50 = (int)sVar5;
  local_4c = (uint)param_12;
  uVar4 = InitTilemapLayerRendering(uVar4,param_2,(int)param_3,param_4,param_5,param_6);
  param_1[7] = uVar4;
  param_1[8] = 0x10000;
  param_1[9] = 0x10000;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8001eeec;
  param_1[10] = 0;
  param_1[0xb] = 0;
  *(undefined2 *)(param_1 + 0xc) = 0;
  *(undefined2 *)((int)param_1 + 0x32) = 0;
  *(undefined1 *)((int)param_1 + 0x3a) = 0;
  *(undefined1 *)((int)param_1 + 0x3b) = 0;
  return;
}



undefined4 *
InitLayerRenderContext_Medium
          (undefined4 *param_1,undefined4 param_2,short param_3,undefined4 param_4,
          undefined4 param_5,uint param_6,uint param_7,undefined2 param_8,undefined2 param_9,
          short param_10,byte param_11,byte param_12,byte param_13)

{
  undefined1 *puVar1;
  uint uVar2;
  uint *puVar3;
  undefined *puVar4;
  undefined4 uVar5;
  undefined1 auStack_68 [4];
  int local_64;
  uint local_60;
  uint local_5c;
  uint local_58;
  undefined4 local_40;
  
  param_1[6] = &DAT_800104ac;
  *(undefined2 *)param_1 = 0;
  *(undefined2 *)((int)param_1 + 2) = 0;
  param_1[1] = 0;
  *(undefined1 *)(param_1 + 5) = 1;
  puVar4 = blbHeaderBufferBase;
  *(undefined2 *)(param_1 + 4) = 30000;
  *(undefined2 *)(param_1 + 2) = 0;
  *(undefined2 *)((int)param_1 + 10) = 0;
  param_1[3] = 0;
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  param_1[6] = &DAT_8001040c;
  local_40 = param_4;
  uVar5 = AllocateFromHeap(puVar4,0x70,1,0);
  uVar2 = (uint)&stack0xffffff97 & 3;
  puVar3 = (uint *)(&stack0xffffff97 + -uVar2);
  *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | param_6 >> (3 - uVar2) * 8;
  puVar1 = auStack_68 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | param_7 >> (3 - uVar2) * 8;
  auStack_68 = (undefined1  [4])param_7;
  local_64 = (int)param_10;
  local_60 = (uint)param_11;
  local_5c = (uint)param_12;
  local_58 = (uint)param_13;
  uVar5 = InitTilemapLayer16x16(uVar5,param_2,(int)param_3,local_40,param_5,param_6);
  param_1[7] = uVar5;
  param_1[8] = 0x10000;
  param_1[9] = 0x10000;
  *(undefined2 *)(param_1 + 0xd) = param_8;
  *(undefined2 *)((int)param_1 + 0x36) = param_9;
  *(byte *)(param_1 + 0xe) = param_11;
  *(byte *)((int)param_1 + 0x39) = param_12;
  param_1[10] = 0;
  param_1[0xb] = 0;
  *(undefined2 *)(param_1 + 0xc) = 0;
  *(undefined2 *)((int)param_1 + 0x32) = 0;
  *(undefined1 *)((int)param_1 + 0x3a) = 0;
  *(undefined1 *)((int)param_1 + 0x3b) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8001f368;
  return param_1;
}



void InitLayerRenderContext_Small
               (undefined4 *param_1,undefined4 param_2,short param_3,undefined4 param_4,
               undefined4 param_5,uint param_6,uint param_7,undefined2 param_8,undefined2 param_9,
               short param_10,undefined1 param_11,char param_12,byte param_13)

{
  undefined1 *puVar1;
  uint uVar2;
  uint *puVar3;
  undefined4 uVar4;
  short sVar5;
  short sVar6;
  undefined1 auStack_60 [4];
  int local_5c;
  int local_58;
  int local_54;
  uint local_50;
  
  param_1[6] = &DAT_800104ac;
  *(undefined2 *)param_1 = 0;
  *(undefined2 *)((int)param_1 + 2) = 0;
  param_1[1] = 0;
  sVar6 = 0;
  *(undefined2 *)(param_1 + 2) = 0;
  *(undefined2 *)((int)param_1 + 10) = 0;
  param_1[3] = 0;
  *(undefined2 *)(param_1 + 4) = 30000;
  *(undefined1 *)(param_1 + 5) = 1;
  *(undefined1 *)(param_1 + 0xe) = param_11;
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  param_1[6] = &DAT_800103ec;
  *(undefined2 *)(param_1 + 0xd) = param_8;
  *(undefined2 *)((int)param_1 + 0x36) = param_9;
  *(char *)((int)param_1 + 0x39) = param_12;
  if (*(char *)(param_1 + 0xe) != '\0') {
    sVar6 = *(short *)(param_1 + 0xd);
  }
  sVar5 = 0;
  if (param_12 != '\0') {
    sVar5 = *(short *)((int)param_1 + 0x36);
  }
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x80,1,0);
  uVar2 = (uint)&stack0xffffff9f & 3;
  puVar3 = (uint *)(&stack0xffffff9f + -uVar2);
  *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | param_6 >> (3 - uVar2) * 8;
  puVar1 = auStack_60 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | param_7 >> (3 - uVar2) * 8;
  auStack_60 = (undefined1  [4])param_7;
  local_5c = (int)param_10;
  local_58 = (int)sVar6;
  local_54 = (int)sVar5;
  local_50 = (uint)param_13;
  uVar4 = InitTileLayerPrimitives(uVar4,param_2,(int)param_3,param_4,param_5,param_6);
  param_1[7] = uVar4;
  param_1[8] = 0x10000;
  param_1[9] = 0x10000;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8001f778;
  param_1[10] = 0;
  param_1[0xb] = 0;
  *(undefined2 *)(param_1 + 0xc) = 0;
  *(undefined2 *)((int)param_1 + 0x32) = 0;
  *(undefined1 *)((int)param_1 + 0x3a) = 0;
  *(undefined1 *)((int)param_1 + 0x3b) = 0;
  return;
}



undefined4 *
FUN_8001f944(undefined4 *param_1,undefined4 param_2,short param_3,undefined2 param_4,ushort param_5,
            undefined1 param_6)

{
  uint uVar1;
  uint *puVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  
  param_1[6] = &DAT_800104ac;
  *(undefined2 *)param_1 = 0;
  *(undefined2 *)((int)param_1 + 2) = 0;
  param_1[1] = 0;
  *(undefined2 *)(param_1 + 2) = 0;
  *(undefined2 *)((int)param_1 + 10) = 0;
  param_1[3] = 0;
  *(undefined2 *)(param_1 + 4) = 0x44c;
  *(undefined1 *)(param_1 + 5) = 1;
  param_1[6] = &DAT_800103cc;
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  *(undefined2 *)(param_1 + 0xb) = param_4;
  *(undefined1 *)((int)param_1 + 0x32) = param_6;
  *(ushort *)((int)param_1 + 0x2e) = param_5;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8001fb0c;
  param_1[7] = param_2;
  *(undefined1 *)(param_1 + 0xc) = 0;
  *(char *)((int)param_1 + 0x31) = *(char *)(param_1[7] + 4) + '\x01';
  iVar3 = (uint)*(byte *)(param_1 + 0xc) * 0x10 + param_1[7];
  uVar1 = iVar3 + 9U & 3;
  uVar6 = iVar3 + 6U & 3;
  uVar5 = (*(int *)((iVar3 + 9U) - uVar1) << (3 - uVar1) * 8 |
          param_1[7] & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar6) * 8 |
          *(uint *)((iVar3 + 6U) - uVar6) >> uVar6 * 8;
  uVar1 = iVar3 + 0xdU & 3;
  uVar6 = iVar3 + 10U & 3;
  uVar6 = (*(int *)((iVar3 + 0xdU) - uVar1) << (3 - uVar1) * 8 |
          (uint)param_5 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar6) * 8 |
          *(uint *)((iVar3 + 10U) - uVar6) >> uVar6 * 8;
  uVar1 = (int)param_1 + 0x27U & 3;
  puVar2 = (uint *)(((int)param_1 + 0x27U) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = (uint)(param_1 + 9) & 3;
  puVar2 = (uint *)((int)(param_1 + 9) - uVar1);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  uVar1 = (int)param_1 + 0x2bU & 3;
  puVar2 = (uint *)(((int)param_1 + 0x2bU) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar6 >> (3 - uVar1) * 8;
  uVar1 = (uint)(param_1 + 10) & 3;
  puVar2 = (uint *)((int)(param_1 + 10) - uVar1);
  *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | uVar6 << uVar1 * 8;
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x58,1,0);
  iVar3 = FUN_8001889c(uVar4,(int)param_3);
  param_1[8] = iVar3;
  *(undefined4 *)(iVar3 + 0x10) =
       *(undefined4 *)((uint)*(byte *)(param_1 + 0xc) * 0x10 + param_1[7]);
  return param_1;
}



// Player entity initialization. Uses hardcoded sprite ID 0x21842018 with z-order 10000. Calls
// InitEntitySprite to set up sprite rendering.

undefined4 * InitPlayerEntity(undefined4 *param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  
  InitEntityStruct(param_1,0x44c);
  param_1[6] = &DAT_8001044c;
  ClearSpriteContextWrapper(param_1 + 0x1e);
  ZeroEntityField(param_1 + 0x23);
  InitEntityAnimationState(param_1);
  *(undefined1 *)((int)param_1 + 0xf7) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  if (*(char *)((int)param_1 + 0xf7) == '\0') {
    AllocSpriteRenderContext(param_1,10000,0x21842018);
  }
  else {
    FUN_8001d024(param_1,10000);
  }
  *(undefined2 *)(param_1 + 0x1a) = 0xa0;
  *(undefined2 *)((int)param_1 + 0x6a) = 0x78;
  SetEntitySpriteId(param_1,0x21842018,1);
  iVar3 = param_1[0xd];
  if (iVar3 != 0) {
    uVar1 = *(undefined1 *)(g_GameStatePtr + 0x125);
    uVar2 = *(undefined1 *)(g_GameStatePtr + 0x126);
    *(undefined1 *)(iVar3 + 0x34) = *(undefined1 *)(g_GameStatePtr + 0x124);
    *(undefined1 *)(iVar3 + 0x35) = uVar1;
    *(undefined1 *)(iVar3 + 0x36) = uVar2;
    *(undefined1 *)(param_1[0xd] + 0x33) = 1;
  }
  param_1[6] = &DAT_800103ac;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  if (param_1[0xd] != 0) {
    *(undefined1 *)(param_1[0xd] + 10) = 0;
  }
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  return param_1;
}



void EntityApplyMovementCallbacks(int param_1,short param_2,short param_3)

{
  int iVar1;
  int iVar2;
  short in_t0;
  code *pcVar3;
  short unaff_s2;
  
  iVar2 = (int)*(short *)(param_1 + 0x26);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar2 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_2 = (*pcVar3)(param_1 + iVar1,(int)param_2);
  }
  iVar2 = (int)*(short *)(param_1 + 0x2e);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar2 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar3)(param_1 + iVar1,(int)param_3);
  }
  GetTileAttributeAtPosition(g_GameStatePtr,(int)param_2,(int)param_3);
  return;
}



int FUN_8002086c(int param_1)

{
  InitMenuEntityWithVtable(param_1,0);
  *(undefined **)(param_1 + 0x18) = &DAT_800104cc;
  FUN_8007a150(param_1 + 0x84);
  return param_1;
}



// Loads the BLB header (first 0x1000 bytes) from disc.
// The header contains:
//   0x000-0xB5F: Level metadata table (26  0x70 bytes)
//   0xB60-0xCCB: Movie table (13  0x1C bytes)
//   0xCD0-0xECF: Sector table (32  0x10 bytes)
//   0xED0-0xF0F: Mode 6 sector table (16  4 bytes)
//   0xF10-0xF27: Credits entries (2  0x0C bytes)
//   0xF31: Level count
//   0xF32: Movie count
//   0xF34-0xFFF: Playback sequence data
// param_1: GameState* - stores header pointer

void LoadBLBHeader(int state)

{
  int iVar1;
  undefined *base;
  
  FUN_8007bfb8();
  g_GameStatePtr = state;
  *(undefined1 *)(state + 0x114) = 0;
  *(undefined1 *)(state + 0x130) = 0;
  base = blbHeaderBufferBase;
  *(undefined4 *)(state + 0x11c) = 0x10000;
  *(undefined4 *)(state + 0x28) = 0;
  *(undefined2 *)(state + 0x104) = 0;
  *(undefined4 *)(state + 0x108) = 0;
  *(undefined4 *)(state + 0x110) = 0;
  *(undefined2 *)(state + 100) = 0;
  *(undefined2 *)(state + 0x66) = 0;
  *(undefined4 *)(state + 300) = 0x1234567;
  iVar1 = *(int *)(base + 0xa650);
  Magic1234 = 0x1234567;
  *(int *)(state + 0x40) = iVar1;
  *(int *)(state + 0x3c) = iVar1 + 0x1000;
  CdBLB_ReadSectors(0,2,*(void **)(state + 0x40));
  InitLevelDataContext((int *)(state + 0x84),*(void **)(state + 0x40),&LAB_80020848);
  SetSpriteTables(0,(int *)(state + 0x84));
  return;
}



void FUN_80020974(int param_1,uint param_2)

{
  *(undefined **)(param_1 + 0x18) = &DAT_800104cc;
  FUN_80020a1c();
  FUN_80020a74(param_1);
  ClearEntityDefList(param_1);
  FreeEntityLists(param_1);
  if (*(int *)(param_1 + 0x3c) != 0) {
    __builtin_delete();
  }
  FUN_8007a194(param_1 + 0x84,2);
  *(undefined **)(param_1 + 0x18) = &DAT_800104ec;
  if ((param_2 & 1) != 0) {
    FreeFromHeap(blbHeaderBufferBase,param_1,0,0);
  }
  return;
}



void FUN_80020a1c(int param_1)

{
  undefined *puVar1;
  
  puVar1 = blbHeaderBufferBase;
  *(undefined2 *)(blbHeaderBufferBase + 0xa08a) = 0;
  if (*(int *)(param_1 + 0x108) != 0) {
    FreeFromHeap(puVar1,*(int *)(param_1 + 0x108),0,0);
    *(undefined4 *)(param_1 + 0x108) = 0;
    *(undefined2 *)(param_1 + 0x104) = 0;
  }
  return;
}



void FUN_80020a74(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  if (*(char *)(param_1 + 0x114) != '\0') {
    iVar1 = 0;
    do {
      iVar1 = *(int *)((iVar1 >> 0xe) + *(int *)(param_1 + 0x110));
      if (iVar1 != 0) {
        (**(code **)(*(int *)(iVar1 + 0x18) + 0xc))
                  (iVar1 + *(short *)(*(int *)(iVar1 + 0x18) + 8),3);
      }
      iVar2 = iVar2 + 1;
      iVar1 = iVar2 * 0x10000;
    } while (iVar2 * 0x10000 >> 0x10 < (int)(uint)*(byte *)(param_1 + 0x114));
  }
  if (*(int *)(param_1 + 0x110) != 0) {
    FreeFromHeap(blbHeaderBufferBase,*(int *)(param_1 + 0x110),0,0);
    *(undefined4 *)(param_1 + 0x110) = 0;
    *(undefined1 *)(param_1 + 0x114) = 0;
  }
  return;
}



// Entity Tick Loop - Update All Active Entities
// 
// Iterates the entity tick list at GameState+0x1C and calls each entity's main update callback.
// Called from GameModeCallback @ 0x8007e654 after entity spawning.
// 
// ALGORITHM:
// 1. Get entity list head from GameState+0x1C
// 2. For each entity in linked list:
//    a. If z_order > 1999 and not rendered:
//       - Call UpdateCameraPosition @ 0x800233c0 (layer management)
//    b. If entity->callback_main != NULL:
//       - Call entity->callback_main(entity)
//    c. Call DeferredEntityRemoval @ 0x80020c74
//    d. Move to next entity
// 3. Increment frame counter at GameState+0x10C
// 
// PARAMETERS:
//   param_1 (GameState*) - Base game state structure
// 
// ENTITY LIST STRUCTURE:
//   GameState+0x1C: Tick list head (entities needing per-frame updates)
//   Entity+0x00: Next pointer (linked list)
//   Entity+0x04: callback_main (update function)
//   Entity+0x10: z_order (render depth for layer management)
// 
// RELATED FUNCTIONS:
//   - SpawnOnScreenEntities @ 0x80024288 (adds entities to list)
//   - DeferredEntityRemoval @ 0x80020c74 (removes marked entities)
//   - UpdateCameraPosition @ 0x800233c0 (camera scroll at z-threshold)

void EntityTickLoop(int param_1)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  short *psVar4;
  int *piVar5;
  undefined4 unaff_s2;
  code *pcVar6;
  
  bVar1 = false;
  piVar5 = *(int **)(param_1 + 0x1c);
  while (piVar5 != (int *)0x0) {
    psVar4 = (short *)piVar5[1];
    if ((!bVar1) && (1999 < psVar4[8])) {
      UpdateCameraPosition(param_1);
      bVar1 = true;
    }
    iVar3 = (int)psVar4[1];
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar6 = *(code **)(psVar4 + 2);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)((int)psVar4 + (int)psVar4[2]);
        unaff_s2 = *(undefined4 *)(iVar2 + -8);
        pcVar6 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*psVar4;
      if (0 < iVar3 << 0x10) {
        iVar2 = (short)unaff_s2 + iVar2;
      }
      (*pcVar6)((int)psVar4 + iVar2);
    }
    piVar5 = (int *)*piVar5;
    DeferredEntityRemoval(param_1);
  }
  if (!bVar1) {
    UpdateCameraPosition(param_1);
  }
  if (*(char *)(param_1 + 0x11a) != '\0') {
    *(char *)(param_1 + 0x11a) = *(char *)(param_1 + 0x11a) + -1;
  }
  *(int *)(param_1 + 0x10c) = *(int *)(param_1 + 0x10c) + 1;
  return;
}



// Deferred Entity Removal - Cleanup Marked Entities
// 
// Handles safe removal of entities marked for destruction during entity tick processing.
// Called after each entity update in EntityTickLoop @ 0x80020b34.
// 
// ALGORITHM:
// 1. Check if GameState+0x34 != 0 (entity marked for removal)
// 2. If GameState+0x38 == 0:
//    - RemoveEntityFromAllLists()
//    - Clear GameState+0x34
// 3. Else:
//    - RemoveFromUpdateQueue(state)
//    - If GameState+0x38 != 1:
//      * RemoveFromRenderList(state)
//    - RemoveFromTickList(state, entity)
//    - Call entity destructor via vtable:
//      * vtable = entity[0x18]
//      * destructor = *(vtable + 0xC)
//      * offset = *(vtable + 8)
//      * destructor(entity + offset, 3)  // Mode 3 = cleanup
//    - Clear GameState+0x34
// 4. Clear GameState+0x38
// 
// PARAMETERS:
//   param_1 (GameState*) - Base game state structure
// 
// STATE OFFSETS:
//   +0x34: Entity pending removal (pointer)
//   +0x38: Removal mode (0=remove all, 1=keep render, other=normal)
// 
// WHY DEFERRED: Entities cannot be removed during iteration without corrupting
// the linked list. Marking for deferred removal allows safe cleanup after
// the entity's callback completes.

void DeferredEntityRemoval(int param_1)

{
  int iVar1;
  
  if (*(int *)(param_1 + 0x34) != 0) {
    if (*(int *)(param_1 + 0x38) == 0) {
      RemoveEntityFromAllLists();
      *(undefined4 *)(param_1 + 0x34) = 0;
    }
    else {
      RemoveFromUpdateQueue(param_1);
      if (*(int *)(param_1 + 0x38) != 1) {
        RemoveFromRenderList(param_1);
      }
      RemoveFromTickList(param_1,*(undefined4 *)(param_1 + 0x34));
      iVar1 = *(int *)(param_1 + 0x34);
      if (iVar1 != 0) {
        (**(code **)(*(int *)(iVar1 + 0x18) + 0xc))
                  (iVar1 + *(short *)(*(int *)(iVar1 + 0x18) + 8),3);
      }
      *(undefined4 *)(param_1 + 0x34) = 0;
    }
    *(undefined4 *)(param_1 + 0x38) = 0;
  }
  return;
}



// Main entity tick/update loop. Iterates linked list of active entities at context+0x1c, calling
// each entity's update function.

void EntityTickLoop(int param_1)

{
  int iVar1;
  int *piVar2;
  
  for (piVar2 = *(int **)(param_1 + 0x1c); piVar2 != (int *)0x0; piVar2 = (int *)*piVar2) {
    iVar1 = *(int *)(piVar2[1] + 0x18);
    (**(code **)(iVar1 + 0x14))(piVar2[1] + (int)*(short *)(iVar1 + 0x10));
  }
  return;
}



// Render Entities - Entity Rendering Pipeline
// 
// Called in main loop after EntityTickLoop to render all active entities.
// Handles background color updates and calls entity render callbacks.
// 
// ALGORITHM:
// 1. Background color update (if GameState+0x130 != 0):
//    a. Read RGB from GameState+0x131/132/133
//    b. Write to both frame buffers:
//       - Buffer 1: blbHeaderBufferBase[0x1d/1e/1f]
//       - Buffer 2: blbHeaderBufferBase[0x505d/5e/5f]
//    c. Clear update flag: GameState+0x130 = 0
// 
// 2. Empty loop over tick list (GameState+0x1C):
//    - Iterates but performs no operations
//    - Likely optimization artifact or debug remnant
// 
// 3. Render loop over render list (GameState+0x20):
//    a. For each entity node:
//       - Get entity pointer from node[1]
//       - Get method table from entity[0xC]
//       - Get render function pointer from table[0xC]
//       - Get offset parameter from table[8]
//       - Call render_func(entity + offset)
//    b. Continue to next node (node = node[0])
// 
// PARAMETERS:
//   param_1 (GameState*) - Base game state structure
// 
// ENTITY RENDERING:
// - Render list is z-sorted (entities added via AddEntityToSortedRenderList)
// - Each entity has a method table (vtable) at offset 0xC
// - Render callback at vtable+0xC gets entity pointer adjusted by vtable+8
// 
// BACKGROUND COLOR:
// - Double-buffered to avoid tearing
// - 0x1d/1e/1f: RGB for framebuffer 1
// - 0x505d/5e/5f: RGB for framebuffer 2 (offset 0x5040 = sizeof(framebuffer))
// - Updated every frame if flag set (typically by collision/trigger events)
// 
// RELATED:
//   AddEntityToSortedRenderList @ 0x800213a8: Inserts by z-order
//   EntityTickLoop @ 0x80020b34: Updates before rendering

void RenderEntities(int param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined1 uVar3;
  undefined *puVar4;
  int *piVar5;
  int iVar6;
  
  puVar4 = blbHeaderBufferBase;
  if (*(char *)(param_1 + 0x130) != '\0') {
    uVar1 = *(undefined1 *)(param_1 + 0x131);
    uVar2 = *(undefined1 *)(param_1 + 0x132);
    uVar3 = *(undefined1 *)(param_1 + 0x133);
    blbHeaderBufferBase[0x1d] = uVar1;
    puVar4[0x1e] = uVar2;
    puVar4[0x1f] = uVar3;
    puVar4[0x505d] = uVar1;
    puVar4[0x505e] = uVar2;
    puVar4[0x505f] = uVar3;
    *(undefined1 *)(param_1 + 0x130) = 0;
  }
  for (piVar5 = *(int **)(param_1 + 0x1c); piVar5 != (int *)0x0; piVar5 = (int *)*piVar5) {
  }
  for (piVar5 = *(int **)(param_1 + 0x20); piVar5 != (int *)0x0; piVar5 = (int *)*piVar5) {
    iVar6 = *(int *)(piVar5[1] + 0xc);
    (**(code **)(iVar6 + 0xc))(piVar5[1] + (int)*(short *)(iVar6 + 8));
  }
  return;
}



void AddToZOrderList(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
  return;
}



void AddToXPositionList(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(param_2 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
  return;
}



void AddToUpdateQueue(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  if (*(undefined4 **)(param_1 + 0x24) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x24) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x24);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x24) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
  return;
}



void AddToEntityDefList(int param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  
  puVar1 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
  uVar2 = *(undefined4 *)(param_1 + 0x28);
  puVar1[1] = param_2;
  *puVar1 = uVar2;
  *(undefined4 **)(param_1 + 0x28) = puVar1;
  return;
}



// Adds entity to sorted render lists. Inserts into update list at ctx+0x1c (sorted by +0x10
// priority) and render list at ctx+0x20 (sorted by +0x08 layer). Uses 8-byte linked list nodes.

void AddEntityToSortedRenderList(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) goto LAB_8002149c;
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
LAB_8002149c:
  iVar5 = *(int *)(param_2 + 0x34);
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(iVar5 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = iVar5;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = iVar5;
  return;
}



void AddLayerToRenderList_Standard(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) goto LAB_80021684;
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
LAB_80021684:
  iVar5 = *(int *)(param_2 + 0x1c);
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(iVar5 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = iVar5;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = iVar5;
  return;
}



void AddLayerToRenderList_Medium(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) goto LAB_8002186c;
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
LAB_8002186c:
  iVar5 = *(int *)(param_2 + 0x1c);
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(iVar5 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = iVar5;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = iVar5;
  return;
}



void AddLayerToRenderList_Small(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) goto LAB_80021a54;
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
LAB_80021a54:
  iVar5 = *(int *)(param_2 + 0x1c);
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(iVar5 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = iVar5;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = iVar5;
  return;
}



void AddEntityToBothLists(int param_1,int param_2)

{
  bool bVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  
  if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x1c) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x1c);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(param_2 + 0x10) <= *(short *)(puVar3[1] + 0x10)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x1c) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) goto LAB_80021c3c;
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = param_2;
LAB_80021c3c:
  iVar5 = *(int *)(param_2 + 0x20);
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar2;
  }
  else {
    puVar2 = *(undefined4 **)(param_1 + 0x20);
    puVar4 = (undefined4 *)0x0;
    while (puVar3 = puVar2, bVar1 = false, puVar3 != (undefined4 *)0x0) {
      if (*(short *)(puVar3[1] + 8) <= *(short *)(iVar5 + 8)) {
        puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar4 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar2;
        }
        else {
          *puVar4 = puVar2;
        }
        *puVar2 = puVar3;
        puVar2[1] = iVar5;
        bVar1 = true;
        break;
      }
      puVar4 = puVar3;
      puVar2 = (undefined4 *)*puVar3;
    }
    if (bVar1) {
      return;
    }
    puVar2 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar4 = puVar2;
  }
  *puVar2 = 0;
  puVar2[1] = iVar5;
  return;
}



undefined4 RemoveFromTickList(int param_1,int param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  piVar3 = (int *)*(int *)(param_1 + 0x1c);
  piVar2 = (undefined4 *)0x0;
  while( true ) {
    piVar1 = piVar3;
    if (piVar1 == (int *)0x0) {
      return 0;
    }
    if (piVar1[1] == param_2) break;
    piVar3 = (int *)*piVar1;
    piVar2 = piVar1;
  }
  if (piVar2 == (undefined4 *)0x0) {
    *(int *)(param_1 + 0x1c) = *piVar1;
  }
  else {
    *piVar2 = *piVar1;
  }
  FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
  return 1;
}



undefined4 RemoveFromRenderList(int param_1,int param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  piVar3 = (int *)*(int *)(param_1 + 0x20);
  piVar2 = (undefined4 *)0x0;
  while( true ) {
    piVar1 = piVar3;
    if (piVar1 == (int *)0x0) {
      return 0;
    }
    if (piVar1[1] == param_2) break;
    piVar3 = (int *)*piVar1;
    piVar2 = piVar1;
  }
  if (piVar2 == (undefined4 *)0x0) {
    *(int *)(param_1 + 0x20) = *piVar1;
  }
  else {
    *piVar2 = *piVar1;
  }
  FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
  return 1;
}



void RemoveFromUpdateQueue(int param_1,int param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  piVar3 = (int *)*(int *)(param_1 + 0x24);
  piVar2 = (undefined4 *)0x0;
  while( true ) {
    piVar1 = piVar3;
    if (piVar1 == (int *)0x0) {
      return;
    }
    if (piVar1[1] == param_2) break;
    piVar3 = (int *)*piVar1;
    piVar2 = piVar1;
  }
  if (piVar2 == (undefined4 *)0x0) {
    *(int *)(param_1 + 0x24) = *piVar1;
  }
  else {
    *piVar2 = *piVar1;
  }
  FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
  return;
}



void ChangeRenderZOrder(int param_1,int param_2,short param_3)

{
  bool bVar1;
  int *piVar2;
  int *piVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  
  piVar2 = (undefined4 *)0x0;
  for (piVar3 = (int *)*(int *)(param_1 + 0x20); piVar3 != (int *)0x0; piVar3 = (int *)*piVar3) {
    if (piVar3[1] == param_2) {
      if (piVar2 == (undefined4 *)0x0) {
        *(int *)(param_1 + 0x20) = *piVar3;
      }
      else {
        *piVar2 = *piVar3;
      }
      FreeFromHeap(blbHeaderBufferBase,piVar3,8,0);
      *(short *)(param_2 + 8) = param_3;
      goto LAB_80021f78;
    }
    piVar2 = piVar3;
  }
  *(short *)(param_2 + 8) = param_3;
LAB_80021f78:
  if (*(undefined4 **)(param_1 + 0x20) == (undefined4 *)0x0) {
    puVar4 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *(undefined4 **)(param_1 + 0x20) = puVar4;
  }
  else {
    puVar4 = *(undefined4 **)(param_1 + 0x20);
    puVar6 = (undefined4 *)0x0;
    while (puVar5 = puVar4, bVar1 = false, puVar5 != (undefined4 *)0x0) {
      if (*(short *)(puVar5[1] + 8) <= param_3) {
        puVar4 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
        if (puVar6 == (undefined4 *)0x0) {
          *(undefined4 **)(param_1 + 0x20) = puVar4;
        }
        else {
          *puVar6 = puVar4;
        }
        *puVar4 = puVar5;
        puVar4[1] = param_2;
        bVar1 = true;
        break;
      }
      puVar6 = puVar5;
      puVar4 = (undefined4 *)*puVar5;
    }
    if (bVar1) {
      return;
    }
    puVar4 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
    *puVar6 = puVar4;
  }
  *puVar4 = 0;
  puVar4[1] = param_2;
  return;
}



void RemoveEntityFromAllLists(int param_1,int param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  piVar3 = (int *)*(int *)(param_1 + 0x24);
  piVar2 = (undefined4 *)0x0;
  while (piVar1 = piVar3, piVar1 != (int *)0x0) {
    if (piVar1[1] == param_2) {
      if (piVar2 == (undefined4 *)0x0) {
        *(int *)(param_1 + 0x24) = *piVar1;
      }
      else {
        *piVar2 = *piVar1;
      }
      FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
      break;
    }
    piVar2 = piVar1;
    piVar3 = (int *)*piVar1;
  }
  piVar3 = (int *)*(int *)(param_1 + 0x20);
  piVar2 = (undefined4 *)0x0;
  while (piVar1 = piVar3, piVar1 != (int *)0x0) {
    if (piVar1[1] == *(int *)(param_2 + 0x34)) {
      if (piVar2 == (undefined4 *)0x0) {
        *(int *)(param_1 + 0x20) = *piVar1;
      }
      else {
        *piVar2 = *piVar1;
      }
      FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
      break;
    }
    piVar2 = piVar1;
    piVar3 = (int *)*piVar1;
  }
  piVar3 = (int *)*(int *)(param_1 + 0x1c);
  piVar2 = (undefined4 *)0x0;
  do {
    piVar1 = piVar3;
    if (piVar1 == (int *)0x0) {
LAB_800221dc:
      if (param_2 != 0) {
        (**(code **)(*(int *)(param_2 + 0x18) + 0xc))
                  (param_2 + *(short *)(*(int *)(param_2 + 0x18) + 8),3);
      }
      return;
    }
    if (piVar1[1] == param_2) {
      if (piVar2 == (undefined4 *)0x0) {
        *(int *)(param_1 + 0x1c) = *piVar1;
      }
      else {
        *piVar2 = *piVar1;
      }
      FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
      goto LAB_800221dc;
    }
    piVar3 = (int *)*piVar1;
    piVar2 = piVar1;
  } while( true );
}



void ClearTickList(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined4 *puVar3;
  
  iVar2 = *(int *)(param_1 + 0x1c);
  puVar1 = blbHeaderBufferBase;
  while (iVar2 != 0) {
    puVar3 = *(undefined4 **)(param_1 + 0x1c);
    blbHeaderBufferBase = puVar1;
    *(undefined4 *)(param_1 + 0x1c) = *puVar3;
    FreeFromHeap(puVar1,puVar3,8,0);
    puVar1 = blbHeaderBufferBase;
    iVar2 = *(int *)(param_1 + 0x1c);
  }
  blbHeaderBufferBase = puVar1;
  return;
}



void ClearEntityDefList(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined4 *puVar3;
  
  iVar2 = *(int *)(param_1 + 0x28);
  while (iVar2 != 0) {
    puVar3 = *(undefined4 **)(param_1 + 0x28);
    FreeFromHeap(blbHeaderBufferBase,puVar3[1],0,0);
    puVar1 = blbHeaderBufferBase;
    *(undefined4 *)(param_1 + 0x28) = *puVar3;
    FreeFromHeap(puVar1,puVar3,8,0);
    iVar2 = *(int *)(param_1 + 0x28);
  }
  return;
}



void FreeEntityLists(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined4 *puVar3;
  
  iVar2 = *(int *)(param_1 + 0x20);
  puVar1 = blbHeaderBufferBase;
  while (blbHeaderBufferBase = puVar1, iVar2 != 0) {
    puVar3 = *(undefined4 **)(param_1 + 0x20);
    *(undefined4 *)(param_1 + 0x20) = *puVar3;
    FreeFromHeap(puVar1,puVar3,8,0);
    puVar1 = blbHeaderBufferBase;
    iVar2 = *(int *)(param_1 + 0x20);
  }
  while (puVar1 = blbHeaderBufferBase, *(int *)(param_1 + 0x24) != 0) {
    puVar3 = *(undefined4 **)(param_1 + 0x24);
    *(undefined4 *)(param_1 + 0x24) = *puVar3;
    FreeFromHeap(puVar1,puVar3,8,0);
  }
  while (puVar3 = *(undefined4 **)(param_1 + 0x1c), puVar3 != (undefined4 *)0x0) {
    *(undefined4 *)(param_1 + 0x1c) = *puVar3;
    iVar2 = puVar3[1];
    if ((*(char *)(iVar2 + 0x14) != '\0') && (iVar2 != 0)) {
      (**(code **)(*(int *)(iVar2 + 0x18) + 0xc))(iVar2 + *(short *)(*(int *)(iVar2 + 0x18) + 8),3);
    }
    FreeFromHeap(blbHeaderBufferBase,puVar3,8,0);
  }
  return;
}



undefined4
FUN_800224d0(int param_1,short param_2,short param_3,ushort param_4,undefined2 param_5,
            undefined4 param_6,int param_7)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  short unaff_s2;
  short unaff_s6;
  code *pcVar8;
  
  if ((param_4 == 2) && (*(int *)(param_1 + 0x2c) != 0)) {
    cVar2 = FUN_8001b360(*(int *)(param_1 + 0x2c),(int)param_2,(int)param_3);
    if (cVar2 != '\0') {
      iVar5 = *(int *)(param_1 + 0x2c);
      iVar6 = (int)*(short *)(iVar5 + 10);
      if (iVar6 != 0) {
        if (iVar6 < 1) {
          pcVar8 = *(code **)(iVar5 + 0xc);
        }
        else {
          iVar3 = iVar6 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0xc));
          unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar5 + 8);
        if (0 < iVar6 << 0x10) {
          iVar3 = unaff_s6 + iVar3;
        }
        uVar4 = (*pcVar8)(iVar5 + iVar3,param_5,param_6,param_7);
        return uVar4;
      }
    }
  }
  else {
    for (piVar7 = *(int **)(param_1 + 0x24); piVar7 != (int *)0x0; piVar7 = (int *)*piVar7) {
      iVar5 = piVar7[1];
      bVar1 = false;
      if ((iVar5 != param_7) && ((param_4 & *(ushort *)(iVar5 + 0x12)) != 0)) {
        cVar2 = FUN_8001b360(iVar5,(int)param_2,(int)param_3);
        bVar1 = cVar2 != '\0';
      }
      if (bVar1) {
        iVar6 = (int)*(short *)(iVar5 + 10);
        if (iVar6 == 0) {
          return 0;
        }
        if (iVar6 < 1) {
          pcVar8 = *(code **)(iVar5 + 0xc);
        }
        else {
          iVar3 = iVar6 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0xc));
          unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar5 + 8);
        if (0 < iVar6 << 0x10) {
          iVar3 = unaff_s2 + iVar3;
        }
        uVar4 = (*pcVar8)(iVar5 + iVar3,param_5,param_6,param_7);
        return uVar4;
      }
    }
  }
  return 0;
}



// Entity collision detection. Iterates context+0x24 render list checking collision masks against
// param_4. For type 2, checks player entity at context+0x2c. Calls FUN_8001b3f0 for box overlap
// test and invokes collision callback on hit.

undefined4
CheckEntityCollision
          (int param_1,undefined4 param_2,undefined4 param_3,ushort param_4,undefined2 param_5,
          undefined4 param_6,int param_7)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  short unaff_s2;
  short unaff_s6;
  code *pcVar8;
  
  if ((param_4 == 2) && (*(int *)(param_1 + 0x2c) != 0)) {
    cVar2 = FUN_8001b3f0(*(int *)(param_1 + 0x2c),param_2,param_3);
    if (cVar2 != '\0') {
      iVar5 = *(int *)(param_1 + 0x2c);
      iVar6 = (int)*(short *)(iVar5 + 10);
      if (iVar6 != 0) {
        if (iVar6 < 1) {
          pcVar8 = *(code **)(iVar5 + 0xc);
        }
        else {
          iVar3 = iVar6 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0xc));
          unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar5 + 8);
        if (0 < iVar6 << 0x10) {
          iVar3 = unaff_s6 + iVar3;
        }
        uVar4 = (*pcVar8)(iVar5 + iVar3,param_5,param_6,param_7);
        return uVar4;
      }
    }
  }
  else {
    for (piVar7 = *(int **)(param_1 + 0x24); piVar7 != (int *)0x0; piVar7 = (int *)*piVar7) {
      iVar5 = piVar7[1];
      bVar1 = false;
      if ((iVar5 != param_7) && ((param_4 & *(ushort *)(iVar5 + 0x12)) != 0)) {
        cVar2 = FUN_8001b3f0(iVar5,param_2,param_3);
        bVar1 = cVar2 != '\0';
      }
      if (bVar1) {
        iVar6 = (int)*(short *)(iVar5 + 10);
        if (iVar6 == 0) {
          return 0;
        }
        if (iVar6 < 1) {
          pcVar8 = *(code **)(iVar5 + 0xc);
        }
        else {
          iVar3 = iVar6 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0xc));
          unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar5 + 8);
        if (0 < iVar6 << 0x10) {
          iVar3 = unaff_s2 + iVar3;
        }
        uVar4 = (*pcVar8)(iVar5 + iVar3,param_5,param_6,param_7);
        return uVar4;
      }
    }
  }
  return 0;
}



void FUN_80022d94(int param_1,short param_2,undefined2 param_3,undefined4 param_4,undefined4 param_5
                 )

{
  int iVar1;
  int iVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  int *piVar5;
  undefined4 unaff_s2;
  
  if ((param_2 == 2) && (iVar1 = *(int *)(param_1 + 0x2c), iVar1 != 0)) {
    iVar3 = (int)*(short *)(iVar1 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        in_t0 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = in_t0 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,param_3,param_4,param_5);
    }
  }
  else {
    for (piVar5 = *(int **)(param_1 + 0x24); piVar5 != (int *)0x0; piVar5 = (int *)*piVar5) {
      iVar1 = piVar5[1];
      iVar3 = (int)*(short *)(iVar1 + 10);
      if (iVar3 != 0) {
        if (iVar3 < 1) {
          pcVar4 = *(code **)(iVar1 + 0xc);
        }
        else {
          iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
          unaff_s2 = *(undefined4 *)(iVar2 + -8);
          pcVar4 = *(code **)(iVar2 + -4);
        }
        iVar2 = (int)*(short *)(iVar1 + 8);
        if (0 < iVar3 << 0x10) {
          iVar2 = (short)unaff_s2 + iVar2;
        }
        (*pcVar4)(iVar1 + iVar2,param_3,param_4,param_5);
      }
    }
  }
  return;
}



void FUN_80022f24(int param_1,short param_2,undefined2 param_3,undefined4 param_4,undefined4 param_5
                 )

{
  int iVar1;
  int iVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  int *piVar5;
  undefined4 unaff_s2;
  
  if ((param_2 == 2) && (iVar1 = *(int *)(param_1 + 0x2c), iVar1 != 0)) {
    iVar3 = (int)*(short *)(iVar1 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        in_t0 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = in_t0 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,param_3,param_4,param_5);
    }
  }
  else {
    for (piVar5 = *(int **)(param_1 + 0x1c); piVar5 != (int *)0x0; piVar5 = (int *)*piVar5) {
      iVar1 = piVar5[1];
      iVar3 = (int)*(short *)(iVar1 + 10);
      if (iVar3 != 0) {
        if (iVar3 < 1) {
          pcVar4 = *(code **)(iVar1 + 0xc);
        }
        else {
          iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
          unaff_s2 = *(undefined4 *)(iVar2 + -8);
          pcVar4 = *(code **)(iVar2 + -4);
        }
        iVar2 = (int)*(short *)(iVar1 + 8);
        if (0 < iVar3 << 0x10) {
          iVar2 = (short)unaff_s2 + iVar2;
        }
        (*pcVar4)(iVar1 + iVar2,param_3,param_4,param_5);
      }
    }
  }
  return;
}



undefined4 FUN_80023194(int param_1,undefined4 param_2,undefined4 param_3,ushort param_4)

{
  bool bVar1;
  char cVar2;
  undefined4 uVar3;
  int *piVar4;
  
  if ((param_4 == 2) && (*(int *)(param_1 + 0x2c) != 0)) {
    cVar2 = FUN_8001b3f0(*(int *)(param_1 + 0x2c),param_2,param_3);
    uVar3 = 0;
    if (cVar2 != '\0') {
      uVar3 = 1;
    }
  }
  else {
    for (piVar4 = *(int **)(param_1 + 0x24); uVar3 = 0, piVar4 != (int *)0x0;
        piVar4 = (int *)*piVar4) {
      bVar1 = false;
      if ((param_4 & *(ushort *)(piVar4[1] + 0x12)) != 0) {
        cVar2 = FUN_8001b3f0(piVar4[1],param_2,param_3);
        bVar1 = cVar2 != '\0';
      }
      if (bVar1) {
        return 1;
      }
    }
  }
  return uVar3;
}



// Update Camera Position - Smooth Scrolling Camera Controller
// 
// Calculates and applies camera position based on player position with smooth acceleration
// and level boundary clamping. Called during EntityTickLoop @ 0x80020b34 when z_order > 1999.
// 
// ALGORITHM:
// 1. Get player entity from GameState+0x30
// 2. Return if player == NULL or GameState[99] != 0 (paused)
// 3. Calculate target camera position:
//    - Read player position from entity structure
//    - Apply screen offsets (0x12a, 0x61, 0x62, etc)
//    - Read level bounds from tile header via blbHeaderBufferBase
// 4. Calculate camera velocity using lookup tables:
//    - DAT_8009b074: Vertical acceleration table (144 entries)
//    - DAT_8009b104: Horizontal acceleration table
//    - DAT_8009b0bc: Diagonal acceleration table
//    - Tables indexed by distance to target (clamped to 0x8F)
// 5. Interpolate velocity toward target:
//    - Acceleration step: 0x10000 (1.0) or 0x8000 (0.5) based on current velocity
//    - Clamp velocity to table lookup result
// 6. Apply velocity with sub-pixel precision:
//    - GameState+0x4c: X velocity (32-bit fixed-point)
//    - GameState+0x50: Y velocity (32-bit fixed-point)
//    - GameState+0x5c: X sub-pixel accumulator
//    - GameState+0x5e: Y sub-pixel accumulator
// 7. Update camera position with boundary clamping:
//    - GameState+0x44: camera_x (s16)
//    - GameState+0x46: camera_y (s16)
// 8. Apply level-specific scroll limits (flags at +0x58/59/5a/5b)
// 9. Store player offset for rendering:
//    - GameState+0x54: Player X offset
//    - GameState+0x56: Player Y offset
// 
// PARAMETERS:
//   param_1 (GameState*) - Base game state structure
// 
// CAMERA STATE OFFSETS:
//   +0x30: Player entity pointer
//   +0x44: camera_x (pixels)
//   +0x46: camera_y (pixels)
//   +0x4c: X velocity (16.16 fixed-point)
//   +0x50: Y velocity (16.16 fixed-point)
//   +0x54: Player X offset for rendering
//   +0x56: Player Y offset for rendering
//   +0x58-0x5b: Scroll limit flags
//   +0x5c: X sub-pixel accumulator
//   +0x5e: Y sub-pixel accumulator
//   +0x61: Camera mode flags
//   +0x62: Camera invert flag
//   +0x12a: Screen offset parameter
// 
// SMOOTH SCROLLING: The lookup tables provide smooth ease-in/ease-out curves
// rather than linear camera movement, creating professional-feeling camera behavior.

void UpdateCameraPosition(int param_1)

{
  char cVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  short sVar6;
  short sVar7;
  bool bVar8;
  short sVar9;
  undefined2 uVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  int iVar18;
  short in_t0;
  code *pcVar19;
  uint uVar20;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  short local_40;
  short local_30;
  
  iVar14 = *(int *)(param_1 + 0x30);
  if (iVar14 == 0) {
    return;
  }
  if (*(char *)(param_1 + 99) != '\0') {
    return;
  }
  uVar20 = (uint)*(byte *)(param_1 + 0x12a);
  if (*(char *)(iVar14 + 0x74) == '\x01') {
    uVar20 = -uVar20;
  }
  if (*(char *)(param_1 + 0x62) != '\0') {
    uVar20 = -uVar20;
  }
  cVar1 = *(char *)(param_1 + 0x61);
  iVar18 = (int)*(short *)(iVar14 + 0x26);
  uVar15 = (uint)*(ushort *)(iVar14 + 0x68);
  if (iVar18 != 0) {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x28);
    }
    else {
      iVar11 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x28));
      in_t0 = (short)*(undefined4 *)(iVar11 + -8);
      pcVar19 = *(code **)(iVar11 + -4);
    }
    iVar11 = (int)*(short *)(iVar14 + 0x24);
    if (0 < iVar18 << 0x10) {
      iVar11 = in_t0 + iVar11;
    }
    uVar15 = (*pcVar19)(iVar14 + iVar11,(int)(short)*(ushort *)(iVar14 + 0x68));
  }
  uVar2 = *(ushort *)(param_1 + 0x120);
  iVar14 = *(int *)(param_1 + 0x30);
  uVar3 = *(ushort *)(param_1 + 100);
  iVar18 = (int)*(short *)(iVar14 + 0x2e);
  uVar16 = (uint)*(ushort *)(iVar14 + 0x6a);
  if (iVar18 != 0) {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x30);
    }
    else {
      iVar11 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar11 + -8);
      pcVar19 = *(code **)(iVar11 + -4);
    }
    iVar11 = (int)*(short *)(iVar14 + 0x2c);
    if (0 < iVar18 << 0x10) {
      iVar11 = unaff_s2 + iVar11;
    }
    uVar16 = (*pcVar19)(iVar14 + iVar11,(int)(short)*(ushort *)(iVar14 + 0x6a));
  }
  uVar4 = *(ushort *)(param_1 + 0x122);
  iVar14 = *(int *)(param_1 + 0x30);
  uVar5 = *(ushort *)(param_1 + 0x66);
  iVar18 = (int)*(short *)(iVar14 + 0x2e);
  uVar17 = (uint)*(ushort *)(iVar14 + 0x6a);
  if (iVar18 != 0) {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x30);
    }
    else {
      iVar11 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar11 + -8);
      pcVar19 = *(code **)(iVar11 + -4);
    }
    iVar11 = (int)*(short *)(iVar14 + 0x2c);
    if (0 < iVar18 << 0x10) {
      iVar11 = unaff_s4 + iVar11;
    }
    uVar17 = (*pcVar19)(iVar14 + iVar11,(int)(short)*(ushort *)(iVar14 + 0x6a));
  }
  iVar14 = *(int *)(param_1 + 0x30);
  iVar11 = uVar17 - *(ushort *)(param_1 + 0x56);
  iVar18 = (int)*(short *)(iVar14 + 0x26);
  uVar17 = (uint)*(ushort *)(iVar14 + 0x68);
  if (iVar18 != 0) {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x28);
    }
    else {
      iVar12 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x28));
      unaff_s6 = (short)*(undefined4 *)(iVar12 + -8);
      pcVar19 = *(code **)(iVar12 + -4);
    }
    iVar12 = (int)*(short *)(iVar14 + 0x24);
    if (0 < iVar18 << 0x10) {
      iVar12 = unaff_s6 + iVar12;
    }
    uVar17 = (*pcVar19)(iVar14 + iVar12,(int)(short)*(ushort *)(iVar14 + 0x68));
  }
  iVar18 = (uint)uVar5 + (uint)uVar4 + uVar16 + ((-(uint)(cVar1 != '\0') & 0x60) - 0x78) + iVar11;
  uVar17 = uVar17 - *(ushort *)(param_1 + 0x54);
  iVar14 = (uint)uVar3 + (uint)uVar2 + uVar15 + (uVar20 - 0xa0) + uVar17;
  if ((*(char *)(param_1 + 0x58) != '\0') && (iVar14 * 0x10000 < 0)) {
    iVar14 = 0;
  }
  if (*(char *)(param_1 + 0x5a) != '\0') {
    if ((int)*(short *)(param_1 + 0x48) - (int)*(short *)blbHeaderBufferBase < (int)(short)iVar14) {
      iVar14 = (int)*(short *)(param_1 + 0x48) - (int)*(short *)blbHeaderBufferBase;
    }
    if (iVar14 << 0x10 < 0) {
      iVar14 = 0;
    }
  }
  if ((*(char *)(param_1 + 0x59) != '\0') && (iVar18 * 0x10000 >> 0x10 < 5)) {
    iVar18 = 5;
  }
  if (*(char *)(param_1 + 0x5b) != '\0') {
    if (((int)*(short *)(param_1 + 0x4a) - (int)*(short *)(blbHeaderBufferBase + 2)) + -5 <
        (int)(short)iVar18) {
      iVar18 = ((int)*(short *)(param_1 + 0x4a) - (int)*(short *)(blbHeaderBufferBase + 2)) + -5;
    }
    if (iVar18 << 0x10 < 0) {
      iVar18 = 0;
    }
  }
  sVar6 = *(short *)(param_1 + 0x44);
  sVar7 = *(short *)(param_1 + 0x44);
  uVar20 = iVar14 - (uint)*(ushort *)(param_1 + 0x44);
  iVar14 = (int)(uVar20 * 0x10000) >> 0x10;
  if (iVar14 == 0) {
    *(undefined4 *)(param_1 + 0x4c) = 0;
  }
  else {
    if ((uVar17 & 0xffff) == 0) {
      if (iVar14 < 0) {
        uVar20 = -uVar20;
      }
      if (0x8f < (short)uVar20) goto LAB_80023858;
      iVar12 = *(int *)(&DAT_8009b074 + (uVar20 >> 1 & 0x7c));
    }
    else {
      if (iVar14 < 0) {
        uVar20 = -uVar20;
      }
      if ((short)uVar20 < 0x90) {
        iVar12 = *(int *)(&DAT_8009b104 + (uVar20 >> 1 & 0x7c));
      }
      else {
LAB_80023858:
        iVar12 = 0xa0000;
      }
    }
    if (iVar14 < 0) {
      iVar12 = -iVar12;
    }
    iVar14 = *(int *)(param_1 + 0x4c);
    if (iVar14 < iVar12) {
      iVar13 = 0x10000;
      if (iVar14 < 0) {
        iVar13 = 0x8000;
      }
      *(int *)(param_1 + 0x4c) = iVar14 + iVar13;
      bVar8 = iVar12 < *(int *)(param_1 + 0x4c);
    }
    else {
      if (iVar14 <= iVar12) goto LAB_800238e0;
      iVar13 = -0x10000;
      if (0 < iVar14) {
        iVar13 = -0x8000;
      }
      *(int *)(param_1 + 0x4c) = iVar14 + iVar13;
      bVar8 = *(int *)(param_1 + 0x4c) < iVar12;
    }
    if (bVar8) {
      *(int *)(param_1 + 0x4c) = iVar12;
    }
  }
LAB_800238e0:
  uVar20 = iVar18 - (uint)*(ushort *)(param_1 + 0x46);
  if ((uVar20 & 0xffff) == 0) {
    *(undefined4 *)(param_1 + 0x50) = 0;
    goto LAB_80023aec;
  }
  if (((*(char *)(param_1 + 0x60) != '\0') &&
      ((short)(*(short *)(param_1 + 0x46) + -0x66) <= (short)iVar18)) &&
     ((short)iVar18 <= (short)(*(short *)(param_1 + 0x46) + 0x10))) {
    iVar14 = *(int *)(param_1 + 0x50);
    if (iVar14 < 1) {
      if (-1 < iVar14) goto LAB_80023aec;
      iVar18 = 0x10000;
      if (iVar11 * 0x10000 < 1) {
        iVar18 = 0x8000;
      }
    }
    else {
      iVar18 = -0x8000;
      if (iVar11 * 0x10000 < 0) {
        iVar18 = -0x10000;
      }
    }
    *(int *)(param_1 + 0x50) = iVar14 + iVar18;
    goto LAB_80023aec;
  }
  iVar14 = (int)(uVar20 * 0x10000) >> 0x10;
  if (iVar14 < 1) {
    if (iVar11 * 0x10000 == 0) {
      if (iVar14 < 0) {
        uVar20 = -uVar20;
      }
      if ((short)uVar20 < 0x90) {
        iVar18 = *(int *)(&DAT_8009b074 + (uVar20 >> 1 & 0x7c));
      }
      else {
        iVar18 = 0xa0000;
      }
    }
    else {
      if (iVar14 < 0) {
        uVar20 = -uVar20;
      }
      if ((short)uVar20 < 0x90) {
        iVar18 = *(int *)(&DAT_8009b104 + (uVar20 >> 1 & 0x7c));
      }
      else {
        iVar18 = 0xa0000;
      }
    }
    if (iVar14 < 0) {
      iVar18 = -iVar18;
    }
  }
  else if (iVar11 * 0x10000 == 0) {
    if (0x8f < iVar14) goto LAB_800239d4;
    iVar18 = *(int *)(&DAT_8009b074 + (uVar20 >> 1 & 0x7c));
  }
  else if (0x8f < iVar14) {
LAB_800239d4:
    iVar18 = 0xa0000;
  }
  else {
    iVar18 = *(int *)(&DAT_8009b0bc + (uVar20 >> 1 & 0x7c));
  }
  iVar14 = *(int *)(param_1 + 0x50);
  if (iVar14 < iVar18) {
    iVar11 = 0x10000;
    if (iVar14 < 0) {
      iVar11 = 0x8000;
    }
    *(int *)(param_1 + 0x50) = iVar14 + iVar11;
    bVar8 = iVar18 < *(int *)(param_1 + 0x50);
  }
  else {
    if (iVar14 <= iVar18) goto LAB_80023aec;
    *(int *)(param_1 + 0x50) = iVar14 + -0x10000;
    bVar8 = *(int *)(param_1 + 0x50) < iVar18;
  }
  if (bVar8) {
    *(int *)(param_1 + 0x50) = iVar18;
  }
LAB_80023aec:
  iVar14 = *(short *)(param_1 + 0x46) * 0x10000 + (uint)*(ushort *)(param_1 + 0x5e) +
           *(int *)(param_1 + 0x50);
  *(short *)(param_1 + 0x5e) = (short)iVar14;
  iVar18 = *(short *)(param_1 + 0x44) * 0x10000 + (uint)*(ushort *)(param_1 + 0x5c) +
           *(int *)(param_1 + 0x4c);
  *(short *)(param_1 + 0x44) = (short)((uint)iVar18 >> 0x10);
  *(short *)(param_1 + 0x46) = (short)((uint)iVar14 >> 0x10);
  *(short *)(param_1 + 0x5c) = (short)iVar18;
  if ((*(char *)(param_1 + 0x58) != '\0') && (*(short *)(param_1 + 0x44) < 0)) {
    *(undefined2 *)(param_1 + 0x44) = 0;
  }
  if (*(char *)(param_1 + 0x5a) != '\0') {
    if ((int)*(short *)(param_1 + 0x48) - (int)*(short *)blbHeaderBufferBase <
        (int)*(short *)(param_1 + 0x44)) {
      *(short *)(param_1 + 0x44) = *(short *)(param_1 + 0x48) - *(short *)blbHeaderBufferBase;
    }
    if (*(short *)(param_1 + 0x44) < 0) {
      *(undefined2 *)(param_1 + 0x44) = 0;
    }
  }
  if ((*(char *)(param_1 + 0x59) != '\0') && (*(short *)(param_1 + 0x46) < 5)) {
    *(undefined2 *)(param_1 + 0x46) = 5;
  }
  if (*(char *)(param_1 + 0x5b) != '\0') {
    if (((int)*(short *)(param_1 + 0x4a) - (int)*(short *)(blbHeaderBufferBase + 2)) + -5 <
        (int)*(short *)(param_1 + 0x46)) {
      *(short *)(param_1 + 0x46) =
           (*(short *)(param_1 + 0x4a) - *(short *)(blbHeaderBufferBase + 2)) + -5;
    }
    if (*(short *)(param_1 + 0x46) < 0) {
      *(undefined2 *)(param_1 + 0x46) = 0;
    }
  }
  iVar14 = *(int *)(param_1 + 0x30);
  *(short *)(param_1 + 0x46) =
       *(short *)(param_1 + 0x46) + *(short *)(&DAT_8009b038 + (uint)*(byte *)(param_1 + 0x11a) * 2)
  ;
  iVar18 = (int)*(short *)(iVar14 + 0x26);
  sVar9 = *(short *)(iVar14 + 0x68);
  if (iVar18 != 0) {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x28);
    }
    else {
      iVar11 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x28));
      local_40 = (short)*(undefined4 *)(iVar11 + -8);
      pcVar19 = *(code **)(iVar11 + -4);
    }
    iVar11 = (int)*(short *)(iVar14 + 0x24);
    if (0 < iVar18 << 0x10) {
      iVar11 = local_40 + iVar11;
    }
    sVar9 = (*pcVar19)(iVar14 + iVar11,(int)sVar9,pcVar19,iVar18,sVar6 + -0x32,sVar7 + 0x32);
  }
  iVar14 = *(int *)(param_1 + 0x30);
  *(short *)(param_1 + 0x54) = sVar9;
  iVar18 = (int)*(short *)(iVar14 + 0x2e);
  if (iVar18 == 0) {
    *(short *)(param_1 + 0x56) = *(short *)(iVar14 + 0x6a);
  }
  else {
    if (iVar18 < 1) {
      pcVar19 = *(code **)(iVar14 + 0x30);
    }
    else {
      iVar11 = iVar18 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x30));
      local_30 = (short)*(undefined4 *)(iVar11 + -8);
      pcVar19 = *(code **)(iVar11 + -4);
    }
    iVar11 = (int)*(short *)(iVar14 + 0x2c);
    if (0 < iVar18 << 0x10) {
      iVar11 = local_30 + iVar11;
    }
    uVar10 = (*pcVar19)(iVar14 + iVar11,(int)*(short *)(iVar14 + 0x6a));
    *(undefined2 *)(param_1 + 0x56) = uVar10;
  }
  return;
}



// Updates camera scroll position based on player entity at context+0x30. Calculates offsets for
// player facing direction, applies boundary clamping, and stores final scroll offset at
// context+0x44/0x46.

void UpdateCameraPosition(int param_1,short param_2,short param_3)

{
  char cVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  short sVar5;
  undefined2 uVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  short in_t0;
  code *pcVar10;
  ushort uVar11;
  short unaff_s2;
  short unaff_s4;
  short local_30;
  
  if (*(char *)(param_1 + 99) == '\0') {
    iVar8 = *(int *)(param_1 + 0x30);
    uVar11 = (ushort)*(byte *)(param_1 + 0x12a);
    if (*(char *)(iVar8 + 0x74) == '\x01') {
      uVar11 = -uVar11;
    }
    if (*(char *)(param_1 + 0x62) != '\0') {
      uVar11 = -uVar11;
    }
    cVar1 = *(char *)(param_1 + 0x61);
    iVar9 = (int)*(short *)(iVar8 + 0x26);
    sVar4 = *(short *)(iVar8 + 0x68);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar10 = *(code **)(iVar8 + 0x28);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar7 + -8);
        pcVar10 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*(short *)(iVar8 + 0x24);
      if (0 < iVar9 << 0x10) {
        iVar7 = in_t0 + iVar7;
      }
      sVar4 = (*pcVar10)(iVar8 + iVar7,(int)sVar4);
    }
    sVar2 = *(short *)(param_1 + 0x120);
    iVar8 = *(int *)(param_1 + 0x30);
    sVar3 = *(short *)(param_1 + 100);
    iVar9 = (int)*(short *)(iVar8 + 0x2e);
    sVar5 = *(short *)(iVar8 + 0x6a);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar10 = *(code **)(iVar8 + 0x30);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x30));
        unaff_s2 = (short)*(undefined4 *)(iVar7 + -8);
        pcVar10 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*(short *)(iVar8 + 0x2c);
      if (0 < iVar9 << 0x10) {
        iVar7 = unaff_s2 + iVar7;
      }
      sVar5 = (*pcVar10)(iVar8 + iVar7,(int)sVar5);
    }
    *(ushort *)(param_1 + 0x44) = param_2 + sVar3 + sVar2 + sVar4 + (uVar11 - 0xa0);
    *(ushort *)(param_1 + 0x46) =
         param_3 + *(short *)(param_1 + 0x66) +
                   *(short *)(param_1 + 0x122) + sVar5 + ((-(ushort)(cVar1 != '\0') & 0x60) - 0x78);
    if ((*(char *)(param_1 + 0x58) != '\0') && (*(short *)(param_1 + 0x44) < 0)) {
      *(undefined2 *)(param_1 + 0x44) = 0;
    }
    if (*(char *)(param_1 + 0x5a) != '\0') {
      if ((int)*(short *)(param_1 + 0x48) - (int)*(short *)blbHeaderBufferBase <
          (int)*(short *)(param_1 + 0x44)) {
        *(short *)(param_1 + 0x44) = *(short *)(param_1 + 0x48) - *(short *)blbHeaderBufferBase;
      }
      if (*(short *)(param_1 + 0x44) < 0) {
        *(undefined2 *)(param_1 + 0x44) = 0;
      }
    }
    if ((*(char *)(param_1 + 0x59) != '\0') && (*(short *)(param_1 + 0x46) < 5)) {
      *(undefined2 *)(param_1 + 0x46) = 5;
    }
    if (*(char *)(param_1 + 0x5b) != '\0') {
      if (((int)*(short *)(param_1 + 0x4a) - (int)*(short *)(blbHeaderBufferBase + 2)) + -5 <
          (int)*(short *)(param_1 + 0x46)) {
        *(short *)(param_1 + 0x46) =
             (*(short *)(param_1 + 0x4a) - *(short *)(blbHeaderBufferBase + 2)) + -5;
      }
      if (*(short *)(param_1 + 0x46) < 0) {
        *(undefined2 *)(param_1 + 0x46) = 0;
      }
    }
    iVar8 = *(int *)(param_1 + 0x30);
    *(short *)(param_1 + 0x46) =
         *(short *)(param_1 + 0x46) +
         *(short *)(&DAT_8009b038 + (uint)*(byte *)(param_1 + 0x11a) * 2);
    iVar9 = (int)*(short *)(iVar8 + 0x26);
    sVar4 = *(short *)(iVar8 + 0x68);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar10 = *(code **)(iVar8 + 0x28);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x28));
        unaff_s4 = (short)*(undefined4 *)(iVar7 + -8);
        pcVar10 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*(short *)(iVar8 + 0x24);
      if (0 < iVar9 << 0x10) {
        iVar7 = unaff_s4 + iVar7;
      }
      sVar4 = (*pcVar10)(iVar8 + iVar7,(int)sVar4);
    }
    iVar8 = *(int *)(param_1 + 0x30);
    *(short *)(param_1 + 0x54) = sVar4;
    iVar9 = (int)*(short *)(iVar8 + 0x2e);
    if (iVar9 == 0) {
      *(short *)(param_1 + 0x56) = *(short *)(iVar8 + 0x6a);
    }
    else {
      if (iVar9 < 1) {
        pcVar10 = *(code **)(iVar8 + 0x30);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x30));
        local_30 = (short)*(undefined4 *)(iVar7 + -8);
        pcVar10 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*(short *)(iVar8 + 0x2c);
      if (0 < iVar9 << 0x10) {
        iVar7 = local_30 + iVar7;
      }
      uVar6 = (*pcVar10)(iVar8 + iVar7,(int)*(short *)(iVar8 + 0x6a));
      *(undefined2 *)(param_1 + 0x56) = uVar6;
    }
  }
  return;
}



undefined1 GetTileAttributeAtPosition(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  if (*(int *)(param_1 + 0x68) != 0) {
    iVar2 = (int)((((param_2 << 0x10) >> 0x14) - (uint)*(ushort *)(param_1 + 0x6c)) * 0x10000) >>
            0x10;
    if (-1 < iVar2) {
      if (iVar2 < *(short *)(param_1 + 0x70)) {
        iVar1 = (int)((((param_3 << 0x10) >> 0x14) - (uint)*(ushort *)(param_1 + 0x6e)) * 0x10000)
                >> 0x10;
        if (iVar1 < 0) {
          return 0;
        }
        if (iVar1 < *(short *)(param_1 + 0x72)) {
          return *(undefined1 *)
                  (*(int *)(param_1 + 0x68) + iVar1 * *(short *)(param_1 + 0x70) + iVar2);
        }
      }
    }
  }
  return 0;
}



// Entity Spawn Dispatcher - THIS IS THE SINGLE HOOK POINT FOR ALL ENTITY SPAWNING!
// 
// Called every frame from game mode callback (FUN_8007e654).
// Iterates entity definition list at GameState+0x28, spawning entities that come on screen.
// 
// ALGORITHM:
// 1. For each entity def in linked list at GameState+0x28:
//    a. Check if entity is within screen bounds (+/- 16px margin)
//    b. Check if entity not yet spawned (bit 0 of entityDef+0x16 is clear)
//    c. Get entity_type from entityDef+0x12 (offset 0x12 in 24-byte def structure)
//    d. Lookup callback from table: *(GameState+0x7C) + (entity_type * 8)
//    e. CALL CALLBACK: callback(gameState, entityDef)
//    f. Mark as spawned: set bit 0 at entityDef+0x16
// 
// ENTITY DEF STRUCTURE (24 bytes, from Asset 501):
//   +0x00: u16 x1 (bbox left)
//   +0x02: u16 y1 (bbox top)
//   +0x04: u16 x2 (bbox right)
//   +0x06: u16 y2 (bbox bottom)
//   +0x08: u16 x_center
//   +0x0A: u16 y_center
//   +0x0C: u16 variant
//   +0x0E: u32 padding
//   +0x12: u16 entity_type  &lt;-- Used to index callback table
//   +0x14: u16 layer
//   +0x16: u16 flags (bit 0 = already spawned)
// 
// CALLBACK TABLE (121 entries at 0x8009D5F8):
//   Each entry is 8 bytes:
//     +0x00: u32 flags (often 0xFFFF0000)
//     +0x04: void* callback  &lt;-- Function pointer
// 
// CALLBACK SIGNATURE:
//   void EntityTypeXXX_Callback(GameState* state, EntityDef* def)
// 
// TO HOOK THIS FOR TRACE RECORDING:
//   Add breakpoint at 0x80024288 (function start) or at the callback invocation
//   Record: entity_type (psVar10[9]), x_center (psVar10[4]), y_center (psVar10[5]),
//           variant (psVar10[6]), layer (psVar10[10]), callback address

void SpawnOnScreenEntities(int param_1)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  undefined4 *puVar5;
  int iVar6;
  undefined4 uVar7;
  code *pcVar8;
  int iVar9;
  short *psVar10;
  int *piVar11;
  uint uVar12;
  undefined4 unaff_s4;
  short local_30;
  short sStack_2e;
  short local_2c;
  
  sVar1 = *(short *)(param_1 + 0x44);
  sVar2 = *(short *)(param_1 + 0x46);
  sVar3 = *(short *)blbHeaderBufferBase;
  sVar4 = *(short *)(blbHeaderBufferBase + 2);
  uVar12 = *(uint *)(param_1 + 0x10c) & 1;
  for (piVar11 = *(int **)(param_1 + 0x28); piVar11 != (int *)0x0; piVar11 = (int *)*piVar11) {
    psVar10 = (short *)piVar11[1];
    if (((((uVar12 & 1) != 0) && (*psVar10 < (short)(sVar1 + sVar3 + 0x10))) &&
        ((short)(sVar1 + -0x10) < psVar10[2])) &&
       ((((*(byte *)(psVar10 + 0xb) & 1) == 0 && (psVar10[1] < (short)(sVar2 + sVar4 + 0x10))) &&
        (((short)(sVar2 + -0x10) < psVar10[3] &&
         ((uint)(ushort)psVar10[9] < (uint)*(ushort *)(param_1 + 0x80))))))) {
      puVar5 = (undefined4 *)((uint)(ushort)psVar10[9] * 8 + *(int *)(param_1 + 0x7c));
      uVar7 = *puVar5;
      pcVar8 = (code *)puVar5[1];
      sStack_2e = (short)((uint)uVar7 >> 0x10);
      iVar9 = (int)sStack_2e;
      if (0 < iVar9) {
        local_2c = (short)pcVar8;
        iVar6 = iVar9 * 8 + *(int *)(param_1 + local_2c);
        unaff_s4 = *(undefined4 *)(iVar6 + -8);
        pcVar8 = *(code **)(iVar6 + -4);
      }
      local_30 = (short)uVar7;
      iVar6 = (int)local_30;
      if (0 < iVar9 << 0x10) {
        iVar6 = (short)unaff_s4 + iVar6;
      }
      (*pcVar8)(param_1 + iVar6,psVar10);
      *(byte *)(psVar10 + 0xb) = *(byte *)(psVar10 + 0xb) | 1;
    }
    uVar12 = uVar12 + 1;
  }
  return;
}



void CleanupDeadEntities(int param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  
  puVar2 = *(undefined4 **)(param_1 + 0x28);
  puVar3 = (undefined4 *)0x0;
  while (puVar1 = puVar2, puVar1 != (undefined4 *)0x0) {
    if ((*(byte *)(puVar1[1] + 0x16) & 2) == 0) {
      *(undefined1 *)(puVar1[1] + 0x16) = 0;
      puVar2 = (undefined4 *)*puVar1;
      puVar3 = puVar1;
    }
    else {
      if (puVar3 == (undefined4 *)0x0) {
        *(undefined4 *)(param_1 + 0x28) = *puVar1;
      }
      else {
        *puVar3 = *puVar1;
      }
      FreeFromHeap(blbHeaderBufferBase,puVar1[1],0,0);
      puVar2 = (undefined4 *)*puVar1;
      FreeFromHeap(blbHeaderBufferBase,puVar1,8,0);
    }
  }
  return;
}



undefined4 FUN_8002453c(int param_1,short *param_2)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if (((((int)param_2[2] < *(short *)(param_1 + 0x44) + -0x10) ||
       ((int)*(short *)(param_1 + 0x44) + (int)*(short *)blbHeaderBufferBase + 0x10 < (int)*param_2)
       ) || ((int)param_2[3] < *(short *)(param_1 + 0x46) + -0x10)) ||
     ((int)*(short *)(param_1 + 0x46) + (int)*(short *)(blbHeaderBufferBase + 2) + 0x10 <
      (int)param_2[1])) {
    uVar1 = 1;
  }
  return uVar1;
}



undefined4
CheckTriggerZoneCollision
          (int param_1,short param_2,short param_3,undefined4 *param_4,undefined4 *param_5)

{
  short *psVar1;
  short *psVar2;
  ushort uVar3;
  
  psVar2 = *(short **)(param_1 + 0x74);
  uVar3 = 0;
  if (*(short *)(param_1 + 0x78) != 0) {
    psVar1 = psVar2 + 6;
    do {
      if ((((*psVar2 <= param_2) && (param_2 < psVar1[-4])) && (psVar1[-5] <= param_3)) &&
         (param_3 < psVar1[-3])) {
        *param_4 = *(undefined4 *)(psVar1 + -2);
        *param_5 = *(undefined4 *)psVar1;
        return 1;
      }
      psVar1 = psVar1 + 8;
      uVar3 = uVar3 + 1;
      psVar2 = psVar2 + 8;
    } while (uVar3 < *(ushort *)(param_1 + 0x78));
  }
  return 0;
}



void LoadBGColorFromTileHeader(int param_1)

{
  undefined1 *puVar1;
  
  puVar1 = (undefined1 *)GetTileHeaderPtr(param_1 + 0x84);
  *(undefined1 *)(param_1 + 0x130) = 1;
  *(undefined1 *)(param_1 + 0x131) = *puVar1;
  *(undefined1 *)(param_1 + 0x132) = puVar1[1];
  *(undefined1 *)(param_1 + 0x133) = puVar1[2];
  return;
}



void LoadSecondaryColorFromTileHeader(int param_1)

{
  undefined1 *puVar1;
  
  puVar1 = (undefined1 *)GetSecondaryColorPtr(param_1 + 0x84);
  *(undefined1 *)(param_1 + 0x127) = *puVar1;
  *(undefined1 *)(param_1 + 0x128) = puVar1[1];
  *(undefined1 *)(param_1 + 0x129) = puVar1[2];
  return;
}



// InitPlayerSpawnPosition - Sets initial player spawn coordinates.
// 
// VERIFIED via runtime memory analysis:
// 1. Calls GetSpawnPosition to read spawn_x/spawn_y from TileHeader+0x0C
// 2. Converts tile coords to pixel coords:
//    - GameState+0x116 = spawn_x * 16 + 8  (center of tile horizontally)
//    - GameState+0x118 = spawn_y * 16 + 15 (bottom of tile vertically)
// 3. These values are used by FUN_8007df38 for player initialization
// 
// Runtime verification (Elevated Structure level):
//   TileHeader spawn_x=13, spawn_y=20
//   GameState+0x116 = 216 (13*16+8) 
//   GameState+0x118 = 335 (20*16+15) 
// 
// param_1: GameState pointer

void InitPlayerSpawnPosition(int param_1)

{
  short local_10;
  short local_e;
  
  GetSpawnPosition(&local_10,param_1 + 0x84);
  *(short *)(param_1 + 0x116) = local_10 * 0x10 + 8;
  *(short *)(param_1 + 0x118) = local_e * 0x10 + 0xf;
  return;
}



// InitLayersAndTileState - Initializes layer rendering and tile state.
// 
// Called at end of InitializeAndLoadLevel to set up:
// 1. Level dimensions in pixels at GameState+0x48/0x4A (width*16, height*16)
// 2. Field 0x1C from TileHeader stored at GameState+0x78 (purpose unknown)
// 3. LevelDataContext+0x3C pointer stored at GameState+0x74
// 4. Iterates all layers and initializes their rendering state
// 
// PRIORITY SYSTEM (VERIFIED 2026-01-12):
// - LayerEntry+0x0C (render_param) low 16 bits = priority (signed short)
// - Lower priority values render behind higher values
// - Layers sorted into render lists by priority via AddLayerToRenderList_*
// - Typical ranges: 150-800 (background), 900-1100 (gameplay), 1200-1500 (foreground)
// - Entity z_order shares this priority space (player=10000, particles=959)
// 
// Layer skip conditions:
// - layer_type == 3 (at offset 0x26)
// - skip_render != 0 (at offset 0x28)
// 
// Render list selection based on layer dimensions:
// - 64x64: Small list (InitLayerRenderContext_Small @ 0x8001f534)
// - 128x128: Medium list (InitLayerRenderContext_Medium @ 0x8001f150)
// - Otherwise: Standard list (InitLayerRenderContext_Standard @ 0x8001ecc0)

void InitLayersAndTileState(int param_1)

{
  undefined1 *puVar1;
  short sVar2;
  short sVar3;
  bool bVar4;
  uint uVar5;
  uint *puVar6;
  bool bVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined2 uVar11;
  ushort uVar12;
  undefined4 uVar13;
  uint *puVar14;
  uint uVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  undefined1 auStack_60 [4];
  int local_5c;
  int local_58;
  uint local_54;
  uint local_50;
  uint local_4c;
  uint local_48;
  short local_40;
  short local_3e;
  uint local_38;
  uint local_34;
  byte local_30;
  
  iVar16 = param_1 + 0x84;
  uVar18 = 0;
  local_30 = (byte)(*(ushort *)(blbHeaderBufferBase + 2) >> 4);
  GetLevelDimensions(&local_40,iVar16);
  *(short *)(param_1 + 0x48) = local_40 << 4;
  *(short *)(param_1 + 0x4a) = local_3e << 4;
  uVar11 = GetAsset100Field1C(iVar16);
  *(undefined2 *)(param_1 + 0x78) = uVar11;
  uVar13 = GetLevelDataContextField3C(iVar16);
  *(undefined4 *)(param_1 + 0x74) = uVar13;
  do {
    uVar12 = GetLayerCount(param_1 + 0x84);
    uVar17 = uVar18 & 0xffff;
    if (uVar12 <= uVar17) {
      return;
    }
    puVar14 = (uint *)GetLayerEntry(param_1 + 0x84,uVar17);
    if (uVar17 == 0) {
      *(char *)(param_1 + 0x124) = (char)puVar14[0xb];
      *(undefined1 *)(param_1 + 0x125) = *(undefined1 *)((int)puVar14 + 0x2d);
      *(undefined1 *)(param_1 + 0x126) = *(undefined1 *)((int)puVar14 + 0x2e);
    }
    if (((short)puVar14[10] == 0) && (*(short *)((int)puVar14 + 0x26) != 3)) {
      if (*(char *)((int)puVar14 + 0x1e) != '\0') {
        *(undefined1 *)(param_1 + 0x59) = 1;
      }
      if (*(char *)((int)puVar14 + 0x21) != '\0') {
        *(undefined1 *)(param_1 + 0x5a) = 1;
      }
      if ((char)puVar14[8] != '\0') {
        *(undefined1 *)(param_1 + 0x58) = 1;
      }
      if (*(char *)((int)puVar14 + 0x1f) != '\0') {
        *(undefined1 *)(param_1 + 0x5b) = 1;
      }
      local_38 = *puVar14;
      bVar7 = false;
      local_34 = puVar14[1];
      sVar2 = (short)puVar14[2];
      sVar3 = *(short *)((int)puVar14 + 10);
      uVar15 = (uint)((short)puVar14[9] != 0);
      uVar17 = (uint)((puVar14[8] & 0xffff0000) != 0);
      if (uVar15 == 0) {
        if (uVar17 != 0) goto LAB_80024938;
      }
      else if (uVar17 == 0) {
LAB_80024938:
        if ((int)(uint)*(ushort *)((int)puVar14 + 0xe) <=
            (((int)((uint)*(ushort *)(blbHeaderBufferBase + 2) << 0x10) >> 0x14) + 1) * 0x15) {
          bVar7 = true;
        }
      }
      if ((((0x3f < sVar2) || (0x3f < sVar3)) || ((uVar15 != 0 && (sVar2 < 0x15)))) ||
         ((uVar17 != 0 && (sVar3 <= (short)(ushort)local_30)))) {
        bVar7 = false;
      }
      bVar4 = false;
      if (((!bVar7) && (sVar2 < 0x81)) && (sVar3 < 0x81)) {
        bVar4 = (int)(uint)*(ushort *)((int)puVar14 + 0xe) <=
                (((int)((uint)*(ushort *)(blbHeaderBufferBase + 2) << 0x10) >> 0x14) + 1) * 0x15;
      }
      if ((((uVar15 != 0) && (sVar2 != 0x40)) || ((uVar17 != 0 && (sVar3 != 0x40)))) &&
         (sVar2 != 0x80)) {
        bVar4 = false;
      }
      if (bVar7) {
        uVar13 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
        iVar16 = GetTilemapDataPtr(param_1 + 0x84,uVar18 & 0xffff);
        uVar10 = local_34;
        uVar9 = local_38;
        uVar8 = puVar14[3];
        uVar5 = (uint)&stack0xffffff9f & 3;
        puVar6 = (uint *)(&stack0xffffff9f + -uVar5);
        *puVar6 = *puVar6 & -1 << (uVar5 + 1) * 8 | local_38 >> (3 - uVar5) * 8;
        puVar1 = auStack_60 + 3;
        uVar5 = (uint)puVar1 & 3;
        *(uint *)(puVar1 + -uVar5) =
             *(uint *)(puVar1 + -uVar5) & -1 << (uVar5 + 1) * 8 | uVar10 >> (3 - uVar5) * 8;
        auStack_60 = (undefined1  [4])uVar10;
        local_5c = (int)sVar2;
        local_58 = (int)sVar3;
        local_54 = (uint)*(short *)((int)puVar14 + 0xe);
        local_48 = (uint)*(byte *)((int)puVar14 + 0x26);
        local_50 = uVar15;
        local_4c = uVar17;
        iVar16 = InitLayerRenderContext_Small
                           (uVar13,puVar14 + 0xb,(int)(short)uVar8,*(undefined4 *)(param_1 + 0x108),
                            iVar16,uVar9);
        AddLayerToRenderList_Small(param_1,iVar16);
      }
      else if (bVar4) {
        uVar13 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
        iVar16 = GetTilemapDataPtr(param_1 + 0x84,uVar18 & 0xffff);
        uVar10 = local_34;
        uVar9 = local_38;
        uVar8 = puVar14[3];
        uVar5 = (uint)&stack0xffffff9f & 3;
        puVar6 = (uint *)(&stack0xffffff9f + -uVar5);
        *puVar6 = *puVar6 & -1 << (uVar5 + 1) * 8 | local_38 >> (3 - uVar5) * 8;
        puVar1 = auStack_60 + 3;
        uVar5 = (uint)puVar1 & 3;
        *(uint *)(puVar1 + -uVar5) =
             *(uint *)(puVar1 + -uVar5) & -1 << (uVar5 + 1) * 8 | uVar10 >> (3 - uVar5) * 8;
        auStack_60 = (undefined1  [4])uVar10;
        local_5c = (int)sVar2;
        local_58 = (int)sVar3;
        local_54 = (uint)*(short *)((int)puVar14 + 0xe);
        local_48 = (uint)*(byte *)((int)puVar14 + 0x26);
        local_50 = uVar15;
        local_4c = uVar17;
        iVar16 = InitLayerRenderContext_Medium
                           (uVar13,puVar14 + 0xb,(int)(short)uVar8,*(undefined4 *)(param_1 + 0x108),
                            iVar16,uVar9);
        AddLayerToRenderList_Medium(param_1,iVar16);
      }
      else {
        uVar13 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
        iVar16 = GetTilemapDataPtr(param_1 + 0x84,uVar18 & 0xffff);
        uVar10 = local_34;
        uVar9 = local_38;
        uVar8 = puVar14[3];
        uVar5 = (uint)&stack0xffffff9f & 3;
        puVar6 = (uint *)(&stack0xffffff9f + -uVar5);
        *puVar6 = *puVar6 & -1 << (uVar5 + 1) * 8 | local_38 >> (3 - uVar5) * 8;
        puVar1 = auStack_60 + 3;
        uVar5 = (uint)puVar1 & 3;
        *(uint *)(puVar1 + -uVar5) =
             *(uint *)(puVar1 + -uVar5) & -1 << (uVar5 + 1) * 8 | uVar10 >> (3 - uVar5) * 8;
        auStack_60 = (undefined1  [4])uVar10;
        local_5c = (int)sVar2;
        local_58 = (int)sVar3;
        local_4c = (uint)*(byte *)((int)puVar14 + 0x26);
        local_54 = uVar15;
        local_50 = uVar17;
        iVar16 = InitLayerRenderContext_Standard
                           (uVar13,puVar14 + 0xb,(int)(short)uVar8,*(undefined4 *)(param_1 + 0x108),
                            iVar16,uVar9);
        AddLayerToRenderList_Standard(param_1,iVar16);
      }
      *(uint *)(iVar16 + 0x20) = puVar14[4];
      *(uint *)(iVar16 + 0x24) = puVar14[5];
      *(short *)(iVar16 + 0x30) = (short)puVar14[6];
      *(undefined2 *)(iVar16 + 0x32) = *(undefined2 *)((int)puVar14 + 0x1a);
      *(char *)(iVar16 + 0x3a) = (char)puVar14[7];
      *(undefined1 *)(iVar16 + 0x3b) = *(undefined1 *)((int)puVar14 + 0x1d);
    }
    uVar18 = uVar18 + 1;
  } while( true );
}



// Initializes TileAttribute state in GameState. Called from InitializeAndLoadLevel. Copies Asset
// 500 header to: GameState+0x68=data ptr, +0x6c=unknown u16s, +0x70=dimensions.

void InitTileAttributeState(int param_1)

{
  uint uVar1;
  uint *puVar2;
  char cVar3;
  undefined4 uVar4;
  int iVar5;
  undefined2 local_38;
  undefined2 local_36;
  undefined2 local_30;
  undefined2 local_2e;
  undefined4 local_28;
  undefined4 local_24;
  uint uStack_15;
  undefined1 uStack_11;
  
  iVar5 = param_1 + 0x84;
  cVar3 = HasTileAttributes(iVar5);
  if (cVar3 == '\0') {
    *(undefined4 *)(param_1 + 0x68) = 0;
  }
  else {
    GetTileAttributeUnknown(&local_38,iVar5);
    GetTileAttributeDimensions(&local_30,iVar5);
    local_28 = CONCAT22(local_36,local_38);
    local_24 = CONCAT22(local_2e,local_30);
    uVar4 = GetTileAttributeData();
    uVar1 = (uint)&uStack_15 & 3;
    puVar2 = (uint *)((int)&uStack_15 - uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | local_28 >> (3 - uVar1) * 8;
    uVar1 = (uint)&uStack_11 & 3;
    puVar2 = (uint *)(&uStack_11 + -uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | local_24 >> (3 - uVar1) * 8;
    *(undefined4 *)(param_1 + 0x68) = uVar4;
    uVar1 = param_1 + 0x6fU & 3;
    puVar2 = (uint *)((param_1 + 0x6fU) - uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | local_28 >> (3 - uVar1) * 8;
    uVar1 = param_1 + 0x6cU & 3;
    puVar2 = (uint *)((param_1 + 0x6cU) - uVar1);
    *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | local_28 << uVar1 * 8;
    uVar1 = param_1 + 0x73U & 3;
    puVar2 = (uint *)((param_1 + 0x73U) - uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | local_24 >> (3 - uVar1) * 8;
    uVar1 = param_1 + 0x70U & 3;
    puVar2 = (uint *)((param_1 + 0x70U) - uVar1);
    *puVar2 = *puVar2 & 0xffffffffU >> (4 - uVar1) * 8 | local_24 << uVar1 * 8;
  }
  return;
}



void LoadEntitiesFromAsset501(int param_1)

{
  undefined *puVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  uint uVar9;
  
  iVar2 = *(int *)(param_1 + 0x28);
  while (iVar2 != 0) {
    puVar7 = *(undefined4 **)(param_1 + 0x28);
    FreeFromHeap(blbHeaderBufferBase,puVar7[1],0,0);
    puVar1 = blbHeaderBufferBase;
    *(undefined4 *)(param_1 + 0x28) = *puVar7;
    FreeFromHeap(puVar1,puVar7,8,0);
    iVar2 = *(int *)(param_1 + 0x28);
  }
  uVar3 = GetEntityCount(param_1 + 0x84);
  if ((uVar3 & 0xffff) != 0) {
    iVar2 = GetEntityDataPtr(param_1 + 0x84);
    for (uVar9 = 0; (uVar9 & 0xffff) < (uVar3 & 0xffff); uVar9 = uVar9 + 1) {
      puVar8 = (undefined4 *)((uVar9 & 0xffff) * 0x18 + iVar2);
      puVar7 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x18,1,0);
      uVar4 = puVar8[1];
      uVar5 = puVar8[2];
      uVar6 = puVar8[3];
      *puVar7 = *puVar8;
      puVar7[1] = uVar4;
      puVar7[2] = uVar5;
      puVar7[3] = uVar6;
      uVar4 = puVar8[5];
      puVar7[4] = puVar8[4];
      puVar7[5] = uVar4;
      puVar8 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
      uVar4 = *(undefined4 *)(param_1 + 0x28);
      puVar8[1] = puVar7;
      *puVar8 = uVar4;
      *(undefined4 **)(param_1 + 0x28) = puVar8;
    }
  }
  return;
}



void InitAnimatedTileEntities(int param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  short sVar9;
  uint unaff_s6;
  
  iVar8 = 0;
  iVar7 = 0;
  iVar2 = GetTileSizeFlags(param_1 + 0x84);
  sVar9 = 1;
  while( true ) {
    iVar6 = (int)sVar9;
    if ((int)(uint)*(ushort *)(param_1 + 0x104) <= iVar6) break;
    if ((*(byte *)(iVar6 + iVar2 + -1) & 4) != 0) {
      iVar3 = GetAnimatedTileData(param_1 + 0x84,iVar6);
      if (iVar8 == 0) {
        uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
        iVar8 = InitPlayerEntity(uVar4);
        AddEntityToSortedRenderList(param_1,iVar8);
        iVar7 = *(int *)(iVar8 + 0x34);
        unaff_s6 = (int)*(short *)(iVar7 + 4) + 0xfU >> 4;
      }
      uVar5 = unaff_s6 & 0xff;
      if (uVar5 == 0) {
        trap(0x1c00);
      }
      iVar6 = iVar6 * 8;
      *(undefined2 *)(iVar6 + *(int *)(param_1 + 0x108)) = *(undefined2 *)(iVar7 + 0x24);
      *(undefined2 *)(iVar6 + *(int *)(param_1 + 0x108) + 2) = *(undefined2 *)(iVar7 + 0x26);
      cVar1 = *(char *)(iVar7 + 0x31);
      *(char *)(iVar6 + *(int *)(param_1 + 0x108) + 4) =
           *(char *)(iVar7 + 0x30) + (char)((iVar3 - 1U) % uVar5) * '\x10';
      *(char *)(iVar6 + *(int *)(param_1 + 0x108) + 5) =
           cVar1 + (char)((iVar3 - 1U) / uVar5) * '\x10';
      *(undefined1 *)(iVar6 + *(int *)(param_1 + 0x108) + 6) = 1;
    }
    sVar9 = sVar9 + 1;
  }
  return;
}



void AddPreInitEntitiesToList(int param_1)

{
  bool bVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  short sVar7;
  
  iVar2 = GetPaletteAnimData(param_1 + 0x84);
  sVar7 = 0;
  if (iVar2 != 0) {
    for (; iVar4 = sVar7 * 4, (int)sVar7 < (int)(uint)*(byte *)(param_1 + 0x114); sVar7 = sVar7 + 1)
    {
      if ((*(byte *)(iVar2 + iVar4) & 1) != 0) {
        iVar4 = *(int *)(iVar4 + *(int *)(param_1 + 0x110));
        if (*(undefined4 **)(param_1 + 0x1c) == (undefined4 *)0x0) {
          puVar3 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
          *(undefined4 **)(param_1 + 0x1c) = puVar3;
        }
        else {
          puVar3 = *(undefined4 **)(param_1 + 0x1c);
          puVar6 = (undefined4 *)0x0;
          while (puVar5 = puVar3, bVar1 = false, puVar5 != (undefined4 *)0x0) {
            if (*(short *)(iVar4 + 0x10) <= *(short *)(puVar5[1] + 0x10)) {
              puVar3 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
              if (puVar6 == (undefined4 *)0x0) {
                *(undefined4 **)(param_1 + 0x1c) = puVar3;
              }
              else {
                *puVar6 = puVar3;
              }
              *puVar3 = puVar5;
              puVar3[1] = iVar4;
              bVar1 = true;
              break;
            }
            puVar6 = puVar5;
            puVar3 = (undefined4 *)*puVar5;
          }
          if (bVar1) goto LAB_80025210;
          puVar3 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,8,1,0);
          *puVar6 = puVar3;
        }
        *puVar3 = 0;
        puVar3[1] = iVar4;
      }
LAB_80025210:
    }
  }
  return;
}



// Loads tile pixel data to VRAM for GPU rendering.
// Uses Asset 302 (TileFlags) to determine tile properties:
//   - Bit 0: Semi-transparency (SetSemiTrans)
//   - Bit 1: Tile size (0=1616, 1=88)
//   - Bit 2: Skip flag (don't load this tile)
// 
// 88 tiles are uploaded with w=4 (8 pixels in VRAM units).
// 1616 tiles are uploaded with w=8 (16 pixels).
// Both use h=16 for VRAM upload rect.
// 
// Tile indices are 1-based in this function (starts loop at 1).

void LoadTileDataToVRAM(int game_state)

{
  byte bVar1;
  undefined2 uVar2;
  undefined *puVar3;
  undefined1 uVar4;
  char cVar5;
  u_short uVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  u_long *p;
  uint dest_stride;
  int iVar10;
  byte *pbVar11;
  ushort uVar12;
  int iVar13;
  uint uVar14;
  short local_38;
  short local_36;
  RECT local_30;
  
  iVar10 = game_state + 0x84;
  iVar7 = GetTotalTileCount(iVar10);
  puVar3 = blbHeaderBufferBase;
  *(short *)(game_state + 0x104) = (short)(iVar7 + 1U);
  uVar8 = AllocateFromHeap(puVar3,8,iVar7 + 1U & 0xffff,0);
  *(undefined4 *)(game_state + 0x108) = uVar8;
  uVar4 = GetPaletteGroupCount(iVar10);
  *(undefined1 *)(game_state + 0x114) = uVar4;
  uVar8 = AllocateFromHeap(blbHeaderBufferBase,4,uVar4,0);
  *(undefined4 *)(game_state + 0x110) = uVar8;
  iVar7 = GetPaletteAnimData(iVar10);
  for (uVar14 = 0; (int)(short)uVar14 < (int)(uint)*(byte *)(game_state + 0x114);
      uVar14 = uVar14 + 1) {
    uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x3c,1,0);
    uVar8 = FUN_80019790(uVar8,1);
    iVar13 = (short)uVar14 * 4;
    *(undefined4 *)(iVar13 + *(int *)(game_state + 0x110)) = uVar8;
    iVar9 = GetPaletteDataPtr(iVar10,uVar14 & 0xff);
    FUN_80019cf8(*(undefined4 *)(iVar13 + *(int *)(game_state + 0x110)),iVar9);
    pbVar11 = (byte *)(iVar7 + iVar13);
    if ((iVar7 != 0) && ((*pbVar11 & 1) != 0)) {
      iVar9 = GetPaletteDataPtr(iVar10,uVar14 & 0xff);
      FUN_80019d74(*(undefined4 *)(iVar13 + *(int *)(game_state + 0x110)),iVar9);
      FUN_80019f2c(*(undefined4 *)(iVar13 + *(int *)(game_state + 0x110)),pbVar11[3],pbVar11[1],
                   pbVar11[2],*pbVar11 & 2);
    }
  }
  iVar7 = GetPaletteIndices(game_state + 0x84);
  iVar10 = GetTileSizeFlags(game_state + 0x84);
  uVar12 = 1;
  p = (u_long *)AllocateFromHeap(blbHeaderBufferBase,1,0x100,0);
  do {
    iVar9 = (int)(short)uVar12;
    if ((int)(uint)*(ushort *)(game_state + 0x104) <= iVar9) {
      FreeFromHeap(blbHeaderBufferBase,p,0,0);
      return;
    }
    bVar1 = *(byte *)(iVar9 + iVar10 + -1);
    if ((bVar1 & 4) == 0) {
      uVar14 = (uint)((bVar1 & 2) == 0);
      uVar2 = *(undefined2 *)
               (*(int *)((uint)*(byte *)(iVar9 + iVar7 + -1) * 4 + *(int *)(game_state + 0x110)) +
               0x2c);
      dest_stride = 0x10;
      if (uVar14 == 0) {
        dest_stride = 8;
      }
      CopyTilePixelData((int *)(game_state + 0x84),iVar9,(uchar *)p,dest_stride);
      FUN_80014278(blbHeaderBufferBase,&local_38,uVar14);
      local_30.x = local_38;
      local_30.y = local_36;
      if (uVar14 == 1) {
        local_30.w = 8;
      }
      else {
        local_30.w = 4;
      }
      local_30.h = 0x10;
      LoadImage(&local_30,p);
      DrawSync(0);
      uVar6 = GetTPage(uVar14,0,(int)local_38 & 0xffffffc0,(int)local_36 & 0xffffff00);
      iVar9 = (int)((uint)uVar12 << 0x10) >> 0xd;
      *(u_short *)(iVar9 + *(int *)(game_state + 0x108)) = uVar6;
      *(undefined2 *)(iVar9 + *(int *)(game_state + 0x108) + 2) = uVar2;
      if (uVar14 == 0) {
        iVar13 = *(int *)(game_state + 0x108);
        cVar5 = (byte)local_38 << 2;
LAB_80025540:
        *(char *)(iVar9 + iVar13 + 4) = cVar5;
      }
      else if (uVar14 == 1) {
        iVar13 = *(int *)(game_state + 0x108);
        cVar5 = ((byte)local_38 & 0x3f) << 1;
        goto LAB_80025540;
      }
      iVar9 = (short)uVar12 * 8;
      *(char *)(iVar9 + *(int *)(game_state + 0x108) + 5) = (char)local_36;
      *(byte *)(iVar9 + *(int *)(game_state + 0x108) + 6) =
           *(byte *)((short)uVar12 + iVar10 + -1) & 1;
    }
    uVar12 = uVar12 + 1;
  } while( true );
}



void FUN_800255c8(int param_1,undefined2 param_2,undefined4 *param_3,undefined2 *param_4)

{
  undefined2 uVar1;
  undefined4 uVar2;
  
  uVar2 = FUN_8007b850(param_1 + 0x84,param_2);
  *param_3 = uVar2;
  uVar1 = FUN_8007b80c(param_1 + 0x84,param_2);
  *param_4 = uVar1;
  return;
}



undefined4 FUN_80025630(undefined4 param_1,int param_2,undefined2 param_3)

{
  FUN_8007b894(param_1,param_2 + 0x84,param_3);
  return param_1;
}



void FUN_80025664(int param_1,byte param_2)

{
  undefined2 uVar1;
  
  if (param_2 == 1) {
    uVar1 = 0xffd0;
  }
  else {
    if (param_2 < 2) {
      if (param_2 != 0) {
        return;
      }
      *(undefined2 *)(param_1 + 0x120) = 0;
      return;
    }
    uVar1 = 0x30;
    if (param_2 != 2) {
      return;
    }
  }
  *(undefined2 *)(param_1 + 0x120) = uVar1;
  return;
}



void FUN_800256b8(int param_1,byte param_2)

{
  undefined2 uVar1;
  
  if (param_2 == 1) {
    uVar1 = 0xffd0;
  }
  else {
    if (param_2 < 2) {
      if (param_2 != 0) {
        return;
      }
      *(undefined2 *)(param_1 + 0x122) = 0;
      return;
    }
    uVar1 = 0x30;
    if (param_2 != 2) {
      return;
    }
  }
  *(undefined2 *)(param_1 + 0x122) = uVar1;
  return;
}



void UpdateInputState(ushort *param_1,ushort param_2)

{
  ushort uVar1;
  ushort uVar2;
  uint uVar3;
  ushort *puVar4;
  
  if (*(char *)((int)param_1 + 5) != '\0') {
    if (((uint)param_1[8] < (uint)**(ushort **)(param_1 + 4)) && (param_2 == 0)) {
      param_1[1] = *(ushort *)((uint)param_1[8] * 4 + *(int *)(param_1 + 6)) & ~*param_1;
      uVar1 = param_1[9];
      uVar2 = *(ushort *)((uint)param_1[8] * 4 + *(int *)(param_1 + 6));
      param_1[9] = uVar1 - 1;
      *param_1 = uVar2;
      if ((ushort)(uVar1 - 1) == 0) {
        uVar1 = param_1[8];
        param_1[8] = uVar1 + 1;
        param_1[9] = *(ushort *)((uint)(ushort)(uVar1 + 1) * 4 + *(int *)(param_1 + 6) + 2);
      }
      goto LAB_80025ab0;
    }
    if (*(char *)((int)param_1 + 5) != '\0') {
      *(undefined1 *)((int)param_1 + 5) = 0;
      param_1[1] = 0;
      *param_1 = 0;
      goto LAB_80025ab0;
    }
  }
  uVar1 = *param_1;
  *param_1 = param_2;
  param_1[1] = param_2 & ~uVar1;
LAB_80025ab0:
  if (((char)param_1[2] == '\0') || (0x3ff < **(ushort **)(param_1 + 4))) {
    *(undefined1 *)(param_1 + 2) = 0;
  }
  else {
    if (**(ushort **)(param_1 + 4) == 0) {
      uVar3 = (uint)param_1[8];
    }
    else {
      puVar4 = (ushort *)((uint)param_1[8] * 4 + *(int *)(param_1 + 6));
      uVar3 = param_1[8] + 1;
      if (*puVar4 == param_2) {
        puVar4[1] = puVar4[1] + 1;
        return;
      }
      param_1[8] = (ushort)uVar3;
      uVar3 = uVar3 & 0xffff;
    }
    *(undefined2 *)(uVar3 * 4 + *(int *)(param_1 + 6) + 2) = 1;
    *(ushort *)((uint)param_1[8] * 4 + *(int *)(param_1 + 6)) = param_2;
    **(short **)(param_1 + 4) = **(short **)(param_1 + 4) + 1;
  }
  return;
}



void FUN_80025b7c(int param_1,int param_2)

{
  *(int *)(param_1 + 8) = param_2;
  *(int *)(param_1 + 0xc) = param_2 + 4;
  return;
}



void FUN_80025bc0(int param_1,char param_2)

{
  if (((*(char *)(param_1 + 5) == '\0') || (param_2 == '\0')) &&
     (*(char *)(param_1 + 5) = param_2, param_2 != '\0')) {
    *(undefined1 *)(param_1 + 4) = 0;
    *(undefined2 *)(param_1 + 0x10) = 0;
    *(undefined2 *)(param_1 + 0x12) = *(undefined2 *)(*(int *)(param_1 + 0xc) + 2);
  }
  return;
}



void FUN_80025c7c(char *param_1,int param_2,char *param_3)

{
  byte bVar1;
  uint uVar2;
  byte *pbVar3;
  byte bVar4;
  byte bVar5;
  uint uVar6;
  uint uVar7;
  byte local_8 [4];
  char local_4;
  char local_3;
  char local_2;
  char local_1;
  
  local_8[0] = *param_1 + 1;
  if (local_8[0] == 5) {
    local_8[0] = *param_1 + 2;
  }
  if (local_8[0] == 0x11) {
    local_8[0] = 0x12;
  }
  local_8[1] = param_1[0x11];
  local_8[2] = param_1[0x14];
  local_8[3] = param_1[0x15];
  local_4 = param_1[0x16];
  local_3 = param_1[0x1c];
  local_2 = param_1[0x19];
  bVar4 = 0;
  local_1 = param_1[0x1b];
  uVar2 = 0;
  do {
    *(undefined1 *)(param_2 + uVar2) = 0;
    bVar4 = bVar4 + 1;
    uVar2 = (uint)bVar4;
  } while (bVar4 < 0xc);
  uVar7 = 0;
  uVar6 = 0;
  bVar4 = 0;
  uVar2 = 0;
  do {
    if (((int)(uint)local_8[(byte)(&null_01h_8009b198)[uVar2 * 2]] >>
         ((byte)(&null_00h_8009b199)[uVar2 * 2] & 0x1f) & 1U) != 0) {
      pbVar3 = (byte *)(param_2 + (uVar7 & 0xff));
      *pbVar3 = *pbVar3 | (byte)(1 << (uVar6 & 0x1f));
    }
    uVar6 = uVar6 + 1;
    if (2 < (uVar6 & 0xff)) {
      uVar6 = 0;
      uVar7 = uVar7 + 1;
    }
    bVar4 = bVar4 + 1;
    uVar2 = (uint)bVar4;
  } while (bVar4 < 0x20);
  bVar5 = 0;
  bVar4 = 0;
  do {
    uVar2 = (uint)bVar4;
    bVar4 = bVar4 + 1;
    bVar5 = bVar5 + *(char *)(param_2 + uVar2);
  } while (bVar4 < 0xc);
  bVar4 = 0xb;
  if ((*(char *)(param_2 + 0xb) == '\0') && (bVar4 = 10, *(char *)(param_2 + 10) == '\0')) {
    bVar1 = 9;
    do {
      bVar4 = bVar1;
      if (bVar4 == 0) break;
      bVar1 = bVar4 - 1;
    } while (*(char *)(param_2 + (uint)bVar4) == '\0');
  }
  *(byte *)((uint)bVar4 + param_2 + 1) = bVar5 & 7;
  *param_3 = bVar4 + 2;
  return;
}



void initPlayerState(undefined1 *param_1)

{
  int iVar1;
  
  iVar1 = 0;
  *param_1 = 1;
  param_1[1] = 1;
  param_1[0x11] = 5;
  param_1[0x12] = 0;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  param_1[0x1c] = 0;
  param_1[0x13] = 0;
  param_1[0x19] = 0;
  param_1[0x1a] = 0;
  param_1[0x1b] = 0;
  param_1[0x17] = 0;
  param_1[0x18] = 0;
  param_1[0x1d] = 0;
  param_1[0x10] = 1;
  *(undefined2 *)(param_1 + 2) = 0;
  param_1[4] = 0;
  param_1[5] = 0;
  do {
    param_1[(short)iVar1 + 6] = 0;
    iVar1 = iVar1 + 1;
  } while (iVar1 * 0x10000 >> 0x10 < 10);
  return;
}



void FUN_8002615c(int param_1)

{
  *(undefined1 *)(param_1 + 0x1a) = 0;
  return;
}



void ResetPlayerCollectibles(int param_1)

{
  int iVar1;
  int iVar2;
  
  g_pPlayerState[0x18] = 0;
  iVar2 = 0;
  *(byte *)(param_1 + 0x17) = *(byte *)(param_1 + 0x17) & 0xfd;
  do {
    iVar1 = param_1 + (short)iVar2;
    if (*(char *)(iVar1 + 6) != '\0') {
      *(char *)(param_1 + 5) = *(char *)(param_1 + 5) + '\x01';
      *(undefined1 *)(iVar1 + 6) = 0;
    }
    iVar2 = iVar2 + 1;
  } while (iVar2 * 0x10000 >> 0x10 < 10);
  return;
}



void FUN_800261d4(undefined1 *param_1)

{
  int iVar1;
  
  iVar1 = 0;
  *param_1 = 1;
  param_1[1] = 1;
  param_1[0x11] = 5;
  param_1[0x12] = 0;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  param_1[0x1c] = 0;
  param_1[0x13] = 0;
  param_1[0x19] = 0;
  param_1[0x1a] = 0;
  param_1[0x1b] = 0;
  param_1[0x17] = 0;
  param_1[0x18] = 0;
  param_1[0x1d] = 0;
  param_1[0x10] = 1;
  *(undefined2 *)(param_1 + 2) = 0;
  param_1[4] = 0;
  param_1[5] = 0;
  do {
    param_1[(short)iVar1 + 6] = 0;
    iVar1 = iVar1 + 1;
  } while (iVar1 * 0x10000 >> 0x10 < 10);
  return;
}



void FUN_80026260(int param_1)

{
  int iVar1;
  
  iVar1 = 0;
  *(undefined1 *)(param_1 + 5) = 0;
  *(undefined1 *)(param_1 + 4) = 0;
  *(char *)(param_1 + 0x10) = *(char *)(param_1 + 0x10) + '\x01';
  do {
    *(undefined1 *)(param_1 + (short)iVar1 + 6) = 0;
    iVar1 = iVar1 + 1;
  } while (iVar1 * 0x10000 >> 0x10 < 10);
  return;
}



void DecrementPlayerLives(int param_1)

{
  *(undefined1 *)(param_1 + 0x17) = 0;
  *(undefined1 *)(param_1 + 0x1d) = 0;
  if (*(char *)(param_1 + 0x11) != '\0') {
    *(char *)(param_1 + 0x11) = *(char *)(param_1 + 0x11) + -1;
  }
  return;
}



void ResetPlayerUnlocksByLevel(undefined4 param_1,byte param_2)

{
  if (param_2 < 3) {
    g_pPlayerState[0x14] = 0;
    g_pPlayerState[0x15] = 0;
  }
  if (param_2 < 10) {
    g_pPlayerState[0x16] = 0;
  }
  if (param_2 < 0xd) {
    g_pPlayerState[0x1c] = 0;
  }
  return;
}



void EntityCallback_8002700c(int param_1)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  
  bVar1 = *(char *)(param_1 + 0x10b) + 1;
  uVar3 = (uint)bVar1;
  *(byte *)(param_1 + 0x10b) = bVar1;
  uVar2 = (uint)(*(byte *)(param_1 + 0x10a) >> 1);
  if (*(byte *)(param_1 + 0x10a) < uVar3) {
    *(undefined2 *)(param_1 + 0x6a) = *(undefined2 *)(param_1 + 0x100);
    EntityProcessCallbackQueue(param_1);
  }
  else if (uVar2 < uVar3) {
    *(short *)(param_1 + 0x6a) =
         *(short *)(param_1 + 0x102) +
         (*(short *)(param_1 + 0x104) -
         (short)((int)*(short *)(param_1 + 0x104) >> ((uVar3 - uVar2) + 1 & 0x1f)));
  }
  else {
    *(short *)(param_1 + 0x6a) =
         *(short *)(param_1 + 0x102) +
         (short)((int)*(short *)(param_1 + 0x104) >> ((uVar2 - uVar3) + 1 & 0x1f));
  }
  return;
}



void Callback_800270a8(int param_1)

{
  *(undefined1 *)(param_1 + 0x10f) = 0;
  *(undefined1 *)(param_1 + 0x110) = 0;
  *(undefined1 *)(param_1 + 0x10a) = 0x14;
  *(undefined1 *)(param_1 + 0x10b) = 0;
  *(short *)(param_1 + 0x100) = *(short *)(param_1 + 0x106);
  *(undefined2 *)(param_1 + 0x102) = *(undefined2 *)(param_1 + 0x6a);
  *(short *)(param_1 + 0x104) = *(short *)(param_1 + 0x106) - *(short *)(param_1 + 0x6a);
  *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
  *(code **)(param_1 + 0x20) = EntityCallback_8002700c;
  *(undefined1 *)(param_1 + 0x10e) = 1;
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_800271cc;
  return;
}



void Callback_8002713c(int param_1)

{
  *(undefined1 *)(param_1 + 0x10a) = 0x14;
  *(undefined1 *)(param_1 + 0x10f) = 0;
  *(undefined1 *)(param_1 + 0x110) = 0;
  *(undefined1 *)(param_1 + 0x10b) = 0;
  *(short *)(param_1 + 0x100) = *(short *)(param_1 + 0x108);
  *(undefined2 *)(param_1 + 0x102) = *(undefined2 *)(param_1 + 0x6a);
  *(short *)(param_1 + 0x104) = *(short *)(param_1 + 0x108) - *(short *)(param_1 + 0x6a);
  *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
  *(code **)(param_1 + 0x20) = EntityCallback_8002700c;
  *(undefined1 *)(param_1 + 0x10e) = 0;
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_800271cc;
  return;
}



void Callback_800271cc(int param_1)

{
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined4 *)(param_1 + 0x20) = 0;
  *(undefined1 *)(param_1 + 0x10f) = 1;
  if (*(char *)(param_1 + 0x10e) == '\0') {
    *(undefined1 *)(param_1 + 0x110) = 1;
  }
  return;
}



void FUN_800275e4(int param_1)

{
  uint uVar1;
  
  *(undefined1 *)(*(int *)(param_1 + 0x34) + 10) = 1;
  uVar1 = (uint)*(ushort *)(param_1 + 0x118);
  if (uVar1 == 0) {
    uVar1 = (uint)*(ushort *)(param_1 + 0x114);
  }
  else {
    if (uVar1 == 0) {
      trap(0x1c00);
    }
    uVar1 = *(ushort *)(param_1 + 0x114) / uVar1 & 0xff;
    if (uVar1 == 0) {
      *(undefined1 *)(*(int *)(param_1 + 0x34) + 10) = 0;
    }
  }
  FUN_8001d0c0(param_1,uVar1 % 10);
  FUN_8001d1c0(param_1,uVar1 % 10);
  EntitySetRenderFlags(param_1,0);
  return;
}



void FUN_800279c8(int param_1)

{
  if ((uint)*(byte *)(param_1 + 0x114) < *(byte *)(param_1 + 0x116) + 1) {
    *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x37) = 1;
  }
  else {
    *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x37) = 0;
  }
  return;
}



undefined4 * InitEntity_8c510186(undefined4 *param_1)

{
  short sVar1;
  u_short uVar2;
  int iVar3;
  
  sVar1 = *(short *)(blbHeaderBufferBase + 2);
  InitEntitySprite(param_1,0x8c510186,10000,0x18,(int)(short)(sVar1 + 0x20),0);
  param_1[6] = &DAT_800105cc;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80020288;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80026f34;
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined2 *)((int)param_1 + 0x106) = 0x98;
  *(undefined1 *)(param_1 + 5) = 0;
  *(undefined1 *)((int)param_1 + 0x10e) = 0;
  *(undefined2 *)(param_1 + 0x43) = 0;
  *(short *)(param_1 + 0x42) = sVar1 + 0x20;
  *(undefined1 *)(param_1 + 0x44) = 1;
  EntitySetState(param_1,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)param_1 + 0x111) = 0;
  param_1[6] = &DAT_8001056c;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80027bb8;
  iVar3 = param_1[0xd];
  *(undefined1 *)(iVar3 + 0x34) = 0x20;
                    // Possible PsyQ macro: setTile()
  *(undefined1 *)(iVar3 + 0x35) = 0x60;
  *(undefined1 *)(iVar3 + 0x36) = 0x30;
  iVar3 = param_1[0xd];
  uVar2 = GetTPage((uint)*(byte *)(iVar3 + 0x32),3,(int)*(short *)(iVar3 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar3 + 0x12) & 0xffffff00);
  *(u_short *)(iVar3 + 0x24) = uVar2;
  return param_1;
}



// Initializes timer display entity for HUD (shown in timed levels).

undefined4 * InitTimerDisplayEntity(undefined4 *param_1)

{
  short sVar1;
  u_short uVar2;
  int iVar3;
  
  sVar1 = *(short *)(blbHeaderBufferBase + 2);
  InitEntitySprite(param_1,0x6a351094,10000,0x120,(int)(short)(sVar1 + 0x20),0);
  param_1[6] = &DAT_800105cc;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80020288;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80026f34;
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined2 *)((int)param_1 + 0x106) = 200;
  *(undefined1 *)(param_1 + 5) = 0;
  *(undefined1 *)((int)param_1 + 0x10e) = 0;
  *(undefined2 *)(param_1 + 0x43) = 0;
  *(short *)(param_1 + 0x42) = sVar1 + 0x20;
  *(undefined1 *)(param_1 + 0x44) = 1;
  EntitySetState(param_1,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  param_1[6] = &DAT_8001054c;
  *(undefined1 *)((int)param_1 + 0x111) = 0;
  *(undefined2 *)(param_1[0xd] + 8) = 0x271a;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80027e9c;
  iVar3 = param_1[0xd];
  uVar2 = GetTPage((uint)*(byte *)(iVar3 + 0x32),1,(int)*(short *)(iVar3 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar3 + 0x12) & 0xffffff00);
  *(u_short *)(iVar3 + 0x24) = uVar2;
  return param_1;
}



void CreateMenuEntities(undefined4 *param_1,undefined4 param_2)

{
  byte bVar1;
  undefined1 uVar2;
  short sVar3;
  undefined *puVar4;
  u_short uVar5;
  undefined4 *puVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  byte local_268;
  
  InitMenuEntityWithVtable(param_1,30000);
  param_1[6] = &DAT_8001050c;
  param_1[7] = param_2;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8002a378;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_8002abc0;
  local_268 = 0;
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
  InitEntitySprite(puVar6,0xb8700ca1,10000,0x18,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x16;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  param_1[8] = puVar6;
  iVar8 = puVar6[0xd];
  uVar5 = GetTPage((uint)*(byte *)(iVar8 + 0x32),1,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  puVar4 = blbHeaderBufferBase;
  *(u_short *)(iVar8 + 0x24) = uVar5;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x12];
  InitEntitySprite(puVar6,0xe2f188,10000,0x25,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x20;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x25;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[9] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x12];
  InitEntitySprite(puVar6,0xe2f188,10000,0x31,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x20;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined2 *)(puVar6 + 0x47) = 0x31;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0xc;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[10] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x114,1,0);
  InitEntitySprite(puVar6,0xa9240484,10000,0x118,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xf;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar4 = blbHeaderBufferBase;
  param_1[0xb] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x11];
  InitEntitySprite(puVar6,0xe2f188,10000,0xff,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x20;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0xff;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0xc] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x11];
  InitEntitySprite(puVar6,0xe2f188,10000,0x10b,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x20;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar6[6] = &DAT_800105ac;
  *(undefined2 *)(puVar6 + 0x47) = 0x10b;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  param_1[0xd] = puVar6;
  *(undefined1 *)(param_1[0xb] + 0xf6) = 0;
  *(undefined1 *)(*(int *)(param_1[0xb] + 0x34) + 0x37) = 0;
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
  InitEntitySprite(puVar6,0xe8628689,10000,0x98,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x16;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  param_1[0xe] = puVar6;
  iVar8 = puVar6[0xd];
  uVar5 = GetTPage((uint)*(byte *)(iVar8 + 0x32),1,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  puVar4 = blbHeaderBufferBase;
  *(u_short *)(iVar8 + 0x24) = uVar5;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x13];
  InitEntitySprite(puVar6,0xe2f188,10000,0x92,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x28;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x92;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0xf] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  bVar1 = g_pPlayerState[0x13];
  InitEntitySprite(puVar6,0xe2f188,10000,0x9e,0xffffffe0,1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x28;
  *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined2 *)(puVar6 + 0x47) = 0x9e;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x11b) = 6;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  param_1[0x10] = puVar6;
  while( true ) {
    uVar10 = (uint)local_268;
    if (2 < uVar10) break;
    puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x118,1,0);
    uVar2 = g_pPlayerState[0x19];
    InitEntitySprite(puVar6,0x88a28194,10000,0x60,0xffffffe0,1);
    puVar6[6] = &DAT_800105cc;
    puVar6[2] = 0xffff0000;
    puVar6[3] = &LAB_80020288;
    *puVar6 = 0xffff0000;
    puVar6[1] = &LAB_80026f34;
    puVar6[9] = 0xffff0000;
    puVar6[10] = EntityCallback_8001a2cc;
    puVar6[0xb] = 0xffff0000;
    puVar6[0xc] = EntityCallback_8001a2e8;
    *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
    *(undefined1 *)(puVar6 + 5) = 0;
    *(undefined1 *)((int)puVar6 + 0x10e) = 0;
    *(undefined2 *)(puVar6 + 0x43) = 0;
    *(ushort *)((int)puVar6 + 0x106) = (ushort)local_268 * 0x10 + 0x16;
    *(undefined1 *)(puVar6 + 0x44) = 1;
    EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
    *(undefined1 *)((int)puVar6 + 0x111) = 0;
    puVar6[6] = &DAT_8001058c;
    *(undefined1 *)(puVar6 + 0x45) = uVar2;
    *(undefined1 *)((int)puVar6 + 0x115) = uVar2;
    *(byte *)((int)puVar6 + 0x116) = local_268;
    *puVar6 = 0xffff0000;
    puVar6[1] = &LAB_80027860;
    FUN_800279c8(puVar6);
    *(undefined1 *)((int)puVar6 + 0x117) = 10;
    *(undefined1 *)((int)puVar6 + 0xf6) = 0;
    *(undefined1 *)(puVar6[0xd] + 0x37) = 1;
    puVar4 = blbHeaderBufferBase;
    param_1[uVar10 + 0x11] = puVar6;
    puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x118,1,0);
    uVar2 = g_pPlayerState[0x1a];
    InitEntitySprite(puVar6,0x80e85ea0,10000,0xd0,0xffffffe0,1);
    puVar6[6] = &DAT_800105cc;
    puVar6[2] = 0xffff0000;
    puVar6[3] = &LAB_80020288;
    *puVar6 = 0xffff0000;
    puVar6[1] = &LAB_80026f34;
    puVar6[9] = 0xffff0000;
    puVar6[10] = EntityCallback_8001a2cc;
    puVar6[0xb] = 0xffff0000;
    puVar6[0xc] = EntityCallback_8001a2e8;
    *(undefined1 *)(puVar6 + 5) = 0;
    *(undefined1 *)((int)puVar6 + 0x10e) = 0;
    *(undefined2 *)(puVar6 + 0x43) = 0;
    *(ushort *)((int)puVar6 + 0x106) = (ushort)local_268 * 0x14 + 0x1c;
    *(undefined2 *)(puVar6 + 0x42) = 0xffe0;
    *(undefined1 *)(puVar6 + 0x44) = 1;
    EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
    *(undefined1 *)((int)puVar6 + 0x111) = 0;
    puVar6[6] = &DAT_8001058c;
    *(undefined1 *)(puVar6 + 0x45) = uVar2;
    *(undefined1 *)((int)puVar6 + 0x115) = uVar2;
    *(byte *)((int)puVar6 + 0x116) = local_268;
    *puVar6 = 0xffff0000;
    puVar6[1] = &LAB_80027860;
    FUN_800279c8(puVar6);
    local_268 = local_268 + 1;
    *(undefined1 *)((int)puVar6 + 0x117) = 10;
    *(undefined1 *)((int)puVar6 + 0xf6) = 0;
    *(undefined1 *)(puVar6[0xd] + 0x37) = 1;
    param_1[uVar10 + 0x14] = puVar6;
  }
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  InitEntitySprite(puVar6,0x9158a0f6,10000,0x18,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 200;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar4 = blbHeaderBufferBase;
  param_1[0x17] = puVar6;
  puVar6[0x14] = 0x8000;
  puVar6[0x15] = 0x8000;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x14];
  InitEntitySprite(puVar6,0xe2f188,10000,0x25,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xd2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x25;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x18] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x14];
  InitEntitySprite(puVar6,0xe2f188,10000,0x31,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xd2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined2 *)(puVar6 + 0x47) = 0x31;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0xc;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x19] = puVar6;
  uVar7 = AllocateFromHeap(puVar4,0x114,1,0);
  uVar7 = InitEntity_8c510186(uVar7);
  puVar4 = blbHeaderBufferBase;
  param_1[0x1b] = uVar7;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x114,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  InitEntitySprite(puVar6,0xa9240484,10000,0xe,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x88;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  param_1[0x1a] = puVar6;
  *(undefined1 *)((int)puVar6 + 0xf6) = 0;
  iVar8 = *(int *)(param_1[0x1a] + 0x34);
  *(undefined1 *)(iVar8 + 0x34) = 0x20;
                    // Possible PsyQ macro: setTile()
  *(undefined1 *)(iVar8 + 0x35) = 0x60;
  *(undefined1 *)(iVar8 + 0x37) = 0;
  *(undefined1 *)(iVar8 + 0x36) = 0x30;
  puVar4 = blbHeaderBufferBase;
  *(undefined2 *)(iVar8 + 8) = 0x271a;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x15];
  InitEntitySprite(puVar6,0xe2f188,10000,0x25,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xa2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x25;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x1c] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x15];
  InitEntitySprite(puVar6,0xe2f188,10000,0x31,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xa2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined2 *)(puVar6 + 0x47) = 0x31;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0xc;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x1d] = puVar6;
  uVar7 = AllocateFromHeap(puVar4,0x114,1,0);
  uVar7 = InitTimerDisplayEntity(uVar7);
  puVar4 = blbHeaderBufferBase;
  param_1[0x1e] = uVar7;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x16];
  InitEntitySprite(puVar6,0xe2f188,10000,0xff,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xd2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0xff;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x1f] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x16];
  InitEntitySprite(puVar6,0xe2f188,10000,0x10b,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xd2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x10b;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x20] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x114,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  InitEntitySprite(puVar6,0x902c0002,10000,0x118,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0x88;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  puVar4 = blbHeaderBufferBase;
  param_1[0x21] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x1c];
  InitEntitySprite(puVar6,0xe2f188,10000,0xff,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xa2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0xff;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 10;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x22] = puVar6;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar4,0x120,1,0);
  sVar3 = *(short *)(blbHeaderBufferBase + 2);
  bVar1 = g_pPlayerState[0x1c];
  InitEntitySprite(puVar6,0xe2f188,10000,0x10b,(int)(short)(sVar3 + 0x20),1);
  puVar6[6] = &DAT_800105cc;
  puVar6[2] = 0xffff0000;
  puVar6[3] = &LAB_80020288;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80026f34;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(puVar6 + 5) = 0;
  *(undefined1 *)((int)puVar6 + 0x10e) = 0;
  *(undefined2 *)(puVar6 + 0x43) = 0;
  *(undefined2 *)((int)puVar6 + 0x106) = 0xa2;
  *(short *)(puVar6 + 0x42) = sVar3 + 0x20;
  *(undefined1 *)(puVar6 + 0x44) = 1;
  EntitySetState(puVar6,null_FFFF0000h_800a5988,PTR_Callback_800271cc_800a598c);
  puVar6[6] = &DAT_800105ac;
  *(undefined1 *)((int)puVar6 + 0x111) = 0;
  *(undefined2 *)(puVar6 + 0x47) = 0x10b;
  *(undefined1 *)((int)puVar6 + 0x11b) = 0;
  *(ushort *)(puVar6 + 0x45) = (ushort)bVar1;
  *(ushort *)((int)puVar6 + 0x116) = (ushort)bVar1;
  *(undefined2 *)(puVar6 + 0x46) = 0;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_80027418;
  FUN_800275e4(puVar6);
  *(undefined1 *)((int)puVar6 + 0x11a) = 10;
  puVar4 = blbHeaderBufferBase;
  param_1[0x23] = puVar6;
  iVar8 = AllocateFromHeap(puVar4,0x104,1,0);
  InitEntityWithSprite(iVar8,&DAT_8009b174,0x271a,0xa0,0x78);
  *(undefined **)(iVar8 + 0x18) = &DAT_800105ec;
  *(undefined4 *)(iVar8 + 0x24) = 0xffff0000;
  *(code **)(iVar8 + 0x28) = EntityCallback_8001a2cc;
  *(undefined4 *)(iVar8 + 0x2c) = 0xffff0000;
  *(code **)(iVar8 + 0x30) = EntityCallback_8001a2e8;
  iVar9 = *(int *)(iVar8 + 0x34);
  *(undefined1 *)(iVar8 + 0x14) = 0;
  uVar5 = GetTPage((uint)*(byte *)(iVar9 + 0x32),1,(int)*(short *)(iVar9 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar9 + 0x12) & 0xffffff00);
  *(u_short *)(iVar9 + 0x24) = uVar5;
  *(undefined1 *)(iVar8 + 0x101) = 1;
  puVar4 = blbHeaderBufferBase;
  param_1[0x25] = iVar8;
  iVar8 = AllocateFromHeap(puVar4,0x104,1,0);
  InitEntityWithSprite(iVar8,&DAT_8009b180,0x271a,0xa0,0x78);
  *(undefined **)(iVar8 + 0x18) = &DAT_800105ec;
  *(undefined4 *)(iVar8 + 0x24) = 0xffff0000;
  *(code **)(iVar8 + 0x28) = EntityCallback_8001a2cc;
  *(undefined4 *)(iVar8 + 0x2c) = 0xffff0000;
  *(code **)(iVar8 + 0x30) = EntityCallback_8001a2e8;
  iVar9 = *(int *)(iVar8 + 0x34);
  *(undefined1 *)(iVar8 + 0x14) = 0;
  uVar5 = GetTPage((uint)*(byte *)(iVar9 + 0x32),1,(int)*(short *)(iVar9 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar9 + 0x12) & 0xffffff00);
  *(u_short *)(iVar9 + 0x24) = uVar5;
  *(undefined1 *)(iVar8 + 0x101) = 1;
  puVar4 = blbHeaderBufferBase;
  param_1[0x26] = iVar8;
  iVar8 = AllocateFromHeap(puVar4,0x104,1,0);
  InitEntityWithSprite(iVar8,&DAT_8009b18c,0x271a,0xa0,0x78);
  *(undefined **)(iVar8 + 0x18) = &DAT_800105ec;
  *(undefined4 *)(iVar8 + 0x24) = 0xffff0000;
  *(code **)(iVar8 + 0x28) = EntityCallback_8001a2cc;
  *(undefined4 *)(iVar8 + 0x2c) = 0xffff0000;
  *(code **)(iVar8 + 0x30) = EntityCallback_8001a2e8;
  iVar9 = *(int *)(iVar8 + 0x34);
  *(undefined1 *)(iVar8 + 0x14) = 0;
  uVar5 = GetTPage((uint)*(byte *)(iVar9 + 0x32),1,(int)*(short *)(iVar9 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar9 + 0x12) & 0xffffff00);
  *(u_short *)(iVar9 + 0x24) = uVar5;
  *(undefined1 *)(iVar8 + 0x101) = 1;
  param_1[0x27] = iVar8;
  *(undefined1 *)((int)param_1 + 0xa3) = 0;
  *(undefined1 *)(param_1 + 0x29) = 0;
  *(undefined1 *)((int)param_1 + 0xa5) = 0;
  *(undefined1 *)((int)param_1 + 0xa6) = 0;
  *(undefined1 *)((int)param_1 + 0xa7) = 0;
  *(undefined1 *)(param_1 + 0x2a) = 0;
  *(undefined1 *)((int)param_1 + 0xa9) = 0;
  *(undefined1 *)((int)param_1 + 0xaa) = 0;
  *(undefined1 *)((int)param_1 + 0xab) = 0;
  *(undefined1 *)((int)param_1 + 0xa2) = 0;
  *(undefined1 *)(param_1 + 0x2b) = 0;
  return;
}



// Updates HUD entity visibility based on player state. Removes entities from render/tick lists when
// their corresponding collectible flag is set at +0x110.

void UpdateHUDEntityVisibility(int param_1)

{
  bool bVar1;
  undefined *puVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  
  if ((*(char *)(param_1 + 0xa2) != '\0') && (*(char *)(*(int *)(param_1 + 0x94) + 0x101) != '\0'))
  {
    RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x94) + 0x34));
    RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x94));
    RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x98) + 0x34));
    RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x98));
    RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x9c) + 0x34));
    RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x9c));
    *(undefined1 *)(param_1 + 0xa2) = 0;
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xa3) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x20) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x24) + 0x116) = (ushort)(byte)g_pPlayerState[0x12];
      *(ushort *)(*(int *)(param_1 + 0x28) + 0x116) = (ushort)(byte)puVar2[0x12];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x20) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x24) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x28) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x20));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x24));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x28));
      *(undefined1 *)(param_1 + 0xa3) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xa4) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x2c) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x30) + 0x116) = (ushort)(byte)g_pPlayerState[0x11];
      *(ushort *)(*(int *)(param_1 + 0x34) + 0x116) = (ushort)(byte)puVar2[0x11];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x2c) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x30) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x34) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x2c));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x30));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34));
      *(undefined1 *)(param_1 + 0xa4) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xa5) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x38) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x3c) + 0x116) = (ushort)(byte)g_pPlayerState[0x13];
      *(ushort *)(*(int *)(param_1 + 0x40) + 0x116) = (ushort)(byte)puVar2[0x13];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x38) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x3c) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x40) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x38));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x3c));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x40));
      *(undefined1 *)(param_1 + 0xa5) = 0;
    }
  }
  if (*(char *)(param_1 + 0xa6) != '\0') {
    uVar5 = 0;
    if (*(char *)(*(int *)(param_1 + 0x44) + 0x110) == '\0') {
      for (uVar5 = 0; (uVar5 & 0xff) < 3; uVar5 = uVar5 + 1) {
        *(undefined *)(*(int *)((uVar5 & 0xff) * 4 + param_1 + 0x44) + 0x115) = g_pPlayerState[0x19]
        ;
      }
    }
    else {
      uVar3 = 0;
      bVar1 = true;
      while (bVar1) {
        iVar4 = uVar3 * 4 + param_1;
        uVar5 = uVar5 + 1;
        RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(iVar4 + 0x44) + 0x34));
        uVar3 = uVar5 & 0xff;
        RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(iVar4 + 0x44));
        bVar1 = uVar3 < 3;
      }
      *(undefined1 *)(param_1 + 0xa6) = 0;
    }
  }
  if (*(char *)(param_1 + 0xa7) != '\0') {
    uVar5 = 0;
    if (*(char *)(*(int *)(param_1 + 0x50) + 0x110) == '\0') {
      for (uVar5 = 0; (uVar5 & 0xff) < 3; uVar5 = uVar5 + 1) {
        *(undefined *)(*(int *)((uVar5 & 0xff) * 4 + param_1 + 0x50) + 0x115) = g_pPlayerState[0x1a]
        ;
      }
    }
    else {
      uVar3 = 0;
      bVar1 = true;
      while (bVar1) {
        iVar4 = uVar3 * 4 + param_1;
        uVar5 = uVar5 + 1;
        RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(iVar4 + 0x50) + 0x34));
        uVar3 = uVar5 & 0xff;
        RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(iVar4 + 0x50));
        bVar1 = uVar3 < 3;
      }
      *(undefined1 *)(param_1 + 0xa7) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xa8) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x5c) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x60) + 0x116) = (ushort)(byte)g_pPlayerState[0x14];
      *(ushort *)(*(int *)(param_1 + 100) + 0x116) = (ushort)(byte)puVar2[0x14];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x5c) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x60) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 100) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x5c));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x60));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 100));
      *(undefined1 *)(param_1 + 0xa8) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xa9) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x68) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x70) + 0x116) = (ushort)(byte)g_pPlayerState[0x15];
      *(ushort *)(*(int *)(param_1 + 0x74) + 0x116) = (ushort)(byte)puVar2[0x15];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x68) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x6c) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x70) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x74) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x68));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x6c));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x70));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x74));
      *(undefined1 *)(param_1 + 0xa9) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xaa) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x78) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x7c) + 0x116) = (ushort)(byte)g_pPlayerState[0x16];
      *(ushort *)(*(int *)(param_1 + 0x80) + 0x116) = (ushort)(byte)puVar2[0x16];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x78) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x7c) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x80) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x78));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x7c));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x80));
      *(undefined1 *)(param_1 + 0xaa) = 0;
    }
  }
  puVar2 = g_pPlayerState;
  if (*(char *)(param_1 + 0xab) != '\0') {
    if (*(char *)(*(int *)(param_1 + 0x84) + 0x110) == '\0') {
      *(ushort *)(*(int *)(param_1 + 0x88) + 0x116) = (ushort)(byte)g_pPlayerState[0x1c];
      *(ushort *)(*(int *)(param_1 + 0x8c) + 0x116) = (ushort)(byte)puVar2[0x1c];
    }
    else {
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x84) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x88) + 0x34));
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x8c) + 0x34));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x84));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x88));
      RemoveFromTickList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x8c));
      *(undefined1 *)(param_1 + 0xab) = 0;
    }
  }
  return;
}



void ShowPauseMenuHUD(int param_1)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int iVar5;
  byte bVar6;
  uint uVar7;
  
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x94));
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x98));
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x9c));
  *(undefined1 *)(param_1 + 0xa0) = 0;
  *(undefined1 *)(param_1 + 0xa1) = 0;
  iVar5 = *(int *)(*(int *)(param_1 + 0x98) + 0x34);
  *(undefined1 *)(iVar5 + 0x34) = 0x80;
  *(undefined1 *)(iVar5 + 0x35) = 0x80;
  *(undefined1 *)(iVar5 + 0x36) = 0x80;
  iVar5 = *(int *)(*(int *)(param_1 + 0x9c) + 0x34);
  *(undefined1 *)(iVar5 + 0x34) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)(iVar5 + 0x35) = 0x40;
  *(undefined1 *)(iVar5 + 0x36) = 0x40;
  puVar2 = *(undefined4 **)(param_1 + 0x94);
  *puVar2 = 0xffff0000;
  puVar2[1] = &LAB_80026c50;
  puVar2[0x14] = 0;
  puVar2[0x15] = 0;
  *(undefined1 *)(puVar2 + 0x40) = 0x14;
  puVar2 = *(undefined4 **)(param_1 + 0x98);
  *puVar2 = 0xffff0000;
  puVar2[1] = &LAB_80026c50;
  puVar2[0x14] = 0;
  puVar2[0x15] = 0;
  *(undefined1 *)(puVar2 + 0x40) = 0x14;
  puVar2 = *(undefined4 **)(param_1 + 0x9c);
  *puVar2 = 0xffff0000;
  puVar2[1] = &LAB_80026c50;
  puVar2[0x14] = 0;
  puVar2[0x15] = 0;
  *(undefined1 *)(puVar2 + 0x40) = 0x14;
  *(undefined1 *)(param_1 + 0xa2) = 1;
  iVar5 = AllocateFromHeap(blbHeaderBufferBase,0x24,1,0);
  InitMenuEntityWithVtable(iVar5,0x44c);
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(iVar5 + 0x18) = &DAT_8001052c;
  uVar3 = AllocateFromHeap(puVar1,0x44,1,0);
  uVar4 = InitColoredOverlayEntity(uVar3,0x20,0x20,0x20,2,9000);
  uVar3 = g_GameStatePtr;
  *(undefined4 *)(iVar5 + 0x1c) = uVar4;
  AddToXPositionList(uVar3);
  *(undefined1 *)(iVar5 + 0x20) = 0;
  uVar3 = g_GameStatePtr;
  *(int *)(param_1 + 0x90) = iVar5;
  AddToZOrderList(uVar3);
  if (*(char *)(param_1 + 0xa3) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x20));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x24));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x28));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x24) + 0x114) = (ushort)(byte)g_pPlayerState[0x12];
    *(ushort *)(*(int *)(param_1 + 0x28) + 0x114) = (ushort)(byte)puVar1[0x12];
    *(undefined1 *)(param_1 + 0xa3) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x20));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x24));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x28));
  }
  if (*(char *)(param_1 + 0xa4) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x2c));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x30));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x30) + 0x114) = (ushort)(byte)g_pPlayerState[0x11];
    *(ushort *)(*(int *)(param_1 + 0x34) + 0x114) = (ushort)(byte)puVar1[0x11];
    *(undefined1 *)(param_1 + 0xa4) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x2c));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x30));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34));
  }
  if (*(char *)(param_1 + 0xa5) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x38));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x3c));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x40));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x3c) + 0x114) = (ushort)(byte)g_pPlayerState[0x13];
    *(ushort *)(*(int *)(param_1 + 0x40) + 0x114) = (ushort)(byte)puVar1[0x13];
    *(undefined1 *)(param_1 + 0xa5) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x38));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x3c));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x40));
  }
  bVar6 = 0;
  if (*(char *)(param_1 + 0xa6) == '\0') {
    for (uVar7 = 0; (uVar7 & 0xff) < 3; uVar7 = uVar7 + 1) {
      iVar5 = (uVar7 & 0xff) * 4 + param_1;
      AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(iVar5 + 0x44));
      *(undefined *)(*(int *)(iVar5 + 0x44) + 0x114) = g_pPlayerState[0x19];
    }
    *(undefined1 *)(param_1 + 0xa6) = 1;
  }
  else {
    uVar7 = 0;
    do {
      bVar6 = bVar6 + 1;
      AddToZOrderList(g_GameStatePtr,*(undefined4 *)(uVar7 * 4 + param_1 + 0x44));
      uVar7 = (uint)bVar6;
    } while (bVar6 < 3);
  }
  bVar6 = 0;
  if (*(char *)(param_1 + 0xa7) == '\0') {
    for (uVar7 = 0; (uVar7 & 0xff) < 3; uVar7 = uVar7 + 1) {
      iVar5 = (uVar7 & 0xff) * 4 + param_1;
      AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(iVar5 + 0x50));
      *(undefined *)(*(int *)(iVar5 + 0x50) + 0x114) = g_pPlayerState[0x1a];
    }
    *(undefined1 *)(param_1 + 0xa7) = 1;
  }
  else {
    uVar7 = 0;
    do {
      bVar6 = bVar6 + 1;
      AddToZOrderList(g_GameStatePtr,*(undefined4 *)(uVar7 * 4 + param_1 + 0x50));
      uVar7 = (uint)bVar6;
    } while (bVar6 < 3);
  }
  if (*(char *)(param_1 + 0xa8) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x5c));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x60));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 100));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x60) + 0x114) = (ushort)(byte)g_pPlayerState[0x14];
    *(ushort *)(*(int *)(param_1 + 100) + 0x114) = (ushort)(byte)puVar1[0x14];
    *(undefined1 *)(param_1 + 0xa8) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x5c));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x60));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 100));
  }
  if (*(char *)(param_1 + 0xa9) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x68));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x6c));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x70));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x74));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x70) + 0x114) = (ushort)(byte)g_pPlayerState[0x15];
    *(ushort *)(*(int *)(param_1 + 0x74) + 0x114) = (ushort)(byte)puVar1[0x15];
    *(undefined1 *)(param_1 + 0xa9) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x68));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x6c));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x70));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x74));
  }
  if (*(char *)(param_1 + 0xaa) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x78));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x7c));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x80));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x7c) + 0x114) = (ushort)(byte)g_pPlayerState[0x16];
    *(ushort *)(*(int *)(param_1 + 0x80) + 0x114) = (ushort)(byte)puVar1[0x16];
    *(undefined1 *)(param_1 + 0xaa) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x78));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x7c));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x80));
  }
  if (*(char *)(param_1 + 0xab) == '\0') {
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x84));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x88));
    AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x8c));
    puVar1 = g_pPlayerState;
    *(ushort *)(*(int *)(param_1 + 0x88) + 0x114) = (ushort)(byte)g_pPlayerState[0x1c];
    *(ushort *)(*(int *)(param_1 + 0x8c) + 0x114) = (ushort)(byte)puVar1[0x1c];
    *(undefined1 *)(param_1 + 0xab) = 1;
  }
  else {
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x84));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x88));
    AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x8c));
  }
  *(undefined1 *)(*(int *)(param_1 + 0x20) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x24) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x28) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x2c) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x30) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x38) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x3c) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x40) + 0x111) = 1;
  for (uVar7 = 0; (uVar7 & 0xff) < 3; uVar7 = uVar7 + 1) {
    iVar5 = (uVar7 & 0xff) * 4 + param_1;
    *(undefined1 *)(*(int *)(iVar5 + 0x44) + 0x111) = 1;
    *(undefined1 *)(*(int *)(iVar5 + 0x50) + 0x111) = 1;
  }
  *(undefined1 *)(*(int *)(param_1 + 0x5c) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x60) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 100) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x68) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x6c) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x70) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x74) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x78) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x7c) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x80) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x84) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x88) + 0x111) = 1;
  *(undefined1 *)(*(int *)(param_1 + 0x8c) + 0x111) = 1;
  *(undefined1 *)(param_1 + 0xac) = 1;
  return;
}



void HidePauseMenuHUD(int param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  
  iVar2 = *(int *)(param_1 + 0x90);
  *(undefined1 *)(iVar2 + 0x20) = 1;
  *(undefined1 *)(*(int *)(iVar2 + 0x1c) + 10) = 0;
  puVar1 = *(undefined4 **)(param_1 + 0x94);
  *puVar1 = 0xffff0000;
  puVar1[1] = &LAB_80026cd8;
  puVar1[0x14] = 0x10000;
  puVar1[0x15] = 0x10000;
  *(undefined1 *)(puVar1 + 0x40) = 0x14;
  puVar1 = *(undefined4 **)(param_1 + 0x98);
  *puVar1 = 0xffff0000;
  puVar1[1] = &LAB_80026cd8;
  puVar1[0x14] = 0x10000;
  puVar1[0x15] = 0x10000;
  *(undefined1 *)(puVar1 + 0x40) = 0x14;
  puVar1 = *(undefined4 **)(param_1 + 0x9c);
  *puVar1 = 0xffff0000;
  puVar1[1] = &LAB_80026cd8;
  puVar1[0x14] = 0x10000;
  puVar1[0x15] = 0x10000;
  *(undefined1 *)(puVar1 + 0x40) = 0x14;
  iVar2 = *(int *)(param_1 + 0x20);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x24);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x28);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x2c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x30);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x34);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x38);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x3c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x40);
  uVar4 = 0;
  while( true ) {
    *(undefined1 *)(iVar2 + 0x111) = 0;
    *(undefined2 *)(iVar2 + 0x10c) = 0;
    if (2 < (uVar4 & 0xff)) break;
    iVar2 = (uVar4 & 0xff) * 4 + param_1;
    iVar3 = *(int *)(iVar2 + 0x44);
    *(undefined1 *)(iVar3 + 0x111) = 0;
    *(undefined2 *)(iVar3 + 0x10c) = 0;
    iVar2 = *(int *)(iVar2 + 0x50);
    uVar4 = uVar4 + 1;
  }
  iVar2 = *(int *)(param_1 + 0x5c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x60);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 100);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x68);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x6c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x70);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x74);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x78);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x7c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x80);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x84);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x88);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  iVar2 = *(int *)(param_1 + 0x8c);
  *(undefined1 *)(iVar2 + 0x111) = 0;
  *(undefined2 *)(iVar2 + 0x10c) = 0;
  *(undefined1 *)(param_1 + 0xac) = 0;
  return;
}



void FUN_8002bde8(int param_1)

{
  uint uVar1;
  int iVar2;
  
  PlaySoundEffect(0x646c2cc0,0xa0,1);
  uVar1 = *(byte *)(param_1 + 0xa0) + 1 & 1;
  *(char *)(param_1 + 0xa0) = (char)uVar1;
  iVar2 = *(int *)(*(int *)(uVar1 * 4 + param_1 + 0x98) + 0x34);
  *(undefined1 *)(iVar2 + 0x34) = 0x80;
  *(undefined1 *)(iVar2 + 0x35) = 0x80;
  *(undefined1 *)(iVar2 + 0x36) = 0x80;
  iVar2 = *(int *)(*(int *)((*(byte *)(param_1 + 0xa0) + 1 & 1) * 4 + param_1 + 0x98) + 0x34);
  *(undefined1 *)(iVar2 + 0x34) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)(iVar2 + 0x35) = 0x40;
  *(undefined1 *)(iVar2 + 0x36) = 0x40;
  return;
}



undefined4 FUN_8002be8c(int param_1)

{
  undefined1 uVar1;
  int iVar2;
  
  PlaySoundEffect(0x90810000,0xa0,1);
  if (*(char *)(param_1 + 0xa1) == '\0') {
    if (*(char *)(param_1 + 0xa0) == '\0') {
      return 1;
    }
    *(undefined1 *)(param_1 + 0xa1) = 1;
    *(undefined1 *)(param_1 + 0xa0) = 1;
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x94),0x69c8f473,1);
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x98),0x2ad0f011,1);
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x9c),0x29c0e211,1);
    iVar2 = *(int *)(*(int *)(param_1 + 0x98) + 0x34);
    *(undefined1 *)(iVar2 + 0x34) = 0x40;
                    // Possible PsyQ macro: setLineF2()
    *(undefined1 *)(iVar2 + 0x35) = 0x40;
    *(undefined1 *)(iVar2 + 0x36) = 0x40;
    iVar2 = *(int *)(*(int *)(param_1 + 0x9c) + 0x34);
    uVar1 = 0x80;
  }
  else {
    if (*(char *)(param_1 + 0xa0) == '\0') {
      return 2;
    }
    *(undefined1 *)(param_1 + 0xa1) = 0;
    *(undefined1 *)(param_1 + 0xa0) = 0;
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x94),0xad0f813,1);
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x98),0x69c04050,1);
    SetEntitySpriteId(*(undefined4 *)(param_1 + 0x9c),0x68c0f413,1);
    iVar2 = *(int *)(*(int *)(param_1 + 0x98) + 0x34);
    *(undefined1 *)(iVar2 + 0x34) = 0x80;
    *(undefined1 *)(iVar2 + 0x35) = 0x80;
    *(undefined1 *)(iVar2 + 0x36) = 0x80;
    iVar2 = *(int *)(*(int *)(param_1 + 0x9c) + 0x34);
    uVar1 = 0x40;
  }
  *(undefined1 *)(iVar2 + 0x34) = uVar1;
  *(undefined1 *)(iVar2 + 0x35) = uVar1;
  *(undefined1 *)(iVar2 + 0x36) = uVar1;
  return 0;
}



void InitParticleEntity(undefined4 *param_1,undefined4 param_2,undefined4 param_3,undefined1 param_4
                       ,int param_5,short param_6,undefined1 param_7)

{
  short local_res8;
  short sStackX_a;
  
  local_res8 = (short)param_3;
  sStackX_a = (short)((uint)param_3 >> 0x10);
  InitEntitySprite(param_1,param_2,(int)param_6,(int)local_res8,(int)sStackX_a,param_7);
  param_1[6] = &DAT_80010ba8;
  *(undefined2 *)(param_1 + 4) = 0x4b0;
  *param_1 = 0xffff0000;
  param_1[1] = FUN_80030e54;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80030fe0;
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1 + 0x1d) = param_4;
  if (param_5 != 0x10000) {
    param_1[0x16] = param_5;
    param_1[0x17] = param_5;
    param_1[0x14] = param_5;
    param_1[0x15] = param_5;
    param_1[9] = 0xffff0000;
    param_1[10] = ScaleXByEntityScale;
    param_1[0xb] = 0xffff0000;
    param_1[0xc] = ScaleYByEntityScale;
  }
  *(undefined1 *)((int)param_1 + 0x102) = 0;
  *(undefined2 *)(param_1 + 0x40) = 0;
  param_1[0x41] = 0;
  return;
}



void FUN_80030e54(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  short unaff_s4;
  
  EntityUpdateCallback();
  sVar1 = *(short *)(param_1 + 0x100);
  if ((sVar1 != 0) && (*(short *)(param_1 + 0x100) = sVar1 + -1, sVar1 == 1)) {
    *(undefined1 *)(param_1 + 0x102) = 1;
  }
  if (*(char *)(param_1 + 0x102) != '\0') {
    iVar2 = *(int *)(param_1 + 0x104);
    if ((iVar2 != 0) && (iVar4 = (int)*(short *)(iVar2 + 10), iVar4 != 0)) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar5 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar4 << 0x10) {
        iVar3 = unaff_s2 + iVar3;
      }
      (*pcVar5)(iVar2 + iVar3,0x1009,0,param_1);
    }
    iVar2 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar2 != 0) {
      if (iVar2 < 1) {
        pcVar5 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar4 = iVar2 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar4 + -8);
        pcVar5 = *(code **)(iVar4 + -4);
      }
      iVar4 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar2 << 0x10) {
        iVar4 = unaff_s4 + iVar4;
      }
      (*pcVar5)(g_GameStatePtr + iVar4,3,0,param_1);
    }
  }
  return;
}



void FUN_800313cc(undefined4 *param_1)

{
  undefined2 uVar1;
  undefined2 uVar2;
  undefined *puVar3;
  undefined2 *puVar4;
  
  InitMenuEntityWithVtable(param_1,0);
  puVar3 = blbHeaderBufferBase;
  param_1[6] = &DAT_80010b78;
  puVar4 = (undefined2 *)AllocateFromHeap(puVar3,0x1c,1,0);
  InitBasicEntityWithVtable(puVar4,0xffff8ad0);
  puVar3 = blbHeaderBufferBase;
  *(undefined **)(puVar4 + 6) = &DAT_80010b98;
  uVar1 = *(undefined2 *)puVar3;
  uVar2 = *(undefined2 *)(puVar3 + 2);
  *(undefined1 *)((int)puVar4 + 0x11) = 1;
                    // Possible PsyQ macro: setSprt()
  *(undefined1 *)((int)puVar4 + 0x13) = 100;
  *(undefined1 *)(puVar4 + 8) = 0x14;
  *(undefined1 *)(puVar4 + 9) = 0x14;
  puVar4[10] = 0x15;
  *(undefined1 *)((int)puVar4 + 0x17) = 0xf;
  *(undefined1 *)(puVar4 + 0xc) = 0xde;
  *(undefined1 *)((int)puVar4 + 0x19) = 0xde;
  *puVar4 = 0;
  puVar4[1] = 0;
  *(undefined1 *)(puVar4 + 0xb) = 10;
  puVar4[2] = uVar1;
  puVar4[3] = uVar2;
  param_1[7] = puVar4;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80031588;
  *(undefined1 *)(param_1 + 8) = 10;
  *(undefined1 *)((int)param_1 + 0x21) = 10;
  *(undefined1 *)(param_1 + 9) = 0;
  *(undefined1 *)((int)param_1 + 0x25) = 0;
  *(undefined2 *)((int)param_1 + 0x26) = 0;
  *(undefined1 *)((int)param_1 + 0x22) = *(undefined1 *)(param_1 + 8);
  *(undefined1 *)((int)param_1 + 0x23) = *(undefined1 *)((int)param_1 + 0x21);
  *(undefined2 *)(param_1 + 10) = 0;
  *(undefined2 *)((int)param_1 + 0x2a) = 0xde;
  *(undefined2 *)(param_1 + 0xb) = 0xf;
  return;
}



int FUN_8003286c(int param_1,char param_2)

{
  int iVar1;
  undefined4 uVar2;
  
  InitBasicEntityWithVtable(param_1,999);
  *(undefined1 *)(param_1 + 0x1e0) = 2;
  iVar1 = g_GameStatePtr;
  *(undefined **)(param_1 + 0xc) = &DAT_80010b18;
  uVar2 = *(undefined4 *)(iVar1 + 0x10c);
  *(undefined1 *)(param_1 + 0x1e7) = 0;
  *(char *)(param_1 + 0x1e6) = (char)uVar2;
  if (param_2 == '\0') {
                    // Possible PsyQ macro: setPolyF3()
    *(undefined1 *)(param_1 + 0x1e1) = 0x20;
    *(undefined1 *)(param_1 + 0x1e3) = 8;
    *(undefined1 *)(param_1 + 0x1e2) = 0x10;
    *(undefined1 *)(param_1 + 0x1e4) = 4;
    *(undefined1 *)(param_1 + 0x1e5) = 5;
  }
  else {
    *(undefined1 *)(param_1 + 0x1e1) = 0x10;
    *(undefined1 *)(param_1 + 0x1e3) = 4;
    *(undefined1 *)(param_1 + 0x1e2) = 0x10;
    *(undefined1 *)(param_1 + 0x1e4) = 4;
    *(undefined1 *)(param_1 + 0x1e5) = 0;
  }
  return param_1;
}



// Initializes entities from the alternate spawning system (128-byte stride).
// 
// Called from SpawnEntitiesAlternateSystem @ 0x80081d0c when spawning non-Asset 501 entities.
// 
// Algorithm:
// 1. Calls InitFullEntityWithAnimation(entity, 0x44C size)
// 2. Sets vtable @ entity+0x18 to 0x80010AB8
// 3. Stores source data pointer @ entity+0x100 (param_2)
// 4. Sets entity flags: +0x104=0, +0x00=0xFFFF0000, +0x04=&LAB_8003433c
// 5. Calls SetupAlternateEntitySpriteContext to allocate render buffers
// 6. Copies dimensions from source+0x10/0x12 to entity+0x68/0x6A
// 7. Looks up sprite ID from table @ 0x8009B144 indexed by source[0]
// 8. Sets sprite ID via SetEntitySpriteId(entity, sprite_id, 1)
// 9. If entity has sprite context (+0x34):
//    - Copies RGB values from GameState+0x124-126 to sprite+0x34-36
//    - Sets sprite+0x33 = 1 (enable flag)
// 10. Copies values from source+0x14/0x18 to entity+0x60/0x64
// 11. Clears entity+0x109
// 
// Parameters:
// - param_1: Allocated entity structure (0x10C bytes from AllocateFromHeap)
// - param_2: Pointer to 128-byte source data from GameState+0x164 array
// 
// Source Data Structure (128-byte):
// - +0x00: Entity type index (used for sprite ID lookup @ 0x8009B144)
// - +0x10: Width/height (copied to entity+0x68/0x6A)
// - +0x14: Field copied to entity+0x60
// - +0x18: Field copied to entity+0x64
// 
// Entity Structure:
// - +0x00: Flags (0xFFFF0000)
// - +0x04: Callback pointer (&LAB_8003433c)
// - +0x18: Vtable (0x80010AB8 for alternate entities)
// - +0x34: Sprite render context (allocated by SetupAlternateEntitySpriteContext)
// - +0x60/0x64: Custom fields from source
// - +0x68/0x6A: Dimensions from source
// - +0x100: Source data pointer
// - +0x104: Source flags
// - +0x109: Cleared flag
// 
// Cross-References:
// - Called by: SpawnEntitiesAlternateSystem @ 0x80081d0c
// - Calls: InitFullEntityWithAnimation @ 0x8001C6C8
// - Calls: SetupAlternateEntitySpriteContext @ 0x80033EF4
// - Calls: SetEntitySpriteId @ 0x8001D080
// - Uses: Sprite ID table @ 0x8009B144
// - Uses: GameState RGB values @ +0x124-126
// 
// Verified via Ghidra decompilation 2025-01-13.

void InitAlternateEntity(undefined4 *param_1,undefined4 param_2)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined4 uVar3;
  int iVar4;
  
  InitFullEntityWithAnimation(param_1,0x44c);
  param_1[6] = &DAT_80010ab8;
  param_1[0x41] = 0;
  param_1[0x40] = param_2;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8003433c;
  SetupAlternateEntitySpriteContext(param_1);
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1[0x40] + 0x10);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)(param_1[0x40] + 0x12);
  SetEntitySpriteId(param_1,*(undefined4 *)(&DAT_8009b144 + *(int *)param_1[0x40] * 4),1);
  iVar4 = param_1[0xd];
  if (iVar4 != 0) {
    uVar1 = *(undefined1 *)(g_GameStatePtr + 0x125);
    uVar2 = *(undefined1 *)(g_GameStatePtr + 0x126);
    *(undefined1 *)(iVar4 + 0x34) = *(undefined1 *)(g_GameStatePtr + 0x124);
    *(undefined1 *)(iVar4 + 0x35) = uVar1;
    *(undefined1 *)(iVar4 + 0x36) = uVar2;
    *(undefined1 *)(param_1[0xd] + 0x33) = 1;
  }
  param_1[0x18] = *(undefined4 *)(param_1[0x40] + 0x14);
  uVar3 = *(undefined4 *)(param_1[0x40] + 0x18);
  *(undefined1 *)((int)param_1 + 0x109) = 0;
  param_1[0x19] = uVar3;
  return;
}



// Allocates and initializes sprite rendering context for alternate entities.
// 
// Called from InitAlternateEntity @ 0x80033D3C after basic entity setup.
// 
// Algorithm:
// 1. Calls FUN_8007BBEC to get sprite metadata from table @ 0x8009B144
// 2. Aligns sprite dimensions to 4-byte boundary: (width + 3) & 0xFFFC
// 3. Branches based on sprite metadata flags at local_48[0]:
//    
//    Path A (flags == 0x180104 or 0x1498810C):
//    - Allocates 0x60-byte sprite context
//    - Reads source @ entity+0x100:
//      * +0x1C: Frame count
//      * +0x38: Comparison value
//      * +0x04: Animation sequence 1 ID
//      * +0x20: Animation sequence 2 ID
//    - Calls InitSpriteRenderContext(ctx, frame_count+1, width, height, 1)
//    - Sets ctx+0x5B = (source[0x38] < source[0x1C])
//    - Sets vtable @ ctx+0x0C = 0x80010B00
//    - Calls FUN_800255C8 twice to set up animation pointers:
//      * FUN_800255C8(GameState, source[4], ctx+0x54, ctx+0x58)
//      * FUN_800255C8(GameState, source[0x20], ctx+0x4C, ctx+0x50)
//    - Calculates ctx+0x5A = width / (ctx[0x58] - 1) with division checks
//    - Allocates 3 arrays (size based on ctx[0x58]-1):
//      * ctx+0x3C: 0x34 bytes per frame
//      * ctx+0x40: 0x34 bytes per frame
//      * ctx+0x48: 2 bytes per frame
//    - Sets ctx+0x5C=1, ctx+0x5D=0
//    - Stores context @ entity+0x34
//    - Sets ctx+0x5D flag if sprite metadata == 0x1498810C
//    - Allocates 0x10-byte secondary object:
//      * Calls InitBasicEntityWithVtable(obj, source[0x1C]-1)
//      * Sets vtable @ obj+0x0C = 0x80010AD8
//      * Stores @ entity+0x104
//    - Calls AddToXPositionList(GameState)
//    - Sets entity+0x108 = 1
//    
//    Path B (other flags):
//    - Allocates 0x5C-byte sprite context
//    - Similar to Path A but:
//      * Calls InitSpriteRenderContext with frame_count+2
//      * Sets vtable @ ctx+0x0C = 0x80010AE8
//      * Only allocates 2 arrays (no ctx+0x48)
//      * Different size field: ctx+0x54 instead of ctx+0x58
//      * Different division: ctx+0x56 = width / (ctx[0x54] - 1)
//      * Sets ctx+0x58 flag if sprite metadata == 0x8148080
//      * Does NOT allocate secondary object (entity+0x104 = 0)
//      * Sets entity+0x108 = 0
// 
// 4. Both paths allocate final buffer:
//    - Size: entity+0xD4 = width * height
//    - Allocates @ entity+0xB0: 1 byte per pixel
// 
// Sprite Context Structures:
// Type A (0x60 bytes, vtable 0x80010B00):
//   +0x0C: Vtable pointer
//   +0x3C: Frame buffer array 1 (0x34  frames)
//   +0x40: Frame buffer array 2 (0x34  frames)
//   +0x48: Frame index array (2  frames)
//   +0x4C-0x50: Animation sequence 2 pointers
//   +0x54-0x58: Animation sequence 1 pointers
//   +0x5A: Width step per frame (byte)
//   +0x5B: Comparison flag
//   +0x5C: Enable flag
//   +0x5D: Sprite metadata flag
// 
// Type B (0x5C bytes, vtable 0x80010AE8):
//   +0x0C: Vtable pointer
//   +0x3C: Frame buffer array 1
//   +0x40: Frame buffer array 2
//   +0x48-0x4C: Animation sequence 2 pointers
//   +0x50-0x54: Animation sequence 1 pointers
//   +0x56: Width step per frame (byte)
//   +0x57: Comparison flag
//   +0x58: Sprite metadata flag
// 
// Entity Fields Set:
// - +0x34: Sprite context pointer
// - +0xB0: Pixel buffer (width  height bytes)
// - +0xD4: Buffer size (width  height)
// - +0x104: Secondary object (Type A only)
// - +0x108: Type flag (1=Type A, 0=Type B)
// 
// Cross-References:
// - Called by: InitAlternateEntity @ 0x80033D3C
// - Calls: FUN_8007BBEC (sprite metadata lookup)
// - Calls: InitSpriteRenderContext
// - Calls: InitBasicEntityWithVtable @ 0x8001543C
// - Calls: FUN_800255C8 (animation setup)
// - Calls: AddToXPositionList
// - Calls: AllocateFromHeap
// - Uses: Sprite metadata table @ 0x8009B144
// 
// Notes:
// - Type A entities have animated frames with sequence data
// - Type B entities are simpler (no secondary object)
// - Both types use different vtables for rendering behavior
// - Pixel buffer is 8bpp indexed color
// - Frame arrays size depends on animation sequence frame count
// 
// Verified via Ghidra decompilation 2025-01-13.

void SetupAlternateEntitySpriteContext(int param_1)

{
  undefined1 *puVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  int iVar7;
  uint uVar8;
  ushort uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  int *local_48 [3];
  uint uStack_3c;
  undefined1 local_30 [8];
  
  FUN_8007bbec(local_48,*(undefined4 *)(&DAT_8009b144 + **(int **)(param_1 + 0x100) * 4));
  puVar1 = local_30 + 3;
  uVar11 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar11) =
       *(uint *)(puVar1 + -uVar11) & -1 << (uVar11 + 1) * 8 | uStack_3c >> (3 - uVar11) * 8;
  local_30._0_4_ = uStack_3c;
  uVar6 = local_30._0_4_;
  local_30._0_2_ = (undefined2)uStack_3c;
  uVar9 = local_30._0_2_ + 3 & 0xfffc;
  local_30._0_4_ = uVar6;
  if ((*local_48[0] == 0x180104) || (*local_48[0] == 0x1498810c)) {
    iVar4 = AllocateFromHeap(blbHeaderBufferBase,0x60,1,0);
    iVar10 = (int)(short)uVar9;
    iVar5 = *(int *)(param_1 + 0x100);
    uVar2 = *(ushort *)(iVar5 + 0x1c);
    uVar8 = *(uint *)(iVar5 + 0x38);
    puVar1 = local_30 + 3;
    uVar11 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar11) =
         *(uint *)(puVar1 + -uVar11) & -1 << (uVar11 + 1) * 8 | uStack_3c >> (3 - uVar11) * 8;
    local_30._0_4_ = uStack_3c;
    uVar6 = local_30._0_4_;
    uVar11 = *(uint *)(iVar5 + 4);
    uVar12 = *(uint *)(iVar5 + 0x20);
    local_30._2_2_ = (undefined2)(uStack_3c >> 0x10);
    iVar7 = (int)(short)local_30._2_2_;
    local_30._0_4_ = uVar6;
    InitSpriteRenderContext
              (iVar4,(int)((*(ushort *)(iVar5 + 0x1c) + 1) * 0x10000) >> 0x10,iVar10,iVar7,1);
    *(bool *)(iVar4 + 0x5b) = uVar8 < uVar2;
    uVar6 = g_GameStatePtr;
    *(undefined **)(iVar4 + 0xc) = &DAT_80010b00;
    FUN_800255c8(uVar6,uVar11 & 0xffff,iVar4 + 0x54,iVar4 + 0x58);
    FUN_800255c8(g_GameStatePtr,uVar12 & 0xffff,iVar4 + 0x4c,iVar4 + 0x50);
    iVar5 = *(short *)(iVar4 + 0x58) + -1;
    if (iVar5 == 0) {
      trap(0x1c00);
    }
    if ((iVar5 == -1) && (iVar10 == -0x80000000)) {
      trap(0x1800);
    }
    *(char *)(iVar4 + 0x5a) = (char)(iVar10 / iVar5);
    uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x34,*(short *)(iVar4 + 0x58) + -1,0);
    puVar3 = blbHeaderBufferBase;
    *(undefined4 *)(iVar4 + 0x3c) = uVar6;
    uVar6 = AllocateFromHeap(puVar3,0x34,*(short *)(iVar4 + 0x58) + -1,0);
    puVar3 = blbHeaderBufferBase;
    *(undefined4 *)(iVar4 + 0x40) = uVar6;
    uVar6 = AllocateFromHeap(puVar3,2,*(short *)(iVar4 + 0x58) + -1,0);
    *(undefined4 *)(iVar4 + 0x48) = uVar6;
    *(undefined1 *)(iVar4 + 0x5c) = 1;
    *(undefined1 *)(iVar4 + 0x5d) = 0;
    *(int *)(param_1 + 0x34) = iVar4;
    *(bool *)(iVar4 + 0x5d) = *local_48[0] == 0x1498810c;
    iVar4 = AllocateFromHeap(blbHeaderBufferBase,0x10,1,0);
    InitBasicEntityWithVtable
              (iVar4,(int)((*(ushort *)(*(int *)(param_1 + 0x100) + 0x1c) - 1) * 0x10000) >> 0x10);
    uVar6 = g_GameStatePtr;
    *(undefined **)(iVar4 + 0xc) = &DAT_80010ad8;
    *(int *)(param_1 + 0x104) = iVar4;
    AddToXPositionList(uVar6);
    *(undefined1 *)(param_1 + 0x108) = 1;
  }
  else {
    iVar4 = AllocateFromHeap(blbHeaderBufferBase,0x5c,1,0);
    iVar10 = (int)(short)uVar9;
    iVar5 = *(int *)(param_1 + 0x100);
    uVar2 = *(ushort *)(iVar5 + 0x1c);
    uVar8 = *(uint *)(iVar5 + 0x38);
    puVar1 = local_30 + 3;
    uVar11 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar11) =
         *(uint *)(puVar1 + -uVar11) & -1 << (uVar11 + 1) * 8 | uStack_3c >> (3 - uVar11) * 8;
    local_30._0_4_ = uStack_3c;
    uVar6 = local_30._0_4_;
    uVar11 = *(uint *)(iVar5 + 4);
    uVar12 = *(uint *)(iVar5 + 0x20);
    local_30._2_2_ = (undefined2)(uStack_3c >> 0x10);
    iVar7 = (int)(short)local_30._2_2_;
    local_30._0_4_ = uVar6;
    InitSpriteRenderContext
              (iVar4,(int)((*(ushort *)(iVar5 + 0x1c) + 2) * 0x10000) >> 0x10,iVar10,iVar7,1);
    *(bool *)(iVar4 + 0x57) = uVar8 < uVar2;
    uVar6 = g_GameStatePtr;
    *(undefined **)(iVar4 + 0xc) = &DAT_80010ae8;
    FUN_800255c8(uVar6,uVar11 & 0xffff,iVar4 + 0x50,iVar4 + 0x54);
    FUN_800255c8(g_GameStatePtr,uVar12 & 0xffff,iVar4 + 0x48,iVar4 + 0x4c);
    iVar5 = *(short *)(iVar4 + 0x54) + -1;
    if (iVar5 == 0) {
      trap(0x1c00);
    }
    if ((iVar5 == -1) && (iVar10 == -0x80000000)) {
      trap(0x1800);
    }
    *(char *)(iVar4 + 0x56) = (char)(iVar10 / iVar5);
    uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x34,*(short *)(iVar4 + 0x54) + -1,0);
    puVar3 = blbHeaderBufferBase;
    *(undefined4 *)(iVar4 + 0x3c) = uVar6;
    uVar6 = AllocateFromHeap(puVar3,0x34,*(short *)(iVar4 + 0x54) + -1,0);
    *(undefined4 *)(iVar4 + 0x40) = uVar6;
    *(undefined1 *)(iVar4 + 0x58) = 0;
    *(int *)(param_1 + 0x34) = iVar4;
    *(bool *)(iVar4 + 0x58) = *local_48[0] == 0x8148080;
    *(undefined1 *)(param_1 + 0x108) = 0;
    *(undefined4 *)(param_1 + 0x104) = 0;
  }
  puVar3 = blbHeaderBufferBase;
  puVar1 = local_30 + 3;
  uVar11 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar11) =
       *(uint *)(puVar1 + -uVar11) & -1 << (uVar11 + 1) * 8 | uStack_3c >> (3 - uVar11) * 8;
  local_30._0_4_ = uStack_3c;
  uVar6 = local_30._0_4_;
  local_30._2_2_ = (undefined2)(uStack_3c >> 0x10);
  iVar4 = (int)(short)local_30._2_2_;
  *(int *)(param_1 + 0xd4) = (short)uVar9 * iVar4;
  local_30._0_4_ = uVar6;
  uVar6 = AllocateFromHeap(puVar3,1,(short)uVar9 * iVar4,0);
  *(undefined4 *)(param_1 + 0xb0) = uVar6;
  return;
}



undefined4 FUN_800346f4(int param_1)

{
  int iVar1;
  short sVar2;
  undefined4 uVar3;
  short sVar4;
  
  sVar2 = *(short *)(g_GameStatePtr + 0x44);
  if (*(int *)(param_1 + 0x60) != 0x10000) {
    sVar2 = (short)((uint)((int)sVar2 * *(int *)(param_1 + 0x60)) >> 0x10);
  }
  sVar4 = *(short *)(g_GameStatePtr + 0x46);
  if (*(int *)(param_1 + 100) != 0x10000) {
    sVar4 = (short)((uint)((int)sVar4 * *(int *)(param_1 + 100)) >> 0x10);
  }
  iVar1 = *(int *)(param_1 + 0x100);
  uVar3 = 0;
  if (((((int)*(short *)(iVar1 + 0xc) < sVar2 + -0x10) ||
       ((int)sVar2 + (int)*(short *)blbHeaderBufferBase + 0x10 < (int)*(short *)(iVar1 + 8))) ||
      ((int)*(short *)(iVar1 + 0xe) < sVar4 + -0x10)) ||
     ((int)sVar4 + (int)*(short *)(blbHeaderBufferBase + 2) + 0x10 < (int)*(short *)(iVar1 + 10))) {
    uVar3 = 1;
  }
  return uVar3;
}



// Initializes colored overlay entity for UI/menu effects.
// 
// Called from ShowPauseMenuHUD @ 0x8002B22C to create shadow/tint overlays.
// 
// Algorithm:
// 1. Calls InitBasicEntityWithVtable(entity, param_6) - basic setup
// 2. Sets vtable @ entity+0x0C = 0x80010AA8
// 3. Stores RGBA/color values:
//    - entity+0x40 = param_2 (R or color component 1)
//    - entity+0x41 = param_3 (G or color component 2)
//    - entity+0x42 = param_4 (B or color component 3)
//    - entity+0x43 = param_5 (A or type/mode)
// 
// Parameters:
// - param_1: Entity structure pointer
// - param_2: Red component (byte)
// - param_3: Green component (byte)
// - param_4: Blue component (byte)
// - param_5: Alpha or type/mode (byte)
// - param_6: Size parameter (short, passed to InitBasicEntityWithVtable)
// 
// Entity Structure:
// - +0x0C: Vtable (0x80010AA8 - colored overlay methods)
// - +0x40-0x43: RGBA/color values
// - Basic entity fields from InitBasicEntityWithVtable
// 
// Example Usage:
// - ShowPauseMenuHUD calls with (entity, 0x20, 0x20, 0x20, 2, 9000)
//   Creates dark gray overlay (RGB 32,32,32) at z=9000 for pause menu shadow
// 
// Cross-References:
// - Called by: ShowPauseMenuHUD @ 0x8002B22C
// - Calls: InitBasicEntityWithVtable @ 0x8001543C
// - Vtable: 0x80010AA8 (colored overlay rendering)
// 
// Notes:
// - Used for menu shadows, screen fades, color tinting effects
// - Vtable 0x80010AA8 likely handles semi-transparent rendering
// - Z-order from param_6 controls draw order (9000 = behind HUD text)
// 
// Verified via Ghidra decompilation 2025-01-13.

void InitColoredOverlayEntity
               (int param_1,undefined1 param_2,undefined1 param_3,undefined1 param_4,
               undefined1 param_5,short param_6)

{
  InitBasicEntityWithVtable(param_1,(int)param_6);
  *(undefined **)(param_1 + 0xc) = &DAT_80010aa8;
  *(undefined1 *)(param_1 + 0x40) = param_2;
  *(undefined1 *)(param_1 + 0x41) = param_3;
  *(undefined1 *)(param_1 + 0x42) = param_4;
  *(undefined1 *)(param_1 + 0x43) = param_5;
  return;
}



void FUN_80034a54(int param_1,undefined4 param_2,undefined4 param_3,short param_4,undefined1 param_5
                 )

{
  short local_res8;
  short sStackX_a;
  
  sStackX_a = (short)((uint)param_3 >> 0x10);
  local_res8 = (short)param_3;
  FUN_8001f944(param_1,param_2,(int)param_4,(int)local_res8,(int)sStackX_a,param_5);
  *(undefined **)(param_1 + 0x18) = &DAT_80010a88;
  *(undefined2 *)(param_1 + 0x10) = 0x44c;
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(undefined1 **)(param_1 + 0xc) = &LAB_80034ae4;
  *(undefined1 *)(param_1 + 0x34) = 0;
  return;
}



void InitEntity_168254b5(undefined4 *param_1,undefined4 param_2,short param_3,short param_4,
                        undefined4 param_5,undefined4 param_6)

{
  int iVar1;
  
  InitEntitySprite(param_1,0x168254b5,0x3bf,(int)param_3,(int)param_4,1);
  param_1[6] = &DAT_80010a68;
  param_1[0x41] = param_5;
  param_1[0x42] = param_6;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80034ca8;
  iVar1 = rand();
  *(ushort *)(param_1 + 0x40) = ((ushort)iVar1 & 0x3f) + 0x40;
  param_1[0x44] = param_2;
  *(short *)(param_1 + 0x43) = param_3;
  *(short *)((int)param_1 + 0x10e) = param_4;
  return;
}



void InitDebrisParticleEntity
               (undefined4 *param_1,undefined4 param_2,short param_3,short param_4,int param_5,
               undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  uint uVar1;
  int iVar2;
  
  InitEntitySprite(param_1,param_2,3000,(int)param_3,(int)param_4,0);
  param_1[6] = &DAT_80010a48;
  param_1[0x40] = param_6;
  *(undefined2 *)(param_1 + 4) = 0x44c;
  param_1[0x41] = param_7;
  param_1[0x42] = param_8;
  if (param_1[0x40] == 0x7fffffff) {
    uVar1 = rand();
    param_1[0x40] = (uVar1 & 0x7fff) * 0x20 + -0x60000;
  }
  if (param_1[0x41] == 0x7fffffff) {
    uVar1 = rand();
    param_1[0x41] = -((uVar1 & 0x7fff) * 0x10 + 0x20000);
  }
  if (param_1[0x42] == 0x7fffffff) {
    uVar1 = rand();
    param_1[0x42] = (uVar1 & 0x1fff) - 0x400;
  }
  iVar2 = rand();
  FUN_8001d0c0(param_1,(iVar2 % 5) * 0x10000 >> 0x10);
  *(undefined2 *)(param_1 + 0x1b) = 0;
  *(undefined2 *)((int)param_1 + 0x6e) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800350ec;
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_800351bc;
  param_1[0x14] = param_5;
  param_1[0x15] = param_5;
  param_1[0x16] = param_5;
  param_1[0x17] = param_5;
  param_1[9] = 0xffff0000;
  param_1[10] = ScaleXByEntityScale;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = ScaleYByEntityScale;
  param_1[0x42] = param_1[0x42] * param_5 >> 0x10;
  return;
}



void FUN_800362a4(undefined4 *param_1,undefined4 param_2)

{
  undefined1 *puVar1;
  undefined2 uVar2;
  uint uVar3;
  uint *puVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  uint uVar8;
  int iVar9;
  undefined1 auStack_30 [4];
  undefined1 local_2c [4];
  undefined1 *local_28;
  
  puVar7 = param_1;
  InitEntityStruct(param_1,0x4b0);
  param_1[6] = &DAT_800109f0;
  param_1[0x1e] = param_2;
  local_2c = (undefined1  [4])0xffff0000;
  local_28 = &LAB_80036470;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80036470;
  iVar5 = param_1[0x1e];
  uVar3 = iVar5 + 0x3bU & 3;
  uVar8 = iVar5 + 0x38U & 3;
  auStack_30 = (undefined1  [4])
               ((*(int *)((iVar5 + 0x3bU) - uVar3) << (3 - uVar3) * 8 |
                0xffffffffU >> (uVar3 + 1) * 8 & 0x80036470) & -1 << (4 - uVar8) * 8 |
               *(uint *)((iVar5 + 0x38U) - uVar8) >> uVar8 * 8);
  uVar3 = iVar5 + 0x3fU & 3;
  uVar8 = iVar5 + 0x3cU & 3;
  uVar8 = (*(int *)((iVar5 + 0x3fU) - uVar3) << (3 - uVar3) * 8 |
          (uint)puVar7 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar8) * 8 |
          *(uint *)((iVar5 + 0x3cU) - uVar8) >> uVar8 * 8;
  puVar1 = auStack_30 + 3;
  uVar3 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar3) =
       *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | (uint)auStack_30 >> (3 - uVar3) * 8;
  puVar1 = local_2c + 3;
  uVar3 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar3) =
       *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | uVar8 >> (3 - uVar3) * 8;
  local_2c._0_2_ = (undefined2)uVar8;
  iVar5 = (int)(short)local_2c._0_2_;
  local_2c._2_2_ = (undefined2)(uVar8 >> 0x10);
  iVar9 = (int)(short)local_2c._2_2_;
  local_2c = (undefined1  [4])uVar8;
  FUN_8001a3ac(param_1,(*(short *)(*(int *)(param_1[0x1e] + 0x34) + 8) + -1) * 0x10000 >> 0x10,iVar5
               ,iVar9,1);
  uVar3 = (int)param_1 + 0x3bU & 3;
  puVar4 = (uint *)(((int)param_1 + 0x3bU) - uVar3);
  *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | (uint)auStack_30 >> (3 - uVar3) * 8;
  uVar3 = (uint)(param_1 + 0xe) & 3;
  puVar4 = (uint *)((int)(param_1 + 0xe) - uVar3);
  *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar3) * 8 | (int)auStack_30 << uVar3 * 8;
  uVar3 = (int)param_1 + 0x3fU & 3;
  puVar4 = (uint *)(((int)param_1 + 0x3fU) - uVar3);
  *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | (uint)local_2c >> (3 - uVar3) * 8;
  uVar3 = (uint)(param_1 + 0xf) & 3;
  puVar4 = (uint *)((int)(param_1 + 0xf) - uVar3);
  *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar3) * 8 | (int)local_2c << uVar3 * 8;
  *(undefined1 *)((int)param_1 + 0x81) = 1;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1[0x1e] + 0x68);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)(param_1[0x1e] + 0x6a);
  uVar6 = *(undefined4 *)(param_1[0x1e] + 0x50);
  param_1[0x14] = uVar6;
  param_1[0x15] = uVar6;
  uVar6 = *(undefined4 *)(param_1[0x1e] + 0x58);
  param_1[0x16] = uVar6;
  param_1[0x17] = uVar6;
  if (param_1[0x16] != 0x10000) {
    param_1[9] = 0xffff0000;
    param_1[10] = ScaleXByEntityScale;
    param_1[0xb] = 0xffff0000;
    param_1[0xc] = ScaleYByEntityScale;
  }
  *(undefined1 *)(param_1 + 0x1d) = *(undefined1 *)(param_1[0x1e] + 0x74);
  *(undefined1 *)((int)param_1 + 0x75) = *(undefined1 *)(param_1[0x1e] + 0x75);
  param_1[0x1f] = *(undefined4 *)(param_1[0x1e] + 0xcc);
  uVar2 = *(undefined2 *)(param_1[0x1e] + 0xda);
  *(undefined1 *)(param_1 + 0x20) = 0x18;
  *(undefined1 *)((int)param_1 + 0x76) = 1;
  *(char *)((int)param_1 + 0x82) = (char)uVar2;
  return;
}



undefined4 * FUN_80036698(undefined4 *param_1)

{
  u_short uVar1;
  int iVar2;
  
  FUN_800362a4();
  param_1[6] = &DAT_800109d0;
  *(undefined1 *)(param_1 + 0x21) = 0x40;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80036734;
  iVar2 = param_1[0xd];
  uVar1 = GetTPage((uint)*(byte *)(iVar2 + 0x32),1,(int)*(short *)(iVar2 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar2 + 0x12) & 0xffffff00);
  *(u_short *)(iVar2 + 0x24) = uVar1;
  return param_1;
}



void FUN_800371d4(undefined4 *param_1,undefined2 param_2,undefined2 param_3,undefined4 param_4,
                 int param_5)

{
  int iVar1;
  int iVar2;
  undefined2 uVar3;
  
  InitMenuEntityWithVtable(param_1,0x44c);
  param_1[6] = &DAT_80010980;
  uVar3 = 4;
  if (param_5 == 0xc000) {
    uVar3 = 3;
  }
  else if (param_5 == 0x8000) {
    uVar3 = 2;
  }
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x3a8,1,0);
  InitBasicEntityWithVtable(iVar2,0x3ca);
  *(undefined1 *)(iVar2 + 0x3a7) = 0;
  iVar1 = g_GameStatePtr;
  *(undefined **)(iVar2 + 0xc) = &DAT_800109a0;
  *(undefined2 *)(iVar2 + 0x3a0) = uVar3;
  *(undefined2 *)(iVar2 + 0x3a2) = uVar3;
  *(undefined2 *)(iVar2 + 0x3a4) = uVar3;
  *(char *)(iVar2 + 0x3a6) = (char)*(undefined4 *)(iVar1 + 0x10c);
  param_1[8] = iVar2;
  *(undefined1 *)(iVar2 + 0x3a7) = 1;
  AddToXPositionList(g_GameStatePtr,param_1[8]);
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800373a8;
  *(undefined2 *)(param_1 + 9) = param_2;
  *(undefined2 *)((int)param_1 + 0x26) = param_3;
  *(undefined1 *)(param_1 + 10) = 0x10;
  *(undefined1 *)((int)param_1 + 0x29) = 0;
  return;
}



void FUN_80037810(undefined4 *param_1,undefined2 param_2,undefined2 param_3,undefined2 param_4,
                 undefined2 param_5,undefined2 param_6)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  
  InitMenuEntityWithVtable(param_1,0x44c);
  puVar1 = blbHeaderBufferBase;
  param_1[6] = &DAT_80010950;
  iVar3 = AllocateFromHeap(puVar1,0x94,1,0);
  InitBasicEntityWithVtable(iVar3,3000);
  uVar2 = g_GameStatePtr;
  *(undefined **)(iVar3 + 0xc) = &DAT_80010970;
  param_1[8] = iVar3;
  AddToXPositionList(uVar2);
  *(undefined2 *)((int)param_1 + 0x2a) = param_6;
  *(undefined2 *)(param_1 + 9) = param_2;
  *(undefined2 *)((int)param_1 + 0x26) = param_3;
  *(undefined2 *)(param_1 + 10) = param_4;
  *(undefined2 *)(param_1 + 7) = param_5;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800379b0;
  *(undefined1 *)((int)param_1 + 0x1e) = 0;
  *(undefined2 *)((int)param_1 + 0x12) = 0x40;
  return;
}



undefined4 * FUN_80037ae0(undefined4 *param_1,uint param_2,int param_3,char param_4)

{
  undefined1 *puVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined1 local_50 [28];
  undefined4 local_34;
  undefined1 *local_30;
  
  puVar1 = local_50 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | param_2 >> (3 - uVar2) * 8;
  local_50._0_2_ = (undefined2)param_2;
  iVar4 = (int)(short)local_50._0_2_;
  local_50._2_2_ = (undefined2)(param_2 >> 0x10);
  iVar3 = (int)(short)local_50._2_2_;
  local_50._0_4_ = param_2;
  InitEntitySprite(param_1,0x6a351094,2000,iVar4,iVar3,0);
  param_1[6] = &DAT_80010ba8;
  *(undefined2 *)(param_1 + 4) = 0x4b0;
  *param_1 = 0xffff0000;
  param_1[1] = FUN_80030e54;
  local_34 = 0xffff0000;
  local_30 = &LAB_80030fe0;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80030fe0;
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1 + 0x1d) = 0;
  if (param_3 != 0x10000) {
    param_1[0x16] = param_3;
    param_1[0x17] = param_3;
    param_1[0x14] = param_3;
    param_1[0x15] = param_3;
    param_1[9] = 0xffff0000;
    param_1[10] = ScaleXByEntityScale;
    param_1[0xb] = 0xffff0000;
    param_1[0xc] = ScaleYByEntityScale;
  }
  param_1[6] = &DAT_80010930;
  *(undefined1 *)((int)param_1 + 0x102) = 0;
  *(undefined2 *)(param_1 + 0x40) = 0;
  param_1[0x41] = 0;
  param_1[0x43] = param_3;
  *(char *)(param_1 + 0x42) = param_4;
  if (param_4 == '\0') {
    param_1[0x43] = (int)param_1[0x43] >> 1;
  }
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80037c94;
  return param_1;
}



void FUN_80037d34(undefined4 *param_1)

{
  undefined1 uVar1;
  undefined *puVar2;
  undefined4 uVar3;
  int iVar4;
  
  InitMenuEntityWithVtable(param_1,0x44c);
  param_1[6] = &DAT_80010910;
  puVar2 = blbHeaderBufferBase;
  *(undefined2 *)((int)param_1 + 0x22) = 0xff;
  iVar4 = AllocateFromHeap(puVar2,0x44,1,0);
  uVar1 = *(undefined1 *)((int)param_1 + 0x22);
  InitBasicEntityWithVtable(iVar4,9000);
  *(undefined1 *)(iVar4 + 0x43) = 1;
  *(undefined1 *)(iVar4 + 0x40) = uVar1;
  *(undefined1 *)(iVar4 + 0x41) = uVar1;
  *(undefined1 *)(iVar4 + 0x42) = uVar1;
  uVar3 = g_GameStatePtr;
  *(undefined **)(iVar4 + 0xc) = &DAT_80010aa8;
  param_1[7] = iVar4;
  AddToXPositionList(uVar3);
  *(undefined2 *)(param_1 + 8) = 0x50;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80037ed8;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_8003800c;
  *(undefined1 *)(param_1 + 9) = 0;
  *(undefined2 *)((int)param_1 + 0x12) = 0x40;
  return;
}



void FUN_8003802c(undefined4 *param_1,uint param_2,int param_3)

{
  undefined1 *puVar1;
  uint uVar2;
  u_short uVar3;
  int iVar4;
  int iVar5;
  undefined1 local_48 [28];
  undefined4 local_2c;
  code *local_28;
  
  puVar1 = local_48 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | param_2 >> (3 - uVar2) * 8;
  local_48._0_2_ = (undefined2)param_2;
  iVar5 = (int)(short)local_48._0_2_;
  local_48._2_2_ = (undefined2)(param_2 >> 0x10);
  iVar4 = (int)(short)local_48._2_2_;
  local_48._0_4_ = param_2;
  InitEntitySprite(param_1,0xa921e2c,2000,iVar5,iVar4,0);
  param_1[6] = &DAT_80010ba8;
  *(undefined2 *)(param_1 + 4) = 0x4b0;
  *param_1 = 0xffff0000;
  param_1[1] = FUN_80030e54;
  local_2c = 0xffff0000;
  local_28 = (code *)&LAB_80030fe0;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80030fe0;
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1 + 0x1d) = 0;
  if (param_3 != 0x10000) {
    param_1[0x16] = param_3;
    param_1[0x17] = param_3;
    param_1[0x14] = param_3;
    param_1[0x15] = param_3;
    param_1[9] = 0xffff0000;
    param_1[10] = ScaleXByEntityScale;
    local_2c = 0xffff0000;
    local_28 = ScaleYByEntityScale;
    param_1[0xb] = 0xffff0000;
    param_1[0xc] = ScaleYByEntityScale;
  }
  iVar4 = param_1[0xd];
  *(undefined1 *)((int)param_1 + 0x102) = 0;
  *(undefined2 *)(param_1 + 0x40) = 0;
  param_1[0x41] = 0;
  param_1[6] = &DAT_800108f0;
  uVar3 = GetTPage((uint)*(byte *)(iVar4 + 0x32),1,(int)*(short *)(iVar4 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar4 + 0x12) & 0xffffff00);
  *(u_short *)(iVar4 + 0x24) = uVar3;
  param_1[0x14] = 0x40000;
  param_1[0x15] = 0x40000;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80038270;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80038210;
  *(undefined1 *)(param_1 + 0x42) = 0;
  return;
}



undefined4 * FUN_80038300(undefined4 *param_1)

{
  undefined1 uVar1;
  undefined *puVar2;
  undefined4 uVar3;
  int iVar4;
  
  InitMenuEntityWithVtable(param_1,0x44c);
  puVar2 = blbHeaderBufferBase;
  param_1[6] = &DAT_800108d0;
  *(undefined2 *)((int)param_1 + 0x22) = 0;
  iVar4 = AllocateFromHeap(puVar2,0x44,1,0);
  uVar1 = *(undefined1 *)((int)param_1 + 0x22);
  InitBasicEntityWithVtable(iVar4,20000);
  *(undefined1 *)(iVar4 + 0x43) = 2;
  *(undefined1 *)(iVar4 + 0x40) = uVar1;
  *(undefined1 *)(iVar4 + 0x41) = uVar1;
  *(undefined1 *)(iVar4 + 0x42) = uVar1;
  uVar3 = g_GameStatePtr;
  *(undefined **)(iVar4 + 0xc) = &DAT_80010aa8;
  param_1[7] = iVar4;
  AddToXPositionList(uVar3);
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80038468;
  return param_1;
}



undefined4 LoadGameAssetLocations(void)

{
  CdlFILE *pCVar1;
  undefined4 uVar2;
  CdlFILE *pCVar3;
  CdlFILE *pCVar4;
  CdlFILE *pCVar5;
  CdlFILE *pCVar6;
  
  CdInit();
  pCVar1 = CdSearchFile((CdlFILE *)&g_GameBLBFile,"\\GAME.BLB;1");
  uVar2 = 0;
  if (pCVar1 != (CdlFILE *)0x0) {
    g_GameBLBSector = CdPosToInt((CdlLOC *)&g_GameBLBFile);
    pCVar1 = CdSearchFile((CdlFILE *)&DAT_8009b43c,"\\MUSIC1.XA;1");
    if (pCVar1 != (CdlFILE *)0x0) {
      null_00000000h_8009b3d8 = CdPosToInt((CdlLOC *)&DAT_8009b43c);
    }
    pCVar3 = CdSearchFile((CdlFILE *)&DAT_8009b454,"\\MUSIC2.XA;1");
    if (pCVar3 != (CdlFILE *)0x0) {
      null_00000000h_8009b3dc = CdPosToInt((CdlLOC *)&DAT_8009b454);
    }
    pCVar4 = CdSearchFile((CdlFILE *)&DAT_8009b46c,"\\MUSIC3.XA;1");
    if (pCVar4 != (CdlFILE *)0x0) {
      null_00000000h_8009b3e0 = CdPosToInt((CdlLOC *)&DAT_8009b46c);
    }
    pCVar5 = CdSearchFile((CdlFILE *)&DAT_8009b484,"\\MUSIC4.XA;1");
    if (pCVar5 != (CdlFILE *)0x0) {
      null_00000000h_8009b3e4 = CdPosToInt((CdlLOC *)&DAT_8009b484);
    }
    pCVar6 = CdSearchFile((CdlFILE *)&DAT_8009b49c,"\\MUSIC5.XA;1");
    if (pCVar6 != (CdlFILE *)0x0) {
      null_00000000h_8009b3e8 = CdPosToInt((CdlLOC *)&DAT_8009b49c);
    }
    if ((((pCVar1 != (CdlFILE *)0x0) && (pCVar3 != (CdlFILE *)0x0)) && (pCVar4 != (CdlFILE *)0x0))
       && ((pCVar5 != (CdlFILE *)0x0 && (pCVar6 != (CdlFILE *)0x0)))) {
      null_00h_800a59e8 = 1;
    }
    uVar2 = 1;
  }
  return uVar2;
}



// Reads sectors from GAME.BLB file on CD.
// sectorOffset: Offset in sectors from g_GameBLBSector (0x800A59F0)
// sectorCount: Number of 2048-byte sectors to read
// destBuffer: Destination memory for read data
// Uses CdIntToPos, CdControl(SetLoc), CdRead(mode=0x80 double-speed), CdReadSync(blocking)
// Returns 1 always (success)

int CdBLB_ReadSectors(uint sectorOffset,uint sectorCount,void *destBuffer)

{
  CdlLOC aCStack_18 [2];
  
  CdIntToPos(g_GameBLBSector + (sectorOffset & 0xffff),aCStack_18);
  CdControl('\x02',&aCStack_18[0].minute,(u_char *)0x0);
  CdRead(sectorCount & 0xffff,(u_long *)destBuffer,0x80);
  CdReadSync(0,(u_char *)0x0);
  return 1;
}



int FUN_80038cac(byte param_1,byte param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  
  if (null_00h_800a59e8 != '\0') {
    uVar2 = *(ushort *)(&DAT_8009b3ec + ((uint)param_1 * 8 + (uint)param_2) * 2) - 2;
    if (param_2 == 0) {
      uVar2 = *(ushort *)(&DAT_8009b3ec + ((uint)param_1 * 8 + (uint)param_2) * 2) - 3;
    }
    null_00h_800a5a04 = 0xc0;
    null_00000000h_800a59f8 = (&null_00000000h_8009b3d8)[param_1] + (uVar2 & 0xffff) * 8;
    iVar3 = 8;
    null_00h_800a59ec = param_1;
    CdControl('\x0e',&null_00h_800a5a04,(u_char *)0x0);
    do {
      null_00000000h_800a59f4 = (&null_00000000h_8009b3d8)[null_00h_800a59ec];
      iVar1 = CdControl('\x1b',&DAT_8009b43c + (uint)null_00h_800a59ec * 0x18,(u_char *)0x0);
      iVar3 = iVar3 + -1;
      if (iVar1 == 1) {
        null_00h_800a5a04 = 200;
        CdControl('\x0e',&null_00h_800a5a04,(u_char *)0x0);
        null_00h_800a5a0c = 1;
        null_00h_800a5a0d = param_2;
        iVar3 = CdControlB('\r',&null_00h_800a5a0c,&DAT_800a59fc);
        null_00h_800a59e9 = 1;
        return iVar3;
      }
    } while (iVar3 != 0);
  }
  return 0;
}



void FUN_80038e0c(void)

{
  if (null_00h_800a59e8 != '\0') {
    CdControl('\b',(u_char *)0x0,(u_char *)0x0);
    CdFlush();
    null_00h_800a59e9 = 0;
  }
  return;
}



// Pauses CD-ROM audio playback.
// 
// Called from SaveAndMuteAllVoicePitches @ 0x8007CB44 during game pause.
// 
// Algorithm:
// 1. Checks if CD audio is enabled: null_00h_800a59e8 != 0
// 2. If not already paused (null_00h_800a59ea == 0):
//    - Sends PSY-Q CdControl command 0x09 (CdlPause)
//    - Sets paused flag: null_00h_800a59ea = 1
// 3. Returns 1 if CD audio enabled, 0 otherwise
// 
// Global State:
// - null_00h_800a59e8 @ 0x800A59E8: CD audio enable flag
// - null_00h_800a59ea @ 0x800A59EA: CD paused state flag
// 
// PSY-Q Command:
// - CdControl(0x09, NULL, NULL) = CdlPause (pause CD audio)
// 
// Cross-References:
// - Called by: SaveAndMuteAllVoicePitches @ 0x8007CB44
// - Paired with: ResumeCDAudio @ 0x80038EA0
// - Uses: PSY-Q libcd.h CdControl function
// 
// Notes:
// - Part of pause system integration (pauses both SPU voices and CD audio)
// - Prevents music from continuing while game is paused
// - State flags prevent redundant pause commands
// 
// Verified via Ghidra decompilation 2025-01-13.

undefined4 PauseCDAudio(void)

{
  undefined4 uVar1;
  
  if (null_00h_800a59e8 == '\0') {
    uVar1 = 0;
  }
  else {
    uVar1 = 1;
    if (null_00h_800a59ea == '\0') {
      CdControl('\t',(u_char *)0x0,(u_char *)0x0);
      uVar1 = 1;
      null_00h_800a59ea = '\x01';
    }
  }
  return uVar1;
}



// Resumes CD-ROM audio playback after pause.
// 
// Called from ResumeAllVoicePitches @ 0x8007CBC0 during game unpause.
// 
// Algorithm:
// 1. Checks if CD audio is enabled: null_00h_800a59e8 != 0
//    - If disabled, returns 0
// 2. Checks if currently paused: null_00h_800a59ea != 0
//    - If not paused, returns 1 (already resumed)
// 3. If paused:
//    - Sends PSY-Q CdControl command 0x1B (CdlResume)
//    - Clears paused flag: null_00h_800a59ea = 0
//    - Returns result from CdControl
// 
// Global State:
// - null_00h_800a59e8 @ 0x800A59E8: CD audio enable flag
// - null_00h_800a59ea @ 0x800A59EA: CD paused state flag
// 
// PSY-Q Command:
// - CdControl(0x1B, NULL, NULL) = CdlResume (resume CD audio from pause)
// 
// Return Values:
// - 0: CD audio disabled
// - 1: CD audio enabled (already playing or just resumed)
// - CdControl result: Result of resume command
// 
// Cross-References:
// - Called by: ResumeAllVoicePitches @ 0x8007CBC0
// - Paired with: PauseCDAudio @ 0x80038E50
// - Uses: PSY-Q libcd.h CdControl function
// 
// Notes:
// - Part of unpause system integration (resumes both SPU voices and CD audio)
// - Restores music playback when game unpauses
// - State flags prevent redundant resume commands
// 
// Verified via Ghidra decompilation 2025-01-13.

int ResumeCDAudio(void)

{
  int iVar1;
  
  if (null_00h_800a59e8 == '\0') {
    iVar1 = 0;
  }
  else if (null_00h_800a59ea == '\0') {
    iVar1 = 1;
  }
  else {
    iVar1 = CdControl('\x1b',(u_char *)0x0,(u_char *)0x0);
    null_00h_800a59ea = '\0';
  }
  return iVar1;
}



// Process CD Stream State - Asynchronous CD Read Manager
// 
// Manages CD-ROM streaming state machine for background data loading.
// Called every 4 frames from TickCDStreamBuffer @ 0x8007ccb8.
// 
// STATE MACHINE (based on global flags at 0x800A59E8-0x800A59EA):
// 1. If null_00h_800a59ea != 0:
//    - CdControl(0x09, NULL, NULL)  // Pause command
//    - Return 1
// 
// 2. If null_00h_800a59e9 == 0:
//    - Return 1 (idle state)
// 
// 3. If null_00h_800a59e8 != 0:
//    a. CdSync(1, result) - Check async operation
//    b. If result == 2 (complete):
//       - If current_sector <= target_sector:
//         * CdLastCom() check for 0x11 (ReadN command)
//         * CdPosToInt() to get current position
//         * CdControlF(0x11, NULL) - Continue read
//       - Else:
//         * Load next sector from table at 0x8009b3d8
//         * CdControl(0x1b, seek_params, NULL) - Seek to position
//         * Reset retry counter
//    c. If result == 5 (error):
//       - Increment retry counter (null_00h_800a59eb)
//       - If retries >= 6:
//         * Reset to sector from table
//         * Retry seek operation
// 
// GLOBALS (at 0x800A59E8+):
//   +0x00: Stream active flag
//   +0x01: Stream enabled flag  
//   +0x02: Pause flag
//   +0x03: Retry counter (max 6)
//   +0x04: Index into sector table
//   +0x0C: Current sector position
//   +0x10: Target sector position
// 
// SECTOR TABLE:
//   0x8009b3d8: Array of sector numbers
//   0x8009b43c: Array of 24-byte CdlLOC structures (seek parameters)
// 
// CD COMMANDS:
//   0x09: Pause
//   0x11: ReadN (streaming read)
//   0x1b: SeekL (long seek)
// 
// PURPOSE: Enables large assets (audio, FMV) to stream from CD without
// blocking gameplay. The retry mechanism handles disc read errors gracefully.

uint ProcessCDStreamState(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int unaff_s1;
  u_char auStack_18 [8];
  
  if (null_00h_800a59ea == '\0') {
    if (null_00h_800a59e9 == '\0') {
      return 1;
    }
    if (null_00h_800a59e8 != '\0') {
      iVar2 = CdSync(1,auStack_18);
      if (iVar2 == 2) {
        if (null_00000000h_800a59f4 <= null_00000000h_800a59f8) {
          bVar1 = false;
          iVar2 = CdLastCom();
          if (iVar2 == 0x11) {
            unaff_s1 = CdPosToInt((CdlLOC *)(auStack_18 + 5));
            bVar1 = 0 < unaff_s1;
          }
          if (bVar1) {
            null_00000000h_800a59f4 = unaff_s1;
          }
          uVar3 = CdControlF('\x11',(u_char *)0x0);
          return uVar3;
        }
        null_00000000h_800a59f4 = (&null_00000000h_8009b3d8)[null_00h_800a59ec];
        uVar3 = CdControl('\x1b',&DAT_8009b43c + (uint)null_00h_800a59ec * 0x18,(u_char *)0x0);
        null_00h_800a59eb = 0;
        return uVar3;
      }
      if (iVar2 < 3 != 0) {
        return (uint)(iVar2 < 3);
      }
      if (iVar2 != 5) {
        return 5;
      }
      null_00h_800a59eb = null_00h_800a59eb + 1;
      if (null_00h_800a59eb < 6) {
        return 0;
      }
      null_00000000h_800a59f4 = (&null_00000000h_8009b3d8)[null_00h_800a59ec];
      CdControl('\x1b',&DAT_8009b43c + (uint)null_00h_800a59ec * 0x18,(u_char *)0x0);
      null_00h_800a59eb = 0;
      return 0;
    }
  }
  else {
    CdControl('\t',(u_char *)0x0,(u_char *)0x0);
  }
  return 1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

bool PlayMovieFromCD(char *param_1,int param_2,short param_3,u_short *param_4)

{
  undefined1 *puVar1;
  bool bVar2;
  uint uVar3;
  undefined1 uVar4;
  u_long uVar5;
  CdlFILE *pCVar6;
  int iVar7;
  bool bVar8;
  DISPENV DStack_68;
  CdlFILE CStack_50;
  RECT local_38;
  undefined1 auStack_30 [8];
  
  bVar8 = true;
  uVar5 = PadRead(1);
  bVar2 = (uVar5 & 0xffff) != 0;
  FUN_80039c4c(0);
  null_0000h_800a5a18 = param_3 - 1;
  null_00000000h_800a5a44 = param_4;
  if (param_2 == 0) {
    pCVar6 = CdSearchFile(&CStack_50,param_1);
    if (pCVar6 == (CdlFILE *)0x0) {
      return true;
    }
  }
  else {
    CdIntToPos(param_2,&CStack_50.pos);
  }
  uVar4 = null_04h_800a6080;
  FUN_8007cc68(4);
  FUN_80039ce0(0xf0,1,0);
  FUN_80039ddc(&CStack_50,FUN_80039e5c);
  DecDCTvlcBuild(null_00000000h_800a5a44);
  while (iVar7 = FUN_80039fa4(), iVar7 == -1) {
    puVar1 = auStack_30 + 3;
    uVar3 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar3) =
         *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | (uint)CStack_50.pos >> (3 - uVar3) * 8
    ;
    auStack_30[0] = CStack_50.pos.minute;
    auStack_30[1] = CStack_50.pos.second;
    auStack_30[2] = CStack_50.pos.sector;
    auStack_30[3] = CStack_50.pos.track;
    FUN_8003a264(auStack_30);
  }
  null_00h_800a5a1a = '\0';
LAB_8003925c:
  do {
    DecDCTin((u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],3);
    DecDCTout((u_long *)(&null_00000000h_800a5a24)[null_00000000h_800a5a20],
              ((int)null_0000h_800a5a40 * (int)_DAT_800a5a42) / 2);
    while (iVar7 = FUN_80039fa4(), iVar7 == -1) {
      iVar7 = StGetBackloc((CdlLOC *)auStack_30);
      if (((int)(uint)null_0000h_800a5a18 < iVar7) || (iVar7 < 1)) {
        puVar1 = auStack_30 + 3;
        uVar3 = (uint)puVar1 & 3;
        *(uint *)(puVar1 + -uVar3) =
             *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 |
             (uint)CStack_50.pos >> (3 - uVar3) * 8;
        auStack_30[0] = CStack_50.pos.minute;
        auStack_30[1] = CStack_50.pos.second;
        auStack_30[2] = CStack_50.pos.sector;
        auStack_30[3] = CStack_50.pos.track;
      }
      FUN_8003a264(auStack_30);
    }
    FUN_8003a1cc();
    VSync(0);
    SetDefDispEnv(&DStack_68,0,-(uint)(null_00000000h_800a5a38 == 0) & 0xf0,0x1e0,0x100);
    DStack_68.screen.w = 0;
    DStack_68.screen.x = 4;
    DStack_68.screen.y = 0x20;
    DStack_68.screen.h = 0xf0;
    DStack_68.isrgb24 = '\x01';
    DStack_68.disp.w =
         (short)((ulonglong)((longlong)((int)DStack_68.disp.w << 1) * 0x55555556) >> 0x20) -
         (short)(((int)DStack_68.disp.w << 1) >> 0x1f);
    PutDispEnv(&DStack_68);
    SetDispMask(1);
    if (null_00h_800a5a1a != '\0') goto LAB_80039410;
    if (bVar2) {
      uVar5 = PadRead(1);
      if ((uVar5 & 0xffff) == 0) {
        bVar2 = false;
      }
      if (bVar2) goto LAB_8003925c;
    }
    uVar5 = PadRead(1);
    if ((uVar5 & 0xfff) != 0) {
      bVar8 = (uVar5 & 0x800) == 0;
      CdControlB('\t',(u_char *)0x0,(u_char *)0x0);
LAB_80039410:
      local_38.x = 0;
      local_38.w = 0x1e0;
      local_38.h = 0x100;
      local_38.y = -(ushort)(null_00000000h_800a5a38 == 0) & 0xf0;
      ClearImage(&local_38,'\0','\0','\0');
      VSync(0);
      SetDefDispEnv(&DStack_68,0,-(uint)(null_00000000h_800a5a38 == 0) & 0xf0,0x140,0x100);
      DStack_68.isrgb24 = '\0';
      DStack_68.screen.x = 4;
      DStack_68.screen.y = 0x20;
      DStack_68.screen.w = 0;
      DStack_68.screen.h = 0xf0;
      PutDispEnv(&DStack_68);
      local_38.x = 0;
      local_38.w = 0x1e0;
      local_38.h = 0x100;
      null_00000000h_800a5a38 = (uint)(null_00000000h_800a5a38 == 0);
      local_38.y = -(ushort)(null_00000000h_800a5a38 == 0) & 0xf0;
      ClearImage(&local_38,'\0','\0','\0');
      VSync(0);
      SetDefDispEnv(&DStack_68,0,-(uint)(null_00000000h_800a5a38 == 0) & 0xf0,0x140,0x100);
      DStack_68.isrgb24 = '\0';
      DStack_68.screen.x = 4;
      DStack_68.screen.y = 0x20;
      DStack_68.screen.w = 0;
      DStack_68.screen.h = 0xf0;
      PutDispEnv(&DStack_68);
      DecDCToutCallback((func *)0x0);
      FUN_8008668c();
      CdControlB('\t',(u_char *)0x0,(u_char *)0x0);
      FUN_8007cc68(uVar4);
      return bVar8;
    }
  } while( true );
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 PlayMovieFromBLBSectors(uint param_1,uint param_2,u_short *param_3)

{
  bool bVar1;
  bool bVar2;
  undefined1 uVar3;
  char cVar4;
  u_long uVar5;
  uint uVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  undefined4 uVar10;
  DISPENV DStack_40;
  RECT local_28;
  
  bVar2 = true;
  uVar10 = 1;
  uVar5 = PadRead(1);
  bVar1 = (uVar5 & 0xffff) != 0;
  null_00000000h_800a5a44 = param_3;
  uVar6 = CdBLB_ReadSectors(param_1 & 0xffff,param_2 & 0xffff,param_3 + 0x33800);
  uVar3 = null_04h_800a6080;
  uVar7 = 1;
  if ((uVar6 & 0xff) != 0) {
    FUN_8007cc68(4);
    StartCDAudioForLevel(5,6);
    FUN_80039ce0(0x100,1,1);
    DecDCTReset(0);
    DecDCToutCallback(FUN_80039e5c);
    DecDCTvlcBuild(null_00000000h_800a5a44);
    FUN_8003a13c(0);
    null_00h_800a5a1a = '\0';
    iVar8 = 1;
LAB_8003965c:
    uVar7 = uVar10;
    if (null_00h_800a5a1a == '\0') {
      DecDCTin((u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],3);
      DecDCTout((u_long *)(&null_00000000h_800a5a24)[null_00000000h_800a5a20],
                ((int)null_0000h_800a5a40 * (int)_DAT_800a5a42) / 2);
      iVar9 = iVar8 + 1;
      cVar4 = FUN_8003a13c(iVar8);
      if (cVar4 == '\0') {
        null_00h_800a5a1a = '\x01';
      }
      FUN_8003a1cc();
      iVar8 = 0;
      if (bVar2) {
        bVar2 = false;
      }
      else {
        do {
          TickCDStreamBuffer();
          if (bVar1) {
            uVar5 = PadRead(1);
            if ((uVar5 & 0xffff) == 0) {
              bVar1 = false;
            }
            if (!bVar1) goto LAB_80039730;
          }
          else {
LAB_80039730:
            uVar5 = PadRead(1);
            if ((uVar5 & 0xffff) != 0) {
              if ((uVar5 & 0x800) != 0) {
                uVar10 = 0;
              }
              null_00h_800a5a1a = '\x01';
              break;
            }
          }
          VSync(0);
          iVar8 = iVar8 + 1;
        } while (iVar8 < 0x150);
      }
      VSync(0);
      uVar7 = uVar10;
      if (null_00h_800a5a1a == '\0') {
        SetDefDispEnv(&DStack_40,0,(uint)(null_00000000h_800a5a38 == 0) << 8,0x1e0,0x100);
        DStack_40.screen.x = 0;
        DStack_40.screen.w = 0;
        DStack_40.isrgb24 = '\x01';
        DStack_40.screen.y = 0x18;
        DStack_40.screen.h = 0x100;
        DStack_40.disp.w =
             (short)((ulonglong)((longlong)((int)DStack_40.disp.w << 1) * 0x55555556) >> 0x20) -
             (short)(((int)DStack_40.disp.w << 1) >> 0x1f);
        PutDispEnv(&DStack_40);
        SetDispMask(1);
        iVar8 = iVar9;
        if (bVar1) goto code_r0x80039814;
        goto LAB_80039838;
      }
    }
    local_28.x = 0;
    local_28.w = 0x1e0;
    local_28.h = 0x100;
    local_28.y = (ushort)(null_00000000h_800a5a38 == 0) << 8;
    ClearImage(&local_28,'\0','\0','\0');
    VSync(0);
    SetDefDispEnv(&DStack_40,0,(uint)(null_00000000h_800a5a38 == 0) << 8,0x140,0x100);
    DStack_40.isrgb24 = '\0';
    DStack_40.screen.x = 0;
    DStack_40.screen.y = 0x20;
    DStack_40.screen.w = 0;
    DStack_40.screen.h = 0x100;
    PutDispEnv(&DStack_40);
    local_28.x = 0;
    local_28.w = 0x1e0;
    local_28.h = 0x100;
    null_00000000h_800a5a38 = (uint)(null_00000000h_800a5a38 == 0);
    local_28.y = (ushort)(null_00000000h_800a5a38 == 0) << 8;
    ClearImage(&local_28,'\0','\0','\0');
    VSync(0);
    SetDefDispEnv(&DStack_40,0,(uint)(null_00000000h_800a5a38 == 0) << 8,0x140,0x100);
    DStack_40.isrgb24 = '\0';
    DStack_40.screen.x = 0;
    DStack_40.screen.y = 0x20;
    DStack_40.screen.w = 0;
    DStack_40.screen.h = 0x100;
    PutDispEnv(&DStack_40);
    DecDCToutCallback((func *)0x0);
    StopCDStreaming();
    FUN_8007cc68(uVar3);
  }
  return uVar7;
code_r0x80039814:
  uVar5 = PadRead(1);
  if ((uVar5 & 0xfff) == 0) {
    bVar1 = false;
  }
  if (!bVar1) {
LAB_80039838:
    uVar5 = PadRead(1);
    if (((uVar5 & 0xffff) != 0) && ((uVar5 & 0x800) != 0)) {
      uVar10 = 0;
    }
  }
  goto LAB_8003965c;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// Displays a loading/splash screen image (compressed DCT data).
// Reads sectors into buffer, decompresses with DecDCT*, displays to framebuffer.
// param_1: sector_offset
// param_2: sector_count  
// param_3: buffer pointer
// param_4: min_display_seconds (mandatory wait before skip allowed)
// param_5: max_display_seconds (timeout, 99=special Game Over mode)
// Special mode (param_5=99): X button returns 0, Start returns 1 (continue/restart).
// Normal mode: Any button returns 1 immediately, or timeout returns 1.

undefined4
DisplayLoadingScreen(uint param_1,uint param_2,u_short *param_3,short param_4,short param_5)

{
  bool bVar1;
  uint uVar2;
  u_long uVar3;
  short sVar4;
  DISPENV DStack_40;
  
  null_00000000h_800a5a44 = param_3;
  uVar2 = CdBLB_ReadSectors(param_1 & 0xffff,param_2 & 0xffff,param_3 + 0x33800);
  if ((uVar2 & 0xff) != 0) {
    FUN_80039ce0(0x100,0,0);
    VSync(0);
    SetDefDispEnv(&DStack_40,0,0x100,0x140,0x100);
    DStack_40.screen.x = 0;
    DStack_40.screen.y = 0x18;
    DStack_40.screen.w = 0;
    DStack_40.screen.h = 0x100;
    DStack_40.isrgb24 = '\0';
    PutDispEnv(&DStack_40);
    SetDispMask(1);
    DecDCTReset(0);
    DecDCToutCallback(FUN_80039e5c);
    DecDCTvlcBuild(null_00000000h_800a5a44);
    null_00000000h_800a5a2c = (uint)(null_00000000h_800a5a2c == 0);
    DecDCTvlc2((u_long *)(null_00000000h_800a5a44 + 0x33800),
               (u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],null_00000000h_800a5a44
              );
    DecDCTin((u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],2);
    DecDCTout((u_long *)(&null_00000000h_800a5a24)[null_00000000h_800a5a20],
              ((int)null_0000h_800a5a40 * (int)_DAT_800a5a42) / 2);
    FUN_8003a1cc();
    VSync(0);
    SetDefDispEnv(&DStack_40,0,(uint)(null_00000000h_800a5a38 == 0) << 8,0x140,0x100);
    DStack_40.screen.x = 0;
    DStack_40.screen.y = 0x18;
    DStack_40.screen.w = 0;
    DStack_40.screen.h = 0x100;
    DStack_40.isrgb24 = '\0';
    PutDispEnv(&DStack_40);
    SetDispMask(1);
    DecDCToutCallback((func *)0x0);
    param_4 = param_4 * 0x3c;
    sVar4 = param_5 * 0x3c;
    if (sVar4 == 0) {
      return 1;
    }
    while (bVar1 = param_4 != 0, param_4 = param_4 + -1, bVar1) {
      sVar4 = sVar4 + -1;
      VSync(0);
    }
    while (sVar4 != 0) {
      uVar3 = PadRead(1);
      if (param_5 == 99) {
        if ((uVar3 & 0x10) != 0) {
          return 0;
        }
        if ((uVar3 & 0x800) != 0) {
          return 1;
        }
      }
      else {
        if ((uVar3 & 0xffff) != 0) {
          return 1;
        }
        sVar4 = sVar4 + -1;
      }
      VSync(0);
    }
  }
  return 1;
}



void FUN_80039c4c(int param_1)

{
  DISPENV DStack_20;
  
  FUN_8003a2d8();
  SetDefDispEnv(&DStack_20,0,(uint)(param_1 == 0) << 8,0x1e0,0x100);
  DStack_20.screen.x = 0;
  DStack_20.screen.w = 0;
  DStack_20.screen.y = 0x20;
  DStack_20.screen.h = 0x100;
  DStack_20.isrgb24 = '\x01';
  DStack_20.disp.w =
       (short)((ulonglong)((longlong)((int)DStack_20.disp.w << 1) * 0x55555556) >> 0x20) -
       (short)(((int)DStack_20.disp.w << 1) >> 0x1f);
  PutDispEnv(&DStack_20);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80039ce0(undefined2 param_1,char param_2,uint param_3)

{
  null_00000000h_800a5a2c = 0;
  null_00000000h_800a5a20 = 0;
  null_0000h_8009b4cc = 0;
  null_0000h_8009b4ce = 0;
  null_00000000h_800a5a28 = null_00000000h_800a5a44 + 0x64000;
  null_00000000h_800a5a30 = null_00000000h_800a5a44 + 0x11000;
  null_00000000h_800a5a34 = null_00000000h_800a5a44 + 0x39000;
  null_00000000h_800a5a24 = null_00000000h_800a5a44 + 0x61000;
  null_0000h_8009b4d0 = 0x1e0;
  if (param_2 == '\0') {
    null_0000h_8009b4d0 = 0x140;
  }
  null_0000h_8009b4d2 = param_1;
  null_0000h_8009b4d4 = 0;
  null_0000h_8009b4d6 = param_1;
  null_0000h_8009b4d8 = 0x1e0;
  if (param_2 == '\0') {
    null_0000h_8009b4d8 = 0x140;
  }
  null_0000h_8009b4da = param_1;
  null_00000000h_800a5a38 = param_3 & 0xff;
  null_0000h_800a5a3c = 0;
  _DAT_800a5a3e = param_1;
  if ((param_3 & 0xff) == 0) {
    _DAT_800a5a3e = 0;
  }
  null_0000h_800a5a40 = 0x18;
  if (param_2 == '\0') {
    null_0000h_800a5a40 = 0x10;
  }
  _DAT_800a5a42 = param_1;
  null_00h_800a5a1b = 0;
  return;
}



void FUN_80039ddc(undefined4 param_1,func *param_2)

{
  DecDCTReset(0);
  DecDCToutCallback(param_2);
  StSetRing((u_long *)(null_00000000h_800a5a44 + 0x67000),0x100);
  StSetStream(1,1,0xffffffff,(func1 *)0x0,FUN_80039f9c);
  FUN_8003a264(param_1);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80039e5c(void)

{
  undefined1 *puVar1;
  uint uVar2;
  uint *puVar3;
  int iVar4;
  short sVar5;
  RECT RStack_10;
  
  if (null____800acb78 != 0) {
    StCdInterrupt();
    null____800acb78 = 0;
  }
  iVar4 = null_00000000h_800a5a20;
  puVar1 = (undefined1 *)((int)&RStack_10.y + 1);
  uVar2 = (uint)puVar1 & 3;
  puVar3 = (uint *)(puVar1 + -uVar2);
  *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | _null_0000h_800a5a3c >> (3 - uVar2) * 8;
  RStack_10.x = null_0000h_800a5a3c;
  RStack_10.y = _DAT_800a5a3e;
  puVar1 = (undefined1 *)((int)&RStack_10.h + 1);
  uVar2 = (uint)puVar1 & 3;
  puVar3 = (uint *)(puVar1 + -uVar2);
  *puVar3 = *puVar3 & -1 << (uVar2 + 1) * 8 | _null_0000h_800a5a40 >> (3 - uVar2) * 8;
  RStack_10.w = null_0000h_800a5a40;
  RStack_10.h = _DAT_800a5a42;
  null_00000000h_800a5a20 = (uint)(null_00000000h_800a5a20 == 0);
  sVar5 = null_0000h_800a5a3c + null_0000h_800a5a40;
  _null_0000h_800a5a3c = CONCAT22(_DAT_800a5a3e,sVar5);
  if ((int)sVar5 <
      (int)(short)(&null_0000h_8009b4cc)[null_00000000h_800a5a38 * 4] +
      (int)(short)(&null_0000h_8009b4d0)[null_00000000h_800a5a38 * 4]) {
    DecDCTout((u_long *)(&null_00000000h_800a5a24)[null_00000000h_800a5a20],
              ((int)null_0000h_800a5a40 * (int)_DAT_800a5a42) / 2);
  }
  else {
    null_00000000h_800a5a38 = (uint)(null_00000000h_800a5a38 == 0);
    _null_0000h_800a5a3c = *(uint *)(&null_0000h_8009b4cc + null_00000000h_800a5a38 * 4);
    null_00h_800a5a1b = 1;
  }
  LoadImage(&RStack_10,(u_long *)(&null_00000000h_800a5a24)[iVar4]);
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff

void FUN_80039f9c(void)

{
  return;
}



undefined4 FUN_80039fa4(void)

{
  u_long *bs;
  int iVar1;
  
  iVar1 = 2000;
  do {
    bs = (u_long *)FUN_8003a024();
    iVar1 = iVar1 + -1;
    if (bs != (u_long *)0x0) {
      null_00000000h_800a5a2c = (uint)(null_00000000h_800a5a2c == 0);
      DecDCTvlc2(bs,(u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],
                 null_00000000h_800a5a44);
      StFreeRing(bs);
      return 0;
    }
  } while (iVar1 != 0);
  return 0xffffffff;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8003a024(void)

{
  u_long uVar1;
  int iVar2;
  u_long *local_18;
  u_long *local_14;
  RECT local_10;
  
  iVar2 = 2000;
  do {
    uVar1 = StGetNext(&local_18,&local_14);
    iVar2 = iVar2 + -1;
    if (uVar1 == 0) {
      if ((uint)null_0000h_800a5a18 <= local_14[2]) {
        null_00h_800a5a1a = 1;
      }
      if ((null_00000000h_800a5a10 != (ushort)local_14[4]) ||
         (null_00000000h_800a5a14 != *(ushort *)((int)local_14 + 0x12))) {
        local_10.w = 0x1e0;
        local_10.x = 0;
        local_10.y = 0;
        local_10.h = 0x200;
        ClearImage(&local_10,'\0','\0','\0');
        null_00000000h_800a5a10 = (uint)(ushort)local_14[4];
        null_00000000h_800a5a14 = (uint)*(ushort *)((int)local_14 + 0x12);
      }
      _DAT_800a5a42 = (undefined2)null_00000000h_800a5a14;
      null_0000h_8009b4d0 =
           (undefined2)
           (null_00000000h_800a5a10 * 3 - ((int)(null_00000000h_800a5a10 * 3) >> 0x1f) >> 1);
      null_0000h_8009b4d2 = (undefined2)null_00000000h_800a5a14;
      null_0000h_8009b4d8 = null_0000h_8009b4d0;
      null_0000h_8009b4da = (undefined2)null_00000000h_800a5a14;
      return local_18;
    }
  } while (iVar2 != 0);
  return 0;
}



bool FUN_8003a13c(uint param_1)

{
  bool bVar1;
  
  bVar1 = param_1 < (byte)null_00000000h_800a5a44[0x33800];
  if (bVar1) {
    null_00000000h_800a5a2c = (uint)(null_00000000h_800a5a2c == 0);
    DecDCTvlc2((u_long *)
               ((int)null_00000000h_800a5a44 +
               *(int *)(null_00000000h_800a5a44 + param_1 * 6 + 0x33806) + 0x67000),
               (u_long *)(&null_00000000h_800a5a30)[null_00000000h_800a5a2c],null_00000000h_800a5a44
              );
  }
  return bVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_8003a1cc(void)

{
  int local_8;
  
  local_8 = 0x800000;
  if (null_00h_800a5a1b == '\0') {
    do {
      local_8 = local_8 + -1;
      if (local_8 == 0) {
        null_00000000h_800a5a38 = (uint)(null_00000000h_800a5a38 == 0);
        null_0000h_800a5a3c = (&null_0000h_8009b4cc)[null_00000000h_800a5a38 * 4];
        _DAT_800a5a3e = (&null_0000h_8009b4ce)[null_00000000h_800a5a38 * 4];
        null_00h_800a5a1b = '\x01';
      }
    } while (null_00h_800a5a1b == '\0');
  }
  null_00h_800a5a1b = 0;
  return;
}



void FUN_8003a264(u_char *param_1)

{
  int iVar1;
  u_char local_10 [8];
  
  local_10[0] = 0x80;
  do {
    do {
      iVar1 = CdControl('\x02',param_1,(u_char *)0x0);
    } while (iVar1 == 0);
    do {
      iVar1 = CdControl('\x0e',local_10,(u_char *)0x0);
    } while (iVar1 == 0);
    VSync(3);
    iVar1 = CdRead2(0x1e0);
  } while (iVar1 == 0);
  return;
}



void FUN_8003a2d8(void)

{
  DISPENV DStack_30;
  RECT local_18;
  
  VSync(0);
  SetDefDispEnv(&DStack_30,0,0,0x140,0x100);
  DStack_30.screen.x = 4;
  DStack_30.screen.y = 0x20;
  DStack_30.isrgb24 = '\0';
  DStack_30.screen.w = 0;
  DStack_30.screen.h = 0xf0;
  PutDispEnv(&DStack_30);
  local_18.x = 0;
  local_18.y = 0;
  local_18.w = 0x1e0;
  local_18.h = 0x100;
  ClearImage(&local_18,'\0','\0','\0');
  local_18.y = 0x100;
  ClearImage(&local_18,'\0','\0','\0');
  return;
}



int FUN_8003a5f8(int param_1,int param_2,undefined4 param_3)

{
  InitEntityWithSprite
            (param_1,param_3,0x3ca,(int)*(short *)(param_2 + 8),
             (int)((*(ushort *)(param_2 + 10) - 1) * 0x10000) >> 0x10);
  *(undefined **)(param_1 + 0x18) = &DAT_80010de4;
  FUN_8003a724(param_1,param_2);
  return param_1;
}



void FUN_8003a724(undefined4 *param_1,undefined4 param_2)

{
  *(undefined2 *)(param_1 + 4) = 900;
  param_1[0x40] = param_2;
  *(undefined1 *)((int)param_1 + 0x106) = 0;
  *(undefined1 *)((int)param_1 + 0x107) = 0;
  *(undefined2 *)(param_1 + 0x41) = 0;
  param_1[0x42] = 0;
  *(undefined1 *)(param_1 + 0x43) = 0;
  *(undefined1 *)((int)param_1 + 0x10d) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = FUN_8003acc8;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_8003b190;
  *(undefined2 *)((int)param_1 + 0x12) = 4;
  *(undefined2 *)(param_1 + 0x1c) = 0;
  FUN_8001c364(param_1);
  FUN_8003a9b4(param_1);
  return;
}



int FUN_8003a7d4(int param_1,undefined1 param_2,short param_3,uint param_4)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short unaff_s2;
  
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_4 = (*pcVar4)(param_1 + iVar1,(int)(short)param_4);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar4)(param_1 + iVar1,(int)param_3);
  }
  uVar2 = FUN_80081c0c(g_GameStatePtr,param_2,(int)param_3);
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar1 = ((param_4 | 0xf) - (uVar2 & 0xff)) * 0x10000;
  uVar2 = iVar1 / iVar3;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  iVar3 = uVar2 << 0x10;
  if ((*(int *)(param_1 + 0x58) == 0xc000) && (iVar3 = uVar2 << 0x10, (uVar2 & 3) - 1 < 2)) {
    iVar3 = (uVar2 + 1) * 0x10000;
  }
  return iVar3 >> 0x10;
}



void FUN_8003a9b4(int param_1,undefined4 param_2,short param_3)

{
  char cVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  code *pcVar6;
  short unaff_s2;
  undefined1 local_38 [4];
  undefined1 auStack_34 [4];
  undefined1 local_30;
  undefined1 local_2f;
  undefined1 local_2e [22];
  
  iVar5 = (int)*(short *)(param_1 + 0x26);
  sVar2 = *(short *)(param_1 + 0x68);
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar5 << 0x10) {
      iVar4 = param_3 + iVar4;
    }
    sVar2 = (*pcVar6)(param_1 + iVar4,(int)sVar2);
  }
  iVar5 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = *(short *)(param_1 + 0x6a);
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar5 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    sVar3 = (*pcVar6)(param_1 + iVar4,(int)sVar3);
  }
  cVar1 = CheckTriggerZoneCollision(g_GameStatePtr,(int)sVar2,(int)sVar3,local_38,auStack_34);
  if ((cVar1 != '\0') &&
     (cVar1 = FUN_8007ee6c(g_GameStatePtr,local_38[0],&local_30,&local_2f,local_2e), cVar1 != '\0'))
  {
    iVar5 = *(int *)(param_1 + 0x34);
    *(undefined1 *)(iVar5 + 0x34) = local_30;
    *(undefined1 *)(iVar5 + 0x35) = local_2f;
    *(undefined1 *)(iVar5 + 0x36) = local_2e[0];
  }
  return;
}



void FUN_8003ab70(int param_1)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  
  bVar1 = false;
  if ((((*(char *)(param_1 + 0x107) == '\0') && (*(int *)(param_1 + 0x108) == 0)) &&
      (cVar2 = FUN_8001b92c(), cVar2 != '\0')) &&
     ((*(int *)(param_1 + 0x100) == 0 || (cVar2 = FUN_8002453c(g_GameStatePtr), cVar2 != '\0')))) {
    bVar1 = true;
  }
  if (bVar1) {
    iVar4 = *(int *)(param_1 + 0x100);
    if (iVar4 != 0) {
      *(byte *)(iVar4 + 0x16) = *(byte *)(iVar4 + 0x16) & 0xfe;
      *(undefined4 *)(param_1 + 0x100) = 0;
    }
    iVar4 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar5 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar4 << 0x10) {
        iVar3 = unaff_s2 + iVar3;
      }
      (*pcVar5)(g_GameStatePtr + iVar3,3,0,param_1);
    }
    *(undefined1 *)(param_1 + 0x107) = 1;
  }
  return;
}



void FUN_8003acc8(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  
  EntityUpdateCallback();
  if (*(char *)(param_1 + 0x10c) != '\x02') {
    CollisionCheckWrapper(param_1,2,0x1000);
  }
  if (*(char *)(param_1 + 0x106) != '\0') {
    iVar1 = *(int *)(param_1 + 0x108);
    if ((iVar1 != 0) && (iVar3 = (int)*(short *)(iVar1 + 10), iVar3 != 0)) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,0x1009,0,param_1);
    }
    iVar1 = *(int *)(param_1 + 0x100);
    if ((iVar1 != 0) && ((*(ushort *)(iVar1 + 0x10) & 1) != 0)) {
      *(byte *)(iVar1 + 0x16) = *(byte *)(iVar1 + 0x16) & 0xfe;
      *(undefined4 *)(param_1 + 0x100) = 0;
    }
    iVar1 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar1 != 0) {
      if (iVar1 < 1) {
        pcVar4 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar3 = iVar1 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar4 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar1 << 0x10) {
        iVar3 = unaff_s4 + iVar3;
      }
      (*pcVar4)(g_GameStatePtr + iVar3,3,0,param_1);
    }
    *(undefined1 *)(param_1 + 0x107) = 1;
    FUN_8003b2d0(param_1,0,0xffffffec);
  }
  FUN_8003ab70(param_1);
  return;
}



void FUN_8003aef4(int param_1)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  short unaff_s2;
  code *pcVar7;
  short unaff_s4;
  undefined4 local_40;
  
  bVar1 = *(int *)(*(int *)(g_GameStatePtr + 0x2c) + 0x58) != 0x8000;
  if (bVar1) {
    *(undefined2 *)(param_1 + 0x12) = 0;
  }
  else {
    *(undefined2 *)(param_1 + 0x12) = 4;
  }
  EntityUpdateCallback(param_1);
  if (bVar1) {
    cVar2 = FUN_8001b8c4(param_1,2);
    if (cVar2 != '\0') {
      *(undefined1 *)(param_1 + 0x106) = 1;
    }
  }
  else {
    CollisionCheckWrapper(param_1,2,0x1000,0);
  }
  if (*(char *)(param_1 + 0x106) != '\0') {
    iVar3 = *(int *)(param_1 + 0x108);
    if ((iVar3 != 0) && (iVar6 = (int)*(short *)(iVar3 + 10), iVar6 != 0)) {
      if (iVar6 < 1) {
        pcVar7 = *(code **)(iVar3 + 0xc);
      }
      else {
        iVar4 = iVar6 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
        pcVar7 = *(code **)(iVar4 + -4);
      }
      iVar4 = (int)*(short *)(iVar3 + 8);
      if (0 < iVar6 << 0x10) {
        iVar4 = unaff_s2 + iVar4;
      }
      (*pcVar7)(iVar3 + iVar4,0x1009,0,param_1);
    }
    iVar3 = *(int *)(param_1 + 0x100);
    if ((iVar3 != 0) && ((*(ushort *)(iVar3 + 0x10) & 1) != 0)) {
      *(byte *)(iVar3 + 0x16) = *(byte *)(iVar3 + 0x16) & 0xfe;
      *(undefined4 *)(param_1 + 0x100) = 0;
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar7 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar6 = iVar3 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar7 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar3 << 0x10) {
        iVar6 = unaff_s4 + iVar6;
      }
      (*pcVar7)(g_GameStatePtr + iVar6,3,0,param_1);
    }
    local_40 = CONCAT22(*(short *)(param_1 + 0x6a) + -10,*(undefined2 *)(param_1 + 0x68));
    uVar5 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
    uVar5 = InitParticleEntity(uVar5,0x2cda4604,local_40,*(undefined1 *)(param_1 + 0x74),
                               *(undefined4 *)(param_1 + 0x50),0x3d4,0);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar5);
  }
  FUN_8003ab70(param_1);
  return;
}



int EntityCallback_8003b190(int param_1,ushort param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  
  iVar1 = 0;
  if (param_2 == 0x1002) {
    *(undefined1 *)(param_1 + 0x106) = 1;
    iVar1 = param_1;
    if (param_4 == *(int *)(param_1 + 0x108)) {
      *(undefined4 *)(param_1 + 0x108) = 0;
    }
  }
  else if (param_2 < 0x1003) {
    if (param_2 == 0x1001) {
      *(undefined1 *)(param_1 + 0x106) = 1;
    }
  }
  else if ((param_2 == 0x1008) && (*(int *)(param_1 + 0x108) == 0)) {
    *(int *)(param_1 + 0x108) = param_4;
    iVar1 = 1;
  }
  return iVar1;
}



int EntityCallback_8003b218(int param_1,ushort param_2,undefined4 param_3,int param_4)

{
  int iVar1;
  
  iVar1 = 0;
  if (param_2 == 0x1002) {
    *(undefined1 *)(param_1 + 0x106) = 1;
    iVar1 = param_1;
    if (param_4 == *(int *)(param_1 + 0x108)) {
      *(undefined4 *)(param_1 + 0x108) = 0;
    }
  }
  else if (param_2 < 0x1003) {
    if (param_2 == 0x1001) {
      *(undefined1 *)(param_1 + 0x106) = 1;
    }
  }
  else if ((param_2 == 0x1008) && (*(int *)(param_1 + 0x108) == 0)) {
    *(int *)(param_1 + 0x108) = param_4;
    iVar1 = 1;
  }
  if (param_2 == 2) {
    EntityProcessCallbackQueue();
  }
  return iVar1;
}



void FUN_8003b2d0(int param_1,short param_2,short param_3)

{
  u_short uVar1;
  short sVar2;
  short sVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  short unaff_s4;
  code *pcVar7;
  short unaff_s6;
  undefined4 local_40;
  
  param_2 = *(short *)(param_1 + 0x68) + param_2;
  param_3 = *(short *)(param_1 + 0x6a) + param_3;
  local_40 = CONCAT22(param_3,param_2);
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  iVar5 = InitParticleEntity(uVar4,0x98004092,local_40,*(undefined1 *)(param_1 + 0x74),
                             *(undefined4 *)(param_1 + 0x50),0x3d4,0);
  iVar6 = *(int *)(iVar5 + 0x34);
  uVar1 = GetTPage((uint)*(byte *)(iVar6 + 0x32),1,(int)*(short *)(iVar6 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar6 + 0x12) & 0xffffff00);
  uVar4 = g_GameStatePtr;
  *(u_short *)(iVar6 + 0x24) = uVar1;
  AddEntityToSortedRenderList(uVar4,iVar5);
  uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x2c,1,0);
  iVar5 = (int)*(short *)(param_1 + 0x26);
  sVar2 = param_2;
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar7 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar6 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s4 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar7 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar5 << 0x10) {
      iVar6 = unaff_s4 + iVar6;
    }
    sVar2 = (*pcVar7)(param_1 + iVar6,(int)param_2);
  }
  iVar5 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = param_3;
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar7 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar6 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s6 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar7 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar5 << 0x10) {
      iVar6 = unaff_s6 + iVar6;
    }
    sVar3 = (*pcVar7)(param_1 + iVar6,(int)param_3);
  }
  uVar4 = FUN_800371d4(uVar4,(int)sVar2,(int)sVar3,0x3d3,*(undefined4 *)(param_1 + 0x50));
  AddToZOrderList(g_GameStatePtr,uVar4);
  if (*(char *)(param_1 + 0x10d) != '\0') {
    uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
    uVar4 = InitDebrisParticleEntity
                      (uVar4,0x5a89815f,(int)param_2,(int)param_3,*(undefined4 *)(param_1 + 0x50),
                       0x7fffffff,0x7fffffff,0x7fffffff);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar4);
    uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
    uVar4 = InitDebrisParticleEntity
                      (uVar4,0x5ab9815f,(int)param_2,(int)param_3,*(undefined4 *)(param_1 + 0x50),
                       0x7fffffff,0x7fffffff,0x7fffffff);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar4);
    uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
    uVar4 = InitDebrisParticleEntity
                      (uVar4,0x5ad9815f,(int)param_2,(int)param_3,*(undefined4 *)(param_1 + 0x50),
                       0x7fffffff,0x7fffffff,0x7fffffff);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar4);
  }
  return;
}



void Callback_8003c540(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b55c,4);
  return;
}



void Callback_8003c568(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b57c,4);
  return;
}



void Callback_8003c590(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b59c,4);
  return;
}



void Callback_8003e8d8(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b5bc,3);
  return;
}



void Callback_8003e900(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b5d4,3);
  return;
}



void Callback_8003e928(undefined4 param_1)

{
  FUN_8001e790(param_1,&DAT_8009b5ec,9);
  return;
}



void FUN_8003ffa8(int param_1)

{
  short sVar1;
  short sVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  short unaff_s4;
  
  FUN_8003acc8();
  if ((*(char *)(param_1 + 0x106) != '\0') && (*(char *)(param_1 + 0x107) != '\0')) {
    uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
    iVar5 = (int)*(short *)(param_1 + 0x26);
    sVar1 = *(short *)(param_1 + 0x68) + -8;
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar6 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
        pcVar6 = *(code **)(iVar4 + -4);
      }
      iVar4 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar5 << 0x10) {
        iVar4 = unaff_s2 + iVar4;
      }
      sVar1 = (*pcVar6)(param_1 + iVar4,(int)sVar1);
    }
    iVar5 = (int)*(short *)(param_1 + 0x2e);
    sVar2 = *(short *)(param_1 + 0x6a) + -0x1c;
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar6 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        unaff_s4 = (short)*(undefined4 *)(iVar4 + -8);
        pcVar6 = *(code **)(iVar4 + -4);
      }
      iVar4 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar5 << 0x10) {
        iVar4 = unaff_s4 + iVar4;
      }
      sVar2 = (*pcVar6)(param_1 + iVar4,(int)sVar2);
    }
    uVar3 = FUN_8004076c(uVar3,(int)sVar1,(int)sVar2);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
  }
  return;
}



void FUN_80040424(undefined4 *param_1)

{
  undefined1 *puVar1;
  
  *(undefined2 *)((int)param_1 + 0x112) = 0x3c;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80040170;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_8003b190;
  SetEntitySpriteId(param_1,0x60181a0c,1);
  param_1[7] = 0;
  param_1[8] = 0;
  if (*(char *)(param_1 + 0x44) == '\0') {
    puVar1 = &LAB_800403d8;
  }
  else {
    puVar1 = &DAT_80040518;
  }
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = puVar1;
  return;
}



void FUN_80040644(undefined4 *param_1)

{
  int iVar1;
  undefined1 *puVar2;
  
  iVar1 = rand();
  *(byte *)((int)param_1 + 0x111) = ((byte)iVar1 & 3) + 2;
  *param_1 = 0xffff0000;
  param_1[1] = FUN_8003ffa8;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80040300;
  SetEntitySpriteId(param_1,0x611c5804,1);
  param_1[7] = 0;
  param_1[8] = 0;
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  FUN_8001d0c0(param_1,0);
  if (*(char *)(param_1 + 0x44) == '\0') {
    puVar2 = &LAB_800403d8;
  }
  else {
    puVar2 = &DAT_80040518;
  }
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = puVar2;
  return;
}



int FUN_8004076c(int param_1,short param_2,short param_3)

{
  InitEntitySprite(param_1,0xb8700ca1,0x3de,(int)param_2,(int)param_3,1);
  *(undefined **)(param_1 + 0x18) = &DAT_80010c64;
  *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
  *(undefined1 **)(param_1 + 0x20) = &LAB_80040800;
  *(undefined1 *)(param_1 + 0x100) = 0;
  FUN_8001c364(param_1);
  return param_1;
}



void FUN_80040918(int param_1,undefined4 param_2,short param_3)

{
  undefined4 uVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  short *psVar5;
  int iVar6;
  code *pcVar7;
  short unaff_s2;
  
  iVar6 = (int)*(short *)(param_1 + 0x26);
  sVar2 = *(short *)(param_1 + 0x68);
  if (iVar6 != 0) {
    if (iVar6 < 1) {
      pcVar7 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar4 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar7 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar6 << 0x10) {
      iVar4 = param_3 + iVar4;
    }
    sVar2 = (*pcVar7)(param_1 + iVar4,(int)sVar2);
  }
  iVar6 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = *(short *)(param_1 + 0x6a);
  if (iVar6 != 0) {
    if (iVar6 < 1) {
      pcVar7 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar4 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar7 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar6 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    sVar3 = (*pcVar7)(param_1 + iVar4,(int)sVar3);
  }
  psVar5 = (short *)AllocateFromHeap(blbHeaderBufferBase,0x18,1,0);
  *(undefined1 *)(psVar5 + 0xb) = 2;
  uVar1 = g_GameStatePtr;
  *psVar5 = sVar2 + -0x10;
  psVar5[1] = sVar3 + -0x10;
  psVar5[2] = sVar2 + 0x20;
  psVar5[3] = sVar3 + 0x20;
  psVar5[6] = 0;
  psVar5[7] = 0;
  psVar5[4] = sVar2;
  psVar5[5] = sVar3;
  psVar5[9] = 7;
  AddToEntityDefList(uVar1);
  return;
}



undefined4 * FUN_800437ac(undefined4 *param_1,undefined4 param_2,short param_3)

{
  u_short uVar1;
  uint uVar2;
  int iVar3;
  
  InitEntitySprite(param_1,param_2,(int)param_3,0xa0,0x78,0);
  *(undefined1 *)(param_1 + 0x44) = 0;
  iVar3 = g_GameStatePtr;
  param_1[6] = &DAT_800110e8;
  *(undefined2 *)(param_1 + 4) = 0x385;
  param_1[0x40] = 0;
  param_1[0x41] = 0;
  *(undefined2 *)(param_1 + 0x42) = 0;
  *(undefined2 *)((int)param_1 + 0x10a) = 0;
  *(undefined2 *)(param_1 + 0x43) = 0;
  *(undefined2 *)((int)param_1 + 0x10e) = 0;
  if ((*(int *)(iVar3 + 0x11c) == 0xc000) &&
     (uVar2 = GetLevelFlags(iVar3 + 0x84), (uVar2 >> 0xb & 1) == 0)) {
    FUN_8001c364(param_1);
  }
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800438e4;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80043ef0;
  iVar3 = param_1[0xd];
  *(undefined1 *)((int)param_1 + 0x111) = 1;
  *(undefined1 *)((int)param_1 + 0xfd) = 1;
  uVar1 = GetTPage((uint)*(byte *)(iVar3 + 0x32),1,(int)*(short *)(iVar3 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar3 + 0x12) & 0xffffff00);
  *(u_short *)(iVar3 + 0x24) = uVar1;
  return param_1;
}



undefined4 * CreateCameraEntity(undefined4 *param_1,short param_2,short param_3,int param_4)

{
  bool bVar1;
  bool bVar2;
  char cVar3;
  short sVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  short unaff_s2;
  code *pcVar9;
  short unaff_s4;
  int local_38;
  undefined1 auStack_34 [20];
  
  InitEntityWithSprite(param_1,&DAT_8009b6b0,0x3ca,(int)param_2,(int)param_3);
  param_1[6] = &DAT_80011088;
  *(undefined2 *)(param_1 + 4) = 900;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80045314;
  if (param_4 == 0) {
    FUN_8001c364(param_1);
  }
  else if (param_4 != 0x10000) {
    param_1[0x14] = param_4;
    param_1[0x15] = param_4;
    param_1[0x16] = param_4;
    param_1[0x17] = param_4;
    param_1[9] = 0xffff0000;
    param_1[10] = ScaleXByEntityScale;
    param_1[0xb] = 0xffff0000;
    param_1[0xc] = ScaleYByEntityScale;
    iVar6 = param_1[0x16];
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && ((int)*(short *)(param_1 + 0x1a) << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar8 = param_1[0x17];
    iVar7 = (int)*(short *)((int)param_1 + 0x6a) << 0x10;
    if (iVar8 == 0) {
      trap(0x1c00);
    }
    if ((iVar8 == -1) && (iVar7 == -0x80000000)) {
      trap(0x1800);
    }
    *(short *)(param_1 + 0x1a) = (short)(((int)*(short *)(param_1 + 0x1a) << 0x10) / iVar6);
    *(short *)((int)param_1 + 0x6a) = (short)(iVar7 / iVar8);
  }
  bVar2 = false;
  iVar6 = (int)*(short *)((int)param_1 + 0x26);
  sVar4 = *(short *)(param_1 + 0x1a);
  bVar1 = false;
  param_1[0x41] = param_1[0x14];
  if (iVar6 != 0) {
    if (iVar6 < 1) {
      pcVar9 = (code *)param_1[10];
    }
    else {
      iVar7 = iVar6 * 8 + *(int *)((int)param_1 + (int)*(short *)(param_1 + 10));
      unaff_s2 = (short)*(undefined4 *)(iVar7 + -8);
      pcVar9 = *(code **)(iVar7 + -4);
    }
    iVar7 = (int)*(short *)(param_1 + 9);
    if (0 < iVar6 << 0x10) {
      iVar7 = unaff_s2 + iVar7;
    }
    sVar4 = (*pcVar9)((int)param_1 + iVar7,(int)sVar4);
  }
  iVar6 = (int)*(short *)((int)param_1 + 0x2e);
  sVar5 = *(short *)((int)param_1 + 0x6a);
  if (iVar6 != 0) {
    if (iVar6 < 1) {
      pcVar9 = (code *)param_1[0xc];
    }
    else {
      iVar7 = iVar6 * 8 + *(int *)((int)param_1 + (int)*(short *)(param_1 + 0xc));
      unaff_s4 = (short)*(undefined4 *)(iVar7 + -8);
      pcVar9 = *(code **)(iVar7 + -4);
    }
    iVar7 = (int)*(short *)(param_1 + 0xb);
    if (0 < iVar6 << 0x10) {
      iVar7 = unaff_s4 + iVar7;
    }
    sVar5 = (*pcVar9)((int)param_1 + iVar7,(int)sVar5);
  }
  cVar3 = CheckTriggerZoneCollision(g_GameStatePtr,(int)sVar4,(int)sVar5,&local_38,auStack_34);
  if (cVar3 != '\0') {
    if (local_38 == 0x2c) {
      bVar2 = true;
    }
    else if (local_38 == 0x2e) {
      bVar1 = true;
    }
  }
  if (*(char *)(g_GameStatePtr + 0x19c) != '\0') {
    bVar2 = true;
  }
  param_1[0x42] = 0;
  if (bVar1) {
    iVar6 = param_1[0xd];
    *(undefined1 *)(iVar6 + 0x34) = 0x74;
                    // Possible PsyQ macro: setPolyFT3()
    *(undefined1 *)(iVar6 + 0x35) = 0x24;
    *(undefined1 *)(iVar6 + 0x36) = 0x38;
  }
  else if (bVar2) {
    iVar6 = param_1[0xd];
    *(undefined1 *)(iVar6 + 0x34) = 0x38;
                    // Possible PsyQ macro: setPolyG4()
    *(undefined1 *)(iVar6 + 0x35) = 0x38;
    *(undefined1 *)(iVar6 + 0x36) = 0x60;
  }
  *(undefined1 *)(param_1 + 0x40) = 0x5a;
  return param_1;
}



undefined4 EntityCallback_80045410(int param_1,short param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  short in_t0;
  short unaff_s0;
  code *pcVar4;
  
  if (param_2 == 1) {
    if ((param_3 == 0x4a212247) || (param_3 == 0x1a5b0d3)) {
      iVar3 = *(int *)(g_GameStatePtr + 0x2c);
      iVar1 = (int)*(short *)(iVar3 + 10);
      if (iVar1 != 0) {
        if (iVar1 < 1) {
          pcVar4 = *(code **)(iVar3 + 0xc);
        }
        else {
          iVar2 = iVar1 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
          in_t0 = (short)*(undefined4 *)(iVar2 + -8);
          pcVar4 = *(code **)(iVar2 + -4);
        }
        iVar2 = (int)*(short *)(iVar3 + 8);
        if (0 < iVar1 << 0x10) {
          iVar2 = in_t0 + iVar2;
        }
        (*pcVar4)(iVar3 + iVar2,0x100f,0,param_1);
      }
    }
  }
  else if (param_2 == 2) {
    if (*(int *)(param_1 + 0x108) != 0) {
      RemoveEntityFromAllLists(g_GameStatePtr);
      *(undefined4 *)(param_1 + 0x108) = 0;
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s0 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar4 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = unaff_s0 + iVar1;
      }
      (*pcVar4)(g_GameStatePtr + iVar1,3,0,param_1);
    }
  }
  return 0;
}



void Callback_800455bc(undefined4 *param_1)

{
  if (param_1[0x42] != 0) {
    *(undefined1 *)(*(int *)(param_1[0x42] + 0x34) + 10) = 0;
  }
  param_1[0x14] = param_1[0x41];
  param_1[0x15] = param_1[0x41];
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_80045410;
  SetEntitySpriteId(param_1,0x1a2ab594,1);
  EntitySetRenderFlags(param_1,0);
  return;
}



undefined4 * FUN_80046808(undefined4 *param_1,undefined4 param_2)

{
  undefined4 uVar1;
  undefined *puVar2;
  undefined4 uVar3;
  uint uVar4;
  short sVar5;
  short local_20;
  short local_1e;
  undefined4 local_1c;
  undefined1 *local_18;
  
  FUN_8003a5f8(param_1,param_2,&DAT_8009b854);
  param_1[6] = &DAT_800111e8;
  local_1c = 0xffff0000;
  local_18 = &LAB_80046a2c;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80046a2c;
  *(undefined2 *)(param_1 + 0x44) = *(undefined2 *)(param_1 + 0x1a);
  *(undefined2 *)((int)param_1 + 0x112) = *(undefined2 *)((int)param_1 + 0x6a);
  sVar5 = *(short *)(param_1[0x40] + 0xc);
  if (sVar5 != 0) {
    local_1c = 0xffff0000;
    local_18 = &LAB_80046a64;
    param_1[7] = 0xffff0000;
    param_1[8] = &LAB_80046a64;
    FUN_800255c8(g_GameStatePtr,sVar5,param_1 + 0x45,param_1 + 0x47);
    uVar4 = (int)*(short *)(param_1 + 0x47) << 3;
    if (*(short *)(param_1 + 0x47) == 0) {
      sVar5 = 0;
    }
    else {
      if (uVar4 == 0) {
        trap(0x1c00);
      }
      *(short *)((int)param_1 + 0x11e) = (short)(*(uint *)(g_GameStatePtr + 0x10c) % uVar4);
      FUN_80055c70((int)param_1 + 0x11e,&local_20,param_1[0x45],(int)*(short *)(param_1 + 0x47),8);
      *(short *)(param_1 + 0x1a) = *(short *)(param_1 + 0x44) + local_20;
      *(short *)((int)param_1 + 0x6a) = *(short *)((int)param_1 + 0x112) + local_1e;
    }
    if (sVar5 != 0) goto LAB_8004696c;
  }
  param_1[0x45] = 0;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1 + 0x44);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)((int)param_1 + 0x112);
LAB_8004696c:
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  *(undefined2 *)(param_1 + 0x1c) = 0;
  uVar3 = FUN_8001c4a4(param_1,0xc8830661);
  puVar2 = PTR_Callback_80046b38_800a5b4c;
  uVar1 = null_FFFF0000h_800a5b48;
  param_1[0x46] = uVar3;
  EntitySetState(param_1,uVar1,puVar2);
  return param_1;
}



void Callback_80046b38(int param_1)

{
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityCallback_8003b190;
  SetEntitySpriteId(param_1,0xe4cb8330,1);
  return;
}



void Callback_80046b88(int param_1)

{
  FUN_8001aab4(param_1,2);
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityCallback_8003b218;
  SetEntitySpriteId(param_1,0x458b0320,1);
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_80046b38;
  return;
}



void EntityCallback_80046e40(int param_1)

{
  u_short uVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  undefined4 local_30;
  
  if (((*(uint *)(g_GameStatePtr + 0x10c) & 7) == 0) && (0 < *(short *)(param_1 + 0xda))) {
    local_30 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x2f,*(short *)(param_1 + 0x68) + -5);
    uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
    iVar3 = InitParticleEntity(uVar2,0xa0149114,local_30,0,0x10000,0x3d4,0);
    AddEntityToSortedRenderList(g_GameStatePtr,iVar3);
    iVar3 = *(int *)(iVar3 + 0x34);
    uVar1 = GetTPage((uint)*(byte *)(iVar3 + 0x32),1,(int)*(short *)(iVar3 + 0x10) & 0xffffffc0,
                     (int)*(short *)(iVar3 + 0x12) & 0xffffff00);
    *(u_short *)(iVar3 + 0x24) = uVar1;
  }
  EntityUpdateCallback(param_1);
  if ((*(char *)(param_1 + 0x100) != '\0') &&
     (iVar3 = (int)*(short *)(g_GameStatePtr + 10), iVar3 != 0)) {
    if (iVar3 < 1) {
      pcVar5 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar4 = iVar3 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar5 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar3 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    (*pcVar5)(g_GameStatePtr + iVar4,3,0,param_1);
  }
  return;
}



undefined4 EntityCallback_80046fe4(int param_1,short param_2)

{
  if (param_2 == 2) {
    *(undefined1 *)(param_1 + 0x100) = 1;
  }
  return 0;
}



void FUN_80047214(int param_1)

{
  *(undefined1 *)(*(int *)(param_1 + 0x34) + 10) = 1;
  *(undefined1 *)(param_1 + 0x100) = 0;
  EntitySetRenderFlags(param_1,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  FUN_8001d0c0(param_1,0);
  return;
}



void EntityCallback_80047384(int param_1)

{
  int iVar1;
  int iVar2;
  short unaff_s0;
  code *pcVar3;
  
  EntityUpdateCallback();
  if ((*(char *)(param_1 + 0x101) != '\0') &&
     (iVar2 = (int)*(short *)(g_GameStatePtr + 10), iVar2 != 0)) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar2 << 0x10) {
      iVar1 = unaff_s0 + iVar1;
    }
    (*pcVar3)(g_GameStatePtr + iVar1,3,0,param_1);
  }
  return;
}



void EntityCallback_80047450(int param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  
  cVar1 = *(char *)(param_1 + 0x102);
  if ((cVar1 != '\0') && (*(char *)(param_1 + 0x102) = cVar1 + -1, cVar1 == '\x01')) {
    EntityProcessCallbackQueue();
  }
  EntityUpdateCallback(param_1);
  if ((*(char *)(param_1 + 0x101) != '\0') &&
     (iVar3 = (int)*(short *)(g_GameStatePtr + 10), iVar3 != 0)) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    (*pcVar4)(g_GameStatePtr + iVar2,3,0,param_1);
  }
  return;
}



void EntityCallback_80047548(int param_1)

{
  char cVar1;
  int iVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  short sVar6;
  short in_t2;
  code *pcVar7;
  short unaff_s2;
  
  sVar6 = 0;
  iVar4 = *(int *)(param_1 + 0x104);
  sVar3 = *(short *)(g_GameStatePtr + 0x46) + *(short *)(blbHeaderBufferBase + 2);
  if (iVar4 != 0) {
    sVar6 = *(short *)(iVar4 + 0x6a);
    *(short *)(param_1 + 0x68) = *(short *)(iVar4 + 0x68) + 0x10;
  }
  if (sVar6 < sVar3) {
    sVar3 = sVar6;
  }
  *(short *)(param_1 + 0x6a) = sVar3;
  *(int *)(param_1 + 0x50) = *(int *)(param_1 + 0x50) + -0x800;
  if ((*(char *)(param_1 + 0x10c) == '\0') && (*(byte *)(param_1 + 0x102) < 0xc)) {
    iVar4 = *(int *)(param_1 + 0x104);
    if ((iVar4 != 0) && (iVar5 = (int)*(short *)(iVar4 + 10), iVar5 != 0)) {
      if (iVar5 < 1) {
        pcVar7 = *(code **)(iVar4 + 0xc);
      }
      else {
        iVar2 = iVar5 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
        in_t2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar7 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar4 + 8);
      if (0 < iVar5 << 0x10) {
        iVar2 = in_t2 + iVar2;
      }
      (*pcVar7)(iVar4 + iVar2,0x1011,0,param_1);
    }
    FUN_8001d1c0(param_1,1);
    *(undefined1 *)(param_1 + 0x10c) = 1;
    *(undefined1 *)(param_1 + 0x10d) = 1;
  }
  cVar1 = *(char *)(param_1 + 0x102);
  if ((cVar1 != '\0') && (*(char *)(param_1 + 0x102) = cVar1 + -1, cVar1 == '\x01')) {
    EntityProcessCallbackQueue(param_1);
  }
  EntityUpdateCallback(param_1);
  if ((*(char *)(param_1 + 0x101) != '\0') &&
     (iVar4 = (int)*(short *)(g_GameStatePtr + 10), iVar4 != 0)) {
    if (iVar4 < 1) {
      pcVar7 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar5 = iVar4 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s2 = (short)*(undefined4 *)(iVar5 + -8);
      pcVar7 = *(code **)(iVar5 + -4);
    }
    iVar5 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar4 << 0x10) {
      iVar5 = unaff_s2 + iVar5;
    }
    (*pcVar7)(g_GameStatePtr + iVar5,3,0,param_1);
  }
  return;
}



undefined4 EntityCallback_80047768(int param_1,ushort param_2,int param_3)

{
  if (param_2 == 0x1001) {
    EntitySetState(param_1,null_FFFF0000h_800a5b68,PTR_Callback_80047ee4_800a5b6c);
  }
  else if (param_2 < 0x1002) {
    if (param_2 == 1) {
      if (param_3 == 0x10d86282) {
        *(undefined1 *)(param_1 + 0x10d) = 1;
      }
      else if (param_3 == -0x4f3efbe0) {
        *(undefined1 *)(param_1 + 0x10d) = 0;
      }
    }
  }
  else if (param_2 == 0x1016) {
    *(undefined1 *)(param_1 + 0x101) = 1;
  }
  return 0;
}



undefined4 EntityCallback_8004780c(int param_1,ushort param_2,int param_3)

{
  if (param_2 == 0x1001) {
    EntitySetState(param_1,null_FFFF0000h_800a5b68,PTR_Callback_80047ee4_800a5b6c);
  }
  else if (param_2 < 0x1002) {
    if (param_2 == 1) {
      if (param_3 == 0x10d86282) {
        *(undefined1 *)(param_1 + 0x10d) = 1;
      }
      else if (param_3 == -0x4f3efbe0) {
        *(undefined1 *)(param_1 + 0x10d) = 0;
      }
    }
  }
  else if (param_2 == 0x1016) {
    *(undefined1 *)(param_1 + 0x101) = 1;
  }
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return 0;
}



undefined4 EntityCallback_800478dc(int param_1,ushort param_2,int param_3)

{
  char cVar1;
  
  if (param_2 == 0x1001) {
    EntitySetState(param_1,null_FFFF0000h_800a5b68,PTR_Callback_80047ee4_800a5b6c);
  }
  else if (param_2 < 0x1002) {
    if (param_2 == 1) {
      if (param_3 == 0x10d86282) {
        *(undefined1 *)(param_1 + 0x10d) = 1;
      }
      else if (param_3 == -0x4f3efbe0) {
        *(undefined1 *)(param_1 + 0x10d) = 0;
      }
    }
  }
  else if (param_2 == 0x1016) {
    *(undefined1 *)(param_1 + 0x101) = 1;
  }
  if ((param_2 == 2) &&
     (cVar1 = *(char *)(param_1 + 0x100) + -1, *(char *)(param_1 + 0x100) = cVar1, cVar1 == '\0')) {
    EntityProcessCallbackQueue(param_1);
  }
  return 0;
}



void Callback_800479d0(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047384;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_800478dc;
  SetEntitySpriteId(param_1,0x883d14b4,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80047a80;
  return;
}



void EntityCallback_80047a80(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047384;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_8004780c;
  SetEntitySpriteId(param_1,0x10057441,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80047b30;
  return;
}



void EntityCallback_80047b30(undefined4 *param_1)

{
  *(undefined1 *)((int)param_1 + 0x102) = 0x19;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047450;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_80047768;
  FUN_8001d1c0(param_1,(int)*(short *)((int)param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80047bf4;
  return;
}



void EntityCallback_80047bf4(undefined4 *param_1,undefined4 param_2,short param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  code *pcVar4;
  
  *(undefined1 *)((int)param_1 + 0x10d) = 2;
  param_1[0x15] = 0x100000;
  if (param_1[0x41] != 0) {
    *(short *)(param_1 + 0x1a) = *(short *)(param_1[0x41] + 0x68) + 0x10;
    iVar2 = param_1[0x41];
    *(short *)((int)param_1 + 0x6a) = *(short *)(param_1[0x41] + 0x6a) + 2;
    iVar3 = (int)*(short *)(iVar2 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        param_3 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar4 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = param_3 + iVar1;
      }
      (*pcVar4)(iVar2 + iVar1,0x1008,0,param_1);
    }
  }
  *(undefined1 *)((int)param_1 + 0x102) = 0x1b;
  *(undefined1 *)(param_1 + 0x43) = 0;
  *(undefined1 *)(param_1[0xd] + 10) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047548;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_80047768;
  SetEntitySpriteId(param_1,0xca282402,1);
  FUN_8001d1c0(param_1,0);
  EntitySetRenderFlags(param_1,0);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80047d84;
  return;
}



void EntityCallback_80047d84(undefined4 *param_1,undefined4 param_2,short param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  code *pcVar4;
  
  iVar1 = param_1[0x41];
  if (iVar1 != 0) {
    iVar3 = (int)*(short *)(iVar1 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        param_3 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = param_3 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,0x1016,0,param_1);
    }
    param_1[0x41] = 0;
  }
  param_1[0x14] = 0x10000;
  param_1[0x15] = 0x10000;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1 + 0x42);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)((int)param_1 + 0x10a);
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047384;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_8004780c;
  SetEntitySpriteId(param_1,0x24d704e,1);
  *(undefined1 *)(param_1 + 0x40) = 5;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = Callback_800479d0;
  return;
}



void Callback_80047ee4(undefined4 *param_1)

{
  param_1[0x14] = 0x10000;
  param_1[0x15] = 0x10000;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1 + 0x42);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)((int)param_1 + 0x10a);
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80047384;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_8004780c;
  SetEntitySpriteId(param_1,0x8de7215,1);
  *(undefined1 *)(param_1 + 0x40) = 4;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = Callback_800479d0;
  return;
}



// Boss entity initialization. Uses multiple sprite IDs: 0x181c3854, 0x8818a018, 0x244655d. Complex
// multi-sprite entity with multiple animation states.

int InitBossEntity(int param_1,undefined4 param_2)

{
  short sVar1;
  short sVar2;
  undefined *puVar3;
  byte bVar4;
  undefined2 uVar5;
  u_short uVar6;
  undefined4 uVar7;
  int iVar8;
  undefined4 uVar9;
  undefined4 *puVar10;
  int iVar11;
  uint uVar12;
  
  FUN_8003a5f8(param_1,param_2,&DAT_8009ba48);
  puVar3 = g_pPlayerState;
  *(undefined **)(param_1 + 0x18) = &DAT_80011308;
  *(undefined4 *)(param_1 + 0x144) = 0xffffffff;
  puVar3[0x1d] = 5;
  uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
  uVar7 = FUN_80049828(uVar7,0x181c3854,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar7);
  uVar7 = *(undefined4 *)(*(int *)(param_1 + 0x100) + 0xc);
  *(undefined2 *)(param_1 + 0x10) = 0x442;
  *(undefined2 *)(param_1 + 0x12) = 4;
  *(undefined2 *)(param_1 + 0x70) = 0;
  *(undefined1 *)(param_1 + 0x111) = 1;
  *(undefined1 *)(param_1 + 0x112) = 0;
  *(undefined4 *)(param_1 + 300) = 0;
  *(char *)(param_1 + 0x140) = (char)uVar7;
  bVar4 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),
                     (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
  if ((bVar4 != 0) && (bVar4 < 0x3c)) {
    uVar5 = FUN_8003a7d4(param_1,bVar4,(int)*(short *)(param_1 + 0x68),
                         (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
    *(undefined2 *)(param_1 + 0x6a) = uVar5;
  }
  uVar12 = 0;
  iVar8 = 0;
  while (iVar8 = iVar8 >> 0x10, iVar8 < 6) {
    uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x130,1,0);
    uVar9 = FUN_80058310(uVar7,0x8818a018,
                         (int)(((uint)*(ushort *)(param_1 + 0x68) +
                               (uint)(ushort)(&null_FF60h_8009b860)[iVar8 * 2]) * 0x10000) >> 0x10,
                         (int)(((uint)*(ushort *)(param_1 + 0x6a) +
                               (uint)(ushort)(&null_FFE0h_8009b862)[iVar8 * 2]) * 0x10000) >> 0x10,
                         param_1,uVar12 & 0xff);
    uVar7 = g_GameStatePtr;
    iVar8 = iVar8 * 4 + param_1;
    *(undefined4 *)(iVar8 + 0x114) = uVar9;
    AddEntityToSortedRenderList(uVar7);
    uVar12 = uVar12 + 1;
    AddToUpdateQueue(g_GameStatePtr,*(undefined4 *)(iVar8 + 0x114));
    iVar8 = uVar12 * 0x10000;
  }
  iVar8 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
  sVar1 = *(short *)(param_1 + 0x68);
  sVar2 = *(short *)(param_1 + 0x6a);
  InitEntityWithSprite(iVar8,&DAT_8009bacc,0x3d4,(int)sVar1,(int)sVar2);
  *(undefined **)(iVar8 + 0x18) = &DAT_80011328;
  *(short *)(iVar8 + 0x10a) = sVar2;
  iVar11 = *(int *)(iVar8 + 0x34);
  *(undefined2 *)(iVar8 + 0x10) = 0x447;
  *(short *)(iVar8 + 0x108) = sVar1;
  *(undefined1 *)(iVar8 + 0x101) = 0;
  *(undefined4 *)(iVar8 + 0x104) = 0;
  *(undefined1 *)(iVar8 + 0x10d) = 1;
  uVar6 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,(int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
  *(u_short *)(iVar11 + 0x24) = uVar6;
  *(undefined4 *)(iVar8 + 0x1c) = 0xffff0000;
  *(code **)(iVar8 + 0x20) = FUN_8001cc6c;
  *(undefined1 *)(iVar8 + 0x100) = 5;
  EntitySetState(iVar8,null_FFFF0000h_800a5b60,PTR_Callback_800479d0_800a5b64);
  uVar7 = g_GameStatePtr;
  *(int *)(param_1 + 0x130) = iVar8;
  AddEntityToSortedRenderList(uVar7);
  AddToUpdateQueue(g_GameStatePtr,*(undefined4 *)(param_1 + 0x130));
  puVar10 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
  InitEntitySprite(puVar10,0x244655d,0x3c0,(int)*(short *)(param_1 + 0x68),
                   (int)*(short *)(param_1 + 0x6a),0);
  iVar8 = puVar10[0xd];
  puVar10[6] = &DAT_80011348;
  *(undefined2 *)(puVar10 + 4) = 0x447;
  uVar6 = GetTPage((uint)*(byte *)(iVar8 + 0x32),1,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar6;
  FUN_80047214(puVar10);
  puVar10[2] = 0xffff0000;
  puVar10[3] = &LAB_80047168;
  *puVar10 = 0xffff0000;
  puVar10[1] = &LAB_800470f4;
  *(undefined1 *)((int)puVar10 + 0x101) = 0;
  uVar7 = g_GameStatePtr;
  *(undefined4 **)(param_1 + 0x134) = puVar10;
  AddEntityToSortedRenderList(uVar7);
  EntitySetState(param_1,null_FFFF0000h_800a5b70,PTR_FUN_800a5b74);
  return param_1;
}



void EntityCallback_8004839c(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  
  FUN_8001c5b4(param_1,*(undefined4 *)(param_1 + 0x144));
  EntityUpdateCallback(param_1);
  if (*(char *)(param_1 + 0x111) != '\x02') {
    CollisionCheckWrapper(param_1,2,0x1000);
  }
  if (*(char *)(param_1 + 0x106) != '\0') {
    iVar1 = *(int *)(param_1 + 0x108);
    if ((iVar1 != 0) && (iVar3 = (int)*(short *)(iVar1 + 10), iVar3 != 0)) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,0x1009,0,param_1);
    }
    iVar1 = (int)*(short *)(g_GameStatePtr + 10);
    if (iVar1 != 0) {
      if (iVar1 < 1) {
        pcVar4 = *(code **)(g_GameStatePtr + 0xc);
      }
      else {
        iVar3 = iVar1 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar4 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(g_GameStatePtr + 8);
      if (0 < iVar1 << 0x10) {
        iVar3 = unaff_s4 + iVar3;
      }
      (*pcVar4)(g_GameStatePtr + iVar3,3,0,param_1);
    }
    *(undefined1 *)(param_1 + 0x107) = 1;
  }
  return;
}



void EntityCallback_80048538(int param_1)

{
  short sVar1;
  
  sVar1 = *(short *)(param_1 + 0x104);
  if ((sVar1 != 0) && (*(short *)(param_1 + 0x104) = sVar1 + -1, sVar1 == 1)) {
    EntityProcessCallbackQueue();
  }
  EntityUpdateCallback(param_1);
  return;
}



int FUN_8004858c(int param_1,ushort param_2,uint param_3,int param_4)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  short unaff_s0;
  short unaff_s4;
  short unaff_s6;
  code *pcVar5;
  short local_30;
  
  if (param_2 != 0x1002) {
    if (0x1002 < param_2) {
      if (param_2 == 0x1004) {
        *(int *)(param_1 + 300) = param_4;
        return 0;
      }
      if (param_2 != 0x1008) {
        return 0;
      }
      if (*(int *)(param_1 + 0x108) != 0) {
        return 0;
      }
      *(int *)(param_1 + 0x108) = param_4;
      return 1;
    }
    if (param_2 == 1) {
      if (param_3 == 0x8caa1108) {
        if (*(int *)(param_1 + 0x144) != -1) {
          return 0;
        }
        uVar4 = FUN_8001c4a4(param_1,0xc0099011);
        *(undefined4 *)(param_1 + 0x144) = uVar4;
        return 0;
      }
      if (param_3 < 0x8caa1109) {
        if (param_3 == 0x10d86282) {
          iVar2 = *(int *)(param_1 + 0x134);
          *(undefined1 *)(*(int *)(iVar2 + 0x34) + 10) = 1;
          *(undefined1 *)(iVar2 + 0x100) = 0;
          EntitySetRenderFlags(iVar2,1);
          FUN_8001d170(iVar2,0x1084280);
          FUN_8001d1f0(iVar2,0x2421405);
          FUN_8001d0c0(iVar2,0);
          FUN_8004975c(param_1);
          *(undefined1 *)(param_1 + 0x112) = 0;
          *(undefined1 *)(param_1 + 0x111) = 1;
          return 0;
        }
        return 0;
      }
      if (param_3 != 0xb0c10420) {
        return 0;
      }
      iVar2 = *(int *)(param_1 + 0x134);
      *(undefined1 *)(iVar2 + 0x100) = 1;
      FUN_8001d1c0(iVar2,0xffffffff);
      FUN_8001d0f0(iVar2,0x2421405);
      *(undefined1 *)(param_1 + 0x112) = 1;
      *(undefined1 *)(param_1 + 0x111) = 0;
      return 0;
    }
    if (param_2 != 0x1001) {
      return 0;
    }
    if (*(char *)(param_1 + 0x112) == '\0') {
      return 0;
    }
    g_pPlayerState[0x1d] = g_pPlayerState[0x1d] + -1;
    if (g_pPlayerState[0x1d] == '\0') {
      EntitySetState(param_1,null_FFFF0000h_800a5b78,PTR_Callback_8004906c_800a5b7c);
      iVar2 = *(int *)(param_1 + 0x130);
      iVar3 = (int)*(short *)(iVar2 + 10);
      if (iVar3 == 0) {
        return 0;
      }
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s6 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = unaff_s6 + iVar1;
      }
      iVar2 = iVar2 + iVar1;
      uVar4 = 0x1016;
    }
    else {
      EntitySetState(param_1,null_FFFF0000h_800a5b80,PTR_Callback_80048f40_800a5b84);
      iVar2 = *(int *)(param_1 + 0x130);
      iVar3 = (int)*(short *)(iVar2 + 10);
      if (iVar3 == 0) {
        return 0;
      }
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        local_30 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = local_30 + iVar1;
      }
      iVar2 = iVar2 + iVar1;
      uVar4 = 0x1001;
    }
    (*pcVar5)(iVar2,uVar4,0,param_1);
    return 0;
  }
  if (*(char *)(param_1 + 0x112) != '\0') {
    g_pPlayerState[0x1d] = g_pPlayerState[0x1d] + -1;
    if (g_pPlayerState[0x1d] == '\0') {
      EntitySetState(param_1,null_FFFF0000h_800a5b78,PTR_Callback_8004906c_800a5b7c);
      iVar2 = *(int *)(param_1 + 0x130);
      iVar3 = (int)*(short *)(iVar2 + 10);
      if (iVar3 == 0) goto LAB_80048770;
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s0 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = unaff_s0 + iVar1;
      }
      iVar2 = iVar2 + iVar1;
      uVar4 = 0x1016;
    }
    else {
      EntitySetState(param_1,null_FFFF0000h_800a5b80,PTR_Callback_80048f40_800a5b84);
      iVar2 = *(int *)(param_1 + 0x130);
      iVar3 = (int)*(short *)(iVar2 + 10);
      if (iVar3 == 0) goto LAB_80048770;
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = unaff_s4 + iVar1;
      }
      iVar2 = iVar2 + iVar1;
      uVar4 = 0x1001;
    }
    (*pcVar5)(iVar2,uVar4,0,param_1);
  }
LAB_80048770:
  if (param_4 == *(int *)(param_1 + 0x108)) {
    *(undefined4 *)(param_1 + 0x108) = 0;
  }
  return param_1;
}



undefined4 EntityCallback_80048a54(undefined4 param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = FUN_8004858c(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



void EntityCallback_80048b48(int param_1)

{
  undefined2 uVar1;
  
  if ((uint)*(byte *)(param_1 + 0x139) < (uint)*(byte *)(param_1 + 0x13a)) {
    *(undefined2 *)(param_1 + 0x68) =
         *(undefined2 *)((uint)*(byte *)(param_1 + 0x139) * 4 + *(int *)(param_1 + 0x13c));
    uVar1 = *(undefined2 *)((uint)*(byte *)(param_1 + 0x139) * 4 + *(int *)(param_1 + 0x13c) + 2);
    *(char *)(param_1 + 0x139) = *(char *)(param_1 + 0x139) + '\x01';
    *(undefined2 *)(param_1 + 0x6a) = uVar1;
  }
  else {
    EntityProcessCallbackQueue();
  }
  return;
}



void FUN_80048bc0(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  
  uVar1 = rand();
  if ((uVar1 & 2) != 0) {
    iVar2 = rand();
    FUN_8001c4a4(param_1,*(undefined4 *)(&DAT_8009baf8 + (iVar2 % 3) * 4));
  }
  if (param_1[0x51] == -1) {
    uVar3 = FUN_8001c4a4(param_1,0xc0099011);
    param_1[0x51] = uVar3;
  }
  if (*(char *)((int)param_1 + 0x112) != '\0') {
    iVar2 = param_1[0x4d];
    *(undefined1 *)(*(int *)(iVar2 + 0x34) + 10) = 1;
    *(undefined1 *)(iVar2 + 0x100) = 0;
    EntitySetRenderFlags(iVar2,1);
    FUN_8001d170(iVar2,0x1084280);
    FUN_8001d1f0(iVar2,0x2421405);
    FUN_8001d0c0(iVar2,0);
    *(undefined1 *)((int)param_1 + 0x112) = 0;
  }
  *(undefined1 *)(param_1 + 0x44) = 5;
  *(undefined1 *)((int)param_1 + 0x111) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80048ab0;
  SetEntitySpriteId(param_1,0x2ed1470,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = &LAB_80048e2c;
  EntitySetCallback(param_1,null_FFFF0000h_800a5b88,PTR_Callback_80048d60_800a5b8c);
  return;
}



void Callback_80048d60(int param_1)

{
  FUN_8007c7b8(*(undefined4 *)(param_1 + 0x144));
  *(undefined4 *)(param_1 + 0x144) = 0xffffffff;
  return;
}



void EntityCallback_80048d98(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x134);
  *(undefined1 *)(*(int *)(iVar1 + 0x34) + 10) = 1;
  *(undefined1 *)(iVar1 + 0x100) = 0;
  EntitySetRenderFlags(iVar1,1);
  FUN_8001d170(iVar1,0x1084280);
  FUN_8001d1f0(iVar1,0x2421405);
  FUN_8001d0c0(iVar1,0);
  FUN_80048bc0(param_1);
  *(undefined1 *)(param_1 + 0x111) = 2;
  FUN_8001d0c0(param_1,8);
  return;
}



void Callback_80048f40(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  
  uVar2 = param_1[0x1a];
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  uVar2 = InitParticleEntity(uVar1,0xa0cc18d0,uVar2,0,0x10000,0x3d4,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar2);
  *(undefined1 *)((int)param_1 + 0x112) = 0;
  *(undefined1 *)((int)param_1 + 0x111) = 2;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_80048a54;
  SetEntitySpriteId(param_1,0x60de1050,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80048d98;
  return;
}



void Callback_8004906c(undefined4 *param_1)

{
  undefined1 *puVar1;
  undefined1 uVar2;
  short sVar3;
  short sVar4;
  uint uVar5;
  undefined *puVar6;
  int iVar7;
  undefined4 *puVar8;
  undefined4 local_48;
  undefined1 local_3c [4];
  code *local_38;
  undefined4 local_2c;
  code *local_28;
  
  iVar7 = g_GameStatePtr;
  uVar2 = *(undefined1 *)(param_1 + 0x50);
  *(undefined1 *)(g_GameStatePtr + 0x19c) = 1;
  *(undefined1 *)(iVar7 + 0x19d) = uVar2;
  puVar6 = blbHeaderBufferBase;
  sVar3 = *(short *)(param_1 + 0x1a);
  *(undefined2 *)((int)param_1 + 0x12) = 0;
  sVar4 = *(short *)((int)param_1 + 0x6a);
  local_48 = CONCAT22(sVar4,sVar3);
  puVar8 = (undefined4 *)AllocateFromHeap(puVar6,0x104,1,0);
  puVar1 = local_3c + 3;
  uVar5 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar5) =
       *(uint *)(puVar1 + -uVar5) & -1 << (uVar5 + 1) * 8 | local_48 >> (3 - uVar5) * 8;
  local_3c = (undefined1  [4])local_48;
  InitEntitySprite(puVar8,0xa0cc1cd0,0x3d6,(int)sVar3,(int)sVar4,0);
  puVar8[6] = &DAT_80011368;
  *(undefined2 *)(puVar8 + 4) = 0x447;
  *puVar8 = 0xffff0000;
  puVar8[1] = EntityCallback_80046e40;
  local_2c = 0xffff0000;
  local_28 = EntityCallback_80046fe4;
  puVar8[2] = 0xffff0000;
  puVar8[3] = EntityCallback_80046fe4;
  EntitySetRenderFlags(puVar8,0);
  local_2c = 0xffff0000;
  local_28 = FUN_8001cc6c;
  puVar8[7] = 0xffff0000;
  puVar8[8] = FUN_8001cc6c;
  *(undefined1 *)(puVar8 + 0x40) = 0;
  AddEntityToSortedRenderList(g_GameStatePtr,puVar8);
  *(undefined1 *)((int)param_1 + 0x112) = 0;
  *(undefined1 *)((int)param_1 + 0x111) = 2;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityCallback_80048a54;
  local_3c = (undefined1  [4])0xffff0000;
  local_38 = FUN_8001cc6c;
  param_1[7] = 0xffff0000;
  param_1[8] = FUN_8001cc6c;
  SetEntitySpriteId(param_1,0x424d1840,1);
  *(undefined1 *)(param_1 + 0x4e) = 0;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80049278;
  return;
}



void EntityCallback_80049278(undefined4 *param_1)

{
  undefined4 uVar1;
  code *pcVar2;
  
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  FUN_8001d1c0(param_1,(int)*(short *)((int)param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined2 *)(param_1 + 0x41) = 0x14;
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_80048538;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  if (*(char *)(param_1 + 0x4e) == '\x05') {
    *(undefined1 *)(g_GameStatePtr + 0x170) = 0;
    uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x24,1,0);
    uVar1 = FUN_80038300(uVar1);
    AddToZOrderList(g_GameStatePtr,uVar1);
  }
  if (*(byte *)(param_1 + 0x4e) < 6) {
    if ((*(byte *)(param_1 + 0x4e) & 1) == 0) {
      pcVar2 = EntityCallback_80049550;
    }
    else {
      pcVar2 = EntityCallback_800493d8;
    }
  }
  else {
    pcVar2 = EntityCallback_800496c8;
  }
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = pcVar2;
  return;
}



void EntityCallback_800493d8(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  
  uVar2 = FUN_8001c4a4(param_1,0x424129a1);
  uVar1 = g_GameStatePtr;
  param_1[0x51] = uVar2;
  ChangeRenderZOrder(uVar1,param_1[0xd],900);
  param_1[0x14] = 0x10000;
  param_1[0x15] = 0x10000;
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(param_1[0xd] + 10) = 1;
  *(char *)(param_1 + 0x4e) = *(char *)(param_1 + 0x4e) + '\x01';
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[2] = 0;
  param_1[3] = 0;
  SetEntitySpriteId(param_1,0x81421850,1);
  *(undefined1 *)((int)param_1 + 0x13a) = 0x13;
  *(undefined1 *)((int)param_1 + 0x139) = 0;
  param_1[0x4f] = &DAT_8009b878;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityCallback_80048b48;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80049278;
  return;
}



void EntityCallback_80049550(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  
  uVar2 = FUN_8001c4a4(param_1,0x66017821);
  uVar1 = g_GameStatePtr;
  param_1[0x51] = uVar2;
  ChangeRenderZOrder(uVar1,param_1[0xd],2000);
  param_1[0x14] = 0x20000;
  param_1[0x15] = 0x20000;
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined1 *)(param_1[0xd] + 10) = 1;
  *(char *)(param_1 + 0x4e) = *(char *)(param_1 + 0x4e) + '\x01';
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[2] = 0;
  param_1[3] = 0;
  SetEntitySpriteId(param_1,0x82421850,1);
  *(undefined1 *)((int)param_1 + 0x13a) = 5;
  *(undefined1 *)((int)param_1 + 0x139) = 0;
  param_1[0x4f] = &DAT_8009b8c4;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityCallback_80048b48;
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityCallback_80049278;
  return;
}



void EntityCallback_800496c8(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x148) = *(undefined1 *)(param_1 + 0x50);
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  FUN_8001d218(param_1,0);
  *param_1 = 0xffff0000;
  param_1[1] = EntityCallback_8004839c;
  param_1[7] = 0;
  param_1[8] = 0;
  *(undefined1 *)((int)param_1 + 0x106) = 1;
  return;
}



void FUN_8004975c(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  if (*(int *)(param_1 + 300) == 0) {
    *(undefined4 *)(param_1 + 300) = 0;
    iVar1 = 0;
    do {
      iVar1 = (iVar1 >> 0xe) + param_1;
      iVar2 = *(int *)(iVar1 + 0x114);
      if (iVar2 != 0) {
        *(int *)(param_1 + 300) = iVar2;
        *(undefined4 *)(iVar1 + 0x114) = 0;
        break;
      }
      iVar3 = iVar3 + 1;
      iVar1 = iVar3 * 0x10000;
    } while (iVar3 * 0x10000 >> 0x10 < 6);
  }
  else {
    iVar1 = 0;
    do {
      iVar1 = (iVar1 >> 0xe) + param_1;
      iVar3 = iVar3 + 1;
      if (*(int *)(iVar1 + 0x114) == *(int *)(param_1 + 300)) {
        *(undefined4 *)(iVar1 + 0x114) = 0;
        break;
      }
      iVar1 = iVar3 * 0x10000;
    } while (iVar3 * 0x10000 >> 0x10 < 6);
  }
  if (*(int *)(param_1 + 300) != 0) {
    *(undefined1 *)(*(int *)(param_1 + 300) + 0x14) = 1;
  }
  *(undefined4 *)(*(int *)(param_1 + 0x130) + 0x104) = *(undefined4 *)(param_1 + 300);
  *(undefined4 *)(param_1 + 300) = 0;
  return;
}



void FUN_80049828(undefined4 *param_1,undefined4 param_2,int param_3)

{
  InitEntitySprite(param_1,param_2,10000,0xa2,(param_3 + 0xf4) * 0x10000 >> 0x10,0);
  param_1[6] = &DAT_800112e8;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8004992c;
  FUN_8001d1c0(param_1,0);
  FUN_8001d0c0(param_1,0);
  EntitySetRenderFlags(param_1,0);
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined *)(param_1 + 0x40) = g_pPlayerState[0x1d];
  return;
}



int FUN_8004f4d8(short param_1,short param_2)

{
  int iVar1;
  
  iVar1 = csqrt(((int)param_1 * (int)param_1 + (int)param_2 * (int)param_2) * 0x1000);
  return (iVar1 << 4) >> 0x10;
}



short * FUN_8004f520(short *param_1,short param_2,short param_3,undefined1 param_4,int param_5,
                    undefined4 param_6)

{
  u_short uVar1;
  int iVar2;
  int iVar3;
  short unaff_s4;
  code *pcVar4;
  
  InitEntitySprite(param_1,param_6,0x406,(int)param_2,(int)param_3,0);
  *(undefined **)(param_1 + 0xc) = &DAT_800115c8;
  param_1[8] = 100;
  param_1[0xe] = 0;
  param_1[0xf] = -1;
  *(undefined1 **)(param_1 + 0x10) = &LAB_8004f8ac;
  param_1[0] = 0;
  param_1[1] = -1;
  *(code **)(param_1 + 2) = FUN_8004f704;
  FUN_8001aab4(param_1,param_4);
  if (param_5 != 0x10000) {
    *(int *)(param_1 + 0x28) = param_5;
    *(int *)(param_1 + 0x2a) = param_5;
    *(int *)(param_1 + 0x2c) = param_5;
    *(int *)(param_1 + 0x2e) = param_5;
    param_1[0x12] = 0;
    param_1[0x13] = -1;
    *(code **)(param_1 + 0x14) = ScaleXByEntityScale;
    param_1[0x16] = 0;
    param_1[0x17] = -1;
    *(code **)(param_1 + 0x18) = ScaleYByEntityScale;
  }
  iVar3 = *(int *)(param_1 + 0x1a);
  uVar1 = GetTPage((uint)*(byte *)(iVar3 + 0x32),1,(int)*(short *)(iVar3 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar3 + 0x12) & 0xffffff00);
  *(u_short *)(iVar3 + 0x24) = uVar1;
  iVar3 = (int)param_1[1];
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 2);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)((int)param_1 + (int)param_1[2]);
      unaff_s4 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*param_1;
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s4 + iVar2;
    }
    (*pcVar4)((int)param_1 + iVar2);
  }
  return param_1;
}



void FUN_8004f704(int param_1)

{
  char cVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  short unaff_s4;
  
  EntityUpdateCallback();
  cVar1 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
  cVar2 = FUN_8001b92c(param_1);
  if (((cVar2 != '\0') || (cVar1 == 'e')) &&
     (iVar4 = (int)*(short *)(g_GameStatePtr + 10), iVar4 != 0)) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar4 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    (*pcVar5)(g_GameStatePtr + iVar3,3,0,param_1);
  }
  iVar4 = CollisionCheckWrapper(param_1,4,0x1002,0);
  if ((iVar4 != 0) && (iVar4 = (int)*(short *)(g_GameStatePtr + 10), iVar4 != 0)) {
    if (iVar4 < 1) {
      pcVar5 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar3 = iVar4 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar5 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar4 << 0x10) {
      iVar3 = unaff_s4 + iVar3;
    }
    (*pcVar5)(g_GameStatePtr + iVar3,3,0,param_1);
  }
  return;
}



short * FUN_8004f8dc(short *param_1,short param_2,short param_3,char param_4,int param_5)

{
  undefined4 uVar1;
  undefined *puVar2;
  undefined1 uVar3;
  int iVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  
  InitEntityWithSprite(param_1,&DAT_8009bbe0,0x4b0,(int)param_2,(int)param_3);
  *(undefined **)(param_1 + 0xc) = &DAT_800115a8;
  param_1[8] = 300;
  *(char *)(param_1 + 0x3a) = param_4;
  param_1[0xe] = 0;
  param_1[0xf] = -1;
  *(undefined1 **)(param_1 + 0x10) = &LAB_8004fdb8;
  param_1[0] = 0;
  param_1[1] = -1;
  *(code **)(param_1 + 2) = FUN_8004fb58;
  param_1[4] = 0;
  param_1[5] = -1;
  *(code **)(param_1 + 6) = EntityCallback_8004fd3c;
  if (param_5 != 0x10000) {
    *(int *)(param_1 + 0x28) = param_5;
    *(int *)(param_1 + 0x2a) = param_5;
    *(int *)(param_1 + 0x2c) = param_5;
    *(int *)(param_1 + 0x2e) = param_5;
    param_1[0x12] = 0;
    param_1[0x13] = -1;
    *(code **)(param_1 + 0x14) = ScaleXByEntityScale;
    param_1[0x16] = 0;
    param_1[0x17] = -1;
    *(code **)(param_1 + 0x18) = ScaleYByEntityScale;
  }
  param_1[0x84] = 0;
  param_1[0x85] = 0;
  param_1[0x36] = 0;
  param_1[0x37] = 0;
  if (param_4 == '\0') {
    uVar3 = 0x20;
  }
  else {
    uVar3 = 0x60;
  }
  *(undefined1 *)(param_1 + 0x81) = uVar3;
  param_1[0x82] = 4;
  puVar2 = PTR_Callback_800505a0_800a5c7c;
  uVar1 = null_FFFF0000h_800a5c78;
  *(undefined1 *)(param_1 + 0x80) = 2;
  *(undefined1 *)((int)param_1 + 0x101) = 10;
  EntitySetState(param_1,uVar1,puVar2);
  iVar5 = (int)param_1[1];
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(param_1 + 2);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)((int)param_1 + (int)param_1[2]);
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*param_1;
    if (0 < iVar5 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    (*pcVar6)((int)param_1 + iVar4);
  }
  return param_1;
}



void FUN_8004fb58(int param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  
  cVar1 = *(char *)(param_1 + 0x101) + -1;
  *(char *)(param_1 + 0x101) = cVar1;
  if (cVar1 == '\0') {
    iVar2 = rand();
    *(byte *)(param_1 + 0x100) = (byte)iVar2 & 7;
    iVar2 = rand();
    *(byte *)(param_1 + 0x101) = ((byte)iVar2 & 0x1f) + 0x20;
  }
  EntityUpdateCallback(param_1);
  if (((*(int *)(param_1 + 0x108) == 0) && (cVar1 = FUN_8001b92c(param_1), cVar1 != '\0')) &&
     (iVar2 = (int)*(short *)(g_GameStatePtr + 10), iVar2 != 0)) {
    if (iVar2 < 1) {
      pcVar4 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar3 = iVar2 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar4 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar2 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    (*pcVar4)(g_GameStatePtr + iVar3,3,0,param_1);
  }
  iVar2 = CollisionCheckWrapper(param_1,4,0x1002,0);
  if (((iVar2 != 0) && (iVar2 == *(int *)(param_1 + 0x108))) &&
     (iVar2 = (int)*(short *)(g_GameStatePtr + 10), iVar2 != 0)) {
    if (iVar2 < 1) {
      pcVar4 = *(code **)(g_GameStatePtr + 0xc);
    }
    else {
      iVar3 = iVar2 * 8 + *(int *)(g_GameStatePtr + *(short *)(g_GameStatePtr + 0xc));
      unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar4 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(g_GameStatePtr + 8);
    if (0 < iVar2 << 0x10) {
      iVar3 = unaff_s4 + iVar3;
    }
    (*pcVar4)(g_GameStatePtr + iVar3,3,0,param_1);
  }
  return;
}



undefined4 EntityCallback_8004fd3c(int param_1,short param_2,undefined4 param_3,int param_4)

{
  if ((param_2 == 0x1009) && (param_4 == *(int *)(param_1 + 0x108))) {
    *(undefined4 *)(param_1 + 0x108) = 0;
  }
  return 0;
}



undefined4 EntityCallback_8004fd68(int param_1,short param_2,undefined4 param_3,int param_4)

{
  if ((param_2 == 0x1009) && (param_4 == *(int *)(param_1 + 0x108))) {
    *(undefined4 *)(param_1 + 0x108) = 0;
  }
  if (param_2 == 2) {
    EntityProcessCallbackQueue();
  }
  return 0;
}



void FUN_800502cc(int param_1)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  short unaff_s4;
  code *pcVar5;
  int iVar6;
  int iVar7;
  short local_30;
  short local_2e;
  short local_2c;
  short local_2a;
  
  iVar3 = g_GameStatePtr;
  iVar4 = 10000;
  *(undefined4 *)(param_1 + 0x108) = 0;
  for (piVar2 = *(int **)(iVar3 + 0x24); piVar2 != (int *)0x0; piVar2 = (int *)*piVar2) {
    iVar3 = piVar2[1];
    if ((*(ushort *)(iVar3 + 0x12) & 4) != 0) {
      FUN_8001a448(iVar3,&local_30);
      iVar1 = *(int *)(param_1 + 0x58);
      iVar6 = ((int)local_30 << 0x10) / iVar1;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && ((int)local_30 << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      local_30 = (short)iVar6;
      iVar1 = *(int *)(param_1 + 0x58);
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && ((int)local_2c << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      local_2c = (short)(((int)local_2c << 0x10) / iVar1);
      iVar1 = *(int *)(param_1 + 0x5c);
      iVar7 = ((int)local_2e << 0x10) / iVar1;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && ((int)local_2e << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      local_2e = (short)iVar7;
      iVar1 = *(int *)(param_1 + 0x5c);
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && ((int)local_2a << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      local_2a = (short)(((int)local_2a << 0x10) / iVar1);
      iVar1 = (int)(((iVar6 + ((int)local_2c - (int)local_30 >> 1)) -
                    (uint)*(ushort *)(param_1 + 0x68)) * 0x10000) >> 0x10;
      iVar6 = (int)(((iVar7 + ((int)local_2a - (int)local_2e >> 1)) -
                    (uint)*(ushort *)(param_1 + 0x6a)) * 0x10000) >> 0x10;
      iVar1 = csqrt((iVar1 * iVar1 + iVar6 * iVar6) * 0x1000);
      iVar1 = (iVar1 << 4) >> 0x10;
      if ((*(int *)(param_1 + 0x108) == 0) || (iVar1 < (short)iVar4)) {
        *(int *)(param_1 + 0x108) = iVar3;
        iVar4 = iVar1;
      }
    }
  }
  iVar3 = *(int *)(param_1 + 0x108);
  if (iVar3 != 0) {
    iVar4 = (int)*(short *)(iVar3 + 10);
    if (iVar4 == 0) {
      iVar3 = 0;
    }
    else {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar3 + 0xc);
      }
      else {
        iVar1 = iVar4 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar3 + 8);
      if (0 < iVar4 << 0x10) {
        iVar1 = unaff_s4 + iVar1;
      }
      iVar3 = (*pcVar5)(iVar3 + iVar1,0x1008,0,param_1);
    }
    if (iVar3 == 0) {
      *(undefined4 *)(param_1 + 0x108) = 0;
    }
  }
  return;
}



void Callback_800505a0(int param_1)

{
  SetEntitySpriteId(param_1,0x9158a0f6,1);
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityCallback_8004fd3c;
  return;
}



void Callback_800505fc(int param_1)

{
  FUN_8001aab4(param_1,2);
  SetEntitySpriteId(param_1,0x9918a8e2,1);
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityCallback_8004fd68;
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_800505a0;
  return;
}



void InitEntity_a89d0ad0(undefined4 *param_1,undefined1 param_2)

{
  undefined1 *puVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  short unaff_s4;
  
  InitEntitySprite(param_1,0xa89d0ad0,0x3e9,0xa0,0x78,0);
  param_1[6] = &DAT_800114e8;
  *(undefined2 *)(param_1 + 4) = 100;
  *(undefined1 *)(param_1 + 0x42) = 0;
  *(undefined1 *)(param_1 + 0x40) = param_2;
  *(undefined2 *)((int)param_1 + 0x106) = 0x4b0;
  param_1[7] = 0xffff0000;
  param_1[8] = &DAT_80052c40;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8005294c;
  if (*(char *)(param_1 + 0x40) == '\0') {
    puVar1 = &LAB_80052a68;
  }
  else {
    puVar1 = &LAB_80052adc;
  }
  param_1[2] = 0xffff0000;
  param_1[3] = puVar1;
  iVar5 = g_GameStatePtr;
  *(undefined2 *)((int)param_1 + 0x102) = 0;
  *(undefined2 *)(param_1 + 0x41) = 0;
  iVar5 = *(int *)(iVar5 + 0x2c);
  if (*(int *)(iVar5 + 0x58) == 0xc000) {
    FUN_8001c364(param_1);
  }
  iVar3 = (int)*(short *)(iVar5 + 0x26);
  uVar4 = (uint)*(ushort *)(iVar5 + 0x68);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar6 = *(code **)(iVar5 + 0x28);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar6 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(iVar5 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    uVar4 = (*pcVar6)(iVar5 + iVar2,(int)(short)*(ushort *)(iVar5 + 0x68));
  }
  iVar3 = param_1[0x16];
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (uVar4 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x1a) = (short)((int)(uVar4 << 0x10) / iVar3);
  iVar3 = (int)*(short *)(iVar5 + 0x2e);
  uVar4 = (uint)*(ushort *)(iVar5 + 0x6a);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar6 = *(code **)(iVar5 + 0x30);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar6 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(iVar5 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s4 + iVar2;
    }
    uVar4 = (*pcVar6)(iVar5 + iVar2,(int)(short)*(ushort *)(iVar5 + 0x6a));
  }
  iVar5 = param_1[0x17];
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && (uVar4 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)((int)param_1 + 0x6a) = (short)((int)(uVar4 << 0x10) / iVar5) + -0x20;
  return;
}



void FUN_80053268(undefined4 *param_1,short param_2,short param_3,undefined1 param_4)

{
  InitEntitySprite(param_1,0xb01c25f0,9000,(int)param_2,(int)param_3,0);
  param_1[6] = &DAT_800114a8;
  FUN_8001aab4(param_1,param_4);
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_80053664;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8005334c;
  *(undefined2 *)((int)param_1 + 0x106) = 0;
  *(undefined1 *)(param_1 + 0x41) = 0;
  *(undefined1 *)((int)param_1 + 0xf6) = 0;
  *(undefined2 *)(param_1 + 0x40) = *(undefined2 *)(param_1 + 0x1a);
  *(undefined2 *)((int)param_1 + 0x102) = *(undefined2 *)((int)param_1 + 0x6a);
  *(undefined1 *)(param_1[0xd] + 0x37) = 0;
  return;
}



undefined4 * FUN_800549f0(undefined4 *param_1,short param_2,short param_3)

{
  InitEntitySprite(param_1,0xc34aa22,0x3cc,(int)param_2,(int)param_3,0);
  param_1[6] = &DAT_800113e8;
  *(undefined2 *)(param_1 + 4) = 0x44c;
  param_1[0x40] = 0xfff80000;
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_80054c40;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80054aa8;
  return param_1;
}



void FUN_80055c70(short *param_1,short *param_2,uint param_3,short param_4,short param_5)

{
  undefined1 *puVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  short sVar5;
  short sVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  short sVar12;
  short sVar13;
  short *psVar14;
  int iVar15;
  int iVar16;
  short local_30;
  undefined1 local_2e [6];
  undefined1 local_28 [40];
  
  sVar5 = *param_1;
  iVar9 = (int)param_5;
  iVar15 = (int)sVar5 / iVar9;
  if (iVar9 == 0) {
    trap(0x1c00);
  }
  if ((iVar9 == -1) && (sVar5 == -0x80000000)) {
    trap(0x1800);
  }
  if ((int)param_4 <= (int)(short)iVar15) {
    iVar15 = 0;
    *param_1 = sVar5 % param_5;
  }
  sVar5 = *param_1 % param_5;
  if (iVar9 == 0) {
    trap(0x1c00);
  }
  if ((iVar9 == -1) && (*param_1 == -0x80000000)) {
    trap(0x1800);
  }
  psVar14 = (short *)((short)iVar15 * 4 + param_3);
  *param_2 = *psVar14;
  uVar2 = psVar14[1];
  uVar7 = (uint)((short)iVar15 + 1 < (int)param_4);
  param_2[1] = uVar2;
  uVar3 = (int)psVar14 + 3U & 3;
  uVar10 = (uint)psVar14 & 3;
  uVar10 = (*(int *)(((int)psVar14 + 3U) - uVar3) << (3 - uVar3) * 8 |
           (uint)uVar2 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar10) * 8 |
           *(uint *)((int)psVar14 - uVar10) >> uVar10 * 8;
  puVar1 = local_2e + 1;
  uVar3 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar3) =
       *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | uVar10 >> (3 - uVar3) * 8;
  if (uVar7 == 0) {
    uVar3 = param_3 + 3 & 3;
    uVar7 = param_3 & 3;
    local_28._0_4_ =
         *(int *)((param_3 + 3) - uVar3) << (3 - uVar3) * 8 & -1 << (4 - uVar7) * 8 |
         *(uint *)(param_3 - uVar7) >> uVar7 * 8;
    puVar1 = local_28 + 3;
    uVar3 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar3) =
         *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 |
         (uint)local_28._0_4_ >> (3 - uVar3) * 8;
  }
  else {
    uVar3 = (int)psVar14 + 7U & 3;
    uVar4 = (uint)(psVar14 + 2) & 3;
    local_28._0_4_ =
         (*(int *)(((int)psVar14 + 7U) - uVar3) << (3 - uVar3) * 8 |
         uVar7 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar4) * 8 |
         *(uint *)((int)(psVar14 + 2) - uVar4) >> uVar4 * 8;
    puVar1 = local_28 + 3;
    uVar3 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar3) =
         *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 |
         (uint)local_28._0_4_ >> (3 - uVar3) * 8;
  }
  local_30 = (short)uVar10;
  if ((short)local_28._0_2_ < local_30) {
    sVar13 = local_30 - local_28._0_2_;
  }
  else {
    sVar13 = local_28._0_2_ - local_30;
  }
  local_2e._0_2_ = (undefined2)(uVar10 >> 0x10);
  if ((short)local_28._2_2_ < (short)local_2e._0_2_) {
    sVar12 = local_2e._0_2_ - local_28._2_2_;
  }
  else {
    sVar12 = local_28._2_2_ - local_2e._0_2_;
  }
  iVar11 = (int)sVar13;
  iVar9 = (int)sVar12;
  if (iVar11 < iVar9) {
    iVar16 = iVar9 * sVar5;
    iVar8 = (int)param_5;
    if (iVar8 == 0) {
      trap(0x1c00);
    }
    if ((iVar8 == -1) && (iVar16 == -0x80000000)) {
      trap(0x1800);
    }
    sVar5 = (short)(iVar16 / iVar8);
    if ((short)local_28._0_2_ < local_30) {
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (sVar5 * iVar11 == -0x80000000)) {
        trap(0x1800);
      }
      sVar13 = *(short *)(((iVar15 << 0x10) >> 0xe) + param_3) - (short)((sVar5 * iVar11) / iVar9);
    }
    else {
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (sVar5 * iVar11 == -0x80000000)) {
        trap(0x1800);
      }
      sVar13 = *(short *)(((iVar15 << 0x10) >> 0xe) + param_3) + (short)((sVar5 * iVar11) / iVar9);
    }
    *param_2 = sVar13;
    if ((short)local_28._2_2_ < (short)local_2e._0_2_) {
      sVar5 = param_2[1] - sVar5;
    }
    else {
      sVar5 = param_2[1] + sVar5;
    }
  }
  else {
    if (iVar11 == 0) {
      return;
    }
    iVar11 = iVar11 * sVar5;
    iVar9 = (int)param_5;
    if (iVar9 == 0) {
      trap(0x1c00);
    }
    if ((iVar9 == -1) && (iVar11 == -0x80000000)) {
      trap(0x1800);
    }
    sVar5 = (short)(iVar11 / iVar9);
    if ((short)local_28._0_2_ < local_30) {
      sVar6 = *param_2 - sVar5;
    }
    else {
      sVar6 = *param_2 + sVar5;
    }
    *param_2 = sVar6;
    if ((short)local_28._2_2_ < (short)local_2e._0_2_) {
      iVar11 = (int)sVar5 * (int)sVar12;
      iVar9 = (int)sVar13;
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (iVar11 == -0x80000000)) {
        trap(0x1800);
      }
      sVar5 = *(short *)(((iVar15 << 0x10) >> 0xe) + param_3 + 2) - (short)(iVar11 / iVar9);
    }
    else {
      iVar11 = (int)sVar5 * (int)sVar12;
      iVar9 = (int)sVar13;
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (iVar11 == -0x80000000)) {
        trap(0x1800);
      }
      sVar5 = *(short *)(((iVar15 << 0x10) >> 0xe) + param_3 + 2) + (short)(iVar11 / iVar9);
    }
  }
  param_2[1] = sVar5;
  return;
}



int FUN_800560a8(int param_1,int param_2,undefined4 param_3,undefined1 param_4,undefined1 param_5)

{
  InitEntitySprite(param_1,param_3,0x3c0,(int)*(short *)(param_2 + 8),
                   (int)((*(ushort *)(param_2 + 10) - 1) * 0x10000) >> 0x10,0);
  *(undefined **)(param_1 + 0x18) = &DAT_800116e8;
  *(int *)(param_1 + 0x100) = param_2;
  ClayballInitCallback(param_1,*(undefined2 *)(param_2 + 0xc),param_4,param_5);
  return param_1;
}



// Clayball Entity Init Callback - Entity Type 2
// 
// Initializes clayball entity on spawn.
// Sets up tick callback pointer to ClayballTickCallback @ 0x80056518.
// 
// Called during entity creation from Asset 501 data.
// 
// Referenced in: docs/reference/items.md, docs/reference/entity-types.md

void ClayballInitCallback
               (undefined4 *param_1,undefined2 param_2,undefined1 param_3,undefined1 param_4)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  u_short uVar4;
  uint uVar5;
  short *psVar6;
  int iVar7;
  short local_20;
  short local_1e;
  undefined4 local_1c;
  code *local_18;
  
  *(undefined2 *)(param_1 + 4) = 900;
  *(undefined2 *)((int)param_1 + 0x12) = 8;
  *(undefined2 *)(param_1 + 0x1c) = 0;
  *(undefined1 *)((int)param_1 + 0x111) = param_3;
  *(undefined1 *)(param_1 + 0x44) = param_4;
  *param_1 = 0xffff0000;
  param_1[1] = ClayballTickCallback;
  local_1c = 0xffff0000;
  local_18 = (code *)&LAB_80056718;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80056718;
  iVar7 = param_1[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar7 + 0x32),1,(int)*(short *)(iVar7 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar7 + 0x12) & 0xffffff00);
  iVar3 = g_GameStatePtr;
  *(u_short *)(iVar7 + 0x24) = uVar4;
  if ((*(int *)(iVar3 + 0x11c) == 0xc000) &&
     (uVar5 = GetLevelFlags(iVar3 + 0x84), (uVar5 >> 0xb & 1) == 0)) {
    FUN_8001c364(param_1);
  }
  *(undefined2 *)(param_1 + 0x48) = param_2;
  *(undefined1 *)((int)param_1 + 0x119) = 8;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  param_1[0x45] = 0;
  *(undefined1 *)(param_1 + 0x46) = 0;
  *(undefined2 *)(param_1 + 0x41) = *(undefined2 *)(param_1 + 0x1a);
  *(undefined2 *)((int)param_1 + 0x106) = *(undefined2 *)((int)param_1 + 0x6a);
  if (*(short *)(param_1 + 0x48) != 0) {
    FUN_800255c8(g_GameStatePtr,*(short *)(param_1 + 0x48),param_1 + 0x42,param_1 + 0x43);
    if (*(short *)(param_1 + 0x43) == 0) {
      *(undefined2 *)(param_1 + 0x48) = 0;
    }
    else {
      local_1c = 0xffff0000;
      local_18 = EntityCallback_80056888;
      param_1[7] = 0xffff0000;
      param_1[8] = EntityCallback_80056888;
      uVar5 = (int)*(short *)(param_1 + 0x43) * (uint)*(byte *)((int)param_1 + 0x119);
      if (uVar5 == 0) {
        trap(0x1c00);
      }
      *(short *)((int)param_1 + 0x10e) = (short)(*(uint *)(g_GameStatePtr + 0x10c) % uVar5);
      FUN_80055c70((int)param_1 + 0x10e,&local_20,param_1[0x42],(int)*(short *)(param_1 + 0x43),
                   *(undefined1 *)((int)param_1 + 0x119));
      *(short *)(param_1 + 0x1a) = *(short *)(param_1 + 0x41) + local_20;
      *(short *)((int)param_1 + 0x6a) = *(short *)((int)param_1 + 0x106) + local_1e;
    }
    psVar6 = (short *)param_1[0x42];
    if ((psVar6[*(short *)(param_1 + 0x43) * 2 + -2] == *psVar6) &&
       (psVar6[*(short *)(param_1 + 0x43) * 2 + -1] == psVar6[1])) {
      *(undefined1 *)(param_1 + 0x46) = 1;
      *(short *)(param_1 + 0x43) = *(short *)(param_1 + 0x43) + -1;
    }
    if (*(short *)(param_1 + 0x48) != 0) goto LAB_8005642c;
  }
  param_1[0x42] = 0;
  *(undefined2 *)(param_1 + 0x43) = 0;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)(param_1 + 0x41);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)((int)param_1 + 0x106);
LAB_8005642c:
  iVar3 = g_GameStatePtr;
  param_1[0x47] = 0;
  uVar1 = *(undefined1 *)(iVar3 + 0x128);
  uVar2 = *(undefined1 *)(iVar3 + 0x129);
  iVar7 = param_1[0xd];
  *(undefined1 *)(iVar7 + 0x34) = *(undefined1 *)(iVar3 + 0x127);
  *(undefined1 *)(iVar7 + 0x35) = uVar1;
  *(undefined1 *)(iVar7 + 0x36) = uVar2;
  FUN_80056478(param_1);
  return;
}



void FUN_80056478(int param_1)

{
  char cVar1;
  int iVar2;
  undefined1 local_18 [4];
  undefined1 auStack_14 [4];
  undefined1 local_10;
  undefined1 local_f;
  undefined1 local_e [6];
  
  iVar2 = *(int *)(param_1 + 0x100);
  if (iVar2 != 0) {
    cVar1 = CheckTriggerZoneCollision
                      (g_GameStatePtr,(int)*(short *)(iVar2 + 8),(int)*(short *)(iVar2 + 10),
                       local_18,auStack_14);
    if (cVar1 != '\0') {
      cVar1 = FUN_8007ee6c(g_GameStatePtr,local_18[0],&local_10,&local_f,local_e);
      if (cVar1 != '\0') {
        iVar2 = *(int *)(param_1 + 0x34);
        *(undefined1 *)(iVar2 + 0x34) = local_10;
        *(undefined1 *)(iVar2 + 0x35) = local_f;
        *(undefined1 *)(iVar2 + 0x36) = local_e[0];
      }
    }
  }
  return;
}



// Clayball Entity Tick Callback - Entity Type 2
// 
// Handles per-frame update for clayball (collectible coin) entities.
// Most common entity type with 5,727 instances across all levels.
// 
// COLLECTION FLOW:
// 1. Checks entity+0x110 flag
// 2. Calls CollisionCheckWrapper @ 0x8001b47c with type_mask=2
// 3. CheckEntityCollision uses special fast path for clayballs
// 4. Directly checks player at GameState+0x2c (optimization)
// 5. On collision: Calls GameState callback with message 3 (COLLECTED)
// 6. Clayball disappears, g_pPlayerState[0x12] increments (100  1up)
// 
// SPRITE ID: 0x09406d8a
// STORAGE: g_pPlayerState[0x12] (u8, orb/clay count)
// 
// Referenced in: docs/reference/items.md, docs/reference/entity-types.md

void ClayballTickCallback(int param_1)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  short unaff_s2;
  code *pcVar8;
  short unaff_s4;
  
  EntityUpdateCallback();
  if (*(char *)(param_1 + 0x110) == '\0') {
    if (*(char *)(param_1 + 0x111) == '\0') goto LAB_80056580;
    uVar7 = *(undefined4 *)(param_1 + 0x114);
    uVar6 = 0x1007;
  }
  else {
    uVar6 = 0x1000;
    uVar7 = 1;
  }
  CollisionCheckWrapper(param_1,2,uVar6,uVar7);
LAB_80056580:
  bVar1 = false;
  if ((*(int *)(param_1 + 0x100) != 0) && (cVar2 = FUN_8001b92c(param_1), cVar2 != '\0')) {
    cVar2 = FUN_8002453c(g_GameStatePtr,*(undefined4 *)(param_1 + 0x100));
    bVar1 = cVar2 != '\0';
  }
  if (bVar1) {
    *(byte *)(*(int *)(param_1 + 0x100) + 0x16) = *(byte *)(*(int *)(param_1 + 0x100) + 0x16) & 0xfe
    ;
    iVar4 = g_GameStatePtr;
    *(undefined4 *)(param_1 + 0x100) = 0;
    iVar5 = (int)*(short *)(iVar4 + 10);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar8 = *(code **)(iVar4 + 0xc);
      }
      else {
        iVar3 = iVar5 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar8 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(iVar4 + 8);
      if (0 < iVar5 << 0x10) {
        iVar3 = unaff_s2 + iVar3;
      }
      (*pcVar8)(iVar4 + iVar3,3,0,param_1);
    }
    iVar4 = *(int *)(param_1 + 0x11c);
    if (iVar4 != 0) {
      iVar5 = (int)*(short *)(iVar4 + 10);
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar8 = *(code **)(iVar4 + 0xc);
        }
        else {
          iVar3 = iVar5 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
          unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar4 + 8);
        if (0 < iVar5 << 0x10) {
          iVar3 = unaff_s4 + iVar3;
        }
        (*pcVar8)(iVar4 + iVar3,0x1009,0,param_1);
      }
      *(undefined4 *)(param_1 + 0x11c) = 0;
    }
  }
  return;
}



void EntityCallback_80056888(int param_1)

{
  int iVar1;
  short local_10;
  short local_e;
  
  *(short *)(param_1 + 0x10e) = *(short *)(param_1 + 0x10e) + 1;
  FUN_80055c70(param_1 + 0x10e,&local_10,*(undefined4 *)(param_1 + 0x108),
               (int)*(short *)(param_1 + 0x10c),*(undefined1 *)(param_1 + 0x119));
  *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x104) + local_10;
  *(int *)(param_1 + 0x114) =
       (((int)*(short *)(param_1 + 0x106) + (int)local_e) - (int)*(short *)(param_1 + 0x6a)) *
       0x10000;
  *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x106) + local_e;
  if (((*(char *)(param_1 + 0x118) != '\0') &&
      (iVar1 = *(short *)(param_1 + 0x10c) * 4 + *(int *)(param_1 + 0x108),
      local_10 == *(short *)(iVar1 + -4))) && (local_e == *(short *)(iVar1 + -2))) {
    *(undefined2 *)(param_1 + 0x10e) = 0;
  }
  return;
}



void FUN_80058310(undefined4 *param_1,undefined4 param_2,short param_3,short param_4,
                 undefined4 param_5,undefined1 param_6)

{
  InitEntitySprite(param_1,param_2,0x3c0,(int)param_3,(int)param_4,0);
  param_1[6] = &DAT_800116e8;
  param_1[0x40] = 0;
  ClayballInitCallback(param_1,0,0,0);
  param_1[6] = &DAT_80011668;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800584a8;
  param_1[2] = 0xffff0000;
  param_1[3] = &DAT_800586b4;
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_8005894c;
  *(undefined1 *)(param_1 + 0x4b) = param_6;
  *(undefined2 *)(param_1 + 0x43) = 0x20;
  *(undefined1 *)(param_1 + 5) = 0;
  *(undefined1 *)((int)param_1 + 0x122) = 0;
  param_1[0x4a] = 0;
  param_1[0x49] = param_5;
  *(undefined2 *)(param_1 + 0x41) = *(undefined2 *)(param_1 + 0x1a);
  param_1[0x42] = &DAT_8009c0f4;
  *(undefined2 *)((int)param_1 + 0x106) = *(undefined2 *)((int)param_1 + 0x6a);
  *(ushort *)((int)param_1 + 0x10e) =
       ((ushort)*(byte *)(param_1 + 0x4b) + (*(byte *)(param_1 + 0x4b) / 3) * -3 & 0xff) *
       (short)((int)((int)*(short *)(param_1 + 0x43) * (uint)*(byte *)((int)param_1 + 0x119)) / 3);
  return;
}



int FUN_80058a00(int param_1,int param_2,undefined4 param_3,undefined1 param_4)

{
  InitEntitySprite(param_1,param_3,0x3c0,(int)*(short *)(param_2 + 8),
                   (int)((*(ushort *)(param_2 + 10) - 1) * 0x10000) >> 0x10,0);
  *(undefined **)(param_1 + 0x18) = &DAT_800116e8;
  *(int *)(param_1 + 0x100) = param_2;
  ClayballInitCallback(param_1,*(undefined2 *)(param_2 + 0xc),param_4,0);
  *(undefined **)(param_1 + 0x18) = &DAT_80011648;
  *(undefined1 *)(param_1 + 0x11a) = 0;
  *(undefined4 *)(param_1 + 0x124) = 0;
  FUN_80058b94(param_1);
  return param_1;
}



void FUN_80058b94(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  
  if (*(int *)(param_1 + 0x11c) != 0) {
    RemoveEntityFromAllLists(g_GameStatePtr);
    *(undefined4 *)(param_1 + 0x11c) = 0;
  }
  iVar1 = *(int *)(param_1 + 0x124);
  if (iVar1 != 0) {
    iVar3 = (int)*(short *)(iVar1 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar4 = *(code **)(iVar1 + 0xc);
      }
      else {
        iVar2 = iVar3 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar4 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 8);
      if (0 < iVar3 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar4)(iVar1 + iVar2,0x1006,0,param_1);
    }
    *(undefined4 *)(param_1 + 0x124) = 0;
  }
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(undefined1 **)(param_1 + 0xc) = &LAB_80058b50;
  FUN_8001d1c0(param_1,(int)*(short *)(param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(*(int *)(param_1 + 0x34) + 10) = 0;
  return;
}



void FUN_80058cc4(int param_1)

{
  undefined1 *puVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  short sVar5;
  short sVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  undefined4 uVar10;
  int iVar11;
  short unaff_s2;
  code *pcVar12;
  short unaff_s4;
  undefined4 local_40;
  undefined1 local_34 [4];
  undefined1 *local_30;
  
  sVar5 = *(short *)(*(int *)(param_1 + 0x100) + 0x12);
  if (sVar5 == 0x5a) {
    uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
    uVar10 = 0x222222d8;
  }
  else if (sVar5 == 0x5b) {
    uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
    uVar10 = 0x82e03d8;
  }
  else {
    uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
    uVar10 = 0x262e0319;
  }
  uVar7 = FUN_800437ac(uVar7,uVar10,0x2ee);
  *(undefined4 *)(param_1 + 0x11c) = uVar7;
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x11c));
  *(int *)(*(int *)(param_1 + 0x11c) + 0x100) = param_1;
  iVar9 = *(int *)(param_1 + 0x128);
  iVar11 = (int)*(short *)(iVar9 + 0x26);
  sVar5 = *(short *)(iVar9 + 0x68);
  if (iVar11 != 0) {
    if (iVar11 < 1) {
      pcVar12 = *(code **)(iVar9 + 0x28);
    }
    else {
      iVar8 = iVar11 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar8 + -8);
      pcVar12 = *(code **)(iVar8 + -4);
    }
    iVar8 = (int)*(short *)(iVar9 + 0x24);
    if (0 < iVar11 << 0x10) {
      iVar8 = unaff_s2 + iVar8;
    }
    sVar5 = (*pcVar12)(iVar9 + iVar8,(int)sVar5);
  }
  iVar9 = *(int *)(param_1 + 0x128);
  iVar11 = (int)*(short *)(iVar9 + 0x2e);
  sVar6 = *(short *)(iVar9 + 0x6a);
  if (iVar11 != 0) {
    if (iVar11 < 1) {
      pcVar12 = *(code **)(iVar9 + 0x30);
    }
    else {
      iVar8 = iVar11 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar8 + -8);
      pcVar12 = *(code **)(iVar8 + -4);
    }
    iVar8 = (int)*(short *)(iVar9 + 0x2c);
    if (0 < iVar11 << 0x10) {
      iVar8 = unaff_s4 + iVar8;
    }
    sVar6 = (*pcVar12)(iVar9 + iVar8,(int)sVar6);
  }
  local_40 = CONCAT22(sVar6 + 4,sVar5 + 4);
  iVar9 = *(int *)(param_1 + 0x11c);
  puVar1 = local_34 + 3;
  uVar2 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar2) =
       *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 | local_40 >> (3 - uVar2) * 8;
  uVar2 = iVar9 + 0x10f;
  uVar3 = uVar2 & 3;
  puVar4 = (uint *)(uVar2 - uVar3);
  *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | local_40 >> (3 - uVar3) * 8;
  uVar2 = iVar9 + 0x10c;
  uVar3 = uVar2 & 3;
  puVar4 = (uint *)(uVar2 - uVar3);
  *puVar4 = *puVar4 & 0xffffffffU >> (4 - uVar3) * 8 | local_40 << uVar3 * 8;
  *(undefined1 *)(*(int *)(param_1 + 0x11c) + 0x111) = *(undefined1 *)(param_1 + 0x11a);
  local_34 = (undefined1  [4])0xffff0000;
  local_30 = &LAB_80058aac;
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(undefined1 **)(param_1 + 0xc) = &LAB_80058aac;
  FUN_8001d1c0(param_1,0xffffffff);
  EntitySetRenderFlags(param_1,1);
  *(undefined1 *)(*(int *)(param_1 + 0x34) + 10) = 1;
  return;
}



void CreatePlayerEntity(undefined4 *param_1,undefined4 param_2,short param_3,short param_4,
                       char param_5)

{
  undefined1 uVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  short sVar6;
  undefined *puVar7;
  uint uVar8;
  
  InitEntityWithSprite(param_1,&DAT_8009c174,1000,(int)param_3,(int)param_4);
  param_1[6] = &DAT_80011804;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  param_1[0x5d] = 0xffffffff;
  param_1[7] = 0xffff0000;
  param_1[8] = ApplyEntityPositionUpdate;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[9] = 0xffff0000;
  param_1[10] = ScaleXByEntityScale;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = ScaleYByEntityScale;
  uVar2 = 0x8000;
  if (g_pPlayerState[0x18] == '\0') {
    uVar2 = *(undefined4 *)(g_GameStatePtr + 0x11c);
  }
  param_1[0x16] = uVar2;
  iVar3 = param_1[0x16];
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)*(short *)(param_1 + 0x1a) << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  param_1[0x17] = param_1[0x16];
  iVar5 = param_1[0x17];
  iVar4 = (int)*(short *)((int)param_1 + 0x6a) << 0x10;
  uVar8 = iVar4 / iVar5;
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && (iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  param_1[0x15] = param_1[0x16];
  param_1[0x14] = param_1[0x16];
  *(short *)(param_1 + 0x1a) = (short)(((int)*(short *)(param_1 + 0x1a) << 0x10) / iVar3);
  sVar6 = (short)uVar8;
  *(short *)((int)param_1 + 0x6a) = sVar6;
  if ((param_1[0x16] == 0xc000) && ((uVar8 & 3) - 1 < 2)) {
    *(short *)((int)param_1 + 0x6a) = sVar6 + 1;
  }
  InitPlayerSpriteAvailability(param_1);
  *(undefined1 *)((int)param_1 + 0x1b3) = 0xff;
  *(undefined1 *)((int)param_1 + 0x1ae) = 0;
  *(undefined1 *)((int)param_1 + 0x1af) = 0;
  *(undefined1 *)(param_1 + 0x6c) = 0;
  *(undefined1 *)((int)param_1 + 0x1b1) = 0;
  *(undefined1 *)(param_1 + 0x5e) = 0;
  *(undefined1 *)((int)param_1 + 0x1b2) = 0;
  *(undefined1 *)(param_1 + 0x4a) = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  *(undefined1 *)(param_1 + 0x4d) = 0;
  *(undefined1 *)((int)param_1 + 0x135) = 0;
  iVar3 = g_GameStatePtr;
  *(undefined2 *)((int)param_1 + 0x1a6) = 0;
  *(undefined2 *)(param_1 + 0x6a) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  param_1[0x45] = 0;
  param_1[0x46] = 0;
  *(undefined2 *)(param_1 + 0x58) = 0;
  *(undefined2 *)((int)param_1 + 0x162) = 0;
  param_1[0x4b] = 0;
  *(undefined2 *)((int)param_1 + 0x136) = 0;
  param_1[0x2d] = 0;
  param_1[0x2e] = 0;
  *(undefined1 *)((int)param_1 + 0x15d) = *(undefined1 *)(iVar3 + 0x124);
  *(undefined1 *)((int)param_1 + 0x15e) = *(undefined1 *)(g_GameStatePtr + 0x125);
  uVar1 = *(undefined1 *)(g_GameStatePtr + 0x126);
  *(undefined1 *)((int)param_1 + 0x17d) = 0;
  *(undefined1 *)((int)param_1 + 0x15f) = uVar1;
  param_1[0x50] = 0;
  *(undefined1 *)((int)param_1 + 0x159) = 0;
  *(undefined1 *)(param_1 + 0x59) = 0;
  iVar3 = g_GameStatePtr;
  *(undefined2 *)(param_1 + 0x51) = 0;
  param_1[0x53] = 0;
  *(undefined2 *)((int)param_1 + 0x156) = 0;
  if (*(char *)(iVar3 + 0x161) == '\0') {
    uVar2 = null_FFFF0000h_800a5d30;
    puVar7 = PTR_PlayerStateCallback_2_800a5d34;
    if (param_5 != '\0') {
      uVar2 = null_FFFF0000h_800a5d28;
      puVar7 = PTR_PlayerStateCallback_1_800a5d2c;
    }
  }
  else {
    uVar1 = *(undefined1 *)(iVar3 + 0x198);
    *(undefined1 *)((int)param_1 + 0x1b3) = uVar1;
    SetGameMode(uVar1);
    puVar7 = PTR_PlayerStateCallback_0_800a5d24;
    uVar2 = null_FFFF0000h_800a5d20;
    iVar3 = g_GameStatePtr;
    *(undefined1 *)((int)param_1 + 0x15d) = *(undefined1 *)(g_GameStatePtr + 0x199);
    *(undefined1 *)((int)param_1 + 0x15e) = *(undefined1 *)(iVar3 + 0x19a);
    *(undefined1 *)((int)param_1 + 0x15f) = *(undefined1 *)(iVar3 + 0x19b);
  }
  EntitySetState(param_1,uVar2,puVar7);
  puVar7 = g_pPlayerState;
  param_1[0x5a] = 0;
  if ((puVar7[0x17] & 1) != 0) {
    uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x30,1,0);
    uVar2 = CreateHaloEntity(uVar2,param_1);
    iVar3 = g_GameStatePtr;
    param_1[0x5a] = uVar2;
    AddToZOrderList(iVar3);
    AddToXPositionList(g_GameStatePtr,*(undefined4 *)(param_1[0x5a] + 0x24));
  }
  param_1[0x5b] = 0;
  *(undefined1 *)(param_1 + 0x5c) = 0;
  param_1[0x68] = 0;
  return;
}



void InitPlayerSpriteAvailability(int param_1)

{
  undefined1 *puVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  short sVar6;
  undefined1 auStack_38 [12];
  uint uStack_2c;
  undefined1 local_20 [8];
  undefined1 auStack_18 [8];
  
  puVar5 = &null_48608484h_8009c3a8;
  *(undefined1 *)(param_1 + 0x19d) = 0xff;
  *(undefined1 *)(param_1 + 0x19c) = 0;
  for (sVar6 = 0; sVar6 < 7; sVar6 = sVar6 + 1) {
    FUN_8007bbec(auStack_38,*puVar5);
    puVar1 = local_20 + 3;
    uVar3 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar3) =
         *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | uStack_2c >> (3 - uVar3) * 8;
    local_20._0_4_ = uStack_2c;
    uVar4 = local_20._0_4_;
    local_20._0_2_ = (undefined2)uStack_2c;
    bVar2 = false;
    if (local_20._0_2_ != 0) {
      puVar1 = auStack_18 + 3;
      uVar3 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar3) =
           *(uint *)(puVar1 + -uVar3) & -1 << (uVar3 + 1) * 8 | uStack_2c >> (3 - uVar3) * 8;
      auStack_18._0_4_ = uStack_2c;
      auStack_18._2_2_ = (undefined2)(uStack_2c >> 0x10);
      bVar2 = auStack_18._2_2_ != 0;
      auStack_18._0_4_ = uVar4;
    }
    if (bVar2) {
      *(undefined4 *)((uint)*(byte *)(param_1 + 0x19c) * 4 + param_1 + 0x180) = *puVar5;
      *(char *)(param_1 + 0x19c) = *(char *)(param_1 + 0x19c) + '\x01';
    }
    puVar5 = puVar5 + 1;
    local_20._0_4_ = uVar4;
  }
  return;
}



bool CheckWallCollision(int param_1,char param_2)

{
  bool bVar1;
  int iVar2;
  char local_18;
  char local_17;
  char local_16;
  char local_15 [5];
  
  iVar2 = 2;
  if (param_2 != '\0') {
    iVar2 = -2;
  }
  local_18 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar2) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
  local_17 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar2) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  local_16 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar2) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  local_15[0] = EntityApplyMovementCallbacks
                          (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar2) * 0x10000) >>
                                   0x10,
                           (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  FUN_8005a5c4(param_1,&local_18);
  FUN_8005a5c4(param_1,&local_17);
  FUN_8005a5c4(param_1,&local_16);
  FUN_8005a5c4(param_1,local_15);
  bVar1 = false;
  if (((local_18 != 'e') && (bVar1 = false, local_17 != 'e')) && (bVar1 = false, local_16 != 'e')) {
    bVar1 = local_15[0] != 'e';
  }
  return bVar1;
}



int FUN_80059e3c(int param_1,ushort param_2,short param_3)

{
  int iVar1;
  int iVar2;
  code *pcVar3;
  uint uVar4;
  
  iVar2 = (int)*(short *)(param_1 + 0x2e);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      param_3 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar2 << 0x10) {
      iVar1 = param_3 + iVar1;
    }
    param_2 = (*pcVar3)(param_1 + iVar1,(int)(short)param_2);
  }
  iVar2 = *(int *)(param_1 + 0x5c);
  uVar4 = (int)((uint)(param_2 & 0xfff0) << 0x10) / iVar2;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && ((param_2 & 0xfff0) == 0x8000)) {
    trap(0x1800);
  }
  iVar2 = uVar4 << 0x10;
  if ((*(int *)(param_1 + 0x58) == 0xc000) && (iVar2 = uVar4 << 0x10, (uVar4 & 3) - 1 < 2)) {
    iVar2 = (uVar4 + 1) * 0x10000;
  }
  return iVar2 >> 0x10;
}



int FUN_8005a028(int param_1,uint param_2,short param_3)

{
  int iVar1;
  int iVar2;
  code *pcVar3;
  uint uVar4;
  
  iVar2 = (int)*(short *)(param_1 + 0x26);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar2 << 0x10) {
      iVar1 = param_3 + iVar1;
    }
    param_2 = (*pcVar3)(param_1 + iVar1,(int)(short)param_2);
  }
  iVar1 = *(int *)(param_1 + 0x58);
  iVar2 = ((param_2 & 0xfffffff0) + 0x10) * 0x10000;
  uVar4 = iVar2 / iVar1;
  if (iVar1 == 0) {
    trap(0x1c00);
  }
  if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
    trap(0x1800);
  }
  iVar2 = uVar4 << 0x10;
  if ((iVar1 == 0xc000) && (iVar2 = uVar4 << 0x10, (uVar4 & 3) - 1 < 2)) {
    iVar2 = (uVar4 + 1) * 0x10000;
  }
  return iVar2 >> 0x10;
}



// Player Position Update With Collision
// 
// Applies movement callbacks and adjusts player position based on collision
// results. Called from PlayerCallback_HandleMovementAndCollision after
// EntityApplyMovementCallbacks returns collision type.
// 
// Processes entity offsets:
//   +0x2e, +0x30: Movement callback chain (vertical)
//   +0x26, +0x28: Movement callback chain (horizontal)
//   +0x24, +0x2c: Base offsets for callbacks
//   +0x5c, +0x58: Division factors for position calculation
// 
// Returns adjusted Y position based on collision surface height.

int PlayerApplyPositionWithCollision(int param_1,undefined1 param_2,short param_3,uint param_4)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short unaff_s2;
  
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_4 = (*pcVar4)(param_1 + iVar1,(int)(short)param_4);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar4)(param_1 + iVar1,(int)param_3);
  }
  uVar2 = FUN_80081c0c(g_GameStatePtr,param_2,(int)param_3);
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar1 = ((param_4 | 0xf) - (uVar2 & 0xff)) * 0x10000;
  uVar2 = iVar1 / iVar3;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  iVar3 = uVar2 << 0x10;
  if ((*(int *)(param_1 + 0x58) == 0xc000) && (iVar3 = uVar2 << 0x10, (uVar2 & 3) - 1 < 2)) {
    iVar3 = (uVar2 + 1) * 0x10000;
  }
  return iVar3 >> 0x10;
}



bool FUN_8005a3f8(int param_1,undefined1 param_2,short param_3,uint param_4,ushort param_5)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short unaff_s2;
  
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_4 = (*pcVar4)(param_1 + iVar1,(int)(short)param_4);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar4)(param_1 + iVar1,(int)param_3);
  }
  uVar2 = FUN_80081c0c(g_GameStatePtr,param_2,(int)param_3);
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar1 = ((param_4 | 0xf) - (uVar2 & 0xff)) * 0x10000;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  return ((uint)param_5 - iVar1 / iVar3 & 0xffff) < 10;
}



undefined4 FUN_8005a5c4(int param_1,char *param_2)

{
  char cVar1;
  undefined4 uVar2;
  
  cVar1 = *param_2;
  if (((((byte)(cVar1 + 0x4bU) < 3) || (cVar1 == -0x37)) || (cVar1 == -0x35)) ||
     (uVar2 = 0, (byte)(cVar1 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      uVar2 = 1;
    }
    else {
      *param_2 = 'e';
      uVar2 = 0;
    }
  }
  return uVar2;
}



// Player Bounce Collision Handler
// 
// Processes collision type byte from EntityApplyMovementCallbacks and triggers
// appropriate bounce state transitions based on the surface type.
// 
// Collision values that trigger bounces:
//   0xDE (-0x22): Primary bouncy surface (spawns particle if level flag set)
//   0xDF (-0x21): Alternate bouncy surface
//   0xDD (-0x23): Alternate bouncy surface 2
//   0xB5 (-0x4b), 0xB6 (-0x4a), 0xB7 (-0x49): Other collision types
//   0xC9 (-0x37), 0xCB (-0x35): Additional surface types
// 
// When player is dead (g_pPlayerState[0x17] & 1 == 0):
//   - Checks player_entity+0x144 for bounced entity reference
//   - Transitions to appropriate death state
// 
// When player is alive:
//   - Calls EntitySetState with collision-specific bounce callback
//   - Primary bounce (0xDE) -> PlayerBounceCallback_Primary @ 0x8006AD34

void PlayerProcessBounceCollision(int param_1,char param_2)

{
  uint uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined *puVar4;
  
  if ((param_2 == -0x22) &&
     (uVar1 = GetLevelFlags(g_GameStatePtr + 0x84), (uVar1 & 0xffff) >> 0xf != 0)) {
    uVar3 = *(undefined4 *)(param_1 + 0x68);
    uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
    uVar3 = InitParticleEntity(uVar2,0x2e2414,uVar3,*(undefined1 *)(param_1 + 0x74),
                               *(undefined4 *)(param_1 + 0x58),0x3e9,0);
    AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
  }
  if ((g_pPlayerState[0x17] & 1) == 0) {
    uVar3 = null_FFFF0000h_800a5d80;
    puVar4 = PTR_PlayerState_Death_800a5d84;
    if (*(short *)(param_1 + 0x144) != 0) {
      uVar3 = null_FFFF0000h_800a5d78;
      puVar4 = PTR_Callback_8006c95c_800a5d7c;
    }
  }
  else {
    switch(param_2) {
    case -0x4b:
      uVar3 = null_FFFF0000h_800a5d38;
      puVar4 = PTR_PlayerStateCallback_3_800a5d3c;
      break;
    case -0x4a:
      uVar3 = null_FFFF0000h_800a5d40;
      puVar4 = PTR_Callback_8006ae58_800a5d44;
      break;
    case -0x49:
      uVar3 = null_FFFF0000h_800a5d48;
      puVar4 = PTR_Callback_8006ae94_800a5d4c;
      break;
    default:
      goto switchD_8005a724_caseD_b8;
    case -0x37:
      uVar3 = null_FFFF0000h_800a5d50;
      puVar4 = PTR_Callback_8006adbc_800a5d54;
      break;
    case -0x35:
      uVar3 = null_FFFF0000h_800a5d58;
      puVar4 = PTR_PlayerState_QuickTurn_800a5d5c;
      break;
    case -0x23:
      uVar3 = null_FFFF0000h_800a5d60;
      puVar4 = PTR_Callback_8006ad70_800a5d64;
      break;
    case -0x22:
      uVar3 = null_FFFF0000h_800a5d68;
      puVar4 = PTR_PlayerBounceCallback_Primary_800a5d6c;
      break;
    case -0x21:
      uVar3 = null_FFFF0000h_800a5d70;
      puVar4 = PTR_Callback_8006af28_800a5d74;
    }
  }
  EntitySetState(param_1,uVar3,puVar4);
switchD_8005a724_caseD_b8:
  return;
}



void PlayerProcessTileCollision(int param_1,undefined4 param_2,short param_3)

{
  bool bVar1;
  char cVar2;
  short sVar3;
  short sVar4;
  undefined2 uVar5;
  int iVar6;
  undefined4 uVar7;
  uint uVar8;
  int iVar9;
  code *pcVar10;
  short unaff_s2;
  uint local_30;
  undefined1 local_2c [20];
  
  bVar1 = false;
  if (*(short *)(param_1 + 0xa2) == -1) {
    bVar1 = *(code **)(param_1 + 0xa4) == Callback_80069ef4;
  }
  if (bVar1) {
    return;
  }
  iVar9 = (int)*(short *)(param_1 + 0x26);
  sVar3 = *(short *)(param_1 + 0x68);
  if (iVar9 != 0) {
    if (iVar9 < 1) {
      pcVar10 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar6 = iVar9 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar10 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar9 << 0x10) {
      iVar6 = param_3 + iVar6;
    }
    sVar3 = (*pcVar10)(param_1 + iVar6,(int)sVar3);
  }
  iVar9 = (int)*(short *)(param_1 + 0x2e);
  sVar4 = *(short *)(param_1 + 0x6a);
  if (iVar9 != 0) {
    if (iVar9 < 1) {
      pcVar10 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar6 = iVar9 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar10 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar9 << 0x10) {
      iVar6 = unaff_s2 + iVar6;
    }
    sVar4 = (*pcVar10)(param_1 + iVar6,(int)sVar4);
  }
  cVar2 = CheckTriggerZoneCollision(g_GameStatePtr,(int)sVar3,(int)sVar4,&local_30,local_2c);
  if (cVar2 == '\0') {
    return;
  }
  switch(local_30) {
  case 0:
    *(undefined1 *)(g_GameStatePtr + 0x148) = local_2c[0];
    break;
  default:
    uVar8 = local_30 - 0x32 & 0xff;
    if (local_30 - 0x32 < 10) {
      if (g_pPlayerState[uVar8 + 6] == '\0') {
        g_pPlayerState[uVar8 + 6] = 1;
        FUN_8001c4a4(param_1,0x7003474c);
      }
    }
    else if (*(char *)(param_1 + 0x1ae) == '\0') {
      FUN_8007ee6c(g_GameStatePtr,local_30 & 0xff,param_1 + 0x15d,param_1 + 0x15e,param_1 + 0x15f);
    }
    break;
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
    if ((local_30 - 2 & 0xff) != (uint)*(byte *)(param_1 + 0x1b3)) {
      SetGameMode();
      *(char *)(param_1 + 0x1b3) = (char)(local_30 - 2);
      if ((((-1 < *(int *)(param_1 + 0x174)) && (*(short *)(param_1 + 0xa2) == -1)) &&
          (*(code **)(param_1 + 0xa4) == PlayerState_Jump)) &&
         (*(int *)(param_1 + 0xcc) == 0x92b8480)) {
        uVar7 = PlaySoundEffect(0x248e52,0xa0,0);
        FUN_8007c7b8(*(undefined4 *)(param_1 + 0x174));
        *(undefined4 *)(param_1 + 0x174) = uVar7;
      }
    }
    break;
  case 0x2a:
    bVar1 = false;
    if (((*(short *)(param_1 + 0xa2) == -1) && (*(code **)(param_1 + 0xa4) == PlayerState_Falling))
       || ((*(short *)(param_1 + 0xa2) == -1 && (*(code **)(param_1 + 0xa4) == PlayerState_Jump))))
    {
      bVar1 = true;
    }
    if (bVar1) {
      EntitySetState(param_1,null_FFFF0000h_800a5d88,PTR_Callback_800682a4_800a5d8c);
    }
    break;
  case 0x3d:
    *(undefined2 *)(param_1 + 0x160) = 0xffff;
    break;
  case 0x3e:
    *(undefined2 *)(param_1 + 0x160) = 1;
    break;
  case 0x3f:
    cVar2 = *(char *)(param_1 + 0x170);
    uVar5 = 0xfffe;
    goto LAB_8005ab68;
  case 0x40:
    cVar2 = *(char *)(param_1 + 0x170);
    uVar5 = 2;
LAB_8005ab68:
    *(undefined2 *)(param_1 + 0x160) = uVar5;
    if (cVar2 != '\0') {
      *(undefined2 *)(param_1 + 0x162) = 0xffff;
    }
    break;
  case 0x41:
    *(undefined2 *)(param_1 + 0x162) = 0xfffc;
    break;
  case 0x51:
    FUN_80025664(g_GameStatePtr,1);
    *(undefined2 *)(param_1 + 0x1a6) = 1;
    break;
  case 0x52:
    FUN_800256b8(g_GameStatePtr,1);
    *(undefined2 *)(param_1 + 0x1a8) = 1;
    break;
  case 0x65:
    FUN_80025664(g_GameStatePtr,0);
    *(undefined2 *)(param_1 + 0x1a6) = 0;
    break;
  case 0x66:
    FUN_800256b8(g_GameStatePtr,0);
    *(undefined2 *)(param_1 + 0x1a8) = 0;
    break;
  case 0x79:
    FUN_80025664(g_GameStatePtr,2);
    *(undefined2 *)(param_1 + 0x1a6) = 2;
    break;
  case 0x7a:
    FUN_800256b8(g_GameStatePtr,2);
    *(undefined2 *)(param_1 + 0x1a8) = 2;
  }
  return;
}



void FUN_8005ad54(int param_1)

{
  short sVar1;
  short sVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  short local_10;
  
  local_10 = *(short *)(param_1 + 0x68) + 0x14;
  if (*(char *)(param_1 + 0x74) != '\0') {
    local_10 = *(short *)(param_1 + 0x68) + -0x14;
  }
  sVar1 = *(short *)(param_1 + 0x6a);
  sVar2 = *(short *)(param_1 + 0x136);
  if (*(char *)(param_1 + 0x1b1) == '\0') {
    uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
    uVar4 = 0xca1b20cb;
  }
  else {
    uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
    uVar4 = 0x3d348056;
  }
  uVar3 = FUN_8004f520(uVar3,(int)local_10,(int)(short)(sVar1 + sVar2),
                       *(undefined1 *)(param_1 + 0x74),*(undefined4 *)(param_1 + 0x58),uVar4);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
  g_pPlayerState[0x13] = g_pPlayerState[0x13] + -1;
  return;
}



void FUN_8005afcc(int param_1,int param_2,int param_3)

{
  short sVar1;
  int iVar2;
  undefined4 uVar3;
  undefined *puVar4;
  short local_20;
  short local_1e;
  short local_1c;
  undefined1 auStack_18 [6];
  short local_12;
  
  FUN_8001a448(param_2,&local_20);
  FUN_8001a448(param_1,auStack_18);
  iVar2 = param_3 >> 0x10;
  if (*(int *)(param_1 + 0x58) == 0x8000) {
    iVar2 = (param_3 << 1) >> 0x10;
  }
  if (((((int)local_1e - (iVar2 + -0xd) < (int)local_12) &&
       (sVar1 = *(short *)(param_1 + 0x68), local_20 <= sVar1)) && (sVar1 <= local_1c)) &&
     (*(char *)(param_1 + 0x128) == '\0')) {
    if ((g_pPlayerState[0x17] & 1) == 0) {
      uVar3 = null_FFFF0000h_800a5d80;
      puVar4 = PTR_PlayerState_Death_800a5d84;
      if (*(short *)(param_1 + 0x144) != 0) {
        uVar3 = null_FFFF0000h_800a5d78;
        puVar4 = PTR_Callback_8006c95c_800a5d7c;
      }
    }
    else {
      uVar3 = null_FFFF0000h_800a5d50;
      puVar4 = PTR_Callback_8006adbc_800a5d54;
      if (sVar1 < *(short *)(param_2 + 0x68)) {
        uVar3 = null_FFFF0000h_800a5d58;
        puVar4 = PTR_PlayerState_QuickTurn_800a5d5c;
      }
    }
    EntitySetState(param_1,uVar3,puVar4);
  }
  return;
}



void FUN_8005b1c4(int param_1,undefined4 param_2)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined4 uVar3;
  int iVar4;
  undefined4 local_20;
  
  local_20 = CONCAT22(*(short *)(param_1 + 0x6a) + (ushort)*(byte *)(param_1 + 0x1a4),
                      *(undefined2 *)(param_1 + 0x68));
  uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  iVar4 = InitParticleEntity(uVar3,param_2,local_20,*(undefined1 *)(param_1 + 0x74),
                             *(undefined4 *)(param_1 + 0x58),0x3e9,0);
  *(int *)(param_1 + 0x1a0) = iVar4;
  *(int *)(iVar4 + 0x104) = param_1;
  uVar1 = *(undefined1 *)(param_1 + 0x15b);
  uVar2 = *(undefined1 *)(param_1 + 0x15c);
  iVar4 = *(int *)(*(int *)(param_1 + 0x1a0) + 0x34);
  *(undefined1 *)(iVar4 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
  *(undefined1 *)(iVar4 + 0x35) = uVar1;
  *(undefined1 *)(iVar4 + 0x36) = uVar2;
  if (*(short *)(param_1 + 0x144) == 0) {
    *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x1a0) + 0x34) + 0x38) = 0;
  }
  else {
    *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x1a0) + 0x34) + 0x38) = 1;
  }
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x1a0));
  return;
}



void FUN_8005b2d4(int param_1,char param_2)

{
  undefined4 uVar1;
  int iVar2;
  u_short uVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  
  if (param_2 != '\0') {
    FUN_8001c4a4(param_1,0x5860c640);
  }
  uVar4 = GetLevelFlags(g_GameStatePtr + 0x84);
  if ((uVar4 >> 0xe & 1) != 0) {
    uVar1 = *(undefined4 *)(param_1 + 0x68);
    uVar5 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
    iVar6 = InitParticleEntity(uVar5,0x422a0225,uVar1,*(undefined1 *)(param_1 + 0x74),
                               *(undefined4 *)(param_1 + 0x58),0x3d4,0);
    iVar7 = *(int *)(iVar6 + 0x34);
    uVar3 = GetTPage((uint)*(byte *)(iVar7 + 0x32),1,(int)*(short *)(iVar7 + 0x10) & 0xffffffc0,
                     (int)*(short *)(iVar7 + 0x12) & 0xffffff00);
    iVar2 = g_GameStatePtr;
    *(u_short *)(iVar7 + 0x24) = uVar3;
    AddEntityToSortedRenderList(iVar2,iVar6);
  }
  return;
}



// Applies random RGB color effect to entity (Tinted Klaymen cheat).
// 
// Called from CheckCheatCodeInput @ 0x800820B4 case 0x10 when "Tinted Klaymen" cheat code is
// activated.
// 
// Cheat Name: "Tinted Klaymen" (rainbow/random color effect)
// Button Sequence: Pause, then L2, Circle, Circle, Left, Select, L2, Up, Down
// 
// Algorithm:
// 1. Generates 3 random bytes using rand():
//    - entity+0x15D = rand() & 0xFF (R component)
//    - entity+0x15E = rand() & 0xFF (G component)
//    - entity+0x15F = rand() & 0xFF (B component)
// 2. Sets effect enable flag:
//    - entity+0x1AE = 1
// 
// Parameters:
// - param_1: Entity pointer (typically player entity)
// 
// Entity Structure:
// - +0x15D: Red color component (byte)
// - +0x15E: Green color component (byte)
// - +0x15F: Blue color component (byte)
// - +0x1AE: Effect enabled flag (1 = rainbow mode active)
// 
// Effect Behavior:
// - Continuously changes entity color each frame (when flag set)
// - Creates "rainbow" or "tinted" visual effect on player sprite
// - Called repeatedly while cheat is active for animation
// 
// Cross-References:
// - Called by: CheckCheatCodeInput @ 0x800820B4 (cheat 0x10)
// - Uses: Standard library rand() function
// 
// Notes:
// - Cheat code 0x10 = "Tinted Klaymen" from official cheat list
// - Entity rendering code checks +0x1AE to enable color modulation
// - RGB values at +0x15D-15F are applied during sprite rendering
// - Effect persists until flag is cleared (typically on level change)
// - Level-restricted: Only works when flags 0x400|0x200|0x2000|0x100|0x10|0x04 are clear
// 
// Verified via Ghidra decompilation 2025-01-13.
// Cheat name confirmed from online sources 2025-01-14.

void ApplyRandomRGBEffect(int param_1)

{
  int iVar1;
  
  iVar1 = rand();
  *(char *)(param_1 + 0x15d) = (char)iVar1;
  iVar1 = rand();
  *(char *)(param_1 + 0x15e) = (char)iVar1;
  iVar1 = rand();
  *(char *)(param_1 + 0x15f) = (char)iVar1;
  *(undefined1 *)(param_1 + 0x1ae) = 1;
  return;
}



void PlayerTickCallback(int param_1)

{
  short sVar1;
  undefined *puVar2;
  int iVar3;
  undefined4 uVar4;
  undefined1 uVar5;
  undefined1 uVar6;
  int iVar7;
  undefined1 uVar8;
  int iVar9;
  int iVar10;
  short unaff_s2;
  code *pcVar11;
  
  if (((g_GameFlags & 1) != 0) && (*(int *)(param_1 + 0xcc) != 0x1e28e0d4)) {
    EntitySetState(param_1,null_FFFF0000h_800a5d90,PTR_Callback_8006d910_800a5d94);
  }
  iVar7 = (int)*(short *)(param_1 + 0x106);
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar11 = *(code **)(param_1 + 0x108);
    }
    else {
      iVar3 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x108));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar11 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(param_1 + 0x104);
    if (0 < iVar7 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    (*pcVar11)(param_1 + iVar3);
  }
  EntityUpdateCallback(param_1);
  if (*(char *)(param_1 + 0x1b0) != '\0') {
    *(undefined2 *)(param_1 + 0x40) = 0xfffb;
    *(undefined2 *)(param_1 + 0x42) = 0xfff6;
    *(undefined2 *)(param_1 + 0x44) = 10;
    *(undefined2 *)(param_1 + 0x46) = 10;
  }
  iVar7 = g_GameStatePtr;
  *(undefined2 *)(param_1 + 0x160) = 0;
  *(undefined2 *)(param_1 + 0x162) = 0;
  if (*(char *)(iVar7 + 0x14a) == '\0') {
    PlayerProcessTileCollision(param_1);
    if (*(char *)(param_1 + 0x128) != '\0') {
      *(char *)(param_1 + 0x128) = *(char *)(param_1 + 0x128) + -1;
    }
    sVar1 = *(short *)(param_1 + 0x144);
    if ((sVar1 != 0) && (*(short *)(param_1 + 0x144) = sVar1 + -1, sVar1 == 1)) {
      FUN_8001c4a4(param_1,0x40e28045);
      *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x37) = 0;
      *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 0;
      *(undefined1 *)(param_1 + 0x15b) = *(undefined1 *)(param_1 + 0x15e);
      iVar7 = *(int *)(param_1 + 0x34);
      *(undefined1 *)(param_1 + 0x15a) = *(undefined1 *)(param_1 + 0x15d);
      uVar6 = *(undefined1 *)(param_1 + 0x15a);
      uVar8 = *(undefined1 *)(param_1 + 0x15b);
      *(undefined1 *)(param_1 + 0xf8) = 1;
      *(undefined1 *)(param_1 + 0x15c) = *(undefined1 *)(param_1 + 0x15f);
      *(undefined1 *)(iVar7 + 0x36) = *(undefined1 *)(param_1 + 0x15f);
      *(undefined1 *)(iVar7 + 0x34) = uVar6;
      *(undefined1 *)(iVar7 + 0x35) = uVar8;
      if (*(int *)(param_1 + 0x14c) != 0) {
        *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x14c) + 0x34) + 10) = 0;
        RemoveEntityFromAllLists(g_GameStatePtr,*(undefined4 *)(param_1 + 0x14c));
        *(undefined4 *)(param_1 + 0x14c) = 0;
      }
    }
    puVar2 = PTR_Callback_80069ef4_800a5d9c;
    uVar4 = null_FFFF0000h_800a5d98;
    if (*(char *)(param_1 + 0x159) != '\0') {
      *(undefined1 *)(param_1 + 0x159) = 0;
      EntitySetState(param_1,uVar4,puVar2);
    }
    if (*(int *)(param_1 + 0x168) == 0) {
      if ((g_pPlayerState[0x17] & 1) != 0) {
        uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x30,1,0);
        uVar4 = CreateHaloEntity(uVar4,param_1);
        *(undefined4 *)(param_1 + 0x168) = uVar4;
        FUN_8001c4a4(param_1,0xe0880448);
        *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x168) + 0x24) + 0x1e0) = 0x20;
        AddToZOrderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x168));
        AddToXPositionList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x168) + 0x24));
      }
    }
    else if ((g_pPlayerState[0x17] & 1) == 0) {
      *(undefined1 *)(*(int *)(param_1 + 0x168) + 0x2c) = 1;
      *(undefined4 *)(param_1 + 0x168) = 0;
    }
    if (*(int *)(param_1 + 0x16c) == 0) {
      if ((g_pPlayerState[0x17] & 2) != 0) {
        uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
        uVar4 = FUN_8006e1d8(uVar4,param_1);
        iVar7 = g_GameStatePtr;
        *(undefined4 *)(param_1 + 0x16c) = uVar4;
        AddToZOrderList(iVar7);
        AddToXPositionList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x16c) + 0x34));
      }
    }
    else if ((g_pPlayerState[0x17] & 2) == 0) {
      RemoveFromTickList(g_GameStatePtr);
      RemoveFromRenderList(g_GameStatePtr,*(undefined4 *)(*(int *)(param_1 + 0x16c) + 0x34));
      iVar7 = *(int *)(param_1 + 0x16c);
      if (iVar7 != 0) {
        (**(code **)(*(int *)(iVar7 + 0x18) + 0xc))
                  (iVar7 + *(short *)(*(int *)(iVar7 + 0x18) + 8),3);
      }
      *(undefined4 *)(param_1 + 0x16c) = 0;
    }
  }
  if (*(char *)(param_1 + 0x178) == '\0') {
    if (*(char *)(param_1 + 0x1b0) == '\0') {
      if (g_pPlayerState[0x18] == '\0') {
        if ((*(int *)(g_GameStatePtr + 0x11c) == 0x10000) &&
           (iVar7 = *(int *)(param_1 + 0x50) + 0x1000, *(int *)(param_1 + 0x50) < 0x10000)) {
          *(int *)(param_1 + 0x50) = iVar7;
          goto LAB_8005b880;
        }
      }
      else {
        iVar7 = *(int *)(param_1 + 0x50) + -0x1000;
        if (0x8000 < *(int *)(param_1 + 0x50)) {
          *(int *)(param_1 + 0x50) = iVar7;
LAB_8005b880:
          *(int *)(param_1 + 0x54) = iVar7;
        }
      }
    }
    else {
      iVar7 = *(int *)(param_1 + 0x50) + -0x1000;
      if (0x4000 < *(int *)(param_1 + 0x50)) {
        *(int *)(param_1 + 0x50) = iVar7;
        goto LAB_8005b880;
      }
    }
  }
  if (*(char *)(param_1 + 0x17d) == '\0') {
    if (*(char *)(param_1 + 0x128) == '\0') {
      if (*(short *)(param_1 + 0x144) == 0) {
        *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 0;
        *(undefined1 *)(param_1 + 0x15b) = *(undefined1 *)(param_1 + 0x15e);
        *(undefined1 *)(param_1 + 0x15a) = *(undefined1 *)(param_1 + 0x15d);
        iVar7 = *(int *)(param_1 + 0x34);
        uVar6 = *(undefined1 *)(param_1 + 0x15a);
        uVar8 = *(undefined1 *)(param_1 + 0x15b);
        *(undefined1 *)(param_1 + 0x15c) = *(undefined1 *)(param_1 + 0x15f);
        *(undefined1 *)(iVar7 + 0x36) = *(undefined1 *)(param_1 + 0x15f);
        *(undefined1 *)(iVar7 + 0x34) = uVar6;
        *(undefined1 *)(iVar7 + 0x35) = uVar8;
        goto LAB_8005ba3c;
      }
      *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 1;
      *(undefined1 *)(param_1 + 0x15a) = 0x20;
                    // Possible PsyQ macro: setTile()
      *(undefined1 *)(param_1 + 0x15b) = 0x60;
      iVar7 = *(int *)(param_1 + 0x34);
      uVar6 = *(undefined1 *)(param_1 + 0x15a);
      uVar8 = *(undefined1 *)(param_1 + 0x15b);
      uVar5 = 0x30;
    }
    else {
      iVar3 = (*(uint *)(g_GameStatePtr + 0x10c) & 3) * 0x20;
      iVar9 = iVar3 + -0x30;
      if (*(short *)(param_1 + 0x144) == 0) {
        *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 0;
        iVar10 = (uint)*(byte *)(param_1 + 0x15d) + iVar9;
        iVar3 = (uint)*(byte *)(param_1 + 0x15f) + iVar9;
        iVar9 = (uint)*(byte *)(param_1 + 0x15e) + iVar9;
      }
      else {
        iVar10 = iVar3 + -0x10;
        iVar9 = iVar3 + 0x30;
        *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 1;
      }
      if ((short)iVar10 < 0x100) {
        if ((short)iVar10 < 0) {
          iVar10 = 0;
        }
      }
      else {
        iVar10 = 0xff;
      }
      if ((short)iVar9 < 0x100) {
        if ((short)iVar9 < 0) {
          iVar9 = 0;
        }
      }
      else {
        iVar9 = 0xff;
      }
      if ((short)iVar3 < 0x100) {
        if ((short)iVar3 < 0) {
          iVar3 = 0;
        }
      }
      else {
        iVar3 = 0xff;
      }
      iVar7 = *(int *)(param_1 + 0x34);
      *(char *)(param_1 + 0x15a) = (char)iVar10;
      *(char *)(param_1 + 0x15b) = (char)iVar9;
      uVar6 = *(undefined1 *)(param_1 + 0x15a);
      uVar8 = *(undefined1 *)(param_1 + 0x15b);
      uVar5 = (undefined1)iVar3;
    }
    *(undefined1 *)(param_1 + 0x15c) = uVar5;
    *(undefined1 *)(iVar7 + 0x34) = uVar6;
    *(undefined1 *)(iVar7 + 0x35) = uVar8;
    *(undefined1 *)(iVar7 + 0x36) = uVar5;
  }
  else {
    *(char *)(param_1 + 0x17d) = *(char *)(param_1 + 0x17d) + -1;
  }
LAB_8005ba3c:
  if ((*(char *)(param_1 + 0x1af) != '\0') && ((*(uint *)(g_GameStatePtr + 0x10c) & 7) == 0)) {
    uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x84,1,0);
    iVar7 = FUN_800362a4(uVar4,param_1);
    AddToZOrderList(g_GameStatePtr,iVar7);
    AddToXPositionList(g_GameStatePtr,*(undefined4 *)(iVar7 + 0x34));
  }
  return;
}



void PlayerCallback_8005bad0(int param_1)

{
  char cVar1;
  short sVar2;
  int iVar3;
  undefined4 uVar4;
  undefined *puVar5;
  
  sVar2 = *(short *)(param_1 + 0x13a) + -1;
  *(short *)(param_1 + 0x13a) = sVar2;
  if (sVar2 == 0) {
    iVar3 = rand();
    puVar5 = PTR_Callback_800670bc_800a5da4;
    uVar4 = null_FFFF0000h_800a5da0;
    *(ushort *)(param_1 + 0x13a) = ((ushort)iVar3 & 0x100) + 0x200;
  }
  else {
    cVar1 = *(char *)(param_1 + 0x139) + -1;
    *(char *)(param_1 + 0x139) = cVar1;
    if (cVar1 != '\0') goto PlayerCallback_8005bb64;
    iVar3 = rand();
    puVar5 = PTR_Callback_80066f60_800a5dac;
    uVar4 = null_FFFF0000h_800a5da8;
    *(byte *)(param_1 + 0x139) = ((byte)iVar3 & 0x7f) + 0x30;
  }
  EntitySetState(param_1,uVar4,puVar5);
PlayerCallback_8005bb64:
  PlayerTickCallback(param_1);
  return;
}



void PlayerCallback_8005bb64(void)

{
  PlayerTickCallback();
  return;
}



void PlayerCallback_8005bb80(int param_1)

{
  *(short *)(param_1 + 0x156) = *(short *)(param_1 + 0x156) + 1;
  PlayerTickCallback();
  return;
}



void PlayerCallback_8005bbac(int param_1)

{
  if (*(char *)(param_1 + 0x13c) != '\0') {
    *(char *)(param_1 + 0x13c) = *(char *)(param_1 + 0x13c) + -1;
  }
  PlayerTickCallback();
  return;
}



void PlayerCallback_8005bbe0(int param_1)

{
  short sVar1;
  ushort uVar2;
  int iVar3;
  
  iVar3 = *(int *)(param_1 + 0x50) + -0xc00;
  if (*(int *)(param_1 + 0x50) != 0) {
    *(int *)(param_1 + 0x50) = iVar3;
    *(int *)(param_1 + 0x54) = iVar3;
  }
  sVar1 = *(short *)(param_1 + 0x72);
  uVar2 = sVar1 + 0x20;
  *(ushort *)(param_1 + 0x72) = uVar2;
  if (0xfff < uVar2) {
    *(short *)(param_1 + 0x72) = sVar1 + -0xfe0;
  }
  PlayerTickCallback();
  return;
}



void PlayerCallback_8005bc3c(int param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  undefined *puVar4;
  short unaff_s2;
  code *pcVar5;
  
  puVar4 = PTR_PlayerState_PickupItem_800a5db4;
  uVar3 = null_FFFF0000h_800a5db0;
  if ((g_GameFlags & 1) == 0) {
    if (*(int *)(param_1 + 0xcc) == 0x1e28e0d4) {
      iVar2 = *(int *)(param_1 + 0x34);
      uVar3 = null_FFFF0000h_800a5d98;
      puVar4 = PTR_Callback_80069ef4_800a5d9c;
    }
    else {
      iVar2 = *(int *)(param_1 + 0x34);
      *(undefined1 *)(param_1 + 0x178) = 0;
    }
    *(undefined1 *)(iVar2 + 10) = 1;
    EntitySetState(param_1,uVar3,puVar4);
    *(undefined1 *)(g_GameStatePtr + 0x170) = 1;
  }
  iVar2 = (int)*(short *)(param_1 + 0x106);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar5 = *(code **)(param_1 + 0x108);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x108));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar5 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x104);
    if (0 < iVar2 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    (*pcVar5)(param_1 + iVar1);
  }
  EntityUpdateCallback(param_1);
  if (*(char *)(param_1 + 0x128) != '\0') {
    *(char *)(param_1 + 0x128) = *(char *)(param_1 + 0x128) + -1;
  }
  return;
}



void PlayerCallback_8005bd60(int param_1)

{
  short sVar1;
  
  sVar1 = *(short *)(param_1 + 0x166);
  if ((sVar1 != 0) && (*(short *)(param_1 + 0x166) = sVar1 + -1, sVar1 == 1)) {
    EntityProcessCallbackQueue();
  }
  PlayerTickCallback(param_1);
  return;
}



void PlayerCallback_8005bdb4(int param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  
  PlayerTickCallback();
  if (*(int *)(param_1 + 0x1a0) != 0) {
    *(undefined2 *)(*(int *)(param_1 + 0x1a0) + 0x68) = *(undefined2 *)(param_1 + 0x68);
    *(ushort *)(*(int *)(param_1 + 0x1a0) + 0x6a) =
         *(short *)(param_1 + 0x6a) + (ushort)*(byte *)(param_1 + 0x1a4);
    uVar1 = *(undefined1 *)(param_1 + 0x15b);
    uVar2 = *(undefined1 *)(param_1 + 0x15c);
    iVar3 = *(int *)(*(int *)(param_1 + 0x1a0) + 0x34);
    *(undefined1 *)(iVar3 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
    *(undefined1 *)(iVar3 + 0x35) = uVar1;
    *(undefined1 *)(iVar3 + 0x36) = uVar2;
    if (*(short *)(param_1 + 0x144) == 0) {
      *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x1a0) + 0x34) + 0x38) = 0;
    }
    else {
      *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x1a0) + 0x34) + 0x38) = 1;
    }
  }
  return;
}



bool PlayerCallback_8005be6c(int param_1,undefined2 param_2,undefined4 param_3,int param_4)

{
  undefined4 uVar1;
  undefined *puVar2;
  bool bVar3;
  
  uVar1 = null_FFFF0000h_800a5dc0;
  bVar3 = false;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4();
    bVar3 = false;
    break;
  case 0x100d:
    FUN_8006ce80();
    bVar3 = false;
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    puVar2 = PTR_PlayerState_CheckpointExit_800a5dc4;
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,uVar1,puVar2);
    bVar3 = false;
    break;
  case 0x1010:
    bVar3 = false;
    if ((*(char *)(param_1 + 0x178) == '\0') && (bVar3 = false, *(char *)(param_1 + 0x1b2) == '\0'))
    {
      EntitySetState(param_1,null_FFFF0000h_800a5db8,PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      bVar3 = false;
    }
    break;
  case 0x1017:
    bVar3 = false;
    if (*(char *)(param_1 + 0x178) == '\0') {
      bVar3 = *(char *)(param_1 + 0x1b2) == '\0';
    }
  default:
  }
  return bVar3;
}



uint PlayerCallback_8005bf5c(int param_1,short param_2,undefined4 param_3,int param_4)

{
  char cVar1;
  uint uVar2;
  
  uVar2 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar2 = PlayerCallback_8005c01c
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar2;
    }
    break;
  case 0x1017:
    uVar2 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar2 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 2) {
    cVar1 = *(char *)(param_1 + 0x17c);
    if ((cVar1 == '\0') || (*(char *)(param_1 + 0x17c) = cVar1 + -1, cVar1 == '\x01')) {
      EntityProcessCallbackQueue(param_1);
    }
  }
  return uVar2;
}



void PlayerCallback_8005c01c(void)

{
  char cVar1;
  int unaff_s0;
  short unaff_s2;
  
  EntitySetState();
  if ((unaff_s2 == 2) &&
     ((cVar1 = *(char *)(unaff_s0 + 0x17c), cVar1 == '\0' ||
      (*(char *)(unaff_s0 + 0x17c) = cVar1 + -1, cVar1 == '\x01')))) {
    EntityProcessCallbackQueue();
  }
  return;
}



uint PlayerCallback_8005c0a0(int param_1,short param_2,undefined4 param_3,int param_4)

{
  uint uVar1;
  
  uVar1 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar1 = PlayerCallback_8005c160
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar1;
    }
    break;
  case 0x1017:
    uVar1 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar1 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



void PlayerCallback_8005c160(void)

{
  short unaff_s2;
  
  EntitySetState();
  if (unaff_s2 == 2) {
    EntityProcessCallbackQueue();
  }
  return;
}



bool FUN_8005c1c4(int param_1,ushort param_2,int param_3,int param_4)

{
  undefined4 uVar1;
  undefined *puVar2;
  bool bVar3;
  
  bVar3 = false;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    uVar1 = null_FFFF0000h_800a5dc0;
    puVar2 = PTR_PlayerState_CheckpointExit_800a5dc4;
    goto LAB_8005c294;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) != '\0') ||
       (uVar1 = null_FFFF0000h_800a5db8, puVar2 = PTR_PlayerState_LevelExitTeleporter_800a5dbc,
       *(char *)(param_1 + 0x1b2) != '\0')) break;
LAB_8005c294:
    EntitySetState(param_1,uVar1,puVar2);
    break;
  case 0x1017:
    bVar3 = false;
    if (*(char *)(param_1 + 0x178) == '\0') {
      bVar3 = *(char *)(param_1 + 0x1b2) == '\0';
    }
  default:
  }
  puVar2 = PTR_PlayerStateCallback_2_800a5d34;
  uVar1 = null_FFFF0000h_800a5d30;
  if (param_2 == 0x1006) {
    *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + param_3;
    EntitySetState(param_1,uVar1,puVar2);
  }
  else if (param_2 < 0x1007) {
    if (((param_2 == 0x1000) && (param_3 != 2)) &&
       (bVar3 = false, *(char *)(param_1 + 0x128) == '\0')) {
      if ((g_pPlayerState[0x17] & 1) == 0) {
        uVar1 = null_FFFF0000h_800a5d80;
        puVar2 = PTR_PlayerState_Death_800a5d84;
        if (*(short *)(param_1 + 0x144) != 0) {
          uVar1 = null_FFFF0000h_800a5d78;
          puVar2 = PTR_Callback_8006c95c_800a5d7c;
        }
      }
      else {
        uVar1 = null_FFFF0000h_800a5d50;
        puVar2 = PTR_Callback_8006adbc_800a5d54;
        if (*(short *)(param_1 + 0x68) < *(short *)(param_4 + 0x68)) {
          uVar1 = null_FFFF0000h_800a5d58;
          puVar2 = PTR_PlayerState_QuickTurn_800a5d5c;
        }
      }
      EntitySetState(param_1,uVar1,puVar2);
      bVar3 = true;
    }
  }
  else if (param_2 == 0x1007) {
    FUN_8005afcc(param_1,param_4,param_3);
  }
  return bVar3;
}



bool PlayerEntityCollisionHandler(int param_1,ushort param_2,int param_3,int param_4)

{
  undefined1 uVar1;
  undefined1 uVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  undefined *puVar7;
  code *pcVar8;
  bool bVar9;
  short unaff_s6;
  undefined1 auStack_60 [6];
  short local_5a;
  undefined1 auStack_58 [6];
  short local_52;
  undefined4 local_48;
  code *local_44;
  undefined4 local_30;
  code *local_2c;
  
  bVar9 = false;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    uVar5 = null_FFFF0000h_800a5dc0;
    puVar7 = PTR_PlayerState_CheckpointExit_800a5dc4;
    goto LAB_8005c4dc;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) != '\0') ||
       (uVar5 = null_FFFF0000h_800a5db8, puVar7 = PTR_PlayerState_LevelExitTeleporter_800a5dbc,
       *(char *)(param_1 + 0x1b2) != '\0')) break;
LAB_8005c4dc:
    EntitySetState(param_1,uVar5,puVar7);
    break;
  case 0x1017:
    bVar9 = false;
    if (*(char *)(param_1 + 0x178) == '\0') {
      bVar9 = *(char *)(param_1 + 0x1b2) == '\0';
    }
  default:
  }
  if (param_2 == 0x1007) {
    FUN_8005afcc(param_1,param_4,param_3);
  }
  else if (param_2 < 0x1008) {
    if (param_2 == 0x1000) {
      FUN_8001a448(param_4,auStack_60);
      FUN_8001a448(param_1,auStack_58);
      if ((param_3 == 2) || ((param_3 != 1 && (1 < (int)local_5a - (int)local_52)))) {
        if (0 < *(int *)(param_1 + 0x110)) {
          *(undefined1 *)(g_GameStatePtr + 0x11a) = 0x14;
        }
        if ((param_3 != 2) || (0 < *(int *)(param_1 + 0x110))) {
          iVar4 = (int)*(short *)(param_4 + 10);
          if (iVar4 != 0) {
            if (iVar4 < 1) {
              pcVar8 = *(code **)(param_4 + 0xc);
            }
            else {
              iVar3 = iVar4 * 8 + *(int *)(param_4 + *(short *)(param_4 + 0xc));
              local_48 = *(undefined4 *)(iVar3 + -8);
              pcVar8 = *(code **)(iVar3 + -4);
              local_44 = pcVar8;
            }
            iVar3 = (int)*(short *)(param_4 + 8);
            if (0 < iVar4 << 0x10) {
              iVar3 = (short)local_48 + iVar3;
            }
            (*pcVar8)(param_4 + iVar3,0x1001,0,param_1);
          }
          if ((*(short *)(param_1 + 0xa2) == -1) &&
             ((*(code **)(param_1 + 0xa4) == Callback_80069200 ||
              (*(code **)(param_1 + 0xa4) == EntityInitCallback_800694ac)))) {
            *(char *)(param_1 + 0x164) = *(char *)(param_1 + 0x164) + '\x01';
          }
          else {
            *(undefined1 *)(param_1 + 0x164) = 0;
          }
          EntitySetState(param_1,null_FFFF0000h_800a5dc8,PTR_Callback_80069200_800a5dcc);
        }
      }
      else {
        bVar9 = false;
        if (*(char *)(param_1 + 0x128) == '\0') {
          if ((g_pPlayerState[0x17] & 1) == 0) {
            uVar5 = null_FFFF0000h_800a5d80;
            puVar7 = PTR_PlayerState_Death_800a5d84;
            if (*(short *)(param_1 + 0x144) != 0) {
              uVar5 = null_FFFF0000h_800a5d78;
              puVar7 = PTR_Callback_8006c95c_800a5d7c;
            }
          }
          else {
            uVar5 = null_FFFF0000h_800a5d50;
            puVar7 = PTR_Callback_8006adbc_800a5d54;
            if (*(short *)(param_1 + 0x68) < *(short *)(param_4 + 0x68)) {
              uVar5 = null_FFFF0000h_800a5d58;
              puVar7 = PTR_PlayerState_QuickTurn_800a5d5c;
            }
          }
          EntitySetState(param_1,uVar5,puVar7);
          bVar9 = true;
        }
      }
    }
  }
  else if ((param_2 == 0x100a) && (0 < *(int *)(param_1 + 0x110))) {
    if ((*(short *)(param_1 + 0xa2) == -1) &&
       ((*(code **)(param_1 + 0xa4) == Callback_80069200 ||
        (*(code **)(param_1 + 0xa4) == EntityInitCallback_800694ac)))) {
      *(char *)(param_1 + 0x164) = *(char *)(param_1 + 0x164) + '\x01';
    }
    else {
      *(undefined1 *)(param_1 + 0x164) = 0;
    }
    EntitySetState(param_1,null_FFFF0000h_800a5dc8,PTR_Callback_80069200_800a5dcc);
    if (*(short *)(param_1 + 0x144) != 0) {
      iVar4 = (int)*(short *)(param_4 + 0x26);
      uVar6 = (uint)*(ushort *)(param_4 + 0x68);
      if (iVar4 != 0) {
        if (iVar4 < 1) {
          pcVar8 = *(code **)(param_4 + 0x28);
        }
        else {
          iVar3 = iVar4 * 8 + *(int *)(param_4 + *(short *)(param_4 + 0x28));
          unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(param_4 + 0x24);
        if (0 < iVar4 << 0x10) {
          iVar3 = unaff_s6 + iVar3;
        }
        uVar6 = (*pcVar8)(param_4 + iVar3,(int)(short)*(ushort *)(param_4 + 0x68));
      }
      iVar4 = *(int *)(param_1 + 0x58);
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && (uVar6 << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      *(short *)(param_1 + 0x146) = (short)((int)(uVar6 << 0x10) / iVar4);
      iVar4 = (int)*(short *)(param_4 + 0x2e);
      uVar6 = (uint)*(ushort *)(param_4 + 0x6a);
      if (iVar4 != 0) {
        if (iVar4 < 1) {
          pcVar8 = *(code **)(param_4 + 0x30);
        }
        else {
          iVar3 = iVar4 * 8 + *(int *)(param_4 + *(short *)(param_4 + 0x30));
          local_30 = *(undefined4 *)(iVar3 + -8);
          pcVar8 = *(code **)(iVar3 + -4);
          local_2c = pcVar8;
        }
        iVar3 = (int)*(short *)(param_4 + 0x2c);
        if (0 < iVar4 << 0x10) {
          iVar3 = (short)local_30 + iVar3;
        }
        uVar6 = (*pcVar8)(param_4 + iVar3,(int)(short)*(ushort *)(param_4 + 0x6a));
      }
      iVar4 = *(int *)(param_1 + 0x5c);
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && (uVar6 << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      *(undefined1 *)(param_1 + 0x151) = *(undefined1 *)(param_1 + 0x15e);
      *(undefined1 *)(param_1 + 0x152) = *(undefined1 *)(param_1 + 0x15f);
      *(undefined1 *)(param_1 + 0x153) = *(undefined1 *)(param_1 + 0x1b3);
      *(undefined1 *)(param_1 + 0x150) = *(undefined1 *)(param_1 + 0x15d);
      puVar7 = g_pPlayerState;
      *(undefined2 *)(param_1 + 0x1ac) = *(undefined2 *)(param_1 + 0x1a8);
      *(undefined2 *)(param_1 + 0x1aa) = *(undefined2 *)(param_1 + 0x1a6);
      *(short *)(param_1 + 0x148) = (short)((int)(uVar6 << 0x10) / iVar4);
      *(undefined *)(param_1 + 0x154) = puVar7[0x18];
    }
    *(undefined *)(g_GameStatePtr + 0x14b) = g_pPlayerState[0x18];
    *(undefined1 *)(g_GameStatePtr + 0x198) = *(undefined1 *)(param_1 + 0x1b3);
    iVar4 = g_GameStatePtr;
    uVar1 = *(undefined1 *)(param_1 + 0x15e);
    uVar2 = *(undefined1 *)(param_1 + 0x15f);
    bVar9 = true;
    *(undefined1 *)(g_GameStatePtr + 0x199) = *(undefined1 *)(param_1 + 0x15d);
    *(undefined1 *)(iVar4 + 0x19a) = uVar1;
    *(undefined1 *)(iVar4 + 0x19b) = uVar2;
  }
  return bVar9;
}



bool FUN_8005ca60(int param_1,short param_2,int param_3,int param_4)

{
  undefined4 uVar1;
  undefined *puVar2;
  bool bVar3;
  
  bVar3 = false;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    uVar1 = null_FFFF0000h_800a5dc0;
    puVar2 = PTR_PlayerState_CheckpointExit_800a5dc4;
    goto LAB_8005cb30;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) != '\0') ||
       (uVar1 = null_FFFF0000h_800a5db8, puVar2 = PTR_PlayerState_LevelExitTeleporter_800a5dbc,
       *(char *)(param_1 + 0x1b2) != '\0')) break;
LAB_8005cb30:
    EntitySetState(param_1,uVar1,puVar2);
    break;
  case 0x1017:
    bVar3 = false;
    if (*(char *)(param_1 + 0x178) == '\0') {
      bVar3 = *(char *)(param_1 + 0x1b2) == '\0';
    }
  default:
  }
  if (((param_2 == 0x1000) && (param_3 != 2)) && (*(char *)(param_1 + 0x128) == '\0')) {
    *(undefined1 *)(g_GameStatePtr + 0x62) = 0;
    if (*(int *)(param_1 + 0x140) != 0) {
      RemoveEntityFromAllLists(g_GameStatePtr);
      *(undefined4 *)(param_1 + 0x140) = 0;
    }
    bVar3 = false;
    if (*(char *)(param_1 + 0x128) == '\0') {
      if ((g_pPlayerState[0x17] & 1) == 0) {
        uVar1 = null_FFFF0000h_800a5d80;
        puVar2 = PTR_PlayerState_Death_800a5d84;
        if (*(short *)(param_1 + 0x144) != 0) {
          uVar1 = null_FFFF0000h_800a5d78;
          puVar2 = PTR_Callback_8006c95c_800a5d7c;
        }
      }
      else {
        uVar1 = null_FFFF0000h_800a5d50;
        puVar2 = PTR_Callback_8006adbc_800a5d54;
        if (*(short *)(param_1 + 0x68) < *(short *)(param_4 + 0x68)) {
          uVar1 = null_FFFF0000h_800a5d58;
          puVar2 = PTR_PlayerState_QuickTurn_800a5d5c;
        }
      }
      EntitySetState(param_1,uVar1,puVar2);
      bVar3 = true;
    }
  }
  return bVar3;
}



undefined4 PlayerCallback_8005cc84(undefined4 param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = FUN_8005c1c4(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



undefined4 PlayerCallback_8005cce0(int param_1,short param_2,uint param_3,int param_4)

{
  u_short uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  
  uVar2 = FUN_8005c1c4(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if (param_2 == 1) {
    if (param_3 == 0x11022025) {
      *(undefined1 *)(param_1 + 0x1a4) = 0;
      FUN_8005b1c4(param_1,0x54608016);
    }
    else {
      if (param_3 < 0x11022026) {
        if (param_3 != 0x1002a434) {
          if (param_3 != 0x1020ac7d) {
            return uVar2;
          }
          *(undefined1 *)(param_1 + 0x1a4) = 0;
          FUN_8005b1c4(param_1,0x4260c8b5);
          return uVar2;
        }
        uVar3 = 0xd167c005;
      }
      else {
        if (param_3 != 0x20833814) {
          if (param_3 != 0x70032814) {
            return uVar2;
          }
          *(undefined1 *)(param_1 + 0x1a4) = 0;
          if (((*(int *)(param_1 + 0x5c) != 0x10000) &&
              (*(undefined1 *)(param_1 + 0x1a4) = 2, *(int *)(param_1 + 0x58) == 0xc000)) &&
             ((*(ushort *)(param_1 + 0x6a) + 2 & 3) - 1 < 2)) {
            *(undefined1 *)(param_1 + 0x1a4) = 3;
          }
          FUN_8005b1c4(param_1,0x5838cc16);
          return uVar2;
        }
        uVar3 = 0x91a9d01d;
      }
      *(undefined1 *)(param_1 + 0x1a4) = 0;
      FUN_8005b1c4(param_1,uVar3);
      iVar4 = *(int *)(*(int *)(param_1 + 0x1a0) + 0x34);
      uVar1 = GetTPage((uint)*(byte *)(iVar4 + 0x32),1,(int)*(short *)(iVar4 + 0x10) & 0xffffffc0,
                       (int)*(short *)(iVar4 + 0x12) & 0xffffff00);
      *(u_short *)(iVar4 + 0x24) = uVar1;
    }
  }
  else if ((param_2 == 0x1009) && (param_4 == *(int *)(param_1 + 0x1a0))) {
    *(undefined4 *)(param_1 + 0x1a0) = 0;
  }
  return uVar2;
}



undefined4 PlayerCallback_8005cec8(undefined4 param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = PlayerEntityCollisionHandler(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



undefined4 FUN_8005cf24(int param_1,short param_2,int param_3)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  short unaff_s4;
  code *pcVar6;
  
  uVar1 = PlayerEntityCollisionHandler(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if ((param_2 == 1) && (param_3 == 0x1a800898)) {
    *(undefined1 *)(param_1 + 0x11c) = 5;
    *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
    *(undefined1 *)(param_1 + 0x11e) = 0;
    *(undefined1 *)(param_1 + 0x11f) = 0;
    *(undefined4 *)(param_1 + 0x120) = 0;
    iVar2 = *(int *)(param_1 + 0x110) + -0x60000;
    *(int *)(param_1 + 0x110) = iVar2;
    if (iVar2 < -0x90000) {
      *(undefined4 *)(param_1 + 0x110) = 0xfff70000;
    }
    *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
    *(code **)(param_1 + 0x20) = PlayerCallback_800650c4;
    iVar2 = *(int *)(param_1 + 300);
    if (iVar2 != 0) {
      sVar4 = (short)*(undefined4 *)(param_1 + 0x110);
      if (*(int *)(param_1 + 0x58) == 0x8000) {
        sVar4 = sVar4 >> 1;
      }
      iVar5 = (int)*(short *)(iVar2 + 10);
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar6 = *(code **)(iVar2 + 0xc);
        }
        else {
          iVar3 = iVar5 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
          unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
          pcVar6 = *(code **)(iVar3 + -4);
        }
        iVar3 = (int)*(short *)(iVar2 + 8);
        if (0 < iVar5 << 0x10) {
          iVar3 = unaff_s4 + iVar3;
        }
        (*pcVar6)(iVar2 + iVar3,0x1005,(int)sVar4,param_1);
      }
      *(undefined4 *)(param_1 + 300) = 0;
    }
  }
  return uVar1;
}



undefined4 PlayerCallback_8005d0c8(int param_1,short param_2,uint param_3)

{
  short sVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 local_28;
  
  uVar2 = FUN_8005c1c4(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if (param_2 == 1) {
    if (param_3 == 0x2809a510) {
      FUN_8005ad54(param_1);
    }
    else if (param_3 < 0x2809a511) {
      if (param_3 == 0x221017ca) {
        if (*(char *)(param_1 + 0x134) == '\0') {
          *(undefined1 *)(param_1 + 0x135) = 0;
        }
        else {
          FUN_8001d0f0(param_1,0x2809a510);
          *(undefined1 *)(param_1 + 0x134) = 0;
        }
      }
    }
    else if (param_3 == 0x382c92c1) {
      sVar1 = *(short *)(param_1 + 0x68) + 0x14;
      if (*(char *)(param_1 + 0x74) != '\0') {
        sVar1 = *(short *)(param_1 + 0x68) + -0x14;
      }
      local_28 = CONCAT22(*(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x136),sVar1);
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
      uVar3 = InitParticleEntity(uVar3,0x49289c14,local_28,*(undefined1 *)(param_1 + 0x74),
                                 *(undefined4 *)(param_1 + 0x58),0x3d4,0);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
    }
  }
  return uVar2;
}



undefined4 PlayerCallback_8005d25c(int param_1,short param_2,uint param_3)

{
  short sVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 local_38;
  
  uVar2 = FUN_8005cf24(param_1,param_2);
  if (param_2 == 1) {
    if (param_3 == 0x2809a510) {
      FUN_8005ad54(param_1);
    }
    else if (param_3 < 0x2809a511) {
      if (param_3 == 0x221017ca) {
        if (*(char *)(param_1 + 0x134) == '\0') {
          *(undefined1 *)(param_1 + 0x135) = 0;
          *(undefined4 *)(param_1 + 0x104) = 0xffff0000;
          *(code **)(param_1 + 0x108) = PlayerCallback_800602e0;
        }
        else {
          FUN_8001d0f0(param_1,0x2809a510);
          *(undefined1 *)(param_1 + 0x134) = 0;
        }
      }
    }
    else if (param_3 == 0x382c92c1) {
      sVar1 = *(short *)(param_1 + 0x68) + 0x14;
      if (*(char *)(param_1 + 0x74) != '\0') {
        sVar1 = *(short *)(param_1 + 0x68) + -0x14;
      }
      local_38 = CONCAT22(*(short *)(param_1 + 0x6a) + *(short *)(param_1 + 0x136),sVar1);
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
      uVar3 = InitParticleEntity(uVar3,0x49289c14,local_38,*(undefined1 *)(param_1 + 0x74),
                                 *(undefined4 *)(param_1 + 0x58),0x3d4,0);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
    }
  }
  return uVar2;
}



bool PlayerCallback_8005d404(int param_1,ushort param_2,int param_3)

{
  undefined1 uVar1;
  undefined1 uVar2;
  char cVar3;
  bool bVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  int iVar10;
  short unaff_s4;
  code *pcVar11;
  short unaff_s6;
  undefined4 local_50;
  
  if (param_2 == 2) {
    cVar3 = *(char *)(param_1 + 0x158) + -1;
    *(char *)(param_1 + 0x158) = cVar3;
    bVar4 = false;
    if (cVar3 == '\0') {
      *(undefined1 *)(g_GameStatePtr + 0x146) = 1;
      bVar4 = false;
    }
  }
  else if (param_2 < 3) {
    if (param_2 == 1) {
      if (param_3 == 0x146ce002) {
        iVar10 = 0;
        *(undefined1 *)(g_GameStatePtr + 0x11a) = 0x1d;
        iVar7 = 0;
        while (iVar7 >> 0x10 < 2) {
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xbe68d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar9 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          *(undefined1 *)(iVar9 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar9 + 0x35) = uVar1;
          *(undefined1 *)(iVar9 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xb868d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar9 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          *(undefined1 *)(iVar9 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar9 + 0x35) = uVar1;
          *(undefined1 *)(iVar9 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xb468d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar9 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          iVar10 = iVar10 + 1;
          *(undefined1 *)(iVar9 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar9 + 0x35) = uVar1;
          *(undefined1 *)(iVar9 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          iVar7 = iVar10 * 0x10000;
        }
        uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        iVar7 = InitDebrisParticleEntity
                          (uVar8,0x3d348056,(int)*(short *)(param_1 + 0x68),
                           (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                           *(undefined4 *)(param_1 + 0x58),0x8000,0xfff30000,0x400);
        iVar10 = *(int *)(iVar7 + 0x34);
        uVar1 = *(undefined1 *)(param_1 + 0x15e);
        uVar2 = *(undefined1 *)(param_1 + 0x15f);
        *(undefined1 *)(iVar10 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
        *(undefined1 *)(iVar10 + 0x35) = uVar1;
        *(undefined1 *)(iVar10 + 0x36) = uVar2;
        AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
        bVar4 = false;
      }
      else {
        bVar4 = false;
        if (param_3 == 0x80ca433) {
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xbe68d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar10 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          *(undefined1 *)(iVar10 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar10 + 0x35) = uVar1;
          *(undefined1 *)(iVar10 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xb868d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar10 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          *(undefined1 *)(iVar10 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar10 + 0x35) = uVar1;
          *(undefined1 *)(iVar10 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
          iVar7 = InitDebrisParticleEntity
                            (uVar8,0xb468d0c6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                             *(undefined4 *)(param_1 + 0x58),0x7fffffff,0x7fffffff,0x7fffffff);
          iVar10 = *(int *)(iVar7 + 0x34);
          uVar1 = *(undefined1 *)(param_1 + 0x15e);
          uVar2 = *(undefined1 *)(param_1 + 0x15f);
          *(undefined1 *)(iVar10 + 0x34) = *(undefined1 *)(param_1 + 0x15d);
          *(undefined1 *)(iVar10 + 0x35) = uVar1;
          *(undefined1 *)(iVar10 + 0x36) = uVar2;
          AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          uVar8 = FUN_80034a54(uVar8,&PTR_PTR_8009c288,0,9000,1);
          AddEntityToBothLists(g_GameStatePtr,uVar8);
          iVar7 = (int)*(short *)(param_1 + 0x26);
          sVar5 = *(short *)(param_1 + 0x68);
          if (iVar7 != 0) {
            if (iVar7 < 1) {
              pcVar11 = *(code **)(param_1 + 0x28);
            }
            else {
              iVar10 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
              unaff_s4 = (short)*(undefined4 *)(iVar10 + -8);
              pcVar11 = *(code **)(iVar10 + -4);
            }
            iVar10 = (int)*(short *)(param_1 + 0x24);
            if (0 < iVar7 << 0x10) {
              iVar10 = unaff_s4 + iVar10;
            }
            sVar5 = (*pcVar11)(param_1 + iVar10,(int)sVar5);
          }
          iVar7 = (int)*(short *)(param_1 + 0x2e);
          sVar6 = *(short *)(param_1 + 0x6a) + -0x32;
          if (iVar7 != 0) {
            if (iVar7 < 1) {
              pcVar11 = *(code **)(param_1 + 0x30);
            }
            else {
              iVar10 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
              unaff_s6 = (short)*(undefined4 *)(iVar10 + -8);
              pcVar11 = *(code **)(iVar10 + -4);
            }
            iVar10 = (int)*(short *)(param_1 + 0x2c);
            if (0 < iVar7 << 0x10) {
              iVar10 = unaff_s6 + iVar10;
            }
            sVar6 = (*pcVar11)(param_1 + iVar10,(int)sVar6);
          }
          local_50 = CONCAT22(sVar6,sVar5);
          uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          iVar7 = FUN_80034a54(uVar8,&PTR_PTR_8009c9c4,local_50,0x3d6,0);
          *(undefined1 *)(*(int *)(iVar7 + 0x20) + 0x54) = 3;
          AddEntityToBothLists(g_GameStatePtr,iVar7);
          bVar4 = false;
        }
      }
    }
    else {
      bVar4 = false;
    }
  }
  else {
    bVar4 = false;
    if ((param_2 == 0x1017) && (bVar4 = false, *(char *)(param_1 + 0x178) == '\0')) {
      bVar4 = *(char *)(param_1 + 0x1b2) == '\0';
    }
  }
  return bVar4;
}



uint PlayerCallback_8005daa4(int param_1,short param_2,int param_3,int param_4)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  uint uVar6;
  short unaff_s2;
  code *pcVar7;
  short local_48;
  
  uVar6 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar6 = PlayerCallback_8005db74
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar6;
    }
    break;
  case 0x1017:
    uVar6 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar6 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 1) {
    if (param_3 == 0x2809a510) {
      local_48 = *(short *)(param_1 + 0x68) + 0x2a;
      if (*(char *)(param_1 + 0x74) != '\0') {
        local_48 = *(short *)(param_1 + 0x68) + -0x2a;
      }
      sVar4 = *(short *)(param_1 + 0x6a);
      uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      uVar2 = FUN_8004f8dc(uVar2,(int)local_48,(int)(short)(sVar4 + -0x47),
                           *(undefined1 *)(param_1 + 0x74),*(undefined4 *)(param_1 + 0x58));
      AddEntityToSortedRenderList(g_GameStatePtr,uVar2);
      g_pPlayerState[0x14] = g_pPlayerState[0x14] + -1;
      *(undefined4 *)(param_1 + 0x104) = 0xffff0000;
      *(code **)(param_1 + 0x108) = PlayerCallback_8005f834;
      *(undefined4 *)(param_1 + 8) = 0xffff0000;
      *(code **)(param_1 + 0xc) = PlayerCallback_8005cc84;
    }
  }
  else if (param_2 == 0x1006) {
    iVar3 = *(int *)(param_1 + 300);
    if (iVar3 != 0) {
      sVar4 = (short)*(undefined4 *)(param_1 + 0x110);
      if (*(int *)(param_1 + 0x58) == 0x8000) {
        sVar4 = sVar4 >> 1;
      }
      iVar5 = (int)*(short *)(iVar3 + 10);
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar7 = *(code **)(iVar3 + 0xc);
        }
        else {
          iVar1 = iVar5 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
          unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
          pcVar7 = *(code **)(iVar1 + -4);
        }
        iVar1 = (int)*(short *)(iVar3 + 8);
        if (0 < iVar5 << 0x10) {
          iVar1 = unaff_s2 + iVar1;
        }
        (*pcVar7)(iVar3 + iVar1,0x1005,(int)sVar4,param_1);
      }
      *(undefined4 *)(param_1 + 300) = 0;
    }
    *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + param_3;
    *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
    *(code **)(param_1 + 0x20) = PlayerCallback_8006120c;
    *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
    *(code **)(param_1 + 0x9c) = PlayerStateCallback_2;
  }
  return uVar6;
}



void PlayerCallback_8005db74(void)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  int unaff_s0;
  short unaff_s2;
  code *pcVar6;
  short unaff_s4;
  int unaff_s5;
  short sStack00000018;
  short sStack0000001a;
  
  EntitySetState();
  if (unaff_s4 == 1) {
    if (unaff_s5 == 0x2809a510) {
      sStack00000018 = *(short *)(unaff_s0 + 0x68) + 0x2a;
      if (*(char *)(unaff_s0 + 0x74) != '\0') {
        sStack00000018 = *(short *)(unaff_s0 + 0x68) + -0x2a;
      }
      sStack0000001a = *(short *)(unaff_s0 + 0x6a) + -0x47;
      uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      uVar2 = FUN_8004f8dc(uVar2,(int)sStack00000018,(int)sStack0000001a,
                           *(undefined1 *)(unaff_s0 + 0x74));
      AddEntityToSortedRenderList(g_GameStatePtr,uVar2);
      g_pPlayerState[0x14] = g_pPlayerState[0x14] + -1;
      *(undefined4 *)(unaff_s0 + 0x104) = 0xffff0000;
      *(code **)(unaff_s0 + 0x108) = PlayerCallback_8005f834;
      *(undefined4 *)(unaff_s0 + 8) = 0xffff0000;
      *(code **)(unaff_s0 + 0xc) = PlayerCallback_8005cc84;
    }
  }
  else if (unaff_s4 == 0x1006) {
    iVar3 = *(int *)(unaff_s0 + 300);
    if (iVar3 != 0) {
      sVar4 = (short)*(undefined4 *)(unaff_s0 + 0x110);
      if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
        sVar4 = sVar4 >> 1;
      }
      iVar5 = (int)*(short *)(iVar3 + 10);
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar6 = *(code **)(iVar3 + 0xc);
        }
        else {
          iVar1 = iVar5 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
          unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
          pcVar6 = *(code **)(iVar1 + -4);
        }
        iVar1 = (int)*(short *)(iVar3 + 8);
        if (0 < iVar5 << 0x10) {
          iVar1 = unaff_s2 + iVar1;
        }
        (*pcVar6)(iVar3 + iVar1,0x1005,(int)sVar4);
      }
      *(undefined4 *)(unaff_s0 + 300) = 0;
    }
    *(int *)(unaff_s0 + 0x110) = *(int *)(unaff_s0 + 0x110) + unaff_s5;
    *(undefined4 *)(unaff_s0 + 0x1c) = 0xffff0000;
    *(code **)(unaff_s0 + 0x20) = PlayerCallback_8006120c;
    *(undefined4 *)(unaff_s0 + 0x98) = 0xffff0000;
    *(code **)(unaff_s0 + 0x9c) = PlayerStateCallback_2;
  }
  return;
}



uint PlayerCallback_8005dde0(int param_1,short param_2,int param_3,int param_4)

{
  undefined1 uVar1;
  undefined *puVar2;
  short sVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short unaff_s4;
  code *pcVar10;
  
  uVar9 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar9 = PlayerCallback_8005deb0
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar9;
    }
    break;
  case 0x1017:
    uVar9 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar9 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 1) {
    if (param_3 == 0x182d840c) {
      if (*(int *)(param_1 + 0x14c) != 0) {
        *(undefined1 *)(*(int *)(*(int *)(param_1 + 0x14c) + 0x34) + 10) = 0;
        RemoveEntityFromAllLists(g_GameStatePtr,*(undefined4 *)(param_1 + 0x14c));
        FUN_8007eb78(g_GameStatePtr,*(undefined4 *)(param_1 + 0x14c));
        *(undefined4 *)(param_1 + 0x14c) = 0;
      }
      *(undefined1 *)(param_1 + 0x150) = *(undefined1 *)(param_1 + 0x15d);
      *(undefined1 *)(param_1 + 0x151) = *(undefined1 *)(param_1 + 0x15e);
      *(undefined1 *)(param_1 + 0x152) = *(undefined1 *)(param_1 + 0x15f);
      *(undefined1 *)(param_1 + 0x153) = *(undefined1 *)(param_1 + 0x1b3);
      puVar2 = g_pPlayerState;
      *(undefined2 *)(param_1 + 0x146) = *(undefined2 *)(param_1 + 0x68);
      *(undefined2 *)(param_1 + 0x148) = *(undefined2 *)(param_1 + 0x6a);
      *(undefined2 *)(param_1 + 0x1aa) = *(undefined2 *)(param_1 + 0x1a6);
      *(undefined2 *)(param_1 + 0x1ac) = *(undefined2 *)(param_1 + 0x1a8);
      *(undefined *)(param_1 + 0x154) = puVar2[0x18];
      if (*(char *)(param_1 + 0x74) == '\0') {
        sVar3 = *(short *)(param_1 + 0x68) + 0x3e;
      }
      else {
        sVar3 = *(short *)(param_1 + 0x68) + -0x3e;
      }
      *(short *)(param_1 + 0x68) = sVar3;
      puVar2 = g_pPlayerState;
      *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + -0x11;
      puVar2[0x15] = puVar2[0x15] + -1;
      SetEntitySpriteId(param_1,0x1d1811b3,1);
      iVar7 = *(int *)(param_1 + 300);
      if (iVar7 != 0) {
        sVar3 = (short)*(undefined4 *)(param_1 + 0x110);
        if (*(int *)(param_1 + 0x58) == 0x8000) {
          sVar3 = sVar3 >> 1;
        }
        iVar8 = (int)*(short *)(iVar7 + 10);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar10 = *(code **)(iVar7 + 0xc);
          }
          else {
            iVar4 = iVar8 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0xc));
            unaff_s4 = (short)*(undefined4 *)(iVar4 + -8);
            pcVar10 = *(code **)(iVar4 + -4);
          }
          iVar4 = (int)*(short *)(iVar7 + 8);
          if (0 < iVar8 << 0x10) {
            iVar4 = unaff_s4 + iVar4;
          }
          (*pcVar10)(iVar7 + iVar4,0x1005,(int)sVar3,param_1);
        }
        *(undefined4 *)(param_1 + 300) = 0;
      }
      *(undefined1 *)(*(int *)(param_1 + 0x34) + 0x38) = 1;
      *(undefined1 *)(param_1 + 0x15a) = 0x20;
      *(undefined1 *)(param_1 + 0x15b) = 0x60;
      iVar7 = *(int *)(param_1 + 0x34);
      uVar1 = *(undefined1 *)(param_1 + 0x15b);
      *(undefined1 *)(param_1 + 0x15c) = 0x30;
      *(undefined1 *)(iVar7 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
      *(undefined1 *)(iVar7 + 0x35) = uVar1;
      *(undefined1 *)(iVar7 + 0x36) = 0x30;
      puVar2 = blbHeaderBufferBase;
      *(undefined2 *)(param_1 + 0x144) = 0x4b0;
      uVar5 = AllocateFromHeap(puVar2,0x100,1,0);
      uVar6 = FUN_8006dd98(uVar5,(int)*(short *)(param_1 + 0x146),(int)*(short *)(param_1 + 0x148),
                           *(undefined1 *)(param_1 + 0x74),*(undefined4 *)(param_1 + 0x58));
      uVar5 = g_GameStatePtr;
      *(undefined4 *)(param_1 + 0x14c) = uVar6;
      AddEntityToSortedRenderList(uVar5);
    }
  }
  else if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar9;
}



void PlayerCallback_8005deb0(void)

{
  undefined1 uVar1;
  undefined *puVar2;
  short sVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int iVar7;
  int iVar8;
  int unaff_s0;
  short unaff_s2;
  int unaff_s3;
  short unaff_s4;
  code *pcVar9;
  
  EntitySetState();
  if (unaff_s2 == 1) {
    if (unaff_s3 == 0x182d840c) {
      if (*(int *)(unaff_s0 + 0x14c) != 0) {
        *(undefined1 *)(*(int *)(*(int *)(unaff_s0 + 0x14c) + 0x34) + 10) = 0;
        RemoveEntityFromAllLists(g_GameStatePtr,*(undefined4 *)(unaff_s0 + 0x14c));
        FUN_8007eb78(g_GameStatePtr,*(undefined4 *)(unaff_s0 + 0x14c));
        *(undefined4 *)(unaff_s0 + 0x14c) = 0;
      }
      *(undefined1 *)(unaff_s0 + 0x150) = *(undefined1 *)(unaff_s0 + 0x15d);
      *(undefined1 *)(unaff_s0 + 0x151) = *(undefined1 *)(unaff_s0 + 0x15e);
      *(undefined1 *)(unaff_s0 + 0x152) = *(undefined1 *)(unaff_s0 + 0x15f);
      *(undefined1 *)(unaff_s0 + 0x153) = *(undefined1 *)(unaff_s0 + 0x1b3);
      puVar2 = g_pPlayerState;
      *(undefined2 *)(unaff_s0 + 0x146) = *(undefined2 *)(unaff_s0 + 0x68);
      *(undefined2 *)(unaff_s0 + 0x148) = *(undefined2 *)(unaff_s0 + 0x6a);
      *(undefined2 *)(unaff_s0 + 0x1aa) = *(undefined2 *)(unaff_s0 + 0x1a6);
      *(undefined2 *)(unaff_s0 + 0x1ac) = *(undefined2 *)(unaff_s0 + 0x1a8);
      *(undefined *)(unaff_s0 + 0x154) = puVar2[0x18];
      if (*(char *)(unaff_s0 + 0x74) == '\0') {
        sVar3 = *(short *)(unaff_s0 + 0x68) + 0x3e;
      }
      else {
        sVar3 = *(short *)(unaff_s0 + 0x68) + -0x3e;
      }
      *(short *)(unaff_s0 + 0x68) = sVar3;
      puVar2 = g_pPlayerState;
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + -0x11;
      puVar2[0x15] = puVar2[0x15] + -1;
      SetEntitySpriteId();
      iVar7 = *(int *)(unaff_s0 + 300);
      if (iVar7 != 0) {
        sVar3 = (short)*(undefined4 *)(unaff_s0 + 0x110);
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          sVar3 = sVar3 >> 1;
        }
        iVar8 = (int)*(short *)(iVar7 + 10);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar9 = *(code **)(iVar7 + 0xc);
          }
          else {
            iVar4 = iVar8 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0xc));
            unaff_s4 = (short)*(undefined4 *)(iVar4 + -8);
            pcVar9 = *(code **)(iVar4 + -4);
          }
          iVar4 = (int)*(short *)(iVar7 + 8);
          if (0 < iVar8 << 0x10) {
            iVar4 = unaff_s4 + iVar4;
          }
          (*pcVar9)(iVar7 + iVar4,0x1005,(int)sVar3);
        }
        *(undefined4 *)(unaff_s0 + 300) = 0;
      }
      *(undefined1 *)(*(int *)(unaff_s0 + 0x34) + 0x38) = 1;
      *(undefined1 *)(unaff_s0 + 0x15a) = 0x20;
      *(undefined1 *)(unaff_s0 + 0x15b) = 0x60;
      iVar7 = *(int *)(unaff_s0 + 0x34);
      uVar1 = *(undefined1 *)(unaff_s0 + 0x15b);
      *(undefined1 *)(unaff_s0 + 0x15c) = 0x30;
      *(undefined1 *)(iVar7 + 0x34) = *(undefined1 *)(unaff_s0 + 0x15a);
      *(undefined1 *)(iVar7 + 0x35) = uVar1;
      *(undefined1 *)(iVar7 + 0x36) = 0x30;
      puVar2 = blbHeaderBufferBase;
      *(undefined2 *)(unaff_s0 + 0x144) = 0x4b0;
      uVar5 = AllocateFromHeap(puVar2,0x100,1,0);
      uVar6 = FUN_8006dd98(uVar5,(int)*(short *)(unaff_s0 + 0x146),(int)*(short *)(unaff_s0 + 0x148)
                           ,*(undefined1 *)(unaff_s0 + 0x74));
      uVar5 = g_GameStatePtr;
      *(undefined4 *)(unaff_s0 + 0x14c) = uVar6;
      AddEntityToSortedRenderList(uVar5);
    }
  }
  else if (unaff_s2 == 2) {
    EntityProcessCallbackQueue();
  }
  return;
}



uint PlayerCallback_8005e170(int param_1,short param_2,int param_3,int param_4)

{
  short sVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  short unaff_s2;
  code *pcVar6;
  short unaff_s6;
  short local_40;
  
  uVar5 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar5 = PlayerCallback_8005e248
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar5;
    }
    break;
  case 0x1017:
    uVar5 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar5 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 1) {
    if (param_3 == 0x10022814) {
      iVar4 = (int)*(short *)(param_1 + 0x26);
      local_40 = *(short *)(param_1 + 0x68);
      if (iVar4 != 0) {
        if (iVar4 < 1) {
          pcVar6 = *(code **)(param_1 + 0x28);
        }
        else {
          iVar2 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
          unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
          pcVar6 = *(code **)(iVar2 + -4);
        }
        iVar2 = (int)*(short *)(param_1 + 0x24);
        if (0 < iVar4 << 0x10) {
          iVar2 = unaff_s2 + iVar2;
        }
        local_40 = (*pcVar6)(param_1 + iVar2,(int)local_40);
      }
      iVar4 = (int)*(short *)(param_1 + 0x2e);
      sVar1 = *(short *)(param_1 + 0x6a) + -0x46;
      if (iVar4 != 0) {
        if (iVar4 < 1) {
          pcVar6 = *(code **)(param_1 + 0x30);
        }
        else {
          iVar2 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar2 + -8);
          pcVar6 = *(code **)(iVar2 + -4);
        }
        iVar2 = (int)*(short *)(param_1 + 0x2c);
        if (0 < iVar4 << 0x10) {
          iVar2 = unaff_s6 + iVar2;
        }
        sVar1 = (*pcVar6)(param_1 + iVar2,(int)sVar1);
      }
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
      uVar3 = FUN_80053268(uVar3,(int)local_40,(int)sVar1,*(undefined1 *)(param_1 + 0x74));
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
      g_pPlayerState[0x1c] = g_pPlayerState[0x1c] + -1;
    }
  }
  else if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar5;
}



void PlayerCallback_8005e248(void)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int unaff_s0;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  int unaff_s5;
  short unaff_s6;
  short sStack00000010;
  short sStack00000012;
  
  EntitySetState();
  if (unaff_s4 == 1) {
    if (unaff_s5 == 0x10022814) {
      iVar3 = (int)*(short *)(unaff_s0 + 0x26);
      sStack00000010 = *(short *)(unaff_s0 + 0x68);
      if (iVar3 != 0) {
        if (iVar3 < 1) {
          pcVar4 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar1 = iVar3 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
          pcVar4 = *(code **)(iVar1 + -4);
        }
        iVar1 = (int)*(short *)(unaff_s0 + 0x24);
        if (0 < iVar3 << 0x10) {
          iVar1 = unaff_s2 + iVar1;
        }
        sStack00000010 = (*pcVar4)(unaff_s0 + iVar1,(int)sStack00000010);
      }
      iVar3 = (int)*(short *)(unaff_s0 + 0x2e);
      sStack00000012 = *(short *)(unaff_s0 + 0x6a) + -0x46;
      if (iVar3 != 0) {
        if (iVar3 < 1) {
          pcVar4 = *(code **)(unaff_s0 + 0x30);
        }
        else {
          iVar1 = iVar3 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar1 + -8);
          pcVar4 = *(code **)(iVar1 + -4);
        }
        iVar1 = (int)*(short *)(unaff_s0 + 0x2c);
        if (0 < iVar3 << 0x10) {
          iVar1 = unaff_s6 + iVar1;
        }
        sStack00000012 = (*pcVar4)(unaff_s0 + iVar1,(int)sStack00000012);
      }
      uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
      uVar2 = FUN_80053268(uVar2,(int)sStack00000010,(int)sStack00000012,
                           *(undefined1 *)(unaff_s0 + 0x74));
      AddEntityToSortedRenderList(g_GameStatePtr,uVar2);
      g_pPlayerState[0x1c] = g_pPlayerState[0x1c] + -1;
    }
  }
  else if (unaff_s4 == 2) {
    EntityProcessCallbackQueue();
  }
  return;
}



uint PlayerCallback_8005e450(int param_1,short param_2,undefined4 param_3,int param_4)

{
  uint uVar1;
  
  uVar1 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar1 = PlayerCallback_8005e510
                        (param_1,null_FFFF0000h_800a5db8,
                         PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar1;
    }
    break;
  case 0x1017:
    uVar1 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar1 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
  default:
  }
  if (param_2 == 0x1009) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



void PlayerCallback_8005e510(void)

{
  short unaff_s2;
  
  EntitySetState();
  if (unaff_s2 == 0x1009) {
    EntityProcessCallbackQueue();
  }
  return;
}



uint PlayerCallback_8005e574(int param_1,short param_2,uint param_3,int param_4)

{
  undefined1 uVar1;
  bool bVar2;
  u_short uVar3;
  undefined2 uVar4;
  short sVar5;
  short sVar6;
  undefined4 uVar7;
  int iVar8;
  undefined4 uVar9;
  uint uVar10;
  int iVar11;
  short unaff_s4;
  code *pcVar12;
  short unaff_s6;
  undefined4 local_d0;
  undefined4 local_c8;
  
  uVar10 = 0;
  switch(param_2) {
  case 0x100c:
    FUN_8006ccb4(param_1);
    break;
  case 0x100d:
    FUN_8006ce80(param_1);
    break;
  default:
    goto switchD_8005e5d4_caseD_100e;
  case 0x100f:
    *(undefined2 *)(param_1 + 0x68) = *(undefined2 *)(param_4 + 0x68);
    *(short *)(param_1 + 0x6a) = *(short *)(param_4 + 0x6a) + 0x20;
    EntitySetState(param_1,null_FFFF0000h_800a5dc0,PTR_PlayerState_CheckpointExit_800a5dc4);
    break;
  case 0x1010:
    if ((*(char *)(param_1 + 0x178) == '\0') && (*(char *)(param_1 + 0x1b2) == '\0')) {
      uVar10 = PlayerCallback_8005e650
                         (param_1,null_FFFF0000h_800a5db8,
                          PTR_PlayerState_LevelExitTeleporter_800a5dbc);
      return uVar10;
    }
    goto switchD_8005e5d4_caseD_100e;
  case 0x1017:
    uVar10 = 0;
    if (*(char *)(param_1 + 0x178) == '\0') {
      uVar10 = (uint)(*(char *)(param_1 + 0x1b2) == '\0');
    }
switchD_8005e5d4_caseD_100e:
  }
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if (param_2 != 1) {
    return uVar10;
  }
  if (param_3 != 0x80062824) {
    if (param_3 < 0x80062825) {
      if (param_3 == 0x11232c94) {
        bVar2 = false;
        if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
          bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
        }
        if (!bVar2) {
          return uVar10;
        }
        local_c8._0_2_ = 0x10;
        if (*(char *)(param_1 + 0x74) != '\0') {
          local_c8._0_2_ = -0x10;
        }
        local_c8 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x97,
                            (short)local_c8 + *(short *)(param_1 + 0x68));
        uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        uVar7 = FUN_8003802c(uVar7,local_c8,*(undefined4 *)(param_1 + 0x58));
        AddEntityToSortedRenderList(g_GameStatePtr,uVar7);
        return uVar10;
      }
      if (0x11232c94 < param_3) {
        if (param_3 == 0x30160814) {
          bVar2 = false;
          if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
            bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
          }
          if (bVar2) {
            uVar7 = *(undefined4 *)(param_1 + 0x68);
            uVar9 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
            iVar8 = InitParticleEntity(uVar9,0x8814c64,uVar7,*(undefined1 *)(param_1 + 0x74),
                                       *(undefined4 *)(param_1 + 0x58),2000,0);
            iVar11 = *(int *)(iVar8 + 0x34);
            uVar3 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,
                             (int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                             (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
            uVar7 = g_GameStatePtr;
            *(u_short *)(iVar11 + 0x24) = uVar3;
            AddEntityToSortedRenderList(uVar7,iVar8);
          }
        }
        else {
          if (param_3 < 0x30160815) {
            if (param_3 != 0x12820d34) {
              if (param_3 != 0x1c0c66f2) {
                return uVar10;
              }
              uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
              uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c288,0,9000,1);
              AddEntityToBothLists(g_GameStatePtr,uVar7);
              ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34),1000);
              return uVar10;
            }
            goto PlayerCallback_8005ef28;
          }
          if (param_3 == 0x384d0812) {
            uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
            uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c2c0,0,9000,1);
            AddEntityToBothLists(g_GameStatePtr,uVar7);
            return uVar10;
          }
          if (param_3 != 0x404082c4) {
            return uVar10;
          }
        }
PlayerCallback_8005f25c:
        FUN_8005f29c(param_1);
        return uVar10;
      }
      if (param_3 == 0x10022814) goto PlayerCallback_8005f25c;
      if (param_3 < 0x10022815) {
        if (param_3 == 0x105080e) {
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c2c0,0,9000,1);
          AddEntityToBothLists(g_GameStatePtr,uVar7);
          iVar8 = *(int *)(param_1 + 0x34);
          *(undefined1 *)(param_1 + 0x15a) = 0xff;
          *(undefined1 *)(param_1 + 0x15b) = 0xff;
          uVar1 = *(undefined1 *)(param_1 + 0x15b);
          *(undefined1 *)(param_1 + 0x15c) = 0xff;
          *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
          *(undefined1 *)(iVar8 + 0x35) = uVar1;
          *(undefined1 *)(iVar8 + 0x36) = 0xff;
          *(undefined1 *)(param_1 + 0x17d) = 2;
          ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34),0x232a);
          return uVar10;
        }
        if (param_3 != 0x80ca433) {
          return uVar10;
        }
PlayerCallback_8005ef28:
        uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
        uVar10 = PlayerCallback_8005f0b8(uVar7,&PTR_PTR_8009c288,0,9000,1);
        return uVar10;
      }
      if (param_3 != 0x10062824) {
        if (param_3 != 0x1023281c) {
          return uVar10;
        }
        FUN_8005f29c(param_1);
        if (*(char *)(param_1 + 0x17b) == '\0') {
          local_d0._0_2_ = 0x2a;
          if (*(char *)(param_1 + 0x74) != '\0') {
            local_d0._0_2_ = -0x2a;
          }
          local_d0 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x1c,
                              (short)local_d0 + *(short *)(param_1 + 0x68));
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
          iVar8 = FUN_80037ae0(uVar7,local_d0,*(undefined4 *)(param_1 + 0x58),0);
          iVar11 = *(int *)(iVar8 + 0x34);
          uVar3 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,
                           (int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                           (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
          *(u_short *)(iVar11 + 0x24) = uVar3;
          uVar4 = 0x32;
        }
        else {
          local_d0._0_2_ = 0x10;
          if (*(char *)(param_1 + 0x74) != '\0') {
            local_d0._0_2_ = -0x10;
          }
          local_d0 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x97,
                              (short)local_d0 + *(short *)(param_1 + 0x68));
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
          iVar8 = FUN_80037ae0(uVar7,local_d0,*(undefined4 *)(param_1 + 0x58),1);
          iVar11 = *(int *)(iVar8 + 0x34);
          uVar3 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,
                           (int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                           (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
          *(u_short *)(iVar11 + 0x24) = uVar3;
          uVar4 = 0xca;
        }
        *(undefined2 *)(iVar8 + 0x100) = uVar4;
        EntitySetRenderFlags(iVar8,1);
        AddEntityToSortedRenderList(g_GameStatePtr,iVar8);
        *(char *)(param_1 + 0x17b) = *(char *)(param_1 + 0x17b) + '\x01';
        return uVar10;
      }
    }
    else if (param_3 != 0x94062824) {
      if (param_3 < 0x94062825) {
        if (param_3 != 0x92062824) {
          if (param_3 < 0x92062825) {
            if (param_3 == 0x89038298) {
              uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x28,1,0);
              uVar7 = FUN_80037d34(uVar7);
              AddToZOrderList(g_GameStatePtr,uVar7);
              return uVar10;
            }
            if (param_3 != 0x8c5e41e4) {
              return uVar10;
            }
            iVar8 = *(int *)(param_1 + 0x34);
            *(undefined1 *)(param_1 + 0x15a) = 0xc0;
            *(undefined1 *)(param_1 + 0x15b) = 0xc0;
            uVar1 = *(undefined1 *)(param_1 + 0x15b);
            *(undefined1 *)(param_1 + 0x15c) = 0xc0;
            *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
            *(undefined1 *)(iVar8 + 0x35) = uVar1;
            *(undefined1 *)(iVar8 + 0x36) = 0xc0;
          }
          else {
            if (param_3 != 0x920e2062) {
              if (param_3 != 0x92120854) {
                return uVar10;
              }
              uVar7 = *(undefined4 *)(param_1 + 0x68);
              uVar9 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
              iVar8 = InitParticleEntity(uVar9,0x2a10c60,uVar7,*(undefined1 *)(param_1 + 0x74),
                                         *(undefined4 *)(param_1 + 0x58),2000,0);
              iVar11 = *(int *)(iVar8 + 0x34);
              uVar3 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,
                               (int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                               (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
              uVar7 = g_GameStatePtr;
              *(u_short *)(iVar11 + 0x24) = uVar3;
              AddEntityToSortedRenderList(uVar7,iVar8);
              return uVar10;
            }
            iVar8 = *(int *)(param_1 + 0x34);
            *(undefined1 *)(param_1 + 0x15a) = 0;
            *(undefined1 *)(param_1 + 0x15b) = 0;
            uVar1 = *(undefined1 *)(param_1 + 0x15b);
            *(undefined1 *)(param_1 + 0x15c) = 0;
            *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
            *(undefined1 *)(iVar8 + 0x35) = uVar1;
            *(undefined1 *)(iVar8 + 0x36) = 0;
          }
          *(undefined1 *)(param_1 + 0x17d) = 2;
          return uVar10;
        }
      }
      else {
        if (param_3 == 0x98062824) goto PlayerCallback_8005ea8c;
        if (param_3 < 0x98062825) {
          if ((param_3 != 0x94222814) && (param_3 != 0x94422814)) {
            return uVar10;
          }
          bVar2 = false;
          if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
            bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
          }
          if (bVar2) {
            local_c8._0_2_ = 0x10;
            if (*(char *)(param_1 + 0x74) != '\0') {
              local_c8._0_2_ = -0x10;
            }
            local_c8 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x97,
                                (short)local_c8 + *(short *)(param_1 + 0x68));
            uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
            iVar8 = InitParticleEntity(uVar7,0x2c00e64,local_c8,*(undefined1 *)(param_1 + 0x74),
                                       *(undefined4 *)(param_1 + 0x58),2000,0);
            iVar11 = *(int *)(iVar8 + 0x34);
            uVar3 = GetTPage((uint)*(byte *)(iVar11 + 0x32),1,
                             (int)*(short *)(iVar11 + 0x10) & 0xffffffc0,
                             (int)*(short *)(iVar11 + 0x12) & 0xffffff00);
            *(u_short *)(iVar11 + 0x24) = uVar3;
            *(undefined4 *)(iVar8 + 0x50) = 0x20000;
            *(undefined4 *)(iVar8 + 0x54) = 0x20000;
            if (param_3 == 0x94422814) {
              uVar4 = 0x200;
              if (*(char *)(param_1 + 0x74) != '\0') {
                uVar4 = 0xe00;
              }
              *(undefined2 *)(iVar8 + 0x72) = uVar4;
            }
            AddEntityToSortedRenderList(g_GameStatePtr,iVar8);
          }
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          uVar10 = PlayerCallback_8005f0b8(uVar7,&PTR_PTR_8009c2c0,0,9000,1);
          return uVar10;
        }
        if ((param_3 != 0xb0062824) && (param_3 != 0xd0062824)) {
          return uVar10;
        }
      }
    }
  }
  if (param_3 != 0x98062824) {
    if (param_3 == 0x10062824) {
      ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(param_1 + 0x34),1000);
    }
    bVar2 = false;
    if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
      bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
    }
    if (bVar2) {
      sVar5 = 0x10;
      if (*(char *)(param_1 + 0x74) != '\0') {
        sVar5 = -0x10;
      }
      uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x2c,1,0);
      iVar8 = (int)*(short *)(param_1 + 0x26);
      sVar5 = *(short *)(param_1 + 0x68) + sVar5;
      if (iVar8 != 0) {
        if (iVar8 < 1) {
          pcVar12 = *(code **)(param_1 + 0x28);
        }
        else {
          iVar11 = iVar8 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
          unaff_s4 = (short)*(undefined4 *)(iVar11 + -8);
          pcVar12 = *(code **)(iVar11 + -4);
        }
        iVar11 = (int)*(short *)(param_1 + 0x24);
        if (0 < iVar8 << 0x10) {
          iVar11 = unaff_s4 + iVar11;
        }
        sVar5 = (*pcVar12)(param_1 + iVar11,(int)sVar5);
      }
      iVar8 = (int)*(short *)(param_1 + 0x2e);
      sVar6 = *(short *)(param_1 + 0x6a) + -0x97;
      if (iVar8 != 0) {
        if (iVar8 < 1) {
          pcVar12 = *(code **)(param_1 + 0x30);
        }
        else {
          iVar11 = iVar8 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar11 + -8);
          pcVar12 = *(code **)(iVar11 + -4);
        }
        iVar11 = (int)*(short *)(param_1 + 0x2c);
        if (0 < iVar8 << 0x10) {
          iVar11 = unaff_s6 + iVar11;
        }
        sVar6 = (*pcVar12)(param_1 + iVar11,(int)sVar6);
      }
      iVar8 = (uint)*(byte *)(param_1 + 0x17a) * 6;
      uVar7 = FUN_80037810(uVar7,(int)sVar5,(int)sVar6,(int)*(short *)(&DAT_8009c37c + iVar8),
                           (int)*(short *)(&DAT_8009c37e + iVar8),
                           (int)*(short *)(&DAT_8009c380 + (uint)*(byte *)(param_1 + 0x17a) * 6));
      AddToZOrderList(g_GameStatePtr,uVar7);
    }
    *(char *)(param_1 + 0x17a) = *(char *)(param_1 + 0x17a) + '\x01';
    return uVar10;
  }
PlayerCallback_8005ea8c:
  iVar8 = *(int *)(param_1 + 0x34);
  *(undefined1 *)(param_1 + 0x15a) = 0;
  *(undefined1 *)(param_1 + 0x15b) = 0;
  uVar1 = *(undefined1 *)(param_1 + 0x15b);
  *(undefined1 *)(param_1 + 0x15c) = 0;
  *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(param_1 + 0x15a);
  *(undefined1 *)(iVar8 + 0x35) = uVar1;
  *(undefined1 *)(iVar8 + 0x36) = 0;
  *(undefined1 *)(param_1 + 0x17d) = 2;
  uVar10 = PlayerCallback_8005eadc();
  return uVar10;
}



void PlayerCallback_8005e650(void)

{
  undefined1 uVar1;
  bool bVar2;
  u_short uVar3;
  undefined2 uVar4;
  short sVar5;
  short sVar6;
  undefined4 uVar7;
  int iVar8;
  undefined4 uVar9;
  int iVar10;
  uint unaff_s1;
  int unaff_s2;
  short unaff_s3;
  short unaff_s4;
  code *pcVar11;
  short unaff_s6;
  short sStack00000020;
  short sStack00000028;
  undefined2 uStack00000032;
  
  EntitySetState();
  if (unaff_s3 == 2) {
    EntityProcessCallbackQueue();
  }
  if (unaff_s3 != 1) {
    return;
  }
  if (unaff_s1 != 0x80062824) {
    if (unaff_s1 < 0x80062825) {
      if (unaff_s1 == 0x11232c94) {
        bVar2 = false;
        if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
          bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
        }
        if (!bVar2) {
          return;
        }
        sStack00000028 = 0x10;
        if (*(char *)(unaff_s2 + 0x74) != '\0') {
          sStack00000028 = -0x10;
        }
        _sStack00000028 =
             CONCAT22(*(short *)(unaff_s2 + 0x6a) + -0x97,
                      sStack00000028 + *(short *)(unaff_s2 + 0x68));
        uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        uVar7 = FUN_8003802c(uVar7,_sStack00000028,*(undefined4 *)(unaff_s2 + 0x58));
        AddEntityToSortedRenderList(g_GameStatePtr,uVar7);
        return;
      }
      if (0x11232c94 < unaff_s1) {
        if (unaff_s1 == 0x30160814) {
          bVar2 = false;
          if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
            bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
          }
          if (bVar2) {
            uVar7 = *(undefined4 *)(unaff_s2 + 0x68);
            uVar9 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
            iVar8 = InitParticleEntity(uVar9,0x8814c64,uVar7,*(undefined1 *)(unaff_s2 + 0x74));
            iVar10 = *(int *)(iVar8 + 0x34);
            uVar3 = GetTPage((uint)*(byte *)(iVar10 + 0x32),1,
                             (int)*(short *)(iVar10 + 0x10) & 0xffffffc0,
                             (int)*(short *)(iVar10 + 0x12) & 0xffffff00);
            uVar7 = g_GameStatePtr;
            *(u_short *)(iVar10 + 0x24) = uVar3;
            AddEntityToSortedRenderList(uVar7,iVar8);
          }
        }
        else {
          if (unaff_s1 < 0x30160815) {
            if (unaff_s1 != 0x12820d34) {
              if (unaff_s1 != 0x1c0c66f2) {
                return;
              }
              uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
              uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c288,0,9000);
              AddEntityToBothLists(g_GameStatePtr,uVar7);
              ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(unaff_s2 + 0x34),1000);
              return;
            }
            goto PlayerCallback_8005ef28;
          }
          if (unaff_s1 == 0x384d0812) {
            uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
            uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c2c0,0,9000);
            AddEntityToBothLists(g_GameStatePtr,uVar7);
            return;
          }
          if (unaff_s1 != 0x404082c4) {
            return;
          }
        }
PlayerCallback_8005f25c:
        FUN_8005f29c();
        return;
      }
      if (unaff_s1 == 0x10022814) goto PlayerCallback_8005f25c;
      if (unaff_s1 < 0x10022815) {
        if (unaff_s1 == 0x105080e) {
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          uVar7 = FUN_80034a54(uVar7,&PTR_PTR_8009c2c0,0,9000);
          AddEntityToBothLists(g_GameStatePtr,uVar7);
          iVar8 = *(int *)(unaff_s2 + 0x34);
          *(undefined1 *)(unaff_s2 + 0x15a) = 0xff;
          *(undefined1 *)(unaff_s2 + 0x15b) = 0xff;
          uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
          *(undefined1 *)(unaff_s2 + 0x15c) = 0xff;
          *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
          *(undefined1 *)(iVar8 + 0x35) = uVar1;
          *(undefined1 *)(iVar8 + 0x36) = 0xff;
          *(undefined1 *)(unaff_s2 + 0x17d) = 2;
          ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(unaff_s2 + 0x34),0x232a);
          return;
        }
        if (unaff_s1 != 0x80ca433) {
          return;
        }
PlayerCallback_8005ef28:
        uStack00000032 = 0;
        uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
        PlayerCallback_8005f0b8(uVar7,&PTR_PTR_8009c288,uStack00000032,9000);
        return;
      }
      if (unaff_s1 != 0x10062824) {
        if (unaff_s1 != 0x1023281c) {
          return;
        }
        FUN_8005f29c();
        if (*(char *)(unaff_s2 + 0x17b) == '\0') {
          sStack00000020 = 0x2a;
          if (*(char *)(unaff_s2 + 0x74) != '\0') {
            sStack00000020 = -0x2a;
          }
          _sStack00000020 =
               CONCAT22(*(short *)(unaff_s2 + 0x6a) + -0x1c,
                        sStack00000020 + *(short *)(unaff_s2 + 0x68));
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
          iVar8 = FUN_80037ae0(uVar7,_sStack00000020,*(undefined4 *)(unaff_s2 + 0x58),0);
          iVar10 = *(int *)(iVar8 + 0x34);
          uVar3 = GetTPage((uint)*(byte *)(iVar10 + 0x32),1,
                           (int)*(short *)(iVar10 + 0x10) & 0xffffffc0,
                           (int)*(short *)(iVar10 + 0x12) & 0xffffff00);
          *(u_short *)(iVar10 + 0x24) = uVar3;
          uVar4 = 0x32;
        }
        else {
          sStack00000020 = 0x10;
          if (*(char *)(unaff_s2 + 0x74) != '\0') {
            sStack00000020 = -0x10;
          }
          _sStack00000020 =
               CONCAT22(*(short *)(unaff_s2 + 0x6a) + -0x97,
                        sStack00000020 + *(short *)(unaff_s2 + 0x68));
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
          iVar8 = FUN_80037ae0(uVar7,_sStack00000020,*(undefined4 *)(unaff_s2 + 0x58),1);
          iVar10 = *(int *)(iVar8 + 0x34);
          uVar3 = GetTPage((uint)*(byte *)(iVar10 + 0x32),1,
                           (int)*(short *)(iVar10 + 0x10) & 0xffffffc0,
                           (int)*(short *)(iVar10 + 0x12) & 0xffffff00);
          *(u_short *)(iVar10 + 0x24) = uVar3;
          uVar4 = 0xca;
        }
        *(undefined2 *)(iVar8 + 0x100) = uVar4;
        EntitySetRenderFlags(iVar8,1);
        AddEntityToSortedRenderList(g_GameStatePtr,iVar8);
        *(char *)(unaff_s2 + 0x17b) = *(char *)(unaff_s2 + 0x17b) + '\x01';
        return;
      }
    }
    else if (unaff_s1 != 0x94062824) {
      if (unaff_s1 < 0x94062825) {
        if (unaff_s1 != 0x92062824) {
          if (unaff_s1 < 0x92062825) {
            if (unaff_s1 == 0x89038298) {
              uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x28,1,0);
              uVar7 = FUN_80037d34(uVar7);
              AddToZOrderList(g_GameStatePtr,uVar7);
              return;
            }
            if (unaff_s1 != 0x8c5e41e4) {
              return;
            }
            iVar8 = *(int *)(unaff_s2 + 0x34);
            *(undefined1 *)(unaff_s2 + 0x15a) = 0xc0;
            *(undefined1 *)(unaff_s2 + 0x15b) = 0xc0;
            uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
            *(undefined1 *)(unaff_s2 + 0x15c) = 0xc0;
            *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
            *(undefined1 *)(iVar8 + 0x35) = uVar1;
            *(undefined1 *)(iVar8 + 0x36) = 0xc0;
          }
          else {
            if (unaff_s1 != 0x920e2062) {
              if (unaff_s1 != 0x92120854) {
                return;
              }
              uVar7 = *(undefined4 *)(unaff_s2 + 0x68);
              uVar9 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
              iVar8 = InitParticleEntity(uVar9,0x2a10c60,uVar7,*(undefined1 *)(unaff_s2 + 0x74));
              iVar10 = *(int *)(iVar8 + 0x34);
              uVar3 = GetTPage((uint)*(byte *)(iVar10 + 0x32),1,
                               (int)*(short *)(iVar10 + 0x10) & 0xffffffc0,
                               (int)*(short *)(iVar10 + 0x12) & 0xffffff00);
              uVar7 = g_GameStatePtr;
              *(u_short *)(iVar10 + 0x24) = uVar3;
              AddEntityToSortedRenderList(uVar7,iVar8);
              return;
            }
            iVar8 = *(int *)(unaff_s2 + 0x34);
            *(undefined1 *)(unaff_s2 + 0x15a) = 0;
            *(undefined1 *)(unaff_s2 + 0x15b) = 0;
            uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
            *(undefined1 *)(unaff_s2 + 0x15c) = 0;
            *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
            *(undefined1 *)(iVar8 + 0x35) = uVar1;
            *(undefined1 *)(iVar8 + 0x36) = 0;
          }
          *(undefined1 *)(unaff_s2 + 0x17d) = 2;
          return;
        }
      }
      else {
        if (unaff_s1 == 0x98062824) goto PlayerCallback_8005ea8c;
        if (unaff_s1 < 0x98062825) {
          if ((unaff_s1 != 0x94222814) && (unaff_s1 != 0x94422814)) {
            return;
          }
          bVar2 = false;
          if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
            bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
          }
          if (bVar2) {
            sStack00000028 = 0x10;
            if (*(char *)(unaff_s2 + 0x74) != '\0') {
              sStack00000028 = -0x10;
            }
            _sStack00000028 =
                 CONCAT22(*(short *)(unaff_s2 + 0x6a) + -0x97,
                          sStack00000028 + *(short *)(unaff_s2 + 0x68));
            uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
            iVar8 = InitParticleEntity(uVar7,0x2c00e64,_sStack00000028,
                                       *(undefined1 *)(unaff_s2 + 0x74));
            iVar10 = *(int *)(iVar8 + 0x34);
            uVar3 = GetTPage((uint)*(byte *)(iVar10 + 0x32),1,
                             (int)*(short *)(iVar10 + 0x10) & 0xffffffc0,
                             (int)*(short *)(iVar10 + 0x12) & 0xffffff00);
            *(u_short *)(iVar10 + 0x24) = uVar3;
            *(undefined4 *)(iVar8 + 0x50) = 0x20000;
            *(undefined4 *)(iVar8 + 0x54) = 0x20000;
            if (unaff_s1 == 0x94422814) {
              uVar4 = 0x200;
              if (*(char *)(unaff_s2 + 0x74) != '\0') {
                uVar4 = 0xe00;
              }
              *(undefined2 *)(iVar8 + 0x72) = uVar4;
            }
            AddEntityToSortedRenderList(g_GameStatePtr,iVar8);
          }
          uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
          PlayerCallback_8005f0b8(uVar7,&PTR_PTR_8009c2c0,0,9000);
          return;
        }
        if ((unaff_s1 != 0xb0062824) && (unaff_s1 != 0xd0062824)) {
          return;
        }
      }
    }
  }
  if (unaff_s1 != 0x98062824) {
    if (unaff_s1 == 0x10062824) {
      ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(unaff_s2 + 0x34),1000);
    }
    bVar2 = false;
    if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
      bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
    }
    if (bVar2) {
      sVar5 = 0x10;
      if (*(char *)(unaff_s2 + 0x74) != '\0') {
        sVar5 = -0x10;
      }
      uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x2c,1,0);
      iVar8 = (int)*(short *)(unaff_s2 + 0x26);
      sVar5 = *(short *)(unaff_s2 + 0x68) + sVar5;
      if (iVar8 != 0) {
        if (iVar8 < 1) {
          pcVar11 = *(code **)(unaff_s2 + 0x28);
        }
        else {
          iVar10 = iVar8 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x28));
          unaff_s4 = (short)*(undefined4 *)(iVar10 + -8);
          pcVar11 = *(code **)(iVar10 + -4);
        }
        iVar10 = (int)*(short *)(unaff_s2 + 0x24);
        if (0 < iVar8 << 0x10) {
          iVar10 = unaff_s4 + iVar10;
        }
        sVar5 = (*pcVar11)(unaff_s2 + iVar10,(int)sVar5);
      }
      iVar8 = (int)*(short *)(unaff_s2 + 0x2e);
      sVar6 = *(short *)(unaff_s2 + 0x6a) + -0x97;
      if (iVar8 != 0) {
        if (iVar8 < 1) {
          pcVar11 = *(code **)(unaff_s2 + 0x30);
        }
        else {
          iVar10 = iVar8 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar10 + -8);
          pcVar11 = *(code **)(iVar10 + -4);
        }
        iVar10 = (int)*(short *)(unaff_s2 + 0x2c);
        if (0 < iVar8 << 0x10) {
          iVar10 = unaff_s6 + iVar10;
        }
        sVar6 = (*pcVar11)(unaff_s2 + iVar10,(int)sVar6);
      }
      uVar7 = FUN_80037810(uVar7,(int)sVar5,(int)sVar6,
                           (int)*(short *)(&DAT_8009c37c + (uint)*(byte *)(unaff_s2 + 0x17a) * 6));
      AddToZOrderList(g_GameStatePtr,uVar7);
    }
    *(char *)(unaff_s2 + 0x17a) = *(char *)(unaff_s2 + 0x17a) + '\x01';
    return;
  }
PlayerCallback_8005ea8c:
  iVar8 = *(int *)(unaff_s2 + 0x34);
  *(undefined1 *)(unaff_s2 + 0x15a) = 0;
  *(undefined1 *)(unaff_s2 + 0x15b) = 0;
  uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
  *(undefined1 *)(unaff_s2 + 0x15c) = 0;
  *(undefined1 *)(iVar8 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
  *(undefined1 *)(iVar8 + 0x35) = uVar1;
  *(undefined1 *)(iVar8 + 0x36) = 0;
  *(undefined1 *)(unaff_s2 + 0x17d) = 2;
  PlayerCallback_8005eadc();
  return;
}



void PlayerCallback_8005ea80(void)

{
  undefined1 uVar1;
  bool bVar2;
  short sVar3;
  short sVar4;
  uint in_v0;
  int iVar5;
  undefined4 uVar6;
  int iVar7;
  uint unaff_s1;
  int unaff_s2;
  short unaff_s4;
  code *pcVar8;
  short unaff_s6;
  
  if (unaff_s1 != (in_v0 | 0x2824)) {
    if (unaff_s1 == 0x10062824) {
      ChangeRenderZOrder(g_GameStatePtr,*(undefined4 *)(unaff_s2 + 0x34),1000);
    }
    bVar2 = false;
    if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
      bVar2 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
    }
    if (bVar2) {
      sVar3 = 0x10;
      if (*(char *)(unaff_s2 + 0x74) != '\0') {
        sVar3 = -0x10;
      }
      uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x2c,1,0);
      iVar5 = (int)*(short *)(unaff_s2 + 0x26);
      sVar3 = *(short *)(unaff_s2 + 0x68) + sVar3;
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar8 = *(code **)(unaff_s2 + 0x28);
        }
        else {
          iVar7 = iVar5 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x28));
          unaff_s4 = (short)*(undefined4 *)(iVar7 + -8);
          pcVar8 = *(code **)(iVar7 + -4);
        }
        iVar7 = (int)*(short *)(unaff_s2 + 0x24);
        if (0 < iVar5 << 0x10) {
          iVar7 = unaff_s4 + iVar7;
        }
        sVar3 = (*pcVar8)(unaff_s2 + iVar7,(int)sVar3);
      }
      iVar5 = (int)*(short *)(unaff_s2 + 0x2e);
      sVar4 = *(short *)(unaff_s2 + 0x6a) + -0x97;
      if (iVar5 != 0) {
        if (iVar5 < 1) {
          pcVar8 = *(code **)(unaff_s2 + 0x30);
        }
        else {
          iVar7 = iVar5 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar7 + -8);
          pcVar8 = *(code **)(iVar7 + -4);
        }
        iVar7 = (int)*(short *)(unaff_s2 + 0x2c);
        if (0 < iVar5 << 0x10) {
          iVar7 = unaff_s6 + iVar7;
        }
        sVar4 = (*pcVar8)(unaff_s2 + iVar7,(int)sVar4);
      }
      uVar6 = FUN_80037810(uVar6,(int)sVar3,(int)sVar4,
                           (int)*(short *)(&DAT_8009c37c + (uint)*(byte *)(unaff_s2 + 0x17a) * 6));
      AddToZOrderList(g_GameStatePtr,uVar6);
    }
    *(char *)(unaff_s2 + 0x17a) = *(char *)(unaff_s2 + 0x17a) + '\x01';
    return;
  }
  iVar5 = *(int *)(unaff_s2 + 0x34);
  *(undefined1 *)(unaff_s2 + 0x15a) = 0;
  *(undefined1 *)(unaff_s2 + 0x15b) = 0;
  uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
  *(undefined1 *)(unaff_s2 + 0x15c) = 0;
  *(undefined1 *)(iVar5 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
  *(undefined1 *)(iVar5 + 0x35) = uVar1;
  *(undefined1 *)(iVar5 + 0x36) = 0;
  *(undefined1 *)(unaff_s2 + 0x17d) = 2;
  PlayerCallback_8005eadc();
  return;
}



void PlayerCallback_8005ea8c(void)

{
  undefined1 uVar1;
  int iVar2;
  int unaff_s2;
  
  iVar2 = *(int *)(unaff_s2 + 0x34);
  *(undefined1 *)(unaff_s2 + 0x15a) = 0;
  *(undefined1 *)(unaff_s2 + 0x15b) = 0;
  uVar1 = *(undefined1 *)(unaff_s2 + 0x15b);
  *(undefined1 *)(unaff_s2 + 0x15c) = 0;
  *(undefined1 *)(iVar2 + 0x34) = *(undefined1 *)(unaff_s2 + 0x15a);
  *(undefined1 *)(iVar2 + 0x35) = uVar1;
  *(undefined1 *)(iVar2 + 0x36) = 0;
  *(undefined1 *)(unaff_s2 + 0x17d) = 2;
  PlayerCallback_8005eadc();
  return;
}



void PlayerCallback_8005eadc(void)

{
  bool bVar1;
  short sVar2;
  short sVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int unaff_s2;
  short unaff_s4;
  code *pcVar7;
  short unaff_s6;
  
  bVar1 = false;
  if (0x9ff < *(ushort *)(blbHeaderBufferBase + 0xa64c)) {
    bVar1 = 0xf < (byte)blbHeaderBufferBase[0xa29e];
  }
  if (bVar1) {
    sVar2 = 0x10;
    if (*(char *)(unaff_s2 + 0x74) != '\0') {
      sVar2 = -0x10;
    }
    uVar4 = AllocateFromHeap(blbHeaderBufferBase,0x2c,1,0);
    iVar6 = (int)*(short *)(unaff_s2 + 0x26);
    sVar2 = *(short *)(unaff_s2 + 0x68) + sVar2;
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar7 = *(code **)(unaff_s2 + 0x28);
      }
      else {
        iVar5 = iVar6 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x28));
        unaff_s4 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar7 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(unaff_s2 + 0x24);
      if (0 < iVar6 << 0x10) {
        iVar5 = unaff_s4 + iVar5;
      }
      sVar2 = (*pcVar7)(unaff_s2 + iVar5,(int)sVar2);
    }
    iVar6 = (int)*(short *)(unaff_s2 + 0x2e);
    sVar3 = *(short *)(unaff_s2 + 0x6a) + -0x97;
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar7 = *(code **)(unaff_s2 + 0x30);
      }
      else {
        iVar5 = iVar6 * 8 + *(int *)(unaff_s2 + *(short *)(unaff_s2 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar7 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(unaff_s2 + 0x2c);
      if (0 < iVar6 << 0x10) {
        iVar5 = unaff_s6 + iVar5;
      }
      sVar3 = (*pcVar7)(unaff_s2 + iVar5,(int)sVar3);
    }
    uVar4 = FUN_80037810(uVar4,(int)sVar2,(int)sVar3,
                         (int)*(short *)(&DAT_8009c37c + (uint)*(byte *)(unaff_s2 + 0x17a) * 6));
    AddToZOrderList(g_GameStatePtr,uVar4);
  }
  *(char *)(unaff_s2 + 0x17a) = *(char *)(unaff_s2 + 0x17a) + '\x01';
  return;
}



void PlayerCallback_8005ef28(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  undefined2 uStack00000030;
  undefined2 uStack00000032;
  
  uStack00000030 = 0;
  uStack00000032 = 0;
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,param_2,1,0);
  PlayerCallback_8005f0b8(uVar1,&PTR_PTR_8009c288,uStack00000032,9000);
  return;
}



void PlayerCallback_8005f0b8(undefined4 param_1,undefined4 param_2,int param_3)

{
  undefined4 uVar1;
  uint in_v1;
  
  uVar1 = FUN_80034a54(param_1,param_2,in_v1 | param_3 << 0x10);
  AddEntityToBothLists(g_GameStatePtr,uVar1);
  return;
}



void PlayerCallback_8005f25c(void)

{
  FUN_8005f29c();
  return;
}



void FUN_8005f29c(int param_1)

{
  short sVar1;
  u_short uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  undefined4 local_20;
  
  sVar1 = *(short *)(&DAT_8009c2e0 + (uint)*(byte *)(param_1 + 0x179) * 4);
  if (*(char *)(param_1 + 0x74) != '\0') {
    sVar1 = -*(short *)(&DAT_8009c2e0 + (uint)*(byte *)(param_1 + 0x179) * 4);
  }
  local_20 = CONCAT22(*(short *)(param_1 + 0x6a) +
                      *(short *)(&DAT_8009c2e2 + (uint)*(byte *)(param_1 + 0x179) * 4),
                      sVar1 + *(short *)(param_1 + 0x68));
  uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  iVar4 = InitParticleEntity(uVar3,0x2841e65,local_20,*(undefined1 *)(param_1 + 0x74),
                             *(undefined4 *)(param_1 + 0x58),0x3d4,0);
  iVar5 = *(int *)(iVar4 + 0x34);
  uVar2 = GetTPage((uint)*(byte *)(iVar5 + 0x32),1,(int)*(short *)(iVar5 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar5 + 0x12) & 0xffffff00);
  uVar3 = g_GameStatePtr;
  *(u_short *)(iVar5 + 0x24) = uVar2;
  AddEntityToSortedRenderList(uVar3,iVar4);
  *(char *)(param_1 + 0x179) = *(char *)(param_1 + 0x179) + '\x01';
  return;
}



undefined4 PlayerCallback_8005f3d4(undefined4 param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = FUN_8005ca60(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



undefined4 PlayerCallback_8005f430(int param_1,short param_2,int param_3)

{
  undefined4 uVar1;
  
  uVar1 = PlayerEntityCollisionHandler(param_1,param_2);
  if (param_2 == 1) {
    if ((param_3 == 0x50900004) &&
       (*(undefined1 *)(g_GameStatePtr + 0x62) = 0, *(int *)(param_1 + 0x140) != 0)) {
      RemoveEntityFromAllLists(g_GameStatePtr);
      *(undefined4 *)(param_1 + 0x140) = 0;
    }
  }
  else if (param_2 == 2) {
    *(undefined4 *)(param_1 + 8) = 0xffff0000;
    *(code **)(param_1 + 0xc) = PlayerEntityCollisionHandler;
    SetEntitySpriteId(param_1,0x388110,1);
    FUN_8001d170(param_1,0x1084280);
    FUN_8001d0f0(param_1,0x1084280);
  }
  return uVar1;
}



undefined4 PlayerCallback_8005f540(int param_1,short param_2,int param_3)

{
  undefined4 uVar1;
  ushort uVar2;
  
  uVar1 = FUN_8005c1c4(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if ((param_2 == 1) && (param_3 == 0x1210cd03)) {
    uVar2 = 0x2000;
    if (*(char *)(param_1 + 0x74) != '\0') {
      uVar2 = 0x8000;
    }
    if ((uVar2 & **(ushort **)(param_1 + 0x100)) != 0) {
      EntitySetState(param_1,null_FFFF0000h_800a5dd0,PTR_PlayerState_Running_800a5dd4);
    }
  }
  return uVar1;
}



undefined4 PlayerCallback_8005f604(int param_1,short param_2,int param_3)

{
  undefined4 uVar1;
  
  uVar1 = PlayerEntityCollisionHandler(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  if ((param_2 == 1) && (param_3 == 0x10022814)) {
    FUN_8006e8e4(*(undefined4 *)(param_1 + 0x16c),1);
  }
  return uVar1;
}



undefined4 FUN_8005f694(int param_1)

{
  char cVar1;
  ushort uVar2;
  bool bVar3;
  undefined4 uVar4;
  undefined *puVar5;
  
  uVar2 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if ((uVar2 & 4) == 0) {
    if ((uVar2 & 1) == 0) {
      if ((uVar2 & 8) == 0) {
        bVar3 = false;
        if ((uVar2 & 2) == 0) goto LAB_8005f7a4;
        cVar1 = g_pPlayerState[0x1c];
        uVar4 = null_FFFF0000h_800a5df0;
        puVar5 = PTR_Callback_8006c3ac_800a5df4;
      }
      else {
        cVar1 = g_pPlayerState[0x16];
        uVar4 = null_FFFF0000h_800a5de8;
        puVar5 = PTR_Callback_8006c0d8_800a5dec;
      }
      goto joined_r0x8005f748;
    }
    if (*(int *)(param_1 + 300) == 0) {
      cVar1 = g_pPlayerState[0x15];
      uVar4 = null_FFFF0000h_800a5de0;
      puVar5 = PTR_Callback_8006bf2c_800a5de4;
      goto joined_r0x8005f748;
    }
  }
  else {
    cVar1 = g_pPlayerState[0x14];
    uVar4 = null_FFFF0000h_800a5dd8;
    puVar5 = PTR_Callback_8006bdd4_800a5ddc;
joined_r0x8005f748:
    if (cVar1 != '\0') {
      EntitySetState(param_1,uVar4,puVar5);
      return 1;
    }
  }
  bVar3 = true;
LAB_8005f7a4:
  if (bVar3) {
    FUN_8001c4a4(param_1,0x64221e61);
  }
  return 0;
}



void PlayerCallback_8005f834(int param_1)

{
  ushort uVar1;
  undefined4 uVar2;
  undefined *puVar3;
  undefined4 uVar4;
  undefined *puVar5;
  char cVar6;
  undefined4 uVar7;
  undefined *puVar8;
  char local_10 [8];
  
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0) {
      cVar6 = FUN_8005f694(param_1);
      if (cVar6 != '\0') {
        return;
      }
      uVar1 = **(ushort **)(param_1 + 0x100);
      if ((uVar1 & 0x2000) == 0) {
        if ((uVar1 & 0x8000) == 0) {
          if ((uVar1 & 0x4000) == 0) {
            return;
          }
          uVar7 = null_FFFF0000h_800a5e30;
          puVar8 = PTR_Callback_8006a584_800a5e34;
          if (*(char *)(param_1 + 0x135) != '\0') {
            uVar7 = null_FFFF0000h_800a5e28;
            puVar8 = PTR_Callback_8006a6e4_800a5e2c;
          }
        }
        else {
          cVar6 = CheckWallCollision(param_1,1);
          puVar8 = PTR_Callback_80067fc8_800a5e24;
          uVar7 = null_FFFF0000h_800a5e20;
          puVar5 = PTR_PlayerState_WalkingLeft_800a5e1c;
          uVar4 = null_FFFF0000h_800a5e18;
          puVar3 = PTR_PlayerState_JumpApex_800a5e0c;
          uVar2 = null_FFFF0000h_800a5e08;
          if (cVar6 == '\0') {
            if (*(char *)(param_1 + 0x135) != '\0') {
              return;
            }
            if ((*(short *)(param_1 + 0xa2) == -1) &&
               (*(code **)(param_1 + 0xa4) == Callback_80067fc8)) {
              return;
            }
            *(undefined1 *)(param_1 + 0x74) = 1;
          }
          else if (*(char *)(param_1 + 0x135) == '\0') {
            uVar7 = null_FFFF0000h_800a5e10;
            puVar8 = PTR_PlayerState_WalkingRight_800a5e14;
            if (*(char *)(param_1 + 0x74) != '\x01') {
              *(undefined1 *)(param_1 + 0x74) = 1;
              uVar7 = uVar4;
              puVar8 = puVar5;
            }
          }
          else {
            *(undefined1 *)(param_1 + 0x74) = 1;
            uVar7 = uVar2;
            puVar8 = puVar3;
          }
        }
      }
      else {
        cVar6 = CheckWallCollision(param_1,0);
        puVar8 = PTR_Callback_80067fc8_800a5e24;
        uVar7 = null_FFFF0000h_800a5e20;
        puVar5 = PTR_PlayerState_WalkingLeft_800a5e1c;
        uVar4 = null_FFFF0000h_800a5e18;
        puVar3 = PTR_PlayerState_JumpApex_800a5e0c;
        uVar2 = null_FFFF0000h_800a5e08;
        if (cVar6 == '\0') {
          if (*(char *)(param_1 + 0x135) != '\0') {
            return;
          }
          if ((*(short *)(param_1 + 0xa2) == -1) &&
             (*(code **)(param_1 + 0xa4) == Callback_80067fc8)) {
            return;
          }
          *(undefined1 *)(param_1 + 0x74) = 0;
        }
        else if (*(char *)(param_1 + 0x135) == '\0') {
          uVar7 = null_FFFF0000h_800a5e10;
          puVar8 = PTR_PlayerState_WalkingRight_800a5e14;
          if (*(char *)(param_1 + 0x74) != '\0') {
            *(undefined1 *)(param_1 + 0x74) = 0;
            uVar7 = uVar4;
            puVar8 = puVar5;
          }
        }
        else {
          *(undefined1 *)(param_1 + 0x74) = 0;
          uVar7 = uVar2;
          puVar8 = puVar3;
        }
      }
    }
    else {
      local_10[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_10);
      if (local_10[0] == 'e') {
        return;
      }
      uVar7 = null_FFFF0000h_800a5db0;
      puVar8 = PTR_PlayerState_PickupItem_800a5db4;
      if (*(char *)(param_1 + 0x135) != '\0') {
        uVar7 = null_FFFF0000h_800a5e00;
        puVar8 = PTR_Callback_80068f80_800a5e04;
      }
    }
  }
  else {
    uVar7 = null_FFFF0000h_800a5df8;
    puVar8 = PTR_Callback_800698b8_800a5dfc;
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
  }
  EntitySetState(param_1,uVar7,puVar8);
  return;
}



void PlayerCallback_8005fb18(int param_1)

{
  char cVar1;
  ushort uVar2;
  char local_18 [8];
  
  uVar2 = 0x2000;
  if (*(char *)(param_1 + 0x74) != '\0') {
    uVar2 = 0x8000;
  }
  if ((g_pPlayerState[0x13] != '\0') &&
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0)) {
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
    PlayerCallback_8005fd1c(param_1,null_FFFF0000h_800a5e38,PTR_Callback_80069a3c_800a5e3c);
    return;
  }
  if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0) {
    local_18[0] = EntityApplyMovementCallbacks
                            (param_1,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
    FUN_8005a5c4(param_1,local_18);
    if (local_18[0] == 'e') {
      return;
    }
    if (*(char *)(param_1 + 0x135) == '\0') {
      PlayerCallback_8005fd1c();
      return;
    }
    PlayerCallback_8005fd1c();
    return;
  }
  cVar1 = FUN_8005f694(param_1);
  if (cVar1 != '\0') {
    return;
  }
  if ((uVar2 & **(ushort **)(param_1 + 0x100)) != 0) {
    return;
  }
  if (*(char *)(param_1 + 0x135) != '\0') {
    PlayerCallback_8005fd1c();
    return;
  }
  if (*(short *)(param_1 + 0xa2) == -1) {
    if (*(code **)(param_1 + 0xa4) == PlayerState_WalkingRight) {
      PlayerCallback_8005fd1c();
      return;
    }
    if (*(code **)(param_1 + 0xa4) == PlayerState_WalkingLeft) goto PlayerCallback_8005fcf0;
  }
  if (*(ushort *)(param_1 + 0x156) < 0xc) {
    PlayerCallback_8005fd1c();
    return;
  }
PlayerCallback_8005fcf0:
  if ((*(short *)(param_1 + 0xa2) != -1) || (*(code **)(param_1 + 0xa4) != PlayerState_WalkingLeft))
  {
    EntitySetState(param_1,null_FFFF0000h_800a5e48,PTR_Callback_80067a34_800a5e4c);
  }
  return;
}



void PlayerCallback_8005fccc(undefined4 param_1)

{
  int unaff_s0;
  
  if (*(ushort *)(unaff_s0 + 0x156) < 0xc) {
    PlayerCallback_8005fd1c(param_1,null_FFFF0000h_800a5d20,PTR_PlayerStateCallback_0_800a5d24);
    return;
  }
  if ((*(short *)(unaff_s0 + 0xa2) != -1) ||
     (*(code **)(unaff_s0 + 0xa4) != PlayerState_WalkingLeft)) {
    EntitySetState();
  }
  return;
}



void PlayerCallback_8005fcf0(void)

{
  int unaff_s0;
  
  if ((*(short *)(unaff_s0 + 0xa2) != -1) ||
     (*(code **)(unaff_s0 + 0xa4) != PlayerState_WalkingLeft)) {
    EntitySetState();
  }
  return;
}



void PlayerCallback_8005fd1c(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_8005fd3c(int param_1)

{
  char cVar1;
  undefined4 uVar2;
  undefined *puVar3;
  ushort uVar4;
  char local_18 [8];
  
  uVar4 = 0x2000;
  if (*(char *)(param_1 + 0x74) != '\0') {
    uVar4 = 0x8000;
  }
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0) {
      cVar1 = FUN_8005f694(param_1);
      if (cVar1 != '\0') {
        return;
      }
      if ((uVar4 & **(ushort **)(param_1 + 0x100)) == 0) {
        if (*(char *)(param_1 + 0x135) != '\0') {
          EntitySetState(param_1,null_FFFF0000h_800a5e40,PTR_PlayerState_SpecialMove2_800a5e44);
        }
        uVar2 = null_FFFF0000h_800a5e48;
        puVar3 = PTR_Callback_80067a34_800a5e4c;
        if (*(ushort *)(param_1 + 0x156) < 0xc) {
          uVar2 = null_FFFF0000h_800a5d20;
          puVar3 = PTR_PlayerStateCallback_0_800a5d24;
        }
      }
      else {
        uVar2 = null_FFFF0000h_800a5e50;
        puVar3 = PTR_PlayerState_Jump_800a5e54;
        if ((g_DefaultBGColorB & **(ushort **)(param_1 + 0x100)) == 0) {
          return;
        }
      }
    }
    else {
      local_18[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_18);
      if (local_18[0] == 'e') {
        return;
      }
      uVar2 = null_FFFF0000h_800a5db0;
      puVar3 = PTR_PlayerState_PickupItem_800a5db4;
      if (*(char *)(param_1 + 0x135) != '\0') {
        uVar2 = null_FFFF0000h_800a5e00;
        puVar3 = PTR_Callback_80068f80_800a5e04;
      }
    }
  }
  else {
    uVar2 = null_FFFF0000h_800a5e38;
    puVar3 = PTR_Callback_80069a3c_800a5e3c;
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
  }
  EntitySetState(param_1,uVar2,puVar3);
  return;
}



void PlayerCallback_8005ff20(int param_1)

{
  char cVar1;
  undefined4 uVar2;
  undefined *puVar3;
  ushort uVar4;
  char local_18 [8];
  
  uVar4 = 0x2000;
  if (*(char *)(param_1 + 0x74) != '\0') {
    uVar4 = 0x8000;
  }
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0) {
      cVar1 = FUN_8005f694(param_1);
      if (cVar1 != '\0') {
        return;
      }
      if ((uVar4 & **(ushort **)(param_1 + 0x100)) == 0) {
        uVar2 = null_FFFF0000h_800a5e48;
        puVar3 = PTR_Callback_80067a34_800a5e4c;
        if (*(char *)(param_1 + 0x135) != '\0') {
          uVar2 = null_FFFF0000h_800a5e40;
          puVar3 = PTR_PlayerState_SpecialMove2_800a5e44;
        }
      }
      else {
        uVar2 = null_FFFF0000h_800a5e58;
        puVar3 = PTR_PlayerState_Falling_800a5e5c;
        if ((g_DefaultBGColorB & **(ushort **)(param_1 + 0x100)) != 0) {
          return;
        }
      }
    }
    else {
      local_18[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_18);
      if (local_18[0] == 'e') {
        return;
      }
      uVar2 = null_FFFF0000h_800a5db0;
      puVar3 = PTR_PlayerState_PickupItem_800a5db4;
      if (*(char *)(param_1 + 0x135) != '\0') {
        uVar2 = null_FFFF0000h_800a5e00;
        puVar3 = PTR_Callback_80068f80_800a5e04;
      }
    }
  }
  else {
    uVar2 = null_FFFF0000h_800a5e38;
    puVar3 = PTR_Callback_80069a3c_800a5e3c;
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
  }
  EntitySetState(param_1,uVar2,puVar3);
  return;
}



void PlayerCallback_800600e0(int param_1)

{
  char cVar1;
  undefined4 uVar2;
  undefined *puVar3;
  ushort uVar4;
  ushort uVar5;
  char local_18 [8];
  
  uVar5 = 0x2000;
  uVar4 = 0x8000;
  if (*(char *)(param_1 + 0x74) != '\0') {
    uVar5 = 0x8000;
    uVar4 = 0x2000;
  }
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0) {
      cVar1 = FUN_8005f694(param_1);
      if (cVar1 != '\0') {
        return;
      }
      if ((uVar4 & **(ushort **)(param_1 + 0x100)) == 0) {
        if ((uVar5 & **(ushort **)(param_1 + 0x100)) != 0) {
          return;
        }
        uVar2 = null_FFFF0000h_800a5e60;
        puVar3 = PTR_Callback_80068130_800a5e64;
        if (*(char *)(param_1 + 0x135) != '\0') {
          uVar2 = null_FFFF0000h_800a5e40;
          puVar3 = PTR_PlayerState_SpecialMove2_800a5e44;
        }
      }
      else {
        cVar1 = CheckWallCollision(param_1,*(char *)(param_1 + 0x74) == '\0');
        if (cVar1 == '\0') {
          return;
        }
        *(bool *)(param_1 + 0x74) = *(char *)(param_1 + 0x74) == '\0';
        uVar2 = null_FFFF0000h_800a5e18;
        puVar3 = PTR_PlayerState_WalkingLeft_800a5e1c;
        if (*(char *)(param_1 + 0x135) != '\0') {
          uVar2 = null_FFFF0000h_800a5e08;
          puVar3 = PTR_PlayerState_JumpApex_800a5e0c;
        }
      }
    }
    else {
      local_18[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_18);
      if (local_18[0] == 'e') {
        return;
      }
      uVar2 = null_FFFF0000h_800a5db0;
      puVar3 = PTR_PlayerState_PickupItem_800a5db4;
      if (*(char *)(param_1 + 0x135) != '\0') {
        uVar2 = null_FFFF0000h_800a5e00;
        puVar3 = PTR_Callback_80068f80_800a5e04;
      }
    }
  }
  else {
    uVar2 = null_FFFF0000h_800a5e38;
    puVar3 = PTR_Callback_80069a3c_800a5e3c;
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
  }
  EntitySetState(param_1,uVar2,puVar3);
  return;
}



void PlayerCallback_800602e0(int param_1)

{
  ushort uVar1;
  bool bVar2;
  undefined4 uVar3;
  undefined *puVar4;
  
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if (((((uVar1 & 4) != 0) || ((uVar1 & 1) != 0)) || ((uVar1 & 8) != 0)) ||
     (bVar2 = false, (uVar1 & 2) != 0)) {
    bVar2 = true;
  }
  if (bVar2) {
    FUN_8001c4a4(param_1,0x64221e61);
  }
  if (((*(char *)(param_1 + 0x170) == '\0') && (g_pPlayerState[0x13] != '\0')) &&
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0)) {
    if (*(char *)(param_1 + 0x135) == '\0') {
      EntitySetState(param_1,null_FFFF0000h_800a5e68,PTR_PlayerState_SpecialIdleAnim_800a5e6c);
    }
    else {
      *(undefined1 *)(param_1 + 0x134) = 1;
    }
  }
  else if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0) {
    *(undefined1 *)(param_1 + 0x13c) = 10;
  }
  if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) == 0) {
    uVar3 = null_FFFF0000h_800a5e78;
    puVar4 = PTR_Callback_8006d548_800a5e7c;
    if (*(char *)(param_1 + 0x170) == '\0') goto PlayerCallback_80060470;
  }
  else if (((*(int *)(param_1 + 0x16c) == 0) || (*(int *)(param_1 + 0x110) < 1)) ||
          (uVar3 = null_FFFF0000h_800a5e70, puVar4 = PTR_Callback_8006d048_800a5e74,
          *(char *)(param_1 + 0x170) != '\0')) goto PlayerCallback_80060470;
  EntitySetState(param_1,uVar3,puVar4);
PlayerCallback_80060470:
  if (*(char *)(param_1 + 0x11f) == '\0') {
    if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) {
      if ((**(ushort **)(param_1 + 0x100) & 0x8000) != 0) {
        *(int *)(param_1 + 0x114) = -*(int *)(param_1 + 0x124);
        puVar4 = PTR_Callback_8006d3c8_800a5e84;
        uVar3 = null_FFFF0000h_800a5e80;
        if ((*(char *)(param_1 + 0x170) == '\0') || (*(char *)(param_1 + 0x74) != '\0')) {
          *(undefined1 *)(param_1 + 0x74) = 1;
        }
        else {
          *(undefined1 *)(param_1 + 0x74) = 1;
          EntitySetState(param_1,uVar3,puVar4);
        }
      }
    }
    else {
      *(undefined4 *)(param_1 + 0x114) = *(undefined4 *)(param_1 + 0x124);
      puVar4 = PTR_Callback_8006d3c8_800a5e84;
      uVar3 = null_FFFF0000h_800a5e80;
      if ((*(char *)(param_1 + 0x170) == '\0') || (*(char *)(param_1 + 0x74) == '\0')) {
        *(undefined1 *)(param_1 + 0x74) = 0;
      }
      else {
        *(undefined1 *)(param_1 + 0x74) = 0;
        EntitySetState(param_1,uVar3,puVar4);
      }
    }
  }
  else {
    *(char *)(param_1 + 0x11f) = *(char *)(param_1 + 0x11f) + -1;
    *(undefined4 *)(param_1 + 0x114) = *(undefined4 *)(param_1 + 0x120);
  }
  if (*(char *)(param_1 + 0x11e) == '\0') {
    if (*(char *)(param_1 + 0x11c) != '\0') {
      *(char *)(param_1 + 0x11c) = *(char *)(param_1 + 0x11c) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) == 0) {
        if (*(int *)(param_1 + 0x110) < -0x48000) {
          *(undefined4 *)(param_1 + 0x110) = 0xfffb8000;
        }
      }
      else {
        *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(param_1 + 0x11e) = *(char *)(param_1 + 0x11e) + -1;
    *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
    *(char *)(param_1 + 0x11c) = *(char *)(param_1 + 0x11c) + -1;
  }
  return;
}



void PlayerCallback_80060470(void)

{
  int unaff_s0;
  
  if (*(char *)(unaff_s0 + 0x11f) == '\0') {
    if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) == 0) {
      if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) != 0) {
        *(int *)(unaff_s0 + 0x114) = -*(int *)(unaff_s0 + 0x124);
        if ((*(char *)(unaff_s0 + 0x170) == '\0') || (*(char *)(unaff_s0 + 0x74) != '\0')) {
          *(undefined1 *)(unaff_s0 + 0x74) = 1;
        }
        else {
          *(undefined1 *)(unaff_s0 + 0x74) = 1;
          EntitySetState();
        }
      }
    }
    else {
      *(undefined4 *)(unaff_s0 + 0x114) = *(undefined4 *)(unaff_s0 + 0x124);
      if ((*(char *)(unaff_s0 + 0x170) == '\0') || (*(char *)(unaff_s0 + 0x74) == '\0')) {
        *(undefined1 *)(unaff_s0 + 0x74) = 0;
      }
      else {
        *(undefined1 *)(unaff_s0 + 0x74) = 0;
        EntitySetState();
      }
    }
  }
  else {
    *(char *)(unaff_s0 + 0x11f) = *(char *)(unaff_s0 + 0x11f) + -1;
    *(undefined4 *)(unaff_s0 + 0x114) = *(undefined4 *)(unaff_s0 + 0x120);
  }
  if (*(char *)(unaff_s0 + 0x11e) == '\0') {
    if (*(char *)(unaff_s0 + 0x11c) != '\0') {
      *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) == 0) {
        if (*(int *)(unaff_s0 + 0x110) < -0x48000) {
          *(undefined4 *)(unaff_s0 + 0x110) = 0xfffb8000;
        }
      }
      else {
        *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(unaff_s0 + 0x11e) = *(char *)(unaff_s0 + 0x11e) + -1;
    *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
    *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
  }
  return;
}



void PlayerCallback_800605d8(int param_1)

{
  char cVar1;
  ushort uVar2;
  bool bVar3;
  int iVar4;
  
  uVar2 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if (((((uVar2 & 4) != 0) || ((uVar2 & 1) != 0)) || ((uVar2 & 8) != 0)) ||
     (bVar3 = false, (uVar2 & 2) != 0)) {
    bVar3 = true;
  }
  if (bVar3) {
    FUN_8001c4a4(param_1,0x64221e61);
  }
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0) {
      *(undefined1 *)(param_1 + 0x13c) = 10;
    }
  }
  else if (*(char *)(param_1 + 0x135) == '\0') {
    EntitySetState(param_1,null_FFFF0000h_800a5e68,PTR_PlayerState_SpecialIdleAnim_800a5e6c);
  }
  else {
    *(undefined1 *)(param_1 + 0x134) = 1;
  }
  if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) == 0) {
    if (*(char *)(param_1 + 0x170) != '\0') {
      EntitySetState(param_1,null_FFFF0000h_800a5e78,PTR_Callback_8006d548_800a5e7c);
    }
  }
  else if (((*(int *)(param_1 + 0x16c) != 0) && (0 < *(int *)(param_1 + 0x110))) &&
          (*(char *)(param_1 + 0x170) == '\0')) {
    PlayerCallback_80060750();
    return;
  }
  if (*(char *)(param_1 + 0x11f) != '\0') {
    *(char *)(param_1 + 0x11f) = *(char *)(param_1 + 0x11f) + -1;
    *(undefined4 *)(param_1 + 0x114) = *(undefined4 *)(param_1 + 0x120);
    PlayerCallback_800607b8();
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) {
    if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) goto code_r0x800607b8;
    *(undefined1 *)(param_1 + 0x74) = 1;
    iVar4 = -*(int *)(param_1 + 0x124);
  }
  else {
    iVar4 = *(int *)(param_1 + 0x124);
    *(undefined1 *)(param_1 + 0x74) = 0;
  }
  *(int *)(param_1 + 0x114) = iVar4;
code_r0x800607b8:
  if (*(char *)(param_1 + 0x11e) == '\0') {
    if (*(char *)(param_1 + 0x11c) == '\0') {
      cVar1 = *(char *)(param_1 + 0x11d);
      if ((cVar1 != '\0') &&
         (*(char *)(param_1 + 0x11d) = cVar1 + -1,
         (g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0)) {
        if (*(char *)(param_1 + 0x164) == '\x02') {
          *(char *)(param_1 + 0x11c) = cVar1 + '\x04';
        }
        else {
          *(char *)(param_1 + 0x11c) = cVar1 + -1;
        }
        *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
        *(undefined1 *)(param_1 + 0x11d) = 0;
      }
    }
    else {
      *(char *)(param_1 + 0x11c) = *(char *)(param_1 + 0x11c) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) != 0) {
        *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(param_1 + 0x11e) = *(char *)(param_1 + 0x11e) + -1;
    *(undefined4 *)(param_1 + 0x118) = 0xffffee00;
    *(char *)(param_1 + 0x11c) = *(char *)(param_1 + 0x11c) + -1;
  }
  return;
}



void PlayerCallback_80060750(void)

{
  char cVar1;
  int iVar2;
  int unaff_s0;
  
  EntitySetState();
  if (*(char *)(unaff_s0 + 0x11f) != '\0') {
    *(char *)(unaff_s0 + 0x11f) = *(char *)(unaff_s0 + 0x11f) + -1;
    *(undefined4 *)(unaff_s0 + 0x114) = *(undefined4 *)(unaff_s0 + 0x120);
    PlayerCallback_800607b8();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) == 0) {
    if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) goto code_r0x800607b8;
    *(undefined1 *)(unaff_s0 + 0x74) = 1;
    iVar2 = -*(int *)(unaff_s0 + 0x124);
  }
  else {
    iVar2 = *(int *)(unaff_s0 + 0x124);
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
  }
  *(int *)(unaff_s0 + 0x114) = iVar2;
code_r0x800607b8:
  if (*(char *)(unaff_s0 + 0x11e) == '\0') {
    if (*(char *)(unaff_s0 + 0x11c) == '\0') {
      cVar1 = *(char *)(unaff_s0 + 0x11d);
      if ((cVar1 != '\0') &&
         (*(char *)(unaff_s0 + 0x11d) = cVar1 + -1,
         (g_DefaultBGColorR & *(ushort *)(*(int *)(unaff_s0 + 0x100) + 2)) != 0)) {
        if (*(char *)(unaff_s0 + 0x164) == '\x02') {
          *(char *)(unaff_s0 + 0x11c) = cVar1 + '\x04';
        }
        else {
          *(char *)(unaff_s0 + 0x11c) = cVar1 + -1;
        }
        *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
        *(undefined1 *)(unaff_s0 + 0x11d) = 0;
      }
    }
    else {
      *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0) {
        *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(unaff_s0 + 0x11e) = *(char *)(unaff_s0 + 0x11e) + -1;
    *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
    *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
  }
  return;
}



void PlayerCallback_800607b8(void)

{
  char cVar1;
  int unaff_s0;
  
  if (*(char *)(unaff_s0 + 0x11e) == '\0') {
    if (*(char *)(unaff_s0 + 0x11c) == '\0') {
      cVar1 = *(char *)(unaff_s0 + 0x11d);
      if ((cVar1 != '\0') &&
         (*(char *)(unaff_s0 + 0x11d) = cVar1 + -1,
         (g_DefaultBGColorR & *(ushort *)(*(int *)(unaff_s0 + 0x100) + 2)) != 0)) {
        if (*(char *)(unaff_s0 + 0x164) == '\x02') {
          *(char *)(unaff_s0 + 0x11c) = cVar1 + '\x04';
        }
        else {
          *(char *)(unaff_s0 + 0x11c) = cVar1 + -1;
        }
        *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
        *(undefined1 *)(unaff_s0 + 0x11d) = 0;
      }
    }
    else {
      *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0) {
        *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(unaff_s0 + 0x11e) = *(char *)(unaff_s0 + 0x11e) + -1;
    *(undefined4 *)(unaff_s0 + 0x118) = 0xffffee00;
    *(char *)(unaff_s0 + 0x11c) = *(char *)(unaff_s0 + 0x11c) + -1;
  }
  return;
}



void PlayerCallback_80060890(int param_1)

{
  ushort uVar1;
  char cVar2;
  undefined4 uVar3;
  undefined *puVar4;
  char local_10 [8];
  
  puVar4 = PTR_Callback_8006a940_800a5e94;
  uVar3 = null_FFFF0000h_800a5e90;
  if ((g_pPlayerState[0x13] == '\0') ||
     ((g_DefaultBGColorG & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) == 0)) {
    uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
    if ((g_DefaultBGColorR & uVar1) == 0) {
      if ((uVar1 & 0x8000) == 0) {
        if ((uVar1 & 0x2000) == 0) {
          cVar2 = FUN_8005f694(param_1);
          if (cVar2 != '\0') {
            return;
          }
          if ((**(ushort **)(param_1 + 0x100) & 0x4000) != 0) {
            return;
          }
          uVar3 = null_FFFF0000h_800a5ea0;
          puVar4 = PTR_Callback_8006aa9c_800a5ea4;
          if (*(char *)(param_1 + 0x135) != '\0') {
            uVar3 = null_FFFF0000h_800a5e98;
            puVar4 = PTR_Callback_8006abf8_800a5e9c;
          }
        }
        else {
          if (*(char *)(param_1 + 0x74) == '\0') {
            return;
          }
          *(undefined1 *)(param_1 + 0x74) = 0;
        }
      }
      else {
        if (*(char *)(param_1 + 0x74) != '\0') {
          return;
        }
        *(undefined1 *)(param_1 + 0x74) = 1;
      }
    }
    else {
      local_10[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_10);
      if (local_10[0] == 'e') {
        return;
      }
      uVar3 = null_FFFF0000h_800a5db0;
      puVar4 = PTR_PlayerState_PickupItem_800a5db4;
      if (*(char *)(param_1 + 0x135) != '\0') {
        uVar3 = null_FFFF0000h_800a5e00;
        puVar4 = PTR_Callback_80068f80_800a5e04;
      }
    }
  }
  else {
    uVar3 = null_FFFF0000h_800a5e88;
    puVar4 = PTR_Callback_80069bbc_800a5e8c;
    if (*(char *)(param_1 + 0x135) != '\0') {
      *(undefined1 *)(param_1 + 0x134) = 1;
      return;
    }
  }
  EntitySetState(param_1,uVar3,puVar4);
  return;
}



void PlayerCallback_80060a5c(int param_1)

{
  ushort uVar1;
  bool bVar2;
  undefined1 uVar3;
  undefined4 uVar4;
  char local_10 [8];
  
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if (((((uVar1 & 4) != 0) || ((uVar1 & 1) != 0)) || ((uVar1 & 8) != 0)) ||
     (bVar2 = false, (uVar1 & 2) != 0)) {
    bVar2 = true;
  }
  if (bVar2) {
    FUN_8001c4a4(param_1,0x64221e61);
  }
  if ((g_DefaultBGColorR & (*(ushort **)(param_1 + 0x100))[1]) == 0) {
    if ((**(ushort **)(param_1 + 0x100) & 0x1000) != 0) {
      local_10[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 0x41) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_10);
      if (local_10[0] == '}') {
        PlayerCallback_80060c28();
        return;
      }
    }
    if ((**(ushort **)(param_1 + 0x100) & 0x4000) != 0) {
      local_10[0] = EntityApplyMovementCallbacks
                              (param_1,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) + 1) * 0x10000) >> 0x10);
      FUN_8005a5c4(param_1,local_10);
      if (local_10[0] == '}') {
        EntitySetState(param_1,null_FFFF0000h_800a5eb8,PTR_Callback_8006b4f4_800a5ebc);
        return;
      }
    }
    uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
    if ((uVar1 & 0x8000) == 0) {
      if ((uVar1 & 0x2000) == 0) {
        return;
      }
      uVar3 = *(undefined1 *)(param_1 + 0x74);
    }
    else {
      uVar3 = *(char *)(param_1 + 0x74) == '\0';
    }
    *(undefined1 *)(g_GameStatePtr + 0x62) = uVar3;
    return;
  }
  local_10[0] = EntityApplyMovementCallbacks
                          (param_1,(int)*(short *)(param_1 + 0x68),
                           (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
  FUN_8005a5c4(param_1,local_10);
  if (local_10[0] == 'e') {
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) {
    uVar4 = 0;
    if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) goto PlayerCallback_80060b58;
  }
  else {
    uVar4 = 1;
  }
  FUN_8001aab4(param_1,uVar4);
PlayerCallback_80060b58:
  PlayerCallback_80060c28();
  return;
}



void PlayerCallback_80060b58(undefined4 param_1)

{
  PlayerCallback_80060c28(param_1,null_FFFF0000h_800a5ea8,PTR_Callback_8006b974_800a5eac);
  return;
}



void PlayerCallback_80060c28(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_80060c9c(int param_1)

{
  ushort uVar1;
  bool bVar2;
  undefined1 uVar3;
  undefined4 uVar4;
  char local_10 [8];
  
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if (((((uVar1 & 4) != 0) || ((uVar1 & 1) != 0)) || ((uVar1 & 8) != 0)) ||
     (bVar2 = false, (uVar1 & 2) != 0)) {
    bVar2 = true;
  }
  if (bVar2) {
    FUN_8001c4a4(param_1,0x64221e61);
  }
  uVar1 = (*(ushort **)(param_1 + 0x100))[1];
  if ((g_DefaultBGColorR & uVar1) == 0) {
    if ((**(ushort **)(param_1 + 0x100) & 0x5000) == 0) {
      EntitySetState(param_1,null_FFFF0000h_800a5ec0,PTR_Callback_8006b658_800a5ec4);
    }
    else {
      if ((uVar1 & 0x8000) == 0) {
        if ((uVar1 & 0x2000) == 0) {
          return;
        }
        uVar3 = *(undefined1 *)(param_1 + 0x74);
      }
      else {
        uVar3 = *(char *)(param_1 + 0x74) == '\0';
      }
      *(undefined1 *)(g_GameStatePtr + 0x62) = uVar3;
    }
    return;
  }
  local_10[0] = EntityApplyMovementCallbacks
                          (param_1,(int)*(short *)(param_1 + 0x68),
                           (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
  FUN_8005a5c4(param_1,local_10);
  if (local_10[0] == 'e') {
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) {
    uVar4 = 0;
    if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) goto PlayerCallback_80060d98;
  }
  else {
    uVar4 = 1;
  }
  FUN_8001aab4(param_1,uVar4);
PlayerCallback_80060d98:
  PlayerCallback_80060dc4();
  return;
}



void PlayerCallback_80060d98(undefined4 param_1)

{
  PlayerCallback_80060dc4(param_1,null_FFFF0000h_800a5ea8,PTR_Callback_8006b974_800a5eac);
  return;
}



void PlayerCallback_80060dc4(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_80060e24(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  
  iVar3 = 4;
  if ((g_DefaultBGColorB & **(ushort **)(param_1 + 0x100)) == 0) {
    if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) != 0) {
      iVar3 = 1;
    }
  }
  else {
    iVar3 = 0x10;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x8000) != 0) {
    if (*(int *)(param_1 + 0x58) == 0) {
      trap(0x1c00);
    }
    if ((*(int *)(param_1 + 0x58) == -1) && (iVar3 == 0x8000)) {
      trap(0x1800);
    }
    PlayerCallback_80060f38();
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x2000) != 0) {
    iVar2 = *(int *)(param_1 + 0x58);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (iVar3 == 0x8000)) {
      trap(0x1800);
    }
    *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x68) + (short)((iVar3 << 0x10) / iVar2);
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x1000) == 0) {
    if ((**(ushort **)(param_1 + 0x100) & 0x4000) == 0) goto PlayerCallback_80060fe8;
    iVar2 = *(int *)(param_1 + 0x5c);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (iVar3 == 0x8000)) {
      trap(0x1800);
    }
    sVar1 = *(short *)(param_1 + 0x6a) + (short)((iVar3 << 0x10) / iVar2);
  }
  else {
    iVar2 = *(int *)(param_1 + 0x5c);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (iVar3 == 0x8000)) {
      trap(0x1800);
    }
    sVar1 = *(short *)(param_1 + 0x6a) - (short)((iVar3 << 0x10) / iVar2);
  }
  *(short *)(param_1 + 0x6a) = sVar1;
PlayerCallback_80060fe8:
  UpdateCameraPosition(g_GameStatePtr,0,0);
  GetCurrentLevelDisplayName(g_GameStatePtr + 0x84);
  FntPrint();
  GetCurrentStageIndex(g_GameStatePtr + 0x84);
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    (*pcVar4)(param_1 + iVar2,(int)*(short *)(param_1 + 0x68));
  }
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s4 + iVar2;
    }
    (*pcVar4)(param_1 + iVar2,(int)*(short *)(param_1 + 0x6a));
  }
  FntPrint();
  return;
}



void PlayerCallback_80060f38(int param_1)

{
  undefined2 in_v0;
  short sVar1;
  int iVar2;
  int iVar3;
  int unaff_s0;
  short unaff_s2;
  code *pcVar4;
  short unaff_s4;
  
  *(undefined2 *)(unaff_s0 + 0x68) = in_v0;
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x1000) == 0) {
    if ((**(ushort **)(unaff_s0 + 0x100) & 0x4000) == 0) goto PlayerCallback_80060fe8;
    iVar2 = *(int *)(unaff_s0 + 0x5c);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (param_1 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sVar1 = *(short *)(unaff_s0 + 0x6a) + (short)((param_1 << 0x10) / iVar2);
  }
  else {
    iVar2 = *(int *)(unaff_s0 + 0x5c);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (param_1 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sVar1 = *(short *)(unaff_s0 + 0x6a) - (short)((param_1 << 0x10) / iVar2);
  }
  *(short *)(unaff_s0 + 0x6a) = sVar1;
PlayerCallback_80060fe8:
  UpdateCameraPosition(g_GameStatePtr,0,0);
  GetCurrentLevelDisplayName(g_GameStatePtr + 0x84);
  FntPrint();
  GetCurrentStageIndex(g_GameStatePtr + 0x84);
  iVar2 = (int)*(short *)(unaff_s0 + 0x26);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar4 = *(code **)(unaff_s0 + 0x28);
    }
    else {
      iVar3 = iVar2 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar4 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(unaff_s0 + 0x24);
    if (0 < iVar2 << 0x10) {
      iVar3 = unaff_s2 + iVar3;
    }
    (*pcVar4)(unaff_s0 + iVar3,(int)*(short *)(unaff_s0 + 0x68));
  }
  iVar2 = (int)*(short *)(unaff_s0 + 0x2e);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar4 = *(code **)(unaff_s0 + 0x30);
    }
    else {
      iVar3 = iVar2 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar3 + -8);
      pcVar4 = *(code **)(iVar3 + -4);
    }
    iVar3 = (int)*(short *)(unaff_s0 + 0x2c);
    if (0 < iVar2 << 0x10) {
      iVar3 = unaff_s4 + iVar3;
    }
    (*pcVar4)(unaff_s0 + iVar3,(int)*(short *)(unaff_s0 + 0x6a));
  }
  FntPrint();
  return;
}



void PlayerCallback_80060fe8(void)

{
  int iVar1;
  int iVar2;
  int unaff_s0;
  short unaff_s2;
  code *pcVar3;
  short unaff_s4;
  
  UpdateCameraPosition(g_GameStatePtr,0,0);
  GetCurrentLevelDisplayName(g_GameStatePtr + 0x84);
  FntPrint();
  GetCurrentStageIndex(g_GameStatePtr + 0x84);
  iVar2 = (int)*(short *)(unaff_s0 + 0x26);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(unaff_s0 + 0x28);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(unaff_s0 + 0x24);
    if (0 < iVar2 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    (*pcVar3)(unaff_s0 + iVar1,(int)*(short *)(unaff_s0 + 0x68));
  }
  iVar2 = (int)*(short *)(unaff_s0 + 0x2e);
  if (iVar2 != 0) {
    if (iVar2 < 1) {
      pcVar3 = *(code **)(unaff_s0 + 0x30);
    }
    else {
      iVar1 = iVar2 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
      unaff_s4 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar3 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(unaff_s0 + 0x2c);
    if (0 < iVar2 << 0x10) {
      iVar1 = unaff_s4 + iVar1;
    }
    (*pcVar3)(unaff_s0 + iVar1,(int)*(short *)(unaff_s0 + 0x6a));
  }
  FntPrint();
  return;
}



// Apply Position Update from Push Forces
// 
// Reads push forces from +0x160 (push_x) and +0x162 (push_y) and applies them
// to the entity's position (combining whole+frac parts as 16.16 fixed point).
// 
// Direction flags control sign:
// - +0x74 (facing_left): if 1, negate push_x
// - +0x75 (moving_up): if 1, negate push_y
// 
// Position fields (16.16 fixed point):
// - +0x68: x_whole (s16)
// - +0x6A: y_whole (s16)  
// - +0x6C: x_frac (u16)
// - +0x6E: y_frac (u16)
// 
// Push force fields:
// - +0x160: push_x (s16) - applied each frame, then cleared
// - +0x162: push_y (s16) - applied each frame, then cleared
// 
// NOTE: The fields at +0xB4/+0xB8 are NOT used for movement!
// They appear to be physics state but are not the primary movement mechanism.

void ApplyEntityPositionUpdate(int param_1)

{
  int iVar1;
  int iVar2;
  
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar2 = *(int *)(param_1 + 0xb4);
  }
  else {
    iVar2 = -*(int *)(param_1 + 0xb4);
  }
  iVar2 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) + iVar2;
  if (*(char *)(param_1 + 0x75) == '\0') {
    iVar1 = *(int *)(param_1 + 0xb8);
  }
  else {
    iVar1 = -*(int *)(param_1 + 0xb8);
  }
  iVar1 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) + iVar1;
  *(short *)(param_1 + 0x68) = (short)((uint)iVar2 >> 0x10);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar1 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar2;
  *(short *)(param_1 + 0x6e) = (short)iVar1;
  return;
}



void PlayerCallback_8006120c(int param_1)

{
  bool bVar1;
  char cVar2;
  char cVar3;
  byte bVar4;
  undefined2 uVar5;
  int iVar6;
  uint uVar7;
  short sVar8;
  int iVar9;
  short unaff_s2;
  code *pcVar10;
  char local_27;
  char local_26;
  char local_25;
  
  iVar9 = 1;
  iVar6 = (uint)*(ushort *)(param_1 + 0x68) + (uint)*(ushort *)(param_1 + 0x160);
  *(short *)(param_1 + 0x68) = (short)iVar6;
  if (*(short *)(param_1 + 0x160) < 0) {
    iVar9 = -1;
  }
  cVar2 = EntityApplyMovementCallbacks
                    (param_1,(iVar6 + iVar9) * 0x10000 >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
  local_27 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  local_26 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  local_25 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
     (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cVar2 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80061764();
    return;
  }
  if ((((byte)(local_27 + 0x4bU) < 3) || (local_27 == -0x37)) ||
     ((local_27 == -0x35 || (bVar1 = false, (byte)(local_27 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_27 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80061764();
    return;
  }
  if ((((byte)(local_26 + 0x4bU) < 3) || (local_26 == -0x37)) ||
     ((local_26 == -0x35 || (bVar1 = false, (byte)(local_26 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_26 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80061764();
    return;
  }
  if (((((byte)(local_25 + 0x4bU) < 3) || (local_25 == -0x37)) || (local_25 == -0x35)) ||
     (bVar1 = false, (byte)(local_25 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_25 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80061764();
    return;
  }
  if (((cVar2 == 'e') || (local_27 == 'e')) || ((local_26 == 'e' || (local_25 == 'e')))) {
    if (*(short *)(param_1 + 0x160) < 0) {
      uVar5 = FUN_8005a028(param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >>
                                   0x10);
      *(undefined2 *)(param_1 + 0x68) = uVar5;
    }
    else {
      iVar6 = (int)*(short *)(param_1 + 0x26);
      uVar7 = (uint)*(ushort *)(param_1 + 0x68) + iVar9;
      if (iVar6 != 0) {
        if (iVar6 < 1) {
          pcVar10 = *(code **)(param_1 + 0x28);
        }
        else {
          iVar9 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
          unaff_s2 = (short)*(undefined4 *)(iVar9 + -8);
          pcVar10 = *(code **)(iVar9 + -4);
        }
        iVar9 = (int)*(short *)(param_1 + 0x24);
        if (0 < iVar6 << 0x10) {
          iVar9 = unaff_s2 + iVar9;
        }
        uVar7 = (*pcVar10)(param_1 + iVar9,(int)(short)uVar7);
      }
      iVar9 = *(int *)(param_1 + 0x58);
      iVar6 = (uVar7 & 0xfffffff0) << 0x10;
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (iVar6 == -0x80000000)) {
        trap(0x1800);
      }
      *(short *)(param_1 + 0x68) = (short)(iVar6 / iVar9) + -1;
    }
    *(undefined2 *)(param_1 + 0x6c) = 0;
    cVar3 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
    if (cVar3 == 'S') {
      PlayerCallback_80061854(param_1,null_FFFF0000h_800a5ecc,PTR_Callback_8006d724_800a5ed0);
      return;
    }
  }
  else {
    *(int *)(param_1 + 0x10c) = (int)*(short *)(param_1 + 0x160) << 0x10;
  }
  bVar4 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),
                     (int)((*(ushort *)(param_1 + 0x6a) - 7) * 0x10000) >> 0x10);
  if (bVar4 == 0x53) {
    PlayerCallback_80061854();
    return;
  }
  if (bVar4 == 0 || 0x3b < bVar4) {
    bVar4 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
    if (((((byte)(bVar4 + 0x4b) < 3) || (bVar4 == 0xc9)) || (bVar4 == 0xcb)) ||
       (bVar1 = false, (byte)(bVar4 + 0x23) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar4 = 0x65;
        bVar1 = false;
      }
    }
    if (bVar1) {
      PlayerProcessBounceCollision(param_1,bVar4);
      return;
    }
    if (bVar4 == 0 || 0x3b < bVar4) {
      if (bVar4 != 0) {
        return;
      }
      bVar4 = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),
                         (int)((*(ushort *)(param_1 + 0x6a) + 0x10) * 0x10000) >> 0x10);
      if (bVar4 == 0 || 0x3b < bVar4) {
        iVar6 = 0xc;
        if (*(char *)(param_1 + 0x74) != '\0') {
          iVar6 = -0xc;
        }
        cVar2 = EntityApplyMovementCallbacks
                          (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >>
                                   0x10,(int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
        if (cVar2 != '\0') {
          return;
        }
        EntitySetState(param_1,null_FFFF0000h_800a5d30,PTR_PlayerStateCallback_2_800a5d34);
        return;
      }
      iVar6 = (int)*(short *)(param_1 + 0x68);
      sVar8 = *(short *)(param_1 + 0x6a) + 0x10;
    }
    else {
      iVar6 = (int)*(short *)(param_1 + 0x68);
      sVar8 = *(short *)(param_1 + 0x6a) + 2;
    }
  }
  else {
    iVar6 = (int)*(short *)(param_1 + 0x68);
    sVar8 = *(short *)(param_1 + 0x6a) + -7;
  }
  uVar5 = PlayerApplyPositionWithCollision(param_1,bVar4,iVar6,(int)sVar8,cVar2,bVar4);
  *(undefined2 *)(param_1 + 0x6a) = uVar5;
  return;
}



void PlayerCallback_80061764(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_80061854(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_8006187c(int param_1)

{
  short sVar1;
  byte bVar2;
  undefined2 uVar3;
  short sVar4;
  
  bVar2 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),
                     (int)((*(ushort *)(param_1 + 0x6a) - 7) * 0x10000) >> 0x10);
  if (bVar2 == 0 || 0x3b < bVar2) {
    bVar2 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
    if (bVar2 == 0 || 0x3b < bVar2) {
      return;
    }
    sVar1 = *(short *)(param_1 + 0x68);
    sVar4 = *(short *)(param_1 + 0x6a) + 2;
  }
  else {
    sVar1 = *(short *)(param_1 + 0x68);
    sVar4 = *(short *)(param_1 + 0x6a) + -7;
  }
  uVar3 = PlayerApplyPositionWithCollision(param_1,bVar2,(int)sVar1,(int)sVar4);
  *(undefined2 *)(param_1 + 0x6a) = uVar3;
  return;
}



void PlayerCallback_80061934(int param_1)

{
  bool bVar1;
  undefined2 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  ushort uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  short sVar10;
  int iVar11;
  short in_t0;
  code *pcVar12;
  short in_t2;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  char local_a0;
  char local_9f;
  char local_9e;
  char local_9d;
  char local_9c;
  short local_98;
  short local_96;
  short local_94;
  short local_92;
  undefined4 local_60;
  code *local_5c;
  undefined4 local_50;
  code *local_4c;
  undefined4 local_40;
  code *local_3c;
  undefined4 local_30;
  code *local_2c;
  
  if (*(int *)(param_1 + 0x58) == 0xc000) {
    iVar5 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar5 + 0x26);
    uVar7 = (uint)*(ushort *)(iVar5 + 0x68);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar5 + 0x28);
      }
      else {
        iVar3 = iVar11 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x28));
        in_t2 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar12 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(iVar5 + 0x24);
      if (0 < iVar11 << 0x10) {
        iVar3 = in_t2 + iVar3;
      }
      uVar7 = (*pcVar12)(iVar5 + iVar3,(int)(short)*(ushort *)(iVar5 + 0x68));
    }
    iVar5 = (int)*(short *)(param_1 + 0x26);
    uVar8 = (uint)*(ushort *)(param_1 + 0x130);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar12 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar11 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s2 = (short)*(undefined4 *)(iVar11 + -8);
        pcVar12 = *(code **)(iVar11 + -4);
      }
      iVar11 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar5 << 0x10) {
        iVar11 = unaff_s2 + iVar11;
      }
      uVar8 = (*pcVar12)(param_1 + iVar11,(int)(short)*(ushort *)(param_1 + 0x130));
    }
    iVar11 = *(int *)(param_1 + 0x58);
    iVar5 = (uVar7 + uVar8) * 0x10000;
    uVar7 = iVar5 / iVar11;
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (iVar5 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar7 & 3) - 1 < 2) {
      uVar7 = uVar7 + 1;
    }
    iVar5 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar5 + 0x2e);
    uVar8 = (uint)*(ushort *)(iVar5 + 0x6a);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar5 + 0x30);
      }
      else {
        iVar3 = iVar11 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar12 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(iVar5 + 0x2c);
      if (0 < iVar11 << 0x10) {
        iVar3 = unaff_s6 + iVar3;
      }
      uVar8 = (*pcVar12)(iVar5 + iVar3,(int)(short)*(ushort *)(iVar5 + 0x6a));
    }
    iVar5 = (int)*(short *)(param_1 + 0x2e);
    uVar9 = (uint)*(ushort *)(param_1 + 0x132);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar12 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar11 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_60 = *(undefined4 *)(iVar11 + -8);
        pcVar12 = *(code **)(iVar11 + -4);
        local_5c = pcVar12;
      }
      iVar11 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar5 << 0x10) {
        iVar11 = (short)local_60 + iVar11;
      }
      uVar9 = (*pcVar12)(param_1 + iVar11,(int)(short)*(ushort *)(param_1 + 0x132));
    }
    iVar11 = *(int *)(param_1 + 0x5c);
    iVar5 = (uVar8 + uVar9) * 0x10000;
    uVar8 = iVar5 / iVar11;
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (iVar5 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar8 & 3) - 1 < 2) {
      uVar8 = uVar8 + 1;
    }
    iVar5 = uVar7 - *(ushort *)(param_1 + 0x68);
    iVar11 = uVar8 - *(ushort *)(param_1 + 0x6a);
  }
  else {
    iVar5 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar5 + 0x26);
    uVar7 = (uint)*(ushort *)(iVar5 + 0x68);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar5 + 0x28);
      }
      else {
        iVar3 = iVar11 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar12 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(iVar5 + 0x24);
      if (0 < iVar11 << 0x10) {
        iVar3 = in_t0 + iVar3;
      }
      uVar7 = (*pcVar12)(iVar5 + iVar3,(int)(short)*(ushort *)(iVar5 + 0x68));
    }
    iVar5 = *(int *)(param_1 + 0x58);
    if (iVar5 == 0) {
      trap(0x1c00);
    }
    if ((iVar5 == -1) && (uVar7 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar11 = *(int *)(param_1 + 300);
    iVar3 = (int)*(short *)(iVar11 + 0x2e);
    uVar8 = (uint)*(ushort *)(iVar11 + 0x6a);
    iVar5 = ((int)(uVar7 << 0x10) / iVar5 + (uint)*(ushort *)(param_1 + 0x130)) -
            (uint)*(ushort *)(param_1 + 0x68);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar12 = *(code **)(iVar11 + 0x30);
      }
      else {
        iVar4 = iVar3 * 8 + *(int *)(iVar11 + *(short *)(iVar11 + 0x30));
        unaff_s4 = (short)*(undefined4 *)(iVar4 + -8);
        pcVar12 = *(code **)(iVar4 + -4);
      }
      iVar4 = (int)*(short *)(iVar11 + 0x2c);
      if (0 < iVar3 << 0x10) {
        iVar4 = unaff_s4 + iVar4;
      }
      uVar8 = (*pcVar12)(iVar11 + iVar4,(int)(short)*(ushort *)(iVar11 + 0x6a));
    }
    iVar11 = *(int *)(param_1 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (uVar8 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar11 = ((int)(uVar8 << 0x10) / iVar11 + (uint)*(ushort *)(param_1 + 0x132)) -
             (uint)*(ushort *)(param_1 + 0x6a);
  }
  *(int *)(param_1 + 0x110) = iVar11 << 0x10;
  *(int *)(param_1 + 0x10c) = iVar5 << 0x10;
  iVar3 = (uint)*(ushort *)(param_1 + 0x68) + iVar5;
  *(short *)(param_1 + 0x68) = (short)iVar3;
  local_a0 = EntityApplyMovementCallbacks
                       (param_1,iVar3 * 0x10000 >> 0x10,(int)*(short *)(param_1 + 0x6a));
  if (((((byte)(local_a0 + 0x4bU) < 3) || (local_a0 == -0x37)) || (local_a0 == -0x35)) ||
     (bVar1 = false, (byte)(local_a0 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_a0 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_8006208c(param_1,local_a0);
    return;
  }
  local_9f = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  if ((((byte)(local_9f + 0x4bU) < 3) || (local_9f == -0x37)) ||
     ((local_9f == -0x35 || (bVar1 = false, (byte)(local_9f + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_9f = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_8006208c();
    return;
  }
  if (*(short *)(param_1 + 0x46) < 0x18) {
    FUN_8006209c();
    return;
  }
  local_9e = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  if ((((byte)(local_9e + 0x4bU) < 3) || (local_9e == -0x37)) ||
     ((local_9e == -0x35 || (bVar1 = false, (byte)(local_9e + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_9e = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_8006208c(param_1,local_9e);
    return;
  }
  local_9d = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(local_9d + 0x4bU) < 3) || (local_9d == -0x37)) || (local_9d == -0x35)) ||
     (bVar1 = false, (byte)(local_9d + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_9d = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerProcessBounceCollision(param_1,local_9d);
    return;
  }
  if (((local_a0 != 'e') && (local_9f != 'e')) && ((local_9e != 'e' && (local_9d != 'e'))))
  goto PlayerCallback_80062334;
  if ((short)iVar5 < 1) {
    if (-1 < (short)iVar5) goto PlayerCallback_80062334;
    uVar2 = FUN_8005a028(param_1,(int)*(short *)(param_1 + 0x68));
    iVar5 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x68) = uVar2;
    *(undefined2 *)(param_1 + 0x6c) = 0;
    iVar3 = (int)*(short *)(iVar5 + 0x26);
    uVar6 = *(ushort *)(iVar5 + 0x68);
    if (iVar3 == 0) goto PlayerCallback_800622ec;
    if (iVar3 < 1) {
      pcVar12 = *(code **)(iVar5 + 0x28);
    }
    else {
      iVar4 = iVar3 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x28));
      local_30 = *(undefined4 *)(iVar4 + -8);
      pcVar12 = *(code **)(iVar4 + -4);
      local_2c = pcVar12;
    }
    sVar10 = *(short *)(iVar5 + 0x24);
    if (0 < iVar3 << 0x10) {
      PlayerCallback_800622d4();
      return;
    }
PlayerCallback_800622d0:
    uVar7 = (*pcVar12)(iVar5 + sVar10,(int)(short)uVar6);
  }
  else {
    iVar5 = (int)*(short *)(param_1 + 0x26);
    uVar7 = (uint)*(ushort *)(param_1 + 0x68);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar12 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar3 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        local_50 = *(undefined4 *)(iVar3 + -8);
        pcVar12 = *(code **)(iVar3 + -4);
        local_4c = pcVar12;
      }
      iVar3 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar5 << 0x10) {
        iVar3 = (short)local_50 + iVar3;
      }
      uVar7 = (*pcVar12)(param_1 + iVar3,(int)(short)*(ushort *)(param_1 + 0x68));
    }
    iVar4 = *(int *)(param_1 + 0x58);
    iVar3 = (uVar7 & 0xfffffff0) << 0x10;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (iVar3 == -0x80000000)) {
      trap(0x1800);
    }
    iVar5 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x6c) = 0;
    *(short *)(param_1 + 0x68) = (short)(iVar3 / iVar4) + -1;
    iVar3 = (int)*(short *)(iVar5 + 0x26);
    uVar6 = *(ushort *)(iVar5 + 0x68);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar12 = *(code **)(iVar5 + 0x28);
      }
      else {
        iVar4 = iVar3 * 8 + *(int *)(iVar5 + *(short *)(iVar5 + 0x28));
        local_40 = *(undefined4 *)(iVar4 + -8);
        pcVar12 = *(code **)(iVar4 + -4);
        local_3c = pcVar12;
      }
      sVar10 = *(short *)(iVar5 + 0x24);
      if (0 < iVar3 << 0x10) {
        PlayerCallback_800622c4();
        return;
      }
      goto PlayerCallback_800622d0;
    }
PlayerCallback_800622ec:
    uVar7 = (uint)uVar6;
  }
  iVar5 = *(int *)(param_1 + 0x58);
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && (uVar7 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x130) = *(short *)(param_1 + 0x68) - (short)((int)(uVar7 << 0x10) / iVar5);
PlayerCallback_80062334:
  sVar10 = *(short *)(param_1 + 0x6a) + (short)iVar11;
  *(short *)(param_1 + 0x6a) = sVar10;
  if (iVar11 << 0x10 < 0) {
    if (*(short *)(param_1 + 0x46) < 0x18) {
      sVar10 = sVar10 + 0x18;
    }
    else {
      sVar10 = sVar10 + -0x40;
    }
    local_9c = EntityApplyMovementCallbacks(param_1,(int)*(short *)(param_1 + 0x68),(int)sVar10);
    if (((((byte)(local_9c + 0x4bU) < 3) || (local_9c == -0x37)) || (local_9c == -0x35)) ||
       (bVar1 = false, (byte)(local_9c + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        local_9c = 'e';
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + 0xe;
      PlayerProcessBounceCollision(param_1,local_9c);
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(param_1 + 300),&local_98);
  iVar5 = *(int *)(param_1 + 0x58);
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && ((int)local_98 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_98 = (short)(((int)local_98 << 0x10) / iVar5);
  iVar5 = *(int *)(param_1 + 0x58);
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && ((int)local_94 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_94 = (short)(((int)local_94 << 0x10) / iVar5);
  iVar5 = *(int *)(param_1 + 0x5c);
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && ((int)local_96 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_96 = (short)(((int)local_96 << 0x10) / iVar5);
  iVar5 = *(int *)(param_1 + 0x5c);
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && ((int)local_92 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_92 = (short)(((int)local_92 << 0x10) / iVar5);
  iVar5 = (int)*(short *)(param_1 + 0x68);
  if ((iVar5 < local_98) || (local_94 < iVar5)) {
    sVar10 = 0xc;
    if (*(char *)(param_1 + 0x74) != '\0') {
      sVar10 = -0xc;
    }
    if ((iVar5 + sVar10 < (int)local_98) || ((int)local_94 < iVar5 + sVar10)) {
      EntitySetState(param_1,null_FFFF0000h_800a5d30,PTR_PlayerStateCallback_2_800a5d34);
    }
  }
  return;
}



void PlayerCallback_8006208c(void)

{
  PlayerProcessBounceCollision();
  return;
}



void FUN_8006209c(void)

{
  bool bVar1;
  char cVar2;
  undefined2 uVar3;
  int iVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  ushort uVar8;
  uint uVar9;
  code *pcVar10;
  int unaff_s0;
  short unaff_s1;
  ushort unaff_s2;
  char cStack00000010;
  char cStack00000011;
  char cStack00000012;
  char cStack00000013;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  undefined4 in_stack_00000060;
  code *in_stack_00000064;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  
  if ((((cStack00000010 != 'e') && (cStack00000011 != 'e')) && (cStack00000012 != 'e')) &&
     (cStack00000013 != 'e')) goto PlayerCallback_80062334;
  if (unaff_s1 < 1) {
    if (-1 < unaff_s1) goto PlayerCallback_80062334;
    uVar3 = FUN_8005a028();
    iVar7 = *(int *)(unaff_s0 + 300);
    *(undefined2 *)(unaff_s0 + 0x68) = uVar3;
    *(undefined2 *)(unaff_s0 + 0x6c) = 0;
    iVar4 = (int)*(short *)(iVar7 + 0x26);
    uVar8 = *(ushort *)(iVar7 + 0x68);
    if (iVar4 == 0) goto PlayerCallback_800622ec;
    if (iVar4 < 1) {
      pcVar10 = *(code **)(iVar7 + 0x28);
    }
    else {
      iVar6 = iVar4 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x28));
      in_stack_00000080 = *(undefined4 *)(iVar6 + -8);
      pcVar10 = *(code **)(iVar6 + -4);
      in_stack_00000084 = pcVar10;
    }
    sVar5 = *(short *)(iVar7 + 0x24);
    if (0 < iVar4 << 0x10) {
      PlayerCallback_800622d4();
      return;
    }
PlayerCallback_800622d0:
    uVar9 = (*pcVar10)(iVar7 + sVar5,(int)(short)uVar8);
  }
  else {
    iVar7 = (int)*(short *)(unaff_s0 + 0x26);
    uVar9 = (uint)*(ushort *)(unaff_s0 + 0x68);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar10 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar4 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000060 = *(undefined4 *)(iVar4 + -8);
        pcVar10 = *(code **)(iVar4 + -4);
        in_stack_00000064 = pcVar10;
      }
      iVar4 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar4 = (short)in_stack_00000060 + iVar4;
      }
      uVar9 = (*pcVar10)(unaff_s0 + iVar4,(int)(short)*(ushort *)(unaff_s0 + 0x68));
    }
    iVar6 = *(int *)(unaff_s0 + 0x58);
    iVar4 = (uVar9 & 0xfffffff0) << 0x10;
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    iVar7 = *(int *)(unaff_s0 + 300);
    *(undefined2 *)(unaff_s0 + 0x6c) = 0;
    *(short *)(unaff_s0 + 0x68) = (short)(iVar4 / iVar6) + -1;
    iVar4 = (int)*(short *)(iVar7 + 0x26);
    uVar8 = *(ushort *)(iVar7 + 0x68);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar10 = *(code **)(iVar7 + 0x28);
      }
      else {
        iVar6 = iVar4 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x28));
        in_stack_00000070 = *(undefined4 *)(iVar6 + -8);
        pcVar10 = *(code **)(iVar6 + -4);
        in_stack_00000074 = pcVar10;
      }
      sVar5 = *(short *)(iVar7 + 0x24);
      if (0 < iVar4 << 0x10) {
        PlayerCallback_800622c4();
        return;
      }
      goto PlayerCallback_800622d0;
    }
PlayerCallback_800622ec:
    uVar9 = (uint)uVar8;
  }
  iVar7 = *(int *)(unaff_s0 + 0x58);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && (uVar9 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x130) = *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar9 << 0x10) / iVar7)
  ;
PlayerCallback_80062334:
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar7 = *(int *)(unaff_s0 + 0x58);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar7);
  iVar7 = *(int *)(unaff_s0 + 0x58);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar7);
  iVar7 = *(int *)(unaff_s0 + 0x5c);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar7);
  iVar7 = *(int *)(unaff_s0 + 0x5c);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar7);
  iVar7 = (int)*(short *)(unaff_s0 + 0x68);
  if ((iVar7 < sStack00000018) || (sStack0000001c < iVar7)) {
    sVar5 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar5 = -0xc;
    }
    if ((iVar7 + sVar5 < (int)sStack00000018) || ((int)sStack0000001c < iVar7 + sVar5)) {
      EntitySetState();
    }
  }
  return;
}



void PlayerCallback_800622c4(void)

{
  PlayerCallback_800622d4();
  return;
}



void PlayerCallback_800622d0(int param_1,short param_2,code *param_3)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  short sVar5;
  int in_v1;
  int unaff_s0;
  ushort unaff_s2;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  iVar3 = (*param_3)(param_1 + in_v1,(int)param_2);
  iVar4 = *(int *)(unaff_s0 + 0x58);
  if (iVar4 == 0) {
    trap(0x1c00);
  }
  if ((iVar4 == -1) && (iVar3 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x130) = *(short *)(unaff_s0 + 0x68) - (short)((iVar3 << 0x10) / iVar4);
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  iVar3 = (int)*(short *)(unaff_s0 + 0x68);
  if ((iVar3 < sStack00000018) || (sStack0000001c < iVar3)) {
    sVar5 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar5 = -0xc;
    }
    if ((iVar3 + sVar5 < (int)sStack00000018) || ((int)sStack0000001c < iVar3 + sVar5)) {
      EntitySetState();
    }
  }
  return;
}



void PlayerCallback_800622d4(int param_1,short param_2,code *param_3)

{
  bool bVar1;
  char cVar2;
  int in_v0;
  int iVar3;
  int iVar4;
  short sVar5;
  int unaff_s0;
  ushort unaff_s2;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  iVar3 = (*param_3)(param_1 + in_v0,(int)param_2);
  iVar4 = *(int *)(unaff_s0 + 0x58);
  if (iVar4 == 0) {
    trap(0x1c00);
  }
  if ((iVar4 == -1) && (iVar3 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x130) = *(short *)(unaff_s0 + 0x68) - (short)((iVar3 << 0x10) / iVar4);
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  iVar3 = (int)*(short *)(unaff_s0 + 0x68);
  if ((iVar3 < sStack00000018) || (sStack0000001c < iVar3)) {
    sVar5 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar5 = -0xc;
    }
    if ((iVar3 + sVar5 < (int)sStack00000018) || ((int)sStack0000001c < iVar3 + sVar5)) {
      EntitySetState();
    }
  }
  return;
}



void PlayerCallback_800622ec(undefined4 param_1,int param_2)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  short sVar4;
  int unaff_s0;
  ushort unaff_s2;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_2 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x130) = *(short *)(unaff_s0 + 0x68) - (short)((param_2 << 0x10) / iVar3);
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  iVar3 = (int)*(short *)(unaff_s0 + 0x68);
  if ((iVar3 < sStack00000018) || (sStack0000001c < iVar3)) {
    sVar4 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar4 = -0xc;
    }
    if ((iVar3 + sVar4 < (int)sStack00000018) || ((int)sStack0000001c < iVar3 + sVar4)) {
      EntitySetState();
    }
  }
  return;
}



void PlayerCallback_80062334(void)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  short sVar4;
  int unaff_s0;
  ushort unaff_s2;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  iVar3 = (int)*(short *)(unaff_s0 + 0x68);
  if ((iVar3 < sStack00000018) || (sStack0000001c < iVar3)) {
    sVar4 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar4 = -0xc;
    }
    if ((iVar3 + sVar4 < (int)sStack00000018) || ((int)sStack0000001c < iVar3 + sVar4)) {
      EntitySetState();
    }
  }
  return;
}



void PlayerCallback_800625b4(int param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  short in_t0;
  code *pcVar8;
  short in_t2;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  short local_30;
  
  if (*(int *)(param_1 + 0x58) == 0xc000) {
    iVar2 = *(int *)(param_1 + 300);
    iVar6 = (int)*(short *)(iVar2 + 0x26);
    uVar3 = (uint)*(ushort *)(iVar2 + 0x68);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar8 = *(code **)(iVar2 + 0x28);
      }
      else {
        iVar1 = iVar6 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0x28));
        in_t2 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar8 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 0x24);
      if (0 < iVar6 << 0x10) {
        iVar1 = in_t2 + iVar1;
      }
      uVar3 = (*pcVar8)(iVar2 + iVar1,(int)(short)*(ushort *)(iVar2 + 0x68));
    }
    iVar2 = (int)*(short *)(param_1 + 0x26);
    uVar4 = (uint)*(ushort *)(param_1 + 0x130);
    if (iVar2 != 0) {
      if (iVar2 < 1) {
        pcVar8 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar6 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s2 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar8 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar2 << 0x10) {
        iVar6 = unaff_s2 + iVar6;
      }
      uVar4 = (*pcVar8)(param_1 + iVar6,(int)(short)*(ushort *)(param_1 + 0x130));
    }
    iVar6 = *(int *)(param_1 + 0x58);
    iVar2 = (uVar3 + uVar4) * 0x10000;
    uVar3 = iVar2 / iVar6;
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (iVar2 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar3 & 3) - 1 < 2) {
      uVar3 = uVar3 + 1;
    }
    iVar2 = *(int *)(param_1 + 300);
    iVar6 = (int)*(short *)(iVar2 + 0x2e);
    uVar4 = (uint)*(ushort *)(iVar2 + 0x6a);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar8 = *(code **)(iVar2 + 0x30);
      }
      else {
        iVar1 = iVar6 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar8 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 0x2c);
      if (0 < iVar6 << 0x10) {
        iVar1 = unaff_s6 + iVar1;
      }
      uVar4 = (*pcVar8)(iVar2 + iVar1,(int)(short)*(ushort *)(iVar2 + 0x6a));
    }
    iVar2 = (int)*(short *)(param_1 + 0x2e);
    uVar5 = (uint)*(ushort *)(param_1 + 0x132);
    if (iVar2 != 0) {
      if (iVar2 < 1) {
        pcVar8 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar6 = iVar2 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_30 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar8 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar2 << 0x10) {
        iVar6 = local_30 + iVar6;
      }
      uVar5 = (*pcVar8)(param_1 + iVar6,(int)(short)*(ushort *)(param_1 + 0x132));
    }
    iVar6 = *(int *)(param_1 + 0x5c);
    iVar2 = (uVar4 + uVar5) * 0x10000;
    uVar4 = iVar2 / iVar6;
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (iVar2 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar4 & 3) - 1 < 2) {
      uVar4 = uVar4 + 1;
    }
    iVar6 = uVar3 - *(ushort *)(param_1 + 0x68);
    iVar2 = uVar4 - *(ushort *)(param_1 + 0x6a);
  }
  else {
    iVar2 = *(int *)(param_1 + 300);
    iVar6 = (int)*(short *)(iVar2 + 0x26);
    uVar3 = (uint)*(ushort *)(iVar2 + 0x68);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar8 = *(code **)(iVar2 + 0x28);
      }
      else {
        iVar1 = iVar6 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar8 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 0x24);
      if (0 < iVar6 << 0x10) {
        iVar1 = in_t0 + iVar1;
      }
      uVar3 = (*pcVar8)(iVar2 + iVar1,(int)(short)*(ushort *)(iVar2 + 0x68));
    }
    iVar2 = *(int *)(param_1 + 0x58);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (uVar3 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar1 = *(int *)(param_1 + 300);
    iVar7 = (int)*(short *)(iVar1 + 0x2e);
    uVar4 = (uint)*(ushort *)(iVar1 + 0x6a);
    iVar6 = ((int)(uVar3 << 0x10) / iVar2 + (uint)*(ushort *)(param_1 + 0x130)) -
            (uint)*(ushort *)(param_1 + 0x68);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar8 = *(code **)(iVar1 + 0x30);
      }
      else {
        iVar2 = iVar7 * 8 + *(int *)(iVar1 + *(short *)(iVar1 + 0x30));
        unaff_s4 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar8 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar1 + 0x2c);
      if (0 < iVar7 << 0x10) {
        iVar2 = unaff_s4 + iVar2;
      }
      uVar4 = (*pcVar8)(iVar1 + iVar2,(int)(short)*(ushort *)(iVar1 + 0x6a));
    }
    iVar2 = *(int *)(param_1 + 0x5c);
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (uVar4 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar2 = ((int)(uVar4 << 0x10) / iVar2 + (uint)*(ushort *)(param_1 + 0x132)) -
            (uint)*(ushort *)(param_1 + 0x6a);
  }
  *(int *)(param_1 + 0x110) = iVar2 << 0x10;
  *(int *)(param_1 + 0x10c) = iVar6 << 0x10;
  *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x68) + (short)iVar6;
  *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + (short)iVar2;
  return;
}



void PlayerCallback_80062ad4(int param_1)

{
  short sVar1;
  bool bVar2;
  undefined4 uVar3;
  undefined *puVar4;
  undefined2 uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  short in_t0;
  code *pcVar14;
  short in_t2;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  char local_a8;
  char local_a7;
  char local_a6;
  char local_a5;
  char local_a4;
  short local_a0;
  short local_9e;
  short local_9c;
  short local_9a;
  undefined4 local_60;
  code *local_5c;
  undefined4 local_50;
  code *local_4c;
  undefined4 local_40;
  code *local_3c;
  undefined4 local_30;
  code *local_2c;
  
  sVar1 = *(short *)(param_1 + 0x68);
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar10 = *(int *)(param_1 + 0xb4);
  }
  else {
    iVar10 = -*(int *)(param_1 + 0xb4);
  }
  iVar10 = sVar1 * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) + iVar10;
  if (*(char *)(param_1 + 0x75) == '\0') {
    iVar9 = *(int *)(param_1 + 0xb8);
  }
  else {
    iVar9 = -*(int *)(param_1 + 0xb8);
  }
  iVar9 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) + iVar9;
  *(short *)(param_1 + 0x68) = (short)((uint)iVar10 >> 0x10);
  *(short *)(param_1 + 0x6e) = (short)iVar9;
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar9 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar10;
  if (*(int *)(param_1 + 0x58) == 0xc000) {
    iVar10 = *(int *)(param_1 + 300);
    iVar9 = (int)*(short *)(iVar10 + 0x26);
    uVar11 = (uint)*(ushort *)(iVar10 + 0x68);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar14 = *(code **)(iVar10 + 0x28);
      }
      else {
        iVar6 = iVar9 * 8 + *(int *)(iVar10 + *(short *)(iVar10 + 0x28));
        in_t2 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar14 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(iVar10 + 0x24);
      if (0 < iVar9 << 0x10) {
        iVar6 = in_t2 + iVar6;
      }
      uVar11 = (*pcVar14)(iVar10 + iVar6,(int)(short)*(ushort *)(iVar10 + 0x68));
    }
    iVar10 = (int)*(short *)(param_1 + 0x26);
    uVar12 = (uint)*(ushort *)(param_1 + 0x130);
    if (iVar10 != 0) {
      if (iVar10 < 1) {
        pcVar14 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar9 = iVar10 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s2 = (short)*(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
      }
      iVar9 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar10 << 0x10) {
        iVar9 = unaff_s2 + iVar9;
      }
      uVar12 = (*pcVar14)(param_1 + iVar9,(int)(short)*(ushort *)(param_1 + 0x130));
    }
    iVar9 = *(int *)(param_1 + 0x58);
    iVar10 = (uVar11 + uVar12) * 0x10000;
    uVar11 = iVar10 / iVar9;
    if (iVar9 == 0) {
      trap(0x1c00);
    }
    if ((iVar9 == -1) && (iVar10 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar11 & 3) - 1 < 2) {
      uVar11 = uVar11 + 1;
    }
    iVar10 = *(int *)(param_1 + 300);
    iVar9 = (int)*(short *)(iVar10 + 0x2e);
    uVar12 = (uint)*(ushort *)(iVar10 + 0x6a);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar14 = *(code **)(iVar10 + 0x30);
      }
      else {
        iVar6 = iVar9 * 8 + *(int *)(iVar10 + *(short *)(iVar10 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar14 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(iVar10 + 0x2c);
      if (0 < iVar9 << 0x10) {
        iVar6 = unaff_s6 + iVar6;
      }
      uVar12 = (*pcVar14)(iVar10 + iVar6,(int)(short)*(ushort *)(iVar10 + 0x6a));
    }
    iVar10 = (int)*(short *)(param_1 + 0x2e);
    uVar13 = (uint)*(ushort *)(param_1 + 0x132);
    if (iVar10 != 0) {
      if (iVar10 < 1) {
        pcVar14 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar9 = iVar10 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_60 = *(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
        local_5c = pcVar14;
      }
      iVar9 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar10 << 0x10) {
        iVar9 = (short)local_60 + iVar9;
      }
      uVar13 = (*pcVar14)(param_1 + iVar9,(int)(short)*(ushort *)(param_1 + 0x132));
    }
    iVar9 = *(int *)(param_1 + 0x5c);
    iVar10 = (uVar12 + uVar13) * 0x10000;
    uVar12 = iVar10 / iVar9;
    if (iVar9 == 0) {
      trap(0x1c00);
    }
    if ((iVar9 == -1) && (iVar10 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar12 & 3) - 1 < 2) {
      uVar12 = uVar12 + 1;
    }
    iVar10 = uVar11 - *(ushort *)(param_1 + 0x68);
    iVar9 = uVar12 - *(ushort *)(param_1 + 0x6a);
  }
  else {
    iVar10 = *(int *)(param_1 + 300);
    iVar9 = (int)*(short *)(iVar10 + 0x26);
    uVar11 = (uint)*(ushort *)(iVar10 + 0x68);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar14 = *(code **)(iVar10 + 0x28);
      }
      else {
        iVar6 = iVar9 * 8 + *(int *)(iVar10 + *(short *)(iVar10 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar14 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(iVar10 + 0x24);
      if (0 < iVar9 << 0x10) {
        iVar6 = in_t0 + iVar6;
      }
      uVar11 = (*pcVar14)(iVar10 + iVar6,(int)(short)*(ushort *)(iVar10 + 0x68));
    }
    iVar10 = *(int *)(param_1 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && (uVar11 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar9 = *(int *)(param_1 + 300);
    iVar6 = (int)*(short *)(iVar9 + 0x2e);
    uVar12 = (uint)*(ushort *)(iVar9 + 0x6a);
    iVar10 = ((int)(uVar11 << 0x10) / iVar10 + (uint)*(ushort *)(param_1 + 0x130)) -
             (uint)*(ushort *)(param_1 + 0x68);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar14 = *(code **)(iVar9 + 0x30);
      }
      else {
        iVar7 = iVar6 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x30));
        unaff_s4 = (short)*(undefined4 *)(iVar7 + -8);
        pcVar14 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*(short *)(iVar9 + 0x2c);
      if (0 < iVar6 << 0x10) {
        iVar7 = unaff_s4 + iVar7;
      }
      uVar12 = (*pcVar14)(iVar9 + iVar7,(int)(short)*(ushort *)(iVar9 + 0x6a));
    }
    iVar9 = *(int *)(param_1 + 0x5c);
    if (iVar9 == 0) {
      trap(0x1c00);
    }
    if ((iVar9 == -1) && (uVar12 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar9 = ((int)(uVar12 << 0x10) / iVar9 + (uint)*(ushort *)(param_1 + 0x132)) -
            (uint)*(ushort *)(param_1 + 0x6a);
  }
  *(int *)(param_1 + 0x110) = iVar9 << 0x10;
  *(short *)(param_1 + 0x130) = *(short *)(param_1 + 0x130) + (*(short *)(param_1 + 0x68) - sVar1);
  *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x68) + (short)iVar10;
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar6 = *(int *)(param_1 + 0xb4) + iVar10 * 0x10000;
  }
  else {
    iVar6 = iVar10 * 0x10000 - *(int *)(param_1 + 0xb4);
  }
  *(int *)(param_1 + 0x10c) = iVar6;
  iVar6 = 1;
  if (*(char *)(param_1 + 0x74) != '\0') {
    iVar6 = -1;
  }
  local_a8 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >> 0x10
                        ,(int)*(short *)(param_1 + 0x6a));
  if (((((byte)(local_a8 + 0x4bU) < 3) || (local_a8 == -0x37)) || (local_a8 == -0x35)) ||
     (bVar2 = false, (byte)(local_a8 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_a8 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_80063308(param_1,local_a8);
    return;
  }
  local_a7 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  if ((((byte)(local_a7 + 0x4bU) < 3) || (local_a7 == -0x37)) ||
     ((local_a7 == -0x35 || (bVar2 = false, (byte)(local_a7 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_a7 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_80063308(param_1,local_a7);
    return;
  }
  local_a6 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  if ((((byte)(local_a6 + 0x4bU) < 3) || (local_a6 == -0x37)) ||
     ((local_a6 == -0x35 || (bVar2 = false, (byte)(local_a6 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_a6 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_80063308(param_1,local_a6);
    return;
  }
  local_a5 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(local_a5 + 0x4bU) < 3) || (local_a5 == -0x37)) || (local_a5 == -0x35)) ||
     (bVar2 = false, (byte)(local_a5 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_a5 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerProcessBounceCollision(param_1,local_a5);
    return;
  }
  if (((local_a8 != 'e') && (local_a7 != 'e')) && ((local_a6 != 'e' && (local_a5 != 'e'))))
  goto code_r0x80063698;
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar7 = (int)*(short *)(param_1 + 0x26);
    uVar11 = (uint)*(ushort *)(param_1 + 0x68) + iVar6;
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar14 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar6 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        local_40 = *(undefined4 *)(iVar6 + -8);
        pcVar14 = *(code **)(iVar6 + -4);
        local_3c = pcVar14;
      }
      iVar6 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar6 = (short)local_40 + iVar6;
      }
      uVar11 = (*pcVar14)(param_1 + iVar6,(int)(short)uVar11);
    }
    iVar7 = *(int *)(param_1 + 0x58);
    iVar6 = (uVar11 & 0xfffffff0) << 0x10;
    if (iVar7 == 0) {
      trap(0x1c00);
    }
    if ((iVar7 == -1) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    iVar8 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x6c) = 0;
    *(short *)(param_1 + 0x68) = (short)(iVar6 / iVar7) + -1;
    iVar6 = (int)*(short *)(iVar8 + 0x26);
    uVar11 = (uint)*(ushort *)(iVar8 + 0x68);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar14 = *(code **)(iVar8 + 0x28);
      }
      else {
        iVar7 = iVar6 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x28));
        local_30 = *(undefined4 *)(iVar7 + -8);
        pcVar14 = *(code **)(iVar7 + -4);
        local_2c = pcVar14;
      }
      iVar7 = (int)*(short *)(iVar8 + 0x24);
      if (0 < iVar6 << 0x10) {
        iVar7 = (short)local_30 + iVar7;
      }
      uVar11 = (*pcVar14)(iVar8 + iVar7,(int)(short)*(ushort *)(iVar8 + 0x68));
    }
    iVar6 = *(int *)(param_1 + 0x58);
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (uVar11 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    *(short *)(param_1 + 0x130) =
         *(short *)(param_1 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar6);
    if (0 < iVar10 << 0x10) goto PlayerCallback_80063650;
  }
  else {
    uVar5 = FUN_8005a028(param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar6) * 0x10000) >>
                                 0x10);
    iVar6 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x68) = uVar5;
    *(undefined2 *)(param_1 + 0x6c) = 0;
    iVar7 = (int)*(short *)(iVar6 + 0x26);
    uVar11 = (uint)*(ushort *)(iVar6 + 0x68);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar14 = *(code **)(iVar6 + 0x28);
      }
      else {
        iVar8 = iVar7 * 8 + *(int *)(iVar6 + *(short *)(iVar6 + 0x28));
        local_50 = *(undefined4 *)(iVar8 + -8);
        pcVar14 = *(code **)(iVar8 + -4);
        local_4c = pcVar14;
      }
      iVar8 = (int)*(short *)(iVar6 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar8 = (short)local_50 + iVar8;
      }
      uVar11 = (*pcVar14)(iVar6 + iVar8,(int)(short)*(ushort *)(iVar6 + 0x68));
    }
    iVar6 = *(int *)(param_1 + 0x58);
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (uVar11 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    *(short *)(param_1 + 0x130) =
         *(short *)(param_1 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar6);
    if (-1 < iVar10 << 0x10) {
      *(undefined4 *)(param_1 + 0x10c) = 0;
      PlayerCallback_80063698();
      return;
    }
PlayerCallback_80063650:
    if ((*(char *)(param_1 + 0x135) == '\0') &&
       ((*(short *)(param_1 + 0xa2) != -1 || (*(code **)(param_1 + 0xa4) != Callback_80067fc8)))) {
      EntitySetState(param_1,null_FFFF0000h_800a5e20,PTR_Callback_80067fc8_800a5e24);
    }
  }
  *(undefined4 *)(param_1 + 0x10c) = 0;
code_r0x80063698:
  iVar10 = (uint)*(ushort *)(param_1 + 0x6a) + iVar9;
  *(short *)(param_1 + 0x6a) = (short)iVar10;
  if (iVar9 << 0x10 < 0) {
    local_a4 = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),(iVar10 + -0x40) * 0x10000 >> 0x10
                         );
    if (((((byte)(local_a4 + 0x4bU) < 3) || (local_a4 == -0x37)) || (local_a4 == -0x35)) ||
       (bVar2 = false, (byte)(local_a4 + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar2 = true;
      }
      else {
        local_a4 = 'e';
        bVar2 = false;
      }
    }
    if (bVar2) {
      *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + 0xe;
      PlayerProcessBounceCollision(param_1,local_a4);
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(param_1 + 300),&local_a0);
  puVar4 = PTR_PlayerStateCallback_2_800a5d34;
  uVar3 = null_FFFF0000h_800a5d30;
  iVar10 = *(int *)(param_1 + 0x58);
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && ((int)local_a0 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_a0 = (short)(((int)local_a0 << 0x10) / iVar10);
  iVar10 = *(int *)(param_1 + 0x58);
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && ((int)local_9c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_9c = (short)(((int)local_9c << 0x10) / iVar10);
  iVar10 = *(int *)(param_1 + 0x5c);
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && ((int)local_9e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_9e = (short)(((int)local_9e << 0x10) / iVar10);
  iVar10 = *(int *)(param_1 + 0x5c);
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && ((int)local_9a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  local_9a = (short)(((int)local_9a << 0x10) / iVar10);
  if ((*(short *)(param_1 + 0x68) < local_a0) || (local_9c < *(short *)(param_1 + 0x68))) {
    *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + 0xe;
    EntitySetState(param_1,uVar3,puVar4);
  }
  return;
}



void PlayerCallback_80063308(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_80063650(void)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int unaff_s0;
  ushort unaff_s3;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  if ((*(char *)(unaff_s0 + 0x135) == '\0') &&
     ((*(short *)(unaff_s0 + 0xa2) != -1 || (*(code **)(unaff_s0 + 0xa4) != Callback_80067fc8)))) {
    EntitySetState();
  }
  *(undefined4 *)(unaff_s0 + 0x10c) = 0;
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s3;
  if ((int)((uint)unaff_s3 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  if ((*(short *)(unaff_s0 + 0x68) < sStack00000018) ||
     (sStack0000001c < *(short *)(unaff_s0 + 0x68))) {
    *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
    EntitySetState();
  }
  return;
}



void PlayerCallback_80063698(void)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int unaff_s0;
  ushort unaff_s3;
  short sStack00000018;
  short sStack0000001a;
  short sStack0000001c;
  short sStack0000001e;
  
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s3;
  if ((int)((uint)unaff_s3 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
      return;
    }
  }
  FUN_8001a448(*(undefined4 *)(unaff_s0 + 300),&stack0x00000018);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack00000018 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack00000018 = (short)(((int)sStack00000018 << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001c = (short)(((int)sStack0000001c << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001a = (short)(((int)sStack0000001a << 0x10) / iVar3);
  iVar3 = *(int *)(unaff_s0 + 0x5c);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && ((int)sStack0000001e << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sStack0000001e = (short)(((int)sStack0000001e << 0x10) / iVar3);
  if ((*(short *)(unaff_s0 + 0x68) < sStack00000018) ||
     (sStack0000001c < *(short *)(unaff_s0 + 0x68))) {
    *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
    EntitySetState();
  }
  return;
}



// Player Movement and Collision Handler
// 
// This callback handles:
// 1. Reading player input and setting push forces (+0x160, +0x162)
// 2. Applying push forces to position via ApplyEntityPositionUpdate
// 3. Collision detection and response
// 4. Camera updates
// 
// Key operations:
// - Reads push_x from +0x160, applies to x position +0x68
// - Reads push_y from +0x162, applies to y position +0x6A  
// - Sets direction flags at +0x74 (facing_left) and +0x75 (moving_up)
// - Calls collision handlers and camera updates
// 
// This is one of the main entity update callbacks set by player states.
// Called via entity+0x104/+0x108 callback slot.

void PlayerCallback_HandleMovementAndCollision(int param_1)

{
  bool bVar1;
  char cVar2;
  char cVar3;
  byte bVar4;
  undefined2 uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  short sVar9;
  int iVar10;
  short unaff_s2;
  code *pcVar11;
  char local_2f;
  char local_2e;
  char local_2d;
  
  sVar9 = *(short *)(param_1 + 0x68);
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar8 = *(int *)(param_1 + 0xb4);
  }
  else {
    iVar8 = -*(int *)(param_1 + 0xb4);
  }
  iVar8 = sVar9 * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) + iVar8;
  if (*(char *)(param_1 + 0x75) == '\0') {
    iVar7 = *(int *)(param_1 + 0xb8);
  }
  else {
    iVar7 = -*(int *)(param_1 + 0xb8);
  }
  iVar7 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) + iVar7;
  *(short *)(param_1 + 0x68) = (short)((uint)iVar8 >> 0x10);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar7 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar8;
  *(short *)(param_1 + 0x6e) = (short)iVar7;
  iVar8 = (uint)*(ushort *)(param_1 + 0x68) + (uint)*(ushort *)(param_1 + 0x160);
  *(short *)(param_1 + 0x68) = (short)iVar8;
  iVar8 = iVar8 - sVar9;
  iVar7 = iVar8 * 0x10000 >> 0x10;
  iVar10 = 2;
  if (iVar7 == 0) {
    iVar10 = 0;
  }
  else if (iVar7 < 0) {
    iVar10 = -2;
  }
  cVar2 = EntityApplyMovementCallbacks
                    (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar10) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
  local_2f = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar10) * 0x10000) >>
                                0x10,(int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  local_2e = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar10) * 0x10000) >>
                                0x10,(int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  local_2d = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar10) * 0x10000) >>
                                0x10,(int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
     (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cVar2 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80063f38();
    return;
  }
  if ((((byte)(local_2f + 0x4bU) < 3) || (local_2f == -0x37)) ||
     ((local_2f == -0x35 || (bVar1 = false, (byte)(local_2f + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_2f = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80063f38();
    return;
  }
  if ((((byte)(local_2e + 0x4bU) < 3) || (local_2e == -0x37)) ||
     ((local_2e == -0x35 || (bVar1 = false, (byte)(local_2e + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_2e = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80063f38();
    return;
  }
  if (((((byte)(local_2d + 0x4bU) < 3) || (local_2d == -0x37)) || (local_2d == -0x35)) ||
     (bVar1 = false, (byte)(local_2d + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_2d = 'e';
      bVar1 = false;
    }
  }
  if (!bVar1) {
    if (((cVar2 == 'e') || (local_2f == 'e')) || ((local_2e == 'e' || (local_2d == 'e')))) {
      iVar8 = iVar8 * 0x10000 >> 0x10;
      if (iVar8 < 0) {
        uVar5 = FUN_8005a028(param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar10) * 0x10000)
                                     >> 0x10);
        *(undefined2 *)(param_1 + 0x68) = uVar5;
      }
      else if (0 < iVar8) {
        iVar8 = (int)*(short *)(param_1 + 0x26);
        uVar6 = (uint)*(ushort *)(param_1 + 0x68) + iVar10;
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar11 = *(code **)(param_1 + 0x28);
          }
          else {
            iVar7 = iVar8 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
            unaff_s2 = (short)*(undefined4 *)(iVar7 + -8);
            pcVar11 = *(code **)(iVar7 + -4);
          }
          iVar7 = (int)*(short *)(param_1 + 0x24);
          if (0 < iVar8 << 0x10) {
            iVar7 = unaff_s2 + iVar7;
          }
          uVar6 = (*pcVar11)(param_1 + iVar7,(int)(short)uVar6);
        }
        iVar7 = *(int *)(param_1 + 0x58);
        iVar8 = (uVar6 & 0xfffffff0) << 0x10;
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (iVar8 == -0x80000000)) {
          trap(0x1800);
        }
        *(short *)(param_1 + 0x68) = (short)(iVar8 / iVar7) + -1;
      }
      *(undefined2 *)(param_1 + 0x6c) = 0;
      if ((*(char *)(param_1 + 0x135) == '\0') &&
         (((*(short *)(param_1 + 0xa2) != -1 ||
           ((*(code **)(param_1 + 0xa4) != Callback_80067fc8 &&
            (*(code **)(param_1 + 0xa4) != Callback_80068130)))) &&
          (cVar3 = CheckWallCollision(param_1,*(undefined1 *)(param_1 + 0x74)), cVar3 == '\0')))) {
        PlayerCallback_80063fdc(param_1,null_FFFF0000h_800a5e20,PTR_Callback_80067fc8_800a5e24);
        return;
      }
    }
    else if (iVar8 * 0x10000 < 0) {
      *(int *)(param_1 + 0x10c) = *(short *)(param_1 + 0x160) * 0x10000 - *(int *)(param_1 + 0xb4);
    }
    else {
      *(int *)(param_1 + 0x10c) = *(int *)(param_1 + 0xb4) + *(short *)(param_1 + 0x160) * 0x10000;
    }
    bVar4 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) - 7) * 0x10000) >> 0x10);
    if (bVar4 == 0x53) {
      PlayerCallback_80063fdc();
      return;
    }
    if (bVar4 == 0 || 0x3b < bVar4) {
      bVar4 = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),
                         (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
      if (((((byte)(bVar4 + 0x4b) < 3) || (bVar4 == 0xc9)) || (bVar4 == 0xcb)) ||
         (bVar1 = false, (byte)(bVar4 + 0x23) < 3)) {
        if (*(char *)(param_1 + 0x128) == '\0') {
          bVar1 = true;
        }
        else {
          bVar4 = 0x65;
          bVar1 = false;
        }
      }
      if (bVar1) {
        PlayerProcessBounceCollision(param_1,bVar4);
        return;
      }
      if (bVar4 == 0 || 0x3b < bVar4) {
        if (bVar4 != 0) {
          return;
        }
        bVar4 = EntityApplyMovementCallbacks
                          (param_1,(int)*(short *)(param_1 + 0x68),
                           (int)((*(ushort *)(param_1 + 0x6a) + 0x10) * 0x10000) >> 0x10);
        if (bVar4 == 0 || 0x3b < bVar4) {
          EntitySetState(param_1,null_FFFF0000h_800a5d30,PTR_PlayerStateCallback_2_800a5d34);
          return;
        }
        iVar8 = (int)*(short *)(param_1 + 0x68);
        sVar9 = *(short *)(param_1 + 0x6a) + 0x10;
      }
      else {
        iVar8 = (int)*(short *)(param_1 + 0x68);
        sVar9 = *(short *)(param_1 + 0x6a) + 2;
      }
    }
    else {
      iVar8 = (int)*(short *)(param_1 + 0x68);
      sVar9 = *(short *)(param_1 + 0x6a) + -7;
    }
    uVar5 = PlayerApplyPositionWithCollision(param_1,bVar4,iVar8,(int)sVar9,cVar2,bVar4);
    *(undefined2 *)(param_1 + 0x6a) = uVar5;
    return;
  }
  PlayerCallback_80063f38();
  return;
}



void PlayerCallback_80063f38(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_80063fdc(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_80064008(int param_1)

{
  ushort uVar1;
  bool bVar2;
  undefined2 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  short sVar10;
  int iVar11;
  short in_t0;
  code *pcVar12;
  short in_t2;
  short unaff_s2;
  short unaff_s4;
  short unaff_s6;
  char local_a0;
  char local_9f;
  char local_9e;
  char local_9d;
  char local_9c;
  short local_60;
  short local_50;
  short local_40;
  short local_30;
  
  sVar10 = *(short *)(param_1 + 0x68);
  iVar4 = sVar10 * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) + *(int *)(param_1 + 0x10c);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar4 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar4;
  if (*(int *)(param_1 + 0x58) == 0xc000) {
    iVar4 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar4 + 0x26);
    uVar7 = (uint)*(ushort *)(iVar4 + 0x68);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar4 + 0x28);
      }
      else {
        iVar5 = iVar11 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0x28));
        in_t2 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar12 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(iVar4 + 0x24);
      if (0 < iVar11 << 0x10) {
        iVar5 = in_t2 + iVar5;
      }
      uVar7 = (*pcVar12)(iVar4 + iVar5,(int)(short)*(ushort *)(iVar4 + 0x68));
    }
    iVar4 = (int)*(short *)(param_1 + 0x26);
    uVar8 = (uint)*(ushort *)(param_1 + 0x130);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar12 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar11 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        unaff_s2 = (short)*(undefined4 *)(iVar11 + -8);
        pcVar12 = *(code **)(iVar11 + -4);
      }
      iVar11 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar11 = unaff_s2 + iVar11;
      }
      uVar8 = (*pcVar12)(param_1 + iVar11,(int)(short)*(ushort *)(param_1 + 0x130));
    }
    iVar11 = *(int *)(param_1 + 0x58);
    iVar4 = (uVar7 + uVar8) * 0x10000;
    uVar7 = iVar4 / iVar11;
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar7 & 3) - 1 < 2) {
      uVar7 = uVar7 + 1;
    }
    iVar4 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar4 + 0x2e);
    uVar8 = (uint)*(ushort *)(iVar4 + 0x6a);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar4 + 0x30);
      }
      else {
        iVar5 = iVar11 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0x30));
        unaff_s6 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar12 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(iVar4 + 0x2c);
      if (0 < iVar11 << 0x10) {
        iVar5 = unaff_s6 + iVar5;
      }
      uVar8 = (*pcVar12)(iVar4 + iVar5,(int)(short)*(ushort *)(iVar4 + 0x6a));
    }
    iVar4 = (int)*(short *)(param_1 + 0x2e);
    uVar9 = (uint)*(ushort *)(param_1 + 0x132);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar12 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar11 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_60 = (short)*(undefined4 *)(iVar11 + -8);
        pcVar12 = *(code **)(iVar11 + -4);
      }
      iVar11 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar4 << 0x10) {
        iVar11 = local_60 + iVar11;
      }
      uVar9 = (*pcVar12)(param_1 + iVar11,(int)(short)*(ushort *)(param_1 + 0x132));
    }
    iVar11 = *(int *)(param_1 + 0x5c);
    iVar4 = (uVar8 + uVar9) * 0x10000;
    uVar8 = iVar4 / iVar11;
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    if ((uVar8 & 3) - 1 < 2) {
      uVar8 = uVar8 + 1;
    }
    iVar4 = uVar7 - *(ushort *)(param_1 + 0x68);
    iVar11 = uVar8 - *(ushort *)(param_1 + 0x6a);
  }
  else {
    iVar4 = *(int *)(param_1 + 300);
    iVar11 = (int)*(short *)(iVar4 + 0x26);
    uVar7 = (uint)*(ushort *)(iVar4 + 0x68);
    if (iVar11 != 0) {
      if (iVar11 < 1) {
        pcVar12 = *(code **)(iVar4 + 0x28);
      }
      else {
        iVar5 = iVar11 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar12 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(iVar4 + 0x24);
      if (0 < iVar11 << 0x10) {
        iVar5 = in_t0 + iVar5;
      }
      uVar7 = (*pcVar12)(iVar4 + iVar5,(int)(short)*(ushort *)(iVar4 + 0x68));
    }
    iVar4 = *(int *)(param_1 + 0x58);
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (uVar7 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar11 = *(int *)(param_1 + 300);
    iVar5 = (int)*(short *)(iVar11 + 0x2e);
    uVar8 = (uint)*(ushort *)(iVar11 + 0x6a);
    iVar4 = ((int)(uVar7 << 0x10) / iVar4 + (uint)*(ushort *)(param_1 + 0x130)) -
            (uint)*(ushort *)(param_1 + 0x68);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar12 = *(code **)(iVar11 + 0x30);
      }
      else {
        iVar6 = iVar5 * 8 + *(int *)(iVar11 + *(short *)(iVar11 + 0x30));
        unaff_s4 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar12 = *(code **)(iVar6 + -4);
      }
      iVar6 = (int)*(short *)(iVar11 + 0x2c);
      if (0 < iVar5 << 0x10) {
        iVar6 = unaff_s4 + iVar6;
      }
      uVar8 = (*pcVar12)(iVar11 + iVar6,(int)(short)*(ushort *)(iVar11 + 0x6a));
    }
    iVar11 = *(int *)(param_1 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && (uVar8 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    iVar11 = ((int)(uVar8 << 0x10) / iVar11 + (uint)*(ushort *)(param_1 + 0x132)) -
             (uint)*(ushort *)(param_1 + 0x6a);
  }
  *(int *)(param_1 + 0x110) = iVar11 << 0x10;
  iVar5 = (uint)*(ushort *)(param_1 + 0x68) + iVar4;
  *(short *)(param_1 + 0x130) = *(short *)(param_1 + 0x130) + (*(short *)(param_1 + 0x68) - sVar10);
  *(short *)(param_1 + 0x68) = (short)iVar5;
  local_a0 = EntityApplyMovementCallbacks
                       (param_1,iVar5 * 0x10000 >> 0x10,(int)*(short *)(param_1 + 0x6a));
  if (((((byte)(local_a0 + 0x4bU) < 3) || (local_a0 == -0x37)) || (local_a0 == -0x35)) ||
     (bVar2 = false, (byte)(local_a0 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_a0 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_80064b04(param_1,local_a0);
    return;
  }
  local_9f = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  if ((((byte)(local_9f + 0x4bU) < 3) || (local_9f == -0x37)) ||
     ((local_9f == -0x35 || (bVar2 = false, (byte)(local_9f + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_9f = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_80064b04(param_1,local_9f);
    return;
  }
  if (*(short *)(param_1 + 0x46) < 0x18) {
    local_9e = '\0';
    local_9d = '\0';
  }
  else {
    local_9e = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
    if ((((byte)(local_9e + 0x4bU) < 3) || (local_9e == -0x37)) ||
       ((local_9e == -0x35 || (bVar2 = false, (byte)(local_9e + 0x23U) < 3)))) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar2 = true;
      }
      else {
        local_9e = 'e';
        bVar2 = false;
      }
    }
    if (bVar2) {
      PlayerCallback_80064b04(param_1,local_9e);
      return;
    }
    local_9d = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
    if (((((byte)(local_9d + 0x4bU) < 3) || (local_9d == -0x37)) || (local_9d == -0x35)) ||
       (bVar2 = false, (byte)(local_9d + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar2 = true;
      }
      else {
        local_9d = 'e';
        bVar2 = false;
      }
    }
    if (bVar2) {
      PlayerCallback_80064b04(param_1,local_9d);
      return;
    }
  }
  if (((local_a0 != 'e') && (local_9f != 'e')) && ((local_9e != 'e' && (local_9d != 'e'))))
  goto PlayerCallback_80064a34;
  if ((short)iVar4 < 1) {
    if (-1 < (short)iVar4) goto PlayerCallback_80064a34;
    uVar3 = FUN_8005a028(param_1,(int)*(short *)(param_1 + 0x68));
    iVar4 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x68) = uVar3;
    *(undefined2 *)(param_1 + 0x6c) = 0;
    iVar5 = (int)*(short *)(iVar4 + 0x26);
    uVar1 = *(ushort *)(iVar4 + 0x68);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar12 = *(code **)(iVar4 + 0x28);
      }
      else {
        iVar6 = iVar5 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0x28));
        local_30 = (short)*(undefined4 *)(iVar6 + -8);
        pcVar12 = *(code **)(iVar6 + -4);
      }
      sVar10 = *(short *)(iVar4 + 0x24);
      goto joined_r0x800649b0;
    }
PlayerCallback_800649ec:
    uVar7 = (uint)uVar1;
  }
  else {
    iVar4 = (int)*(short *)(param_1 + 0x26);
    uVar7 = (uint)*(ushort *)(param_1 + 0x68);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar12 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar5 = iVar4 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        local_50 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar12 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar5 = local_50 + iVar5;
      }
      uVar7 = (*pcVar12)(param_1 + iVar5,(int)(short)*(ushort *)(param_1 + 0x68));
    }
    iVar6 = *(int *)(param_1 + 0x58);
    iVar5 = (uVar7 & 0xfffffff0) << 0x10;
    if (iVar6 == 0) {
      trap(0x1c00);
    }
    if ((iVar6 == -1) && (iVar5 == -0x80000000)) {
      trap(0x1800);
    }
    iVar4 = *(int *)(param_1 + 300);
    *(undefined2 *)(param_1 + 0x6c) = 0;
    *(short *)(param_1 + 0x68) = (short)(iVar5 / iVar6) + -1;
    iVar5 = (int)*(short *)(iVar4 + 0x26);
    uVar1 = *(ushort *)(iVar4 + 0x68);
    if (iVar5 == 0) goto PlayerCallback_800649ec;
    if (iVar5 < 1) {
      pcVar12 = *(code **)(iVar4 + 0x28);
    }
    else {
      iVar6 = iVar5 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0x28));
      local_40 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar12 = *(code **)(iVar6 + -4);
    }
    sVar10 = *(short *)(iVar4 + 0x24);
    local_30 = local_40;
joined_r0x800649b0:
    iVar6 = (int)sVar10;
    if (0 < iVar5 << 0x10) {
      iVar6 = local_30 + iVar6;
    }
    uVar7 = (*pcVar12)(iVar4 + iVar6,(int)(short)uVar1);
  }
  iVar4 = *(int *)(param_1 + 0x58);
  if (iVar4 == 0) {
    trap(0x1c00);
  }
  if ((iVar4 == -1) && (uVar7 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x130) = *(short *)(param_1 + 0x68) - (short)((int)(uVar7 << 0x10) / iVar4);
PlayerCallback_80064a34:
  sVar10 = *(short *)(param_1 + 0x6a) + (short)iVar11;
  *(short *)(param_1 + 0x6a) = sVar10;
  if (iVar11 << 0x10 < 0) {
    if (*(short *)(param_1 + 0x46) < 0x18) {
      sVar10 = sVar10 + 0x18;
    }
    else {
      sVar10 = sVar10 + -0x40;
    }
    local_9c = EntityApplyMovementCallbacks(param_1,(int)*(short *)(param_1 + 0x68),(int)sVar10);
    if (((((byte)(local_9c + 0x4bU) < 3) || (local_9c == -0x37)) || (local_9c == -0x35)) ||
       (bVar2 = false, (byte)(local_9c + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar2 = true;
      }
      else {
        local_9c = 'e';
        bVar2 = false;
      }
    }
    if (bVar2) {
      *(short *)(param_1 + 0x6a) = *(short *)(param_1 + 0x6a) + 0xe;
      PlayerProcessBounceCollision(param_1,local_9c);
    }
  }
  return;
}



void PlayerCallback_800649ec(undefined4 param_1,int param_2)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int unaff_s0;
  ushort unaff_s2;
  
  iVar3 = *(int *)(unaff_s0 + 0x58);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_2 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x130) = *(short *)(unaff_s0 + 0x68) - (short)((param_2 << 0x10) / iVar3);
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
    }
  }
  return;
}



void PlayerCallback_80064a34(void)

{
  bool bVar1;
  char cVar2;
  int unaff_s0;
  ushort unaff_s2;
  
  *(ushort *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + unaff_s2;
  if ((int)((uint)unaff_s2 << 0x10) < 0) {
    cVar2 = EntityApplyMovementCallbacks();
    if (((((byte)(cVar2 + 0x4bU) < 3) || (cVar2 == -0x37)) || (cVar2 == -0x35)) ||
       (bVar1 = false, (byte)(cVar2 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bVar1 = false;
      }
    }
    if (bVar1) {
      *(short *)(unaff_s0 + 0x6a) = *(short *)(unaff_s0 + 0x6a) + 0xe;
      PlayerProcessBounceCollision();
    }
  }
  return;
}



void PlayerCallback_80064b04(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_80064b40(int param_1)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  byte bVar4;
  undefined2 uVar5;
  int iVar6;
  uint uVar7;
  short sVar8;
  int iVar9;
  short unaff_s2;
  code *pcVar10;
  char local_27;
  char local_26;
  char local_25;
  
  iVar9 = 1;
  iVar6 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
          *(int *)(param_1 + 0x10c);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar6 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar6;
  if (*(int *)(param_1 + 0x10c) < 0) {
    iVar9 = -1;
  }
  cVar3 = EntityApplyMovementCallbacks
                    (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
  local_27 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  local_26 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  local_25 = EntityApplyMovementCallbacks
                       (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >> 0x10
                        ,(int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(cVar3 + 0x4bU) < 3) || (cVar3 == -0x37)) || (cVar3 == -0x35)) ||
     (bVar2 = false, (byte)(cVar3 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      cVar3 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_8006505c();
    return;
  }
  if ((((byte)(local_27 + 0x4bU) < 3) || (local_27 == -0x37)) ||
     ((local_27 == -0x35 || (bVar2 = false, (byte)(local_27 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_27 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_8006505c();
    return;
  }
  if ((((byte)(local_26 + 0x4bU) < 3) || (local_26 == -0x37)) ||
     ((local_26 == -0x35 || (bVar2 = false, (byte)(local_26 + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_26 = 'e';
      bVar2 = false;
    }
  }
  if (bVar2) {
    PlayerCallback_8006505c();
    return;
  }
  if (((((byte)(local_25 + 0x4bU) < 3) || (local_25 == -0x37)) || (local_25 == -0x35)) ||
     (bVar2 = false, (byte)(local_25 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar2 = true;
    }
    else {
      local_25 = 'e';
      bVar2 = false;
    }
  }
  if (!bVar2) {
    if (((cVar3 == 'e') || (local_27 == 'e')) || ((local_26 == 'e' || (local_25 == 'e')))) {
      if (*(int *)(param_1 + 0x10c) < 0) {
        uVar5 = FUN_8005a028(param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar9) * 0x10000) >>
                                     0x10);
        *(undefined2 *)(param_1 + 0x68) = uVar5;
      }
      else {
        iVar6 = (int)*(short *)(param_1 + 0x26);
        uVar7 = (uint)*(ushort *)(param_1 + 0x68) + iVar9;
        if (iVar6 != 0) {
          if (iVar6 < 1) {
            pcVar10 = *(code **)(param_1 + 0x28);
          }
          else {
            iVar9 = iVar6 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
            unaff_s2 = (short)*(undefined4 *)(iVar9 + -8);
            pcVar10 = *(code **)(iVar9 + -4);
          }
          iVar9 = (int)*(short *)(param_1 + 0x24);
          if (0 < iVar6 << 0x10) {
            iVar9 = unaff_s2 + iVar9;
          }
          uVar7 = (*pcVar10)(param_1 + iVar9,(int)(short)uVar7);
        }
        iVar9 = *(int *)(param_1 + 0x58);
        iVar6 = (uVar7 & 0xfffffff0) << 0x10;
        if (iVar9 == 0) {
          trap(0x1c00);
        }
        if ((iVar9 == -1) && (iVar6 == -0x80000000)) {
          trap(0x1800);
        }
        *(short *)(param_1 + 0x68) = (short)(iVar6 / iVar9) + -1;
      }
      *(undefined2 *)(param_1 + 0x6c) = 0;
      return;
    }
    bVar4 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) - 7) * 0x10000) >> 0x10);
    if (bVar4 == 0 || 0x3b < bVar4) {
      bVar4 = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),
                         (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
      if (((((byte)(bVar4 + 0x4b) < 3) || (bVar4 == 0xc9)) || (bVar4 == 0xcb)) ||
         (bVar2 = false, (byte)(bVar4 + 0x23) < 3)) {
        if (*(char *)(param_1 + 0x128) == '\0') {
          bVar2 = true;
        }
        else {
          bVar4 = 0x65;
          bVar2 = false;
        }
      }
      if (bVar2) {
        PlayerProcessBounceCollision(param_1,bVar4);
        return;
      }
      if (bVar4 == 0 || 0x3b < bVar4) {
        return;
      }
      sVar1 = *(short *)(param_1 + 0x68);
      sVar8 = *(short *)(param_1 + 0x6a) + 2;
    }
    else {
      sVar1 = *(short *)(param_1 + 0x68);
      sVar8 = *(short *)(param_1 + 0x6a) + -7;
    }
    uVar5 = PlayerApplyPositionWithCollision(param_1,bVar4,(int)sVar1,(int)sVar8,cVar3,bVar4);
    *(undefined2 *)(param_1 + 0x6a) = uVar5;
    return;
  }
  PlayerCallback_8006505c();
  return;
}



void PlayerCallback_8006505c(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_800650c4(int param_1)

{
  bool bVar1;
  bool bVar2;
  undefined4 uVar3;
  undefined *puVar4;
  char cVar5;
  byte bVar6;
  byte bVar7;
  byte bVar8;
  ushort uVar9;
  short sVar10;
  undefined2 uVar11;
  short sVar12;
  short sVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  uint uVar18;
  short unaff_s2;
  code *pcVar19;
  short unaff_s6;
  char local_e0;
  char local_df;
  char local_de;
  char local_dd;
  char local_dc;
  byte local_db;
  short local_d8;
  short local_d6;
  short local_d4;
  short local_d2;
  undefined4 local_b8;
  code *local_b4;
  undefined4 local_a0;
  code *local_9c;
  undefined4 local_90;
  code *local_8c;
  undefined4 local_80;
  code *local_7c;
  undefined4 local_70;
  code *local_6c;
  undefined4 local_60;
  code *local_5c;
  undefined4 local_48;
  code *local_44;
  undefined4 local_38;
  code *local_34;
  undefined4 local_28;
  code *local_24;
  
  bVar2 = false;
  sVar10 = *(short *)(param_1 + 0x6a);
  uVar9 = *(ushort *)(param_1 + 0x6e);
  iVar17 = *(int *)(param_1 + 0x10c);
  if (iVar17 < 1) {
    if ((iVar17 < 0) && (*(int *)(param_1 + 0x10c) = iVar17 + 0x4000, 0 < iVar17 + 0x4000)) {
      *(undefined4 *)(param_1 + 0x10c) = 0;
    }
  }
  else {
    *(int *)(param_1 + 0x10c) = iVar17 + -0x4000;
    if (iVar17 + -0x4000 < 0) {
      *(undefined4 *)(param_1 + 0x10c) = 0;
    }
  }
  iVar17 = *(int *)(param_1 + 0x114);
  if (0 < iVar17) {
    PlayerCallback_80065174();
    return;
  }
  if ((iVar17 < 0) && (iVar17 < *(int *)(param_1 + 0x10c))) {
    *(int *)(param_1 + 0x10c) = iVar17;
  }
  *(undefined4 *)(param_1 + 0x114) = 0;
  iVar17 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
           *(int *)(param_1 + 0x10c);
  if (*(char *)(param_1 + 0x170) != '\0') {
    iVar17 = iVar17 + *(short *)(param_1 + 0x160) * 0x10000;
  }
  *(short *)(param_1 + 0x68) = (short)((uint)iVar17 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar17;
  local_e0 = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
  if (((((byte)(local_e0 + 0x4bU) < 3) || (local_e0 == -0x37)) || (local_e0 == -0x35)) ||
     (bVar1 = false, (byte)(local_e0 + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_e0 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400(param_1,local_e0);
    return;
  }
  local_df = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  if ((((byte)(local_df + 0x4bU) < 3) || (local_df == -0x37)) ||
     ((local_df == -0x35 || (bVar1 = false, (byte)(local_df + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_df = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400(param_1,local_df);
    return;
  }
  local_de = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  if ((((byte)(local_de + 0x4bU) < 3) || (local_de == -0x37)) ||
     ((local_de == -0x35 || (bVar1 = false, (byte)(local_de + 0x23U) < 3)))) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_de = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400(param_1,local_de);
    return;
  }
  local_dd = EntityApplyMovementCallbacks
                       (param_1,(int)*(short *)(param_1 + 0x68),
                        (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if (((((byte)(local_dd + 0x4bU) < 3) || (local_dd == -0x37)) || (local_dd == -0x35)) ||
     (bVar1 = false, (byte)(local_dd + 0x23U) < 3)) {
    if (*(char *)(param_1 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      local_dd = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerProcessBounceCollision(param_1,local_dd);
    return;
  }
  if (((local_e0 == 'e') || (local_df == 'e')) || ((local_de == 'e' || (local_dd == 'e')))) {
    if (*(int *)(param_1 + 0x10c) < 1) {
      if (*(int *)(param_1 + 0x10c) < 0) {
        *(undefined4 *)(param_1 + 0x10c) = 0;
        uVar11 = FUN_8005a028(param_1,(int)*(short *)(param_1 + 0x68));
        *(undefined2 *)(param_1 + 0x68) = uVar11;
        *(undefined2 *)(param_1 + 0x6c) = 0;
      }
    }
    else {
      iVar17 = (int)*(short *)(param_1 + 0x26);
      uVar18 = (uint)*(ushort *)(param_1 + 0x68);
      *(undefined4 *)(param_1 + 0x10c) = 0;
      if (iVar17 != 0) {
        if (iVar17 < 1) {
          pcVar19 = *(code **)(param_1 + 0x28);
        }
        else {
          iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
          unaff_s2 = (short)*(undefined4 *)(iVar14 + -8);
          pcVar19 = *(code **)(iVar14 + -4);
        }
        iVar14 = (int)*(short *)(param_1 + 0x24);
        if (0 < iVar17 << 0x10) {
          iVar14 = unaff_s2 + iVar14;
        }
        uVar18 = (*pcVar19)(param_1 + iVar14,(int)(short)*(ushort *)(param_1 + 0x68));
      }
      iVar14 = *(int *)(param_1 + 0x58);
      iVar17 = (uVar18 & 0xfffffff0) << 0x10;
      if (iVar14 == 0) {
        trap(0x1c00);
      }
      if ((iVar14 == -1) && (iVar17 == -0x80000000)) {
        trap(0x1800);
      }
      *(undefined2 *)(param_1 + 0x6c) = 0;
      *(short *)(param_1 + 0x68) = (short)(iVar17 / iVar14) + -1;
    }
  }
  iVar17 = *(int *)(param_1 + 0x118);
  if (iVar17 != 0) {
    *(undefined4 *)(param_1 + 0x118) = 0;
    *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + iVar17;
    PlayerCallback_800655d4();
    return;
  }
  if (*(char *)(param_1 + 0x170) == '\0') {
    iVar17 = *(int *)(param_1 + 0x110) + 0x5000;
    *(int *)(param_1 + 0x110) = iVar17;
    if (0x80000 < iVar17) {
      *(undefined4 *)(param_1 + 0x110) = 0x80000;
    }
    PlayerCallback_800655d4();
    return;
  }
  iVar17 = *(int *)(param_1 + 0x110);
  iVar14 = sVar10 * 0x10000 + (uint)uVar9 + *(short *)(param_1 + 0x162) * 0x10000;
  if (iVar17 < 1) {
    iVar14 = iVar14 + iVar17;
    iVar17 = *(int *)(param_1 + 0x110);
  }
  else {
    iVar14 = iVar14 + 0xc000;
  }
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar14 >> 0x10);
  *(short *)(param_1 + 0x6e) = (short)iVar14;
  if (iVar17 < 0) {
    local_dc = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
    if (((((byte)(local_dc + 0x4bU) < 3) || (local_dc == -0x37)) || (local_dc == -0x35)) ||
       (bVar1 = false, (byte)(local_dc + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        local_dc = 'e';
        bVar1 = false;
      }
    }
    if (bVar1) {
      iVar17 = (int)*(short *)(param_1 + 0x2e);
      uVar9 = *(short *)(param_1 + 0x6a) - 0x40;
      if (iVar17 != 0) {
        if (iVar17 < 1) {
          pcVar19 = *(code **)(param_1 + 0x30);
        }
        else {
          iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar14 + -8);
          pcVar19 = *(code **)(iVar14 + -4);
        }
        iVar14 = (int)*(short *)(param_1 + 0x2c);
        if (0 < iVar17 << 0x10) {
          iVar14 = unaff_s6 + iVar14;
        }
        uVar9 = (*pcVar19)(param_1 + iVar14,(int)(short)uVar9);
      }
      if (*(int *)(param_1 + 0x5c) == 0) {
        trap(0x1c00);
      }
      if ((*(int *)(param_1 + 0x5c) == -1) && ((uVar9 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      PlayerCallback_800659cc(param_1,local_dc);
      return;
    }
    if (local_dc == 'e') {
      *(undefined4 *)(param_1 + 0x110) = 0;
      *(undefined1 *)(param_1 + 0x11c) = 0;
      *(undefined1 *)(param_1 + 0x11e) = 0;
      *(undefined1 *)(param_1 + 0x11f) = 0;
      *(undefined4 *)(param_1 + 0x120) = 0;
      FUN_8001c4a4(param_1,0x50f08207);
      iVar17 = (int)*(short *)(param_1 + 0x2e);
      uVar9 = *(short *)(param_1 + 0x6a) - 0x40;
      if (iVar17 != 0) {
        if (iVar17 < 1) {
          pcVar19 = *(code **)(param_1 + 0x30);
        }
        else {
          iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
          local_b8 = *(undefined4 *)(iVar14 + -8);
          pcVar19 = *(code **)(iVar14 + -4);
          local_b4 = pcVar19;
        }
        iVar14 = (int)*(short *)(param_1 + 0x2c);
        if (0 < iVar17 << 0x10) {
          iVar14 = (short)local_b8 + iVar14;
        }
        uVar9 = (*pcVar19)(param_1 + iVar14,(int)(short)uVar9);
      }
      puVar4 = PTR_PlayerStateCallback_2_800a5d34;
      uVar3 = null_FFFF0000h_800a5d30;
      iVar17 = *(int *)(param_1 + 0x5c);
      if (iVar17 == 0) {
        trap(0x1c00);
      }
      if ((iVar17 == -1) && ((uVar9 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(param_1 + 0x6a) = (short)((int)((uint)(uVar9 | 0xf) << 0x10) / iVar17) + 0x40;
      PlayerCallback_800660bc(param_1,uVar3,puVar4);
      return;
    }
  }
  else if (0 < iVar17) {
    sVar10 = 0xc;
    if (*(char *)(param_1 + 0x74) != '\0') {
      sVar10 = -0xc;
    }
    local_db = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
    if (((((byte)(local_db + 0x4b) < 3) || (local_db == 0xc9)) || (local_db == 0xcb)) ||
       (iVar17 = 0, (byte)(local_db + 0x23) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        iVar17 = 1;
      }
      else {
        local_db = 0x65;
        iVar17 = 0;
      }
    }
    if (local_db == 0x5b) {
PlayerCallback_8006597c:
      if (*(short *)(param_1 + 0x144) != 0) {
        PlayerCallback_80066808(iVar17,null_FFFF0000h_800a5d78,PTR_Callback_8006c95c_800a5d7c);
        return;
      }
      PlayerCallback_80066808(iVar17,null_FFFF0000h_800a5d98,PTR_Callback_80069ef4_800a5d9c);
      return;
    }
    iVar16 = *(int *)(param_1 + 0x5c);
    iVar14 = (int)*(short *)(g_GameStatePtr + 0x4a) << 0x10;
    if (iVar16 == 0) {
      trap(0x1c00);
    }
    if ((iVar16 == -1) && (iVar14 == -0x80000000)) {
      trap(0x1800);
    }
    iVar15 = (int)*(short *)(param_1 + 0x6a);
    if ((short)(iVar14 / iVar16) < iVar15) goto PlayerCallback_8006597c;
    if (iVar17 != 0) {
      sVar10 = FUN_80059e3c(param_1,iVar15);
      *(short *)(param_1 + 0x6a) = sVar10 + -1;
      PlayerProcessBounceCollision(param_1,local_db);
      PlayerCallback_800660c8();
      return;
    }
    if (local_db == 0x7d) {
      cVar5 = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),(iVar15 + -0x40) * 0x10000 >> 0x10)
      ;
      if (cVar5 == '}') {
        iVar17 = (int)*(short *)(param_1 + 0x26);
        if (iVar17 != 0) {
          if (iVar17 < 1) {
            pcVar19 = *(code **)(param_1 + 0x28);
          }
          else {
            iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
            local_a0 = *(undefined4 *)(iVar14 + -8);
            pcVar19 = *(code **)(iVar14 + -4);
            local_9c = pcVar19;
          }
          iVar14 = (int)*(short *)(param_1 + 0x24);
          if (0 < iVar17 << 0x10) {
            iVar14 = (short)local_a0 + iVar14;
          }
          (*pcVar19)(param_1 + iVar14,(int)*(short *)(param_1 + 0x68));
        }
        PlayerCallback_8006606c();
        return;
      }
      goto code_r0x800660c8;
    }
    bVar2 = false;
    if (local_db == 0x65) {
      sVar10 = FUN_80059e3c(param_1,iVar15);
      *(short *)(param_1 + 0x6a) = sVar10 + -1;
      PlayerCallback_80065bc0();
      return;
    }
    if ((local_db != 0 && local_db < 0x3c) &&
       (cVar5 = FUN_8005a3f8(param_1,local_db,(int)*(short *)(param_1 + 0x68),iVar15,iVar15),
       cVar5 != '\0')) {
      bVar2 = true;
    }
    if (bVar2) {
      PlayerCallback_80065bb4
                (param_1,local_db,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
      return;
    }
    bVar2 = false;
    bVar6 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
    if ((bVar6 != 0 && bVar6 < 0x3c) &&
       (cVar5 = FUN_8005a3f8(param_1,bVar6,(int)*(short *)(param_1 + 0x68),
                             (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10,
                             (int)(short)*(ushort *)(param_1 + 0x6a)), cVar5 != '\0')) {
      bVar2 = true;
    }
    if (bVar2) {
      uVar11 = PlayerApplyPositionWithCollision
                         (param_1,bVar6,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
      *(undefined2 *)(param_1 + 0x6a) = uVar11;
      goto PlayerCallback_800666cc;
    }
    iVar17 = FUN_80059e3c(param_1,(int)*(short *)(param_1 + 0x6a));
    local_db = EntityApplyMovementCallbacks
                         (param_1,(int)(short)(*(short *)(param_1 + 0x68) + sVar10),
                          (iVar17 + -1) * 0x10000 >> 0x10);
    if ((((((byte)(local_db + 0x4b) < 3) || (local_db == -0x37)) || (local_db == -0x35)) ||
        ((byte)(local_db + 0x23) < 3)) && (*(char *)(param_1 + 0x128) != '\0')) {
      local_db = 'e';
    }
    if (local_db != 'e') {
      local_db = EntityApplyMovementCallbacks
                           (param_1,(int)(short)(*(short *)(param_1 + 0x68) + sVar10),
                            (int)*(short *)(param_1 + 0x6a));
      if ((((byte)(local_db + 0x4b) < 3) || (local_db == 0xc9)) ||
         ((local_db == 0xcb || (bVar1 = false, (byte)(local_db + 0x23) < 3)))) {
        if (*(char *)(param_1 + 0x128) == '\0') {
          bVar1 = true;
        }
        else {
          local_db = 0x65;
          bVar1 = false;
        }
      }
      if (bVar1) {
        sVar10 = FUN_80059e3c(param_1,(int)*(short *)(param_1 + 0x6a));
        *(short *)(param_1 + 0x6a) = sVar10 + -1;
        PlayerProcessBounceCollision(param_1,local_db);
        PlayerCallback_80065e88();
        return;
      }
      bVar1 = false;
      if (local_db == 0x65) {
        *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x68) + sVar10;
        sVar10 = FUN_80059e3c(param_1,(int)*(short *)(param_1 + 0x6a));
        sVar10 = sVar10 + -1;
      }
      else {
        if ((local_db != 0 && local_db < 0x3c) &&
           (cVar5 = FUN_8005a3f8(param_1,local_db,(int)(short)(*(short *)(param_1 + 0x68) + sVar10),
                                 (int)*(short *)(param_1 + 0x6a),(int)*(short *)(param_1 + 0x6a)),
           cVar5 != '\0')) {
          bVar1 = true;
        }
        if (bVar1) {
          sVar12 = *(short *)(param_1 + 0x68);
          iVar17 = (int)*(short *)(param_1 + 0x6a);
        }
        else {
          bVar1 = false;
          local_db = EntityApplyMovementCallbacks
                               (param_1,(int)(short)(*(short *)(param_1 + 0x68) + sVar10),
                                (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
          if ((local_db != 0 && local_db < 0x3c) &&
             (cVar5 = FUN_8005a3f8(param_1,local_db,
                                   (int)(short)(*(short *)(param_1 + 0x68) + sVar10),
                                   (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10,
                                   (int)(short)*(ushort *)(param_1 + 0x6a)), cVar5 != '\0')) {
            bVar1 = true;
          }
          if (!bVar1) goto PlayerCallback_80065e84;
          sVar12 = *(short *)(param_1 + 0x68);
          iVar17 = (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10;
        }
        *(short *)(param_1 + 0x68) = sVar12 + sVar10;
        sVar10 = PlayerApplyPositionWithCollision
                           (param_1,local_db,(int)(short)(sVar12 + sVar10 + sVar10),iVar17);
      }
      bVar2 = true;
      *(short *)(param_1 + 0x6a) = sVar10;
    }
PlayerCallback_80065e84:
    if (bVar2) goto PlayerCallback_800666cc;
    cVar5 = EntityApplyMovementCallbacks
                      (param_1,(int)((*(ushort *)(param_1 + 0x68) + 0x10) * 0x10000) >> 0x10,
                       (int)*(short *)(param_1 + 0x6a));
    if (cVar5 == '}') {
      cVar5 = EntityApplyMovementCallbacks
                        (param_1,(int)((*(ushort *)(param_1 + 0x68) + 0x10) * 0x10000) >> 0x10,
                         (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
      if (cVar5 == '}') {
        iVar17 = (int)*(short *)(param_1 + 0x26);
        uVar9 = *(short *)(param_1 + 0x68) + 0x10;
        if (iVar17 != 0) {
          if (iVar17 < 1) {
            pcVar19 = *(code **)(param_1 + 0x28);
          }
          else {
            iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
            local_90 = *(undefined4 *)(iVar14 + -8);
            pcVar19 = *(code **)(iVar14 + -4);
            local_8c = pcVar19;
          }
          sVar10 = *(short *)(param_1 + 0x24);
          if (0 < iVar17 << 0x10) {
            PlayerCallback_80066040();
            return;
          }
PlayerCallback_8006604c:
          uVar9 = (*pcVar19)(param_1 + sVar10,(int)(short)uVar9);
        }
PlayerCallback_80066064:
        puVar4 = PTR_Callback_8006b7f8_800a5ed8;
        uVar3 = null_FFFF0000h_800a5ed4;
        iVar17 = *(int *)(param_1 + 0x58);
        if (iVar17 == 0) {
          trap(0x1c00);
        }
        if ((iVar17 == -1) && ((uVar9 & 0xfff0) == 0x8000)) {
          trap(0x1800);
        }
        *(short *)(param_1 + 0x68) = (short)((int)((uint)(uVar9 & 0xfff0) << 0x10) / iVar17) + 8;
        EntitySetState(param_1,uVar3,puVar4);
      }
    }
    else {
      cVar5 = EntityApplyMovementCallbacks
                        (param_1,(int)((*(ushort *)(param_1 + 0x68) - 0x10) * 0x10000) >> 0x10,
                         (int)*(short *)(param_1 + 0x6a));
      if ((cVar5 == '}') &&
         (cVar5 = EntityApplyMovementCallbacks
                            (param_1,(int)((*(ushort *)(param_1 + 0x68) - 0x10) * 0x10000) >> 0x10,
                             (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10),
         cVar5 == '}')) {
        iVar17 = (int)*(short *)(param_1 + 0x26);
        uVar9 = *(short *)(param_1 + 0x68) - 0x10;
        if (iVar17 != 0) {
          if (iVar17 < 1) {
            pcVar19 = *(code **)(param_1 + 0x28);
          }
          else {
            iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
            local_80 = *(undefined4 *)(iVar14 + -8);
            pcVar19 = *(code **)(iVar14 + -4);
            local_7c = pcVar19;
          }
          sVar10 = *(short *)(param_1 + 0x24);
          if (0 < iVar17 << 0x10) {
            PlayerCallback_80066050();
            return;
          }
          goto PlayerCallback_8006604c;
        }
        goto PlayerCallback_80066064;
      }
    }
  }
code_r0x800660c8:
  if (bVar2) goto PlayerCallback_800666cc;
  sVar10 = 0xc;
  if (*(char *)(param_1 + 0x74) != '\0') {
    sVar10 = -0xc;
  }
  iVar17 = FUN_8001b594(param_1,8,0x100b,0);
  if (iVar17 == 0) {
    iVar17 = (int)*(short *)(param_1 + 0x26);
    sVar12 = *(short *)(param_1 + 0x68) + sVar10;
    if (iVar17 != 0) {
      if (iVar17 < 1) {
        pcVar19 = *(code **)(param_1 + 0x28);
      }
      else {
        iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
        local_70 = *(undefined4 *)(iVar14 + -8);
        pcVar19 = *(code **)(iVar14 + -4);
        local_6c = pcVar19;
      }
      iVar14 = (int)*(short *)(param_1 + 0x24);
      if (0 < iVar17 << 0x10) {
        iVar14 = (short)local_70 + iVar14;
      }
      sVar12 = (*pcVar19)(param_1 + iVar14,(int)sVar12);
    }
    iVar17 = (int)*(short *)(param_1 + 0x2e);
    sVar13 = *(short *)(param_1 + 0x6a);
    if (iVar17 != 0) {
      if (iVar17 < 1) {
        pcVar19 = *(code **)(param_1 + 0x30);
      }
      else {
        iVar14 = iVar17 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
        local_60 = *(undefined4 *)(iVar14 + -8);
        pcVar19 = *(code **)(iVar14 + -4);
        local_5c = pcVar19;
      }
      iVar14 = (int)*(short *)(param_1 + 0x2c);
      if (0 < iVar17 << 0x10) {
        iVar14 = (short)local_60 + iVar14;
      }
      sVar13 = (*pcVar19)(param_1 + iVar14,(int)sVar13);
    }
    iVar17 = FUN_800224d0(g_GameStatePtr,(int)sVar12,(int)sVar13,8,0x100b,0,param_1);
    if (iVar17 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar14 = *(int *)(iVar17 + 0x114);
    if (*(int *)(param_1 + 0x58) == 0x8000) {
      iVar14 = iVar14 << 1;
    }
    FUN_8001a448(iVar17,&local_d8);
    iVar16 = *(int *)(param_1 + 0x58);
    if (iVar16 == 0) {
      trap(0x1c00);
    }
    if ((iVar16 == -1) && ((int)local_d8 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    local_d8 = (short)(((int)local_d8 << 0x10) / iVar16);
    iVar16 = *(int *)(param_1 + 0x58);
    if (iVar16 == 0) {
      trap(0x1c00);
    }
    if ((iVar16 == -1) && ((int)local_d4 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    local_d4 = (short)(((int)local_d4 << 0x10) / iVar16);
    iVar16 = *(int *)(param_1 + 0x5c);
    if (iVar16 == 0) {
      trap(0x1c00);
    }
    if ((iVar16 == -1) && ((int)local_d6 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    local_d6 = (short)(((int)local_d6 << 0x10) / iVar16);
    iVar16 = *(int *)(param_1 + 0x5c);
    if (iVar16 == 0) {
      trap(0x1c00);
    }
    if ((iVar16 == -1) && ((int)local_d2 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    local_d2 = (short)(((int)local_d2 << 0x10) / iVar16);
    if ((0 < *(int *)(param_1 + 0x110) - iVar14) &&
       ((int)*(short *)(param_1 + 0x6a) - (int)local_d6 < 0xd - (iVar14 >> 0x10))) {
      iVar14 = (int)*(short *)(param_1 + 0x68);
      if (((local_d8 <= iVar14) && (iVar14 <= local_d4)) ||
         (((int)local_d8 <= iVar14 + sVar10 && (iVar14 + sVar10 <= (int)local_d4)))) {
        sVar12 = *(short *)(param_1 + 0x68);
        if ((sVar12 < local_d8) || (local_d4 < sVar12)) {
          *(short *)(param_1 + 0x68) = sVar12 + sVar10;
        }
        iVar14 = *(int *)(param_1 + 0x110);
        *(int *)(param_1 + 300) = iVar17;
        *(short *)(param_1 + 0x6a) = local_d6 + -1;
        if (*(int *)(param_1 + 0x58) == 0x8000) {
          iVar14 = iVar14 >> 1;
        }
        iVar16 = (int)*(short *)(iVar17 + 10);
        if (iVar16 != 0) {
          if (iVar16 < 1) {
            pcVar19 = *(code **)(iVar17 + 0xc);
          }
          else {
            iVar15 = iVar16 * 8 + *(int *)(iVar17 + *(short *)(iVar17 + 0xc));
            local_48 = *(undefined4 *)(iVar15 + -8);
            pcVar19 = *(code **)(iVar15 + -4);
            local_44 = pcVar19;
          }
          iVar15 = (int)*(short *)(iVar17 + 8);
          if (0 < iVar16 << 0x10) {
            iVar15 = (short)local_48 + iVar15;
          }
          (*pcVar19)(iVar17 + iVar15,0x1004,iVar14,param_1);
        }
        iVar17 = *(int *)(param_1 + 300);
        iVar14 = (int)*(short *)(iVar17 + 0x26);
        uVar18 = (uint)*(ushort *)(iVar17 + 0x68);
        if (iVar14 != 0) {
          if (iVar14 < 1) {
            pcVar19 = *(code **)(iVar17 + 0x28);
          }
          else {
            iVar16 = iVar14 * 8 + *(int *)(iVar17 + *(short *)(iVar17 + 0x28));
            local_38 = *(undefined4 *)(iVar16 + -8);
            pcVar19 = *(code **)(iVar16 + -4);
            local_34 = pcVar19;
          }
          iVar16 = (int)*(short *)(iVar17 + 0x24);
          if (0 < iVar14 << 0x10) {
            iVar16 = (short)local_38 + iVar16;
          }
          uVar18 = (*pcVar19)(iVar17 + iVar16,(int)(short)*(ushort *)(iVar17 + 0x68));
        }
        iVar17 = *(int *)(param_1 + 0x58);
        if (iVar17 == 0) {
          trap(0x1c00);
        }
        if ((iVar17 == -1) && (uVar18 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar14 = *(int *)(param_1 + 300);
        *(short *)(param_1 + 0x130) =
             *(short *)(param_1 + 0x68) - (short)((int)(uVar18 << 0x10) / iVar17);
        iVar17 = (int)*(short *)(iVar14 + 0x2e);
        uVar18 = (uint)*(ushort *)(iVar14 + 0x6a);
        if (iVar17 != 0) {
          if (iVar17 < 1) {
            pcVar19 = *(code **)(iVar14 + 0x30);
          }
          else {
            iVar16 = iVar17 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x30));
            local_28 = *(undefined4 *)(iVar16 + -8);
            pcVar19 = *(code **)(iVar16 + -4);
            local_24 = pcVar19;
          }
          iVar16 = (int)*(short *)(iVar14 + 0x2c);
          if (0 < iVar17 << 0x10) {
            iVar16 = (short)local_28 + iVar16;
          }
          uVar18 = (*pcVar19)(iVar14 + iVar16,(int)(short)*(ushort *)(iVar14 + 0x6a));
        }
        iVar17 = *(int *)(param_1 + 0x5c);
        if (iVar17 == 0) {
          trap(0x1c00);
        }
        if ((iVar17 == -1) && (uVar18 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar2 = true;
        *(short *)(param_1 + 0x132) =
             *(short *)(param_1 + 0x6a) - (short)((int)(uVar18 << 0x10) / iVar17);
      }
    }
  }
  if (!bVar2) {
    if (*(int *)(param_1 + 0x110) < 1) {
      return;
    }
    iVar17 = 0x10;
    if (*(char *)(param_1 + 0x74) != '\0') {
      iVar17 = -0x10;
    }
    bVar6 = EntityApplyMovementCallbacks
                      (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar17) * 0x10000) >> 0x10
                       ,(int)*(short *)(param_1 + 0x6a));
    bVar7 = EntityApplyMovementCallbacks
                      (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar17) * 0x10000) >> 0x10
                       ,(int)((*(ushort *)(param_1 + 0x6a) + 0x10) * 0x10000) >> 0x10);
    bVar8 = EntityApplyMovementCallbacks
                      (param_1,(int)(((uint)*(ushort *)(param_1 + 0x68) + iVar17) * 0x10000) >> 0x10
                       ,(int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
    bVar2 = false;
    if (((((bVar7 != 0 && bVar7 < 0x3c) || (bVar7 == 0x65)) && (bVar6 == 0 || 0x3b < bVar6)) &&
        (bVar6 != 0x65)) ||
       (((bVar6 != 0 && bVar6 < 0x3c || (bVar6 == 0x65)) &&
        ((bVar8 == 0 || 0x3b < bVar8 && (bVar8 != 0x65)))))) {
      bVar2 = true;
    }
    if (!bVar2) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(param_1 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) != 0)) {
    FUN_8005b2d4(param_1,1);
    if (*(char *)(param_1 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4(param_1,1);
    *(undefined1 *)(param_1 + 0x74) = 0;
    if (*(char *)(param_1 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) {
    if (*(char *)(param_1 + 0x135) == '\0') {
      FUN_8005b2d4(param_1,0);
      EntitySetState(param_1,null_FFFF0000h_800a5eec,PTR_PlayerState_StandingIdle_800a5ef0);
      return;
    }
    FUN_8005b2d4(param_1,1);
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4(param_1,1);
  *(undefined1 *)(param_1 + 0x74) = 1;
  if (*(char *)(param_1 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80065174(void)

{
  bool bVar1;
  bool bVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  ushort uVar7;
  short sVar8;
  undefined2 uVar9;
  short sVar10;
  short sVar11;
  int in_v0;
  int iVar12;
  int iVar13;
  undefined4 in_v1;
  int iVar14;
  int iVar15;
  uint uVar16;
  int in_a3;
  int unaff_s0;
  int unaff_s1;
  short unaff_s2;
  code *pcVar17;
  char unaff_s4;
  short unaff_s6;
  char cStack00000020;
  char cStack00000021;
  char cStack00000022;
  char cStack00000023;
  char cStack00000024;
  byte bStack00000025;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000048;
  code *in_stack_0000004c;
  undefined4 in_stack_00000060;
  code *in_stack_00000064;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  if (in_v0 != 0) {
    *(undefined4 *)(unaff_s0 + 0x10c) = in_v1;
  }
  *(undefined4 *)(unaff_s0 + 0x114) = 0;
  in_a3 = in_a3 + *(int *)(unaff_s0 + 0x10c);
  if (*(char *)(unaff_s0 + 0x170) != '\0') {
    in_a3 = in_a3 + *(short *)(unaff_s0 + 0x160) * 0x10000;
  }
  *(short *)(unaff_s0 + 0x68) = (short)((uint)in_a3 >> 0x10);
  *(short *)(unaff_s0 + 0x6c) = (short)in_a3;
  cStack00000020 = EntityApplyMovementCallbacks();
  if (((((byte)(cStack00000020 + 0x4bU) < 3) || (cStack00000020 == -0x37)) ||
      (cStack00000020 == -0x35)) || (bVar1 = false, (byte)(cStack00000020 + 0x23U) < 3)) {
    if (*(char *)(unaff_s0 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cStack00000020 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400();
    return;
  }
  cStack00000021 = EntityApplyMovementCallbacks();
  if ((((byte)(cStack00000021 + 0x4bU) < 3) || (cStack00000021 == -0x37)) ||
     ((cStack00000021 == -0x35 || (bVar1 = false, (byte)(cStack00000021 + 0x23U) < 3)))) {
    if (*(char *)(unaff_s0 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cStack00000021 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400();
    return;
  }
  cStack00000022 = EntityApplyMovementCallbacks();
  if ((((byte)(cStack00000022 + 0x4bU) < 3) || (cStack00000022 == -0x37)) ||
     ((cStack00000022 == -0x35 || (bVar1 = false, (byte)(cStack00000022 + 0x23U) < 3)))) {
    if (*(char *)(unaff_s0 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cStack00000022 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerCallback_80065400();
    return;
  }
  cStack00000023 = EntityApplyMovementCallbacks();
  if (((((byte)(cStack00000023 + 0x4bU) < 3) || (cStack00000023 == -0x37)) ||
      (cStack00000023 == -0x35)) || (bVar1 = false, (byte)(cStack00000023 + 0x23U) < 3)) {
    if (*(char *)(unaff_s0 + 0x128) == '\0') {
      bVar1 = true;
    }
    else {
      cStack00000023 = 'e';
      bVar1 = false;
    }
  }
  if (bVar1) {
    PlayerProcessBounceCollision();
    return;
  }
  if (((cStack00000020 == 'e') || (cStack00000021 == 'e')) ||
     ((cStack00000022 == 'e' || (cStack00000023 == 'e')))) {
    if (*(int *)(unaff_s0 + 0x10c) < 1) {
      if (*(int *)(unaff_s0 + 0x10c) < 0) {
        *(undefined4 *)(unaff_s0 + 0x10c) = 0;
        uVar9 = FUN_8005a028();
        *(undefined2 *)(unaff_s0 + 0x68) = uVar9;
        *(undefined2 *)(unaff_s0 + 0x6c) = 0;
      }
    }
    else {
      iVar15 = (int)*(short *)(unaff_s0 + 0x26);
      uVar16 = (uint)*(ushort *)(unaff_s0 + 0x68);
      *(undefined4 *)(unaff_s0 + 0x10c) = 0;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          unaff_s2 = (short)*(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
        }
        iVar12 = (int)*(short *)(unaff_s0 + 0x24);
        if (0 < iVar15 << 0x10) {
          iVar12 = unaff_s2 + iVar12;
        }
        uVar16 = (*pcVar17)(unaff_s0 + iVar12,(int)(short)*(ushort *)(unaff_s0 + 0x68));
      }
      iVar12 = *(int *)(unaff_s0 + 0x58);
      iVar15 = (uVar16 & 0xfffffff0) << 0x10;
      if (iVar12 == 0) {
        trap(0x1c00);
      }
      if ((iVar12 == -1) && (iVar15 == -0x80000000)) {
        trap(0x1800);
      }
      *(undefined2 *)(unaff_s0 + 0x6c) = 0;
      *(short *)(unaff_s0 + 0x68) = (short)(iVar15 / iVar12) + -1;
    }
  }
  iVar15 = *(int *)(unaff_s0 + 0x118);
  if (iVar15 != 0) {
    *(undefined4 *)(unaff_s0 + 0x118) = 0;
    *(int *)(unaff_s0 + 0x110) = *(int *)(unaff_s0 + 0x110) + iVar15;
    PlayerCallback_800655d4();
    return;
  }
  if (*(char *)(unaff_s0 + 0x170) == '\0') {
    iVar15 = *(int *)(unaff_s0 + 0x110) + 0x5000;
    *(int *)(unaff_s0 + 0x110) = iVar15;
    if (0x80000 < iVar15) {
      *(undefined4 *)(unaff_s0 + 0x110) = 0x80000;
    }
    PlayerCallback_800655d4();
    return;
  }
  iVar15 = *(int *)(unaff_s0 + 0x110);
  iVar12 = unaff_s1 + *(short *)(unaff_s0 + 0x162) * 0x10000;
  if (iVar15 < 1) {
    iVar12 = iVar12 + iVar15;
    iVar15 = *(int *)(unaff_s0 + 0x110);
  }
  else {
    iVar12 = iVar12 + 0xc000;
  }
  *(short *)(unaff_s0 + 0x6a) = (short)((uint)iVar12 >> 0x10);
  *(short *)(unaff_s0 + 0x6e) = (short)iVar12;
  if (iVar15 < 0) {
    cStack00000024 = EntityApplyMovementCallbacks();
    if (((((byte)(cStack00000024 + 0x4bU) < 3) || (cStack00000024 == -0x37)) ||
        (cStack00000024 == -0x35)) || (bVar1 = false, (byte)(cStack00000024 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        cStack00000024 = 'e';
        bVar1 = false;
      }
    }
    if (bVar1) {
      iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
      uVar7 = *(short *)(unaff_s0 + 0x6a) - 0x40;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x30);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
        }
        iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
        if (0 < iVar15 << 0x10) {
          iVar12 = unaff_s6 + iVar12;
        }
        uVar7 = (*pcVar17)(unaff_s0 + iVar12,(int)(short)uVar7);
      }
      if (*(int *)(unaff_s0 + 0x5c) == 0) {
        trap(0x1c00);
      }
      if ((*(int *)(unaff_s0 + 0x5c) == -1) && ((uVar7 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      PlayerCallback_800659cc();
      return;
    }
    if (cStack00000024 == 'e') {
      *(undefined4 *)(unaff_s0 + 0x110) = 0;
      *(undefined1 *)(unaff_s0 + 0x11c) = 0;
      *(undefined1 *)(unaff_s0 + 0x11e) = 0;
      *(undefined1 *)(unaff_s0 + 0x11f) = 0;
      *(undefined4 *)(unaff_s0 + 0x120) = 0;
      FUN_8001c4a4();
      iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
      uVar7 = *(short *)(unaff_s0 + 0x6a) - 0x40;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x30);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
          in_stack_00000048 = *(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
          in_stack_0000004c = pcVar17;
        }
        iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
        if (0 < iVar15 << 0x10) {
          iVar12 = (short)in_stack_00000048 + iVar12;
        }
        uVar7 = (*pcVar17)(unaff_s0 + iVar12,(int)(short)uVar7);
      }
      iVar15 = *(int *)(unaff_s0 + 0x5c);
      if (iVar15 == 0) {
        trap(0x1c00);
      }
      if ((iVar15 == -1) && ((uVar7 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x6a) = (short)((int)((uint)(uVar7 | 0xf) << 0x10) / iVar15) + 0x40;
      PlayerCallback_800660bc();
      return;
    }
  }
  else if (0 < iVar15) {
    sVar8 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar8 = -0xc;
    }
    bStack00000025 = EntityApplyMovementCallbacks();
    if (((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
        (bStack00000025 == 0xcb)) || (iVar15 = 0, (byte)(bStack00000025 + 0x23) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        iVar15 = 1;
      }
      else {
        bStack00000025 = 0x65;
        iVar15 = 0;
      }
    }
    if (bStack00000025 == 0x5b) {
PlayerCallback_8006597c:
      if (*(short *)(unaff_s0 + 0x144) == 0) {
        PlayerCallback_80066808(iVar15,null_FFFF0000h_800a5d98,PTR_Callback_80069ef4_800a5d9c);
        return;
      }
      PlayerCallback_80066808(iVar15,null_FFFF0000h_800a5d78,PTR_Callback_8006c95c_800a5d7c);
      return;
    }
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    iVar12 = (int)*(short *)(g_GameStatePtr + 0x4a) << 0x10;
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && (iVar12 == -0x80000000)) {
      trap(0x1800);
    }
    if ((short)(iVar12 / iVar14) < *(short *)(unaff_s0 + 0x6a)) goto PlayerCallback_8006597c;
    if (iVar15 != 0) {
      sVar8 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      PlayerProcessBounceCollision();
      PlayerCallback_800660c8();
      return;
    }
    if (bStack00000025 == 0x7d) {
      cVar3 = EntityApplyMovementCallbacks();
      if (cVar3 == '}') {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000060 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000064 = pcVar17;
          }
          iVar12 = (int)*(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            iVar12 = (short)in_stack_00000060 + iVar12;
          }
          (*pcVar17)(unaff_s0 + iVar12,(int)*(short *)(unaff_s0 + 0x68));
        }
        PlayerCallback_8006606c();
        return;
      }
      goto code_r0x800660c8;
    }
    bVar1 = false;
    if (bStack00000025 == 0x65) {
      sVar8 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      PlayerCallback_80065bc0();
      return;
    }
    if ((bStack00000025 != 0 && bStack00000025 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (bVar1) {
      PlayerCallback_80065bb4();
      return;
    }
    bVar1 = false;
    bVar4 = EntityApplyMovementCallbacks();
    if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (bVar1) {
      unaff_s4 = '\x01';
      uVar9 = PlayerApplyPositionWithCollision();
      *(undefined2 *)(unaff_s0 + 0x6a) = uVar9;
    }
    if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
    FUN_80059e3c();
    bStack00000025 = EntityApplyMovementCallbacks();
    if ((((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == -0x37)) ||
         (bStack00000025 == -0x35)) || ((byte)(bStack00000025 + 0x23) < 3)) &&
       (*(char *)(unaff_s0 + 0x128) != '\0')) {
      bStack00000025 = 'e';
    }
    bVar1 = false;
    if (bStack00000025 != 'e') {
      bStack00000025 = EntityApplyMovementCallbacks();
      if ((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
         ((bStack00000025 == 0xcb || (bVar2 = false, (byte)(bStack00000025 + 0x23) < 3)))) {
        if (*(char *)(unaff_s0 + 0x128) == '\0') {
          bVar2 = true;
        }
        else {
          bStack00000025 = 0x65;
          bVar2 = false;
        }
      }
      if (bVar2) {
        sVar8 = FUN_80059e3c();
        *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
        PlayerProcessBounceCollision();
        PlayerCallback_80065e88();
        return;
      }
      bVar2 = false;
      if (bStack00000025 == 0x65) {
        *(short *)(unaff_s0 + 0x68) = *(short *)(unaff_s0 + 0x68) + sVar8;
        sVar8 = FUN_80059e3c();
        sVar8 = sVar8 + -1;
      }
      else {
        if ((bStack00000025 != 0 && bStack00000025 < 0x3c) &&
           (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
          bVar2 = true;
        }
        if (bVar2) {
          sVar10 = *(short *)(unaff_s0 + 0x68);
        }
        else {
          bVar2 = false;
          bVar4 = EntityApplyMovementCallbacks();
          if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
            bVar2 = true;
          }
          if (!bVar2) goto PlayerCallback_80065e84;
          sVar10 = *(short *)(unaff_s0 + 0x68);
        }
        *(short *)(unaff_s0 + 0x68) = sVar10 + sVar8;
        sVar8 = PlayerApplyPositionWithCollision();
      }
      bVar1 = true;
      *(short *)(unaff_s0 + 0x6a) = sVar8;
    }
PlayerCallback_80065e84:
    if (bVar1) goto PlayerCallback_800666cc;
    cVar3 = EntityApplyMovementCallbacks();
    unaff_s4 = '\0';
    if (cVar3 == '}') {
      cVar3 = EntityApplyMovementCallbacks();
      if (cVar3 == '}') {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        uVar7 = *(short *)(unaff_s0 + 0x68) + 0x10;
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000070 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000074 = pcVar17;
          }
          sVar8 = *(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            PlayerCallback_80066040();
            return;
          }
PlayerCallback_8006604c:
          uVar7 = (*pcVar17)(unaff_s0 + sVar8,(int)(short)uVar7);
        }
PlayerCallback_80066064:
        iVar15 = *(int *)(unaff_s0 + 0x58);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && ((uVar7 & 0xfff0) == 0x8000)) {
          trap(0x1800);
        }
        *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar7 & 0xfff0) << 0x10) / iVar15) + 8;
        EntitySetState();
      }
    }
    else {
      cVar3 = EntityApplyMovementCallbacks();
      if ((cVar3 == '}') && (cVar3 = EntityApplyMovementCallbacks(), cVar3 == '}')) {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        uVar7 = *(short *)(unaff_s0 + 0x68) - 0x10;
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000080 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000084 = pcVar17;
          }
          sVar8 = *(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            PlayerCallback_80066050();
            return;
          }
          goto PlayerCallback_8006604c;
        }
        goto PlayerCallback_80066064;
      }
    }
  }
code_r0x800660c8:
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar8 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar8 = -0xc;
  }
  iVar15 = FUN_8001b594();
  bVar1 = false;
  if (iVar15 == 0) {
    iVar15 = (int)*(short *)(unaff_s0 + 0x26);
    sVar10 = *(short *)(unaff_s0 + 0x68) + sVar8;
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_00000094 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_00000090 + iVar12;
      }
      sVar10 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar10);
    }
    iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar11 = *(short *)(unaff_s0 + 0x6a);
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_000000a4 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_000000a0 + iVar12;
      }
      sVar11 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar11);
    }
    iVar15 = FUN_800224d0(g_GameStatePtr,(int)sVar10,(int)sVar11,8);
    if (iVar15 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar12 = *(int *)(iVar15 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar12 = iVar12 << 1;
    }
    FUN_8001a448(iVar15,&stack0x00000028);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar14);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar12) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar12 >> 0x10))) {
      iVar12 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar12) && (iVar12 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar12 + sVar8 && (iVar12 + sVar8 <= (int)sStack0000002c)))) {
        sVar10 = *(short *)(unaff_s0 + 0x68);
        if ((sVar10 < sStack00000028) || (sStack0000002c < sVar10)) {
          *(short *)(unaff_s0 + 0x68) = sVar10 + sVar8;
        }
        iVar12 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar15;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar12 = iVar12 >> 1;
        }
        iVar14 = (int)*(short *)(iVar15 + 10);
        if (iVar14 != 0) {
          if (iVar14 < 1) {
            pcVar17 = *(code **)(iVar15 + 0xc);
          }
          else {
            iVar13 = iVar14 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar13 + -8);
            pcVar17 = *(code **)(iVar13 + -4);
            in_stack_000000bc = pcVar17;
          }
          iVar13 = (int)*(short *)(iVar15 + 8);
          if (0 < iVar14 << 0x10) {
            iVar13 = (short)in_stack_000000b8 + iVar13;
          }
          (*pcVar17)(iVar15 + iVar13,0x1004,iVar12);
        }
        iVar15 = *(int *)(unaff_s0 + 300);
        iVar12 = (int)*(short *)(iVar15 + 0x26);
        uVar16 = (uint)*(ushort *)(iVar15 + 0x68);
        if (iVar12 != 0) {
          if (iVar12 < 1) {
            pcVar17 = *(code **)(iVar15 + 0x28);
          }
          else {
            iVar14 = iVar12 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000cc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar15 + 0x24);
          if (0 < iVar12 << 0x10) {
            iVar14 = (short)in_stack_000000c8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar15 + iVar14,(int)(short)*(ushort *)(iVar15 + 0x68));
        }
        iVar15 = *(int *)(unaff_s0 + 0x58);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar12 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar16 << 0x10) / iVar15);
        iVar15 = (int)*(short *)(iVar12 + 0x2e);
        uVar16 = (uint)*(ushort *)(iVar12 + 0x6a);
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(iVar12 + 0x30);
          }
          else {
            iVar14 = iVar15 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000dc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar12 + 0x2c);
          if (0 < iVar15 << 0x10) {
            iVar14 = (short)in_stack_000000d8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar12 + iVar14,(int)(short)*(ushort *)(iVar12 + 0x6a));
        }
        iVar15 = *(int *)(unaff_s0 + 0x5c);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar16 << 0x10) / iVar15);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar6 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar5 != 0 && bVar5 < 0x3c) || (bVar5 == 0x65)) && (bVar4 == 0 || 0x3b < bVar4)) &&
        (bVar4 != 0x65)) ||
       (((bVar4 != 0 && bVar4 < 0x3c || (bVar4 == 0x65)) &&
        ((bVar6 == 0 || 0x3b < bVar6 && (bVar6 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) != '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80065400(void)

{
  PlayerProcessBounceCollision();
  return;
}



void PlayerCallback_800655d4(void)

{
  bool bVar1;
  bool bVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  ushort uVar7;
  short sVar8;
  undefined2 uVar9;
  short sVar10;
  short sVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  int unaff_s0;
  undefined4 unaff_s1;
  char unaff_s4;
  short unaff_s6;
  code *pcVar17;
  char cStack00000024;
  byte bStack00000025;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000048;
  code *in_stack_0000004c;
  undefined4 in_stack_00000060;
  code *in_stack_00000064;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  *(short *)(unaff_s0 + 0x6a) = (short)((uint)unaff_s1 >> 0x10);
  *(short *)(unaff_s0 + 0x6e) = (short)unaff_s1;
  if (*(int *)(unaff_s0 + 0x110) < 0) {
    cStack00000024 = EntityApplyMovementCallbacks();
    if (((((byte)(cStack00000024 + 0x4bU) < 3) || (cStack00000024 == -0x37)) ||
        (cStack00000024 == -0x35)) || (bVar1 = false, (byte)(cStack00000024 + 0x23U) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        cStack00000024 = 'e';
        bVar1 = false;
      }
    }
    if (bVar1) {
      iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
      uVar7 = *(short *)(unaff_s0 + 0x6a) - 0x40;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x30);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
          unaff_s6 = (short)*(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
        }
        iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
        if (0 < iVar15 << 0x10) {
          iVar12 = unaff_s6 + iVar12;
        }
        uVar7 = (*pcVar17)(unaff_s0 + iVar12,(int)(short)uVar7);
      }
      if (*(int *)(unaff_s0 + 0x5c) == 0) {
        trap(0x1c00);
      }
      if ((*(int *)(unaff_s0 + 0x5c) == -1) && ((uVar7 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      PlayerCallback_800659cc();
      return;
    }
    if (cStack00000024 == 'e') {
      *(undefined4 *)(unaff_s0 + 0x110) = 0;
      *(undefined1 *)(unaff_s0 + 0x11c) = 0;
      *(undefined1 *)(unaff_s0 + 0x11e) = 0;
      *(undefined1 *)(unaff_s0 + 0x11f) = 0;
      *(undefined4 *)(unaff_s0 + 0x120) = 0;
      FUN_8001c4a4();
      iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
      uVar7 = *(short *)(unaff_s0 + 0x6a) - 0x40;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x30);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
          in_stack_00000048 = *(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
          in_stack_0000004c = pcVar17;
        }
        iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
        if (0 < iVar15 << 0x10) {
          iVar12 = (short)in_stack_00000048 + iVar12;
        }
        uVar7 = (*pcVar17)(unaff_s0 + iVar12,(int)(short)uVar7);
      }
      iVar15 = *(int *)(unaff_s0 + 0x5c);
      if (iVar15 == 0) {
        trap(0x1c00);
      }
      if ((iVar15 == -1) && ((uVar7 | 0xf) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x6a) = (short)((int)((uint)(uVar7 | 0xf) << 0x10) / iVar15) + 0x40;
      PlayerCallback_800660bc();
      return;
    }
  }
  else if (0 < *(int *)(unaff_s0 + 0x110)) {
    sVar8 = 0xc;
    if (*(char *)(unaff_s0 + 0x74) != '\0') {
      sVar8 = -0xc;
    }
    bStack00000025 = EntityApplyMovementCallbacks();
    if (((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
        (bStack00000025 == 0xcb)) || (iVar15 = 0, (byte)(bStack00000025 + 0x23) < 3)) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        iVar15 = 1;
      }
      else {
        bStack00000025 = 0x65;
        iVar15 = 0;
      }
    }
    if (bStack00000025 == 0x5b) {
PlayerCallback_8006597c:
      if (*(short *)(unaff_s0 + 0x144) == 0) {
        PlayerCallback_80066808(iVar15,null_FFFF0000h_800a5d98,PTR_Callback_80069ef4_800a5d9c);
        return;
      }
      PlayerCallback_80066808(iVar15,null_FFFF0000h_800a5d78,PTR_Callback_8006c95c_800a5d7c);
      return;
    }
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    iVar12 = (int)*(short *)(g_GameStatePtr + 0x4a) << 0x10;
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && (iVar12 == -0x80000000)) {
      trap(0x1800);
    }
    if ((short)(iVar12 / iVar14) < *(short *)(unaff_s0 + 0x6a)) goto PlayerCallback_8006597c;
    if (iVar15 != 0) {
      sVar8 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      PlayerProcessBounceCollision();
      PlayerCallback_800660c8();
      return;
    }
    if (bStack00000025 == 0x7d) {
      cVar3 = EntityApplyMovementCallbacks();
      if (cVar3 == '}') {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000060 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000064 = pcVar17;
          }
          iVar12 = (int)*(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            iVar12 = (short)in_stack_00000060 + iVar12;
          }
          (*pcVar17)(unaff_s0 + iVar12,(int)*(short *)(unaff_s0 + 0x68));
        }
        PlayerCallback_8006606c();
        return;
      }
      goto code_r0x800660c8;
    }
    bVar1 = false;
    if (bStack00000025 == 0x65) {
      sVar8 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      PlayerCallback_80065bc0();
      return;
    }
    if ((bStack00000025 != 0 && bStack00000025 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (bVar1) {
      PlayerCallback_80065bb4();
      return;
    }
    bVar1 = false;
    bVar4 = EntityApplyMovementCallbacks();
    if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (bVar1) {
      unaff_s4 = '\x01';
      uVar9 = PlayerApplyPositionWithCollision();
      *(undefined2 *)(unaff_s0 + 0x6a) = uVar9;
    }
    if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
    FUN_80059e3c();
    bStack00000025 = EntityApplyMovementCallbacks();
    if ((((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == -0x37)) ||
         (bStack00000025 == -0x35)) || ((byte)(bStack00000025 + 0x23) < 3)) &&
       (*(char *)(unaff_s0 + 0x128) != '\0')) {
      bStack00000025 = 'e';
    }
    bVar1 = false;
    if (bStack00000025 != 'e') {
      bStack00000025 = EntityApplyMovementCallbacks();
      if ((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
         ((bStack00000025 == 0xcb || (bVar2 = false, (byte)(bStack00000025 + 0x23) < 3)))) {
        if (*(char *)(unaff_s0 + 0x128) == '\0') {
          bVar2 = true;
        }
        else {
          bStack00000025 = 0x65;
          bVar2 = false;
        }
      }
      if (bVar2) {
        sVar8 = FUN_80059e3c();
        *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
        PlayerProcessBounceCollision();
        PlayerCallback_80065e88();
        return;
      }
      bVar2 = false;
      if (bStack00000025 == 0x65) {
        *(short *)(unaff_s0 + 0x68) = *(short *)(unaff_s0 + 0x68) + sVar8;
        sVar8 = FUN_80059e3c();
        sVar8 = sVar8 + -1;
      }
      else {
        if ((bStack00000025 != 0 && bStack00000025 < 0x3c) &&
           (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
          bVar2 = true;
        }
        if (bVar2) {
          sVar10 = *(short *)(unaff_s0 + 0x68);
        }
        else {
          bVar2 = false;
          bVar4 = EntityApplyMovementCallbacks();
          if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
            bVar2 = true;
          }
          if (!bVar2) goto PlayerCallback_80065e84;
          sVar10 = *(short *)(unaff_s0 + 0x68);
        }
        *(short *)(unaff_s0 + 0x68) = sVar10 + sVar8;
        sVar8 = PlayerApplyPositionWithCollision();
      }
      bVar1 = true;
      *(short *)(unaff_s0 + 0x6a) = sVar8;
    }
PlayerCallback_80065e84:
    if (bVar1) goto PlayerCallback_800666cc;
    cVar3 = EntityApplyMovementCallbacks();
    unaff_s4 = '\0';
    if (cVar3 == '}') {
      cVar3 = EntityApplyMovementCallbacks();
      if (cVar3 == '}') {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        uVar7 = *(short *)(unaff_s0 + 0x68) + 0x10;
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000070 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000074 = pcVar17;
          }
          sVar8 = *(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            PlayerCallback_80066040();
            return;
          }
PlayerCallback_8006604c:
          uVar7 = (*pcVar17)(unaff_s0 + sVar8,(int)(short)uVar7);
        }
PlayerCallback_80066064:
        iVar15 = *(int *)(unaff_s0 + 0x58);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && ((uVar7 & 0xfff0) == 0x8000)) {
          trap(0x1800);
        }
        *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar7 & 0xfff0) << 0x10) / iVar15) + 8;
        EntitySetState();
      }
    }
    else {
      cVar3 = EntityApplyMovementCallbacks();
      if ((cVar3 == '}') && (cVar3 = EntityApplyMovementCallbacks(), cVar3 == '}')) {
        iVar15 = (int)*(short *)(unaff_s0 + 0x26);
        uVar7 = *(short *)(unaff_s0 + 0x68) - 0x10;
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(unaff_s0 + 0x28);
          }
          else {
            iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
            in_stack_00000080 = *(undefined4 *)(iVar12 + -8);
            pcVar17 = *(code **)(iVar12 + -4);
            in_stack_00000084 = pcVar17;
          }
          sVar8 = *(short *)(unaff_s0 + 0x24);
          if (0 < iVar15 << 0x10) {
            PlayerCallback_80066050();
            return;
          }
          goto PlayerCallback_8006604c;
        }
        goto PlayerCallback_80066064;
      }
    }
  }
code_r0x800660c8:
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar8 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar8 = -0xc;
  }
  iVar15 = FUN_8001b594();
  bVar1 = false;
  if (iVar15 == 0) {
    iVar15 = (int)*(short *)(unaff_s0 + 0x26);
    sVar10 = *(short *)(unaff_s0 + 0x68) + sVar8;
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_00000094 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_00000090 + iVar12;
      }
      sVar10 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar10);
    }
    iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar11 = *(short *)(unaff_s0 + 0x6a);
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_000000a4 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_000000a0 + iVar12;
      }
      sVar11 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar11);
    }
    iVar15 = FUN_800224d0(g_GameStatePtr,(int)sVar10,(int)sVar11,8);
    if (iVar15 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar12 = *(int *)(iVar15 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar12 = iVar12 << 1;
    }
    FUN_8001a448(iVar15,&stack0x00000028);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar14);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar12) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar12 >> 0x10))) {
      iVar12 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar12) && (iVar12 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar12 + sVar8 && (iVar12 + sVar8 <= (int)sStack0000002c)))) {
        sVar10 = *(short *)(unaff_s0 + 0x68);
        if ((sVar10 < sStack00000028) || (sStack0000002c < sVar10)) {
          *(short *)(unaff_s0 + 0x68) = sVar10 + sVar8;
        }
        iVar12 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar15;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar12 = iVar12 >> 1;
        }
        iVar14 = (int)*(short *)(iVar15 + 10);
        if (iVar14 != 0) {
          if (iVar14 < 1) {
            pcVar17 = *(code **)(iVar15 + 0xc);
          }
          else {
            iVar13 = iVar14 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar13 + -8);
            pcVar17 = *(code **)(iVar13 + -4);
            in_stack_000000bc = pcVar17;
          }
          iVar13 = (int)*(short *)(iVar15 + 8);
          if (0 < iVar14 << 0x10) {
            iVar13 = (short)in_stack_000000b8 + iVar13;
          }
          (*pcVar17)(iVar15 + iVar13,0x1004,iVar12);
        }
        iVar15 = *(int *)(unaff_s0 + 300);
        iVar12 = (int)*(short *)(iVar15 + 0x26);
        uVar16 = (uint)*(ushort *)(iVar15 + 0x68);
        if (iVar12 != 0) {
          if (iVar12 < 1) {
            pcVar17 = *(code **)(iVar15 + 0x28);
          }
          else {
            iVar14 = iVar12 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000cc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar15 + 0x24);
          if (0 < iVar12 << 0x10) {
            iVar14 = (short)in_stack_000000c8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar15 + iVar14,(int)(short)*(ushort *)(iVar15 + 0x68));
        }
        iVar15 = *(int *)(unaff_s0 + 0x58);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar12 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar16 << 0x10) / iVar15);
        iVar15 = (int)*(short *)(iVar12 + 0x2e);
        uVar16 = (uint)*(ushort *)(iVar12 + 0x6a);
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(iVar12 + 0x30);
          }
          else {
            iVar14 = iVar15 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000dc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar12 + 0x2c);
          if (0 < iVar15 << 0x10) {
            iVar14 = (short)in_stack_000000d8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar12 + iVar14,(int)(short)*(ushort *)(iVar12 + 0x6a));
        }
        iVar15 = *(int *)(unaff_s0 + 0x5c);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar16 << 0x10) / iVar15);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar6 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar5 != 0 && bVar5 < 0x3c) || (bVar5 == 0x65)) && (bVar4 == 0 || 0x3b < bVar4)) &&
        (bVar4 != 0x65)) ||
       (((bVar4 != 0 && bVar4 < 0x3c || (bVar4 == 0x65)) &&
        ((bVar6 == 0 || 0x3b < bVar6 && (bVar6 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) != '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_8006597c(undefined4 param_1)

{
  int unaff_s0;
  
  if (*(short *)(unaff_s0 + 0x144) == 0) {
    PlayerCallback_80066808(param_1,null_FFFF0000h_800a5d98,PTR_Callback_80069ef4_800a5d9c);
    return;
  }
  PlayerCallback_80066808(param_1,null_FFFF0000h_800a5d78,PTR_Callback_8006c95c_800a5d7c);
  return;
}



void PlayerCallback_800659cc(void)

{
  undefined2 in_v0;
  int unaff_s0;
  
  *(undefined2 *)(unaff_s0 + 0x6a) = in_v0;
  PlayerProcessBounceCollision();
  PlayerCallback_800660c8();
  return;
}



void PlayerCallback_80065bb4(void)

{
  bool bVar1;
  bool bVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  undefined2 uVar7;
  short sVar8;
  ushort uVar9;
  short sVar10;
  short sVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  code *pcVar17;
  int unaff_s0;
  short unaff_s3;
  char unaff_s4;
  byte bStack00000025;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  uVar7 = PlayerApplyPositionWithCollision();
  *(undefined2 *)(unaff_s0 + 0x6a) = uVar7;
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  FUN_80059e3c();
  bStack00000025 = EntityApplyMovementCallbacks();
  if ((((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == -0x37)) ||
       (bStack00000025 == -0x35)) || ((byte)(bStack00000025 + 0x23) < 3)) &&
     (*(char *)(unaff_s0 + 0x128) != '\0')) {
    bStack00000025 = 'e';
  }
  bVar2 = false;
  if (bStack00000025 != 'e') {
    bStack00000025 = EntityApplyMovementCallbacks();
    if ((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
       ((bStack00000025 == 0xcb || (bVar1 = false, (byte)(bStack00000025 + 0x23) < 3)))) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bStack00000025 = 0x65;
        bVar1 = false;
      }
    }
    if (bVar1) {
      sVar8 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      PlayerProcessBounceCollision();
      PlayerCallback_80065e88();
      return;
    }
    bVar1 = false;
    if (bStack00000025 == 0x65) {
      *(short *)(unaff_s0 + 0x68) = *(short *)(unaff_s0 + 0x68) + unaff_s3;
      sVar8 = FUN_80059e3c();
      sVar8 = sVar8 + -1;
    }
    else {
      if ((bStack00000025 != 0 && bStack00000025 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0'))
      {
        bVar1 = true;
      }
      if (bVar1) {
        sVar8 = *(short *)(unaff_s0 + 0x68);
      }
      else {
        bVar1 = false;
        bVar4 = EntityApplyMovementCallbacks();
        if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
          bVar1 = true;
        }
        if (!bVar1) goto PlayerCallback_80065e84;
        sVar8 = *(short *)(unaff_s0 + 0x68);
      }
      *(short *)(unaff_s0 + 0x68) = sVar8 + unaff_s3;
      sVar8 = PlayerApplyPositionWithCollision();
    }
    bVar2 = true;
    *(short *)(unaff_s0 + 0x6a) = sVar8;
  }
PlayerCallback_80065e84:
  if (bVar2) goto PlayerCallback_800666cc;
  cVar3 = EntityApplyMovementCallbacks();
  if (cVar3 == '}') {
    cVar3 = EntityApplyMovementCallbacks();
    if (cVar3 == '}') {
      iVar15 = (int)*(short *)(unaff_s0 + 0x26);
      uVar9 = *(short *)(unaff_s0 + 0x68) + 0x10;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000070 = *(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
          in_stack_00000074 = pcVar17;
        }
        sVar8 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar15 << 0x10) {
          PlayerCallback_80066040();
          return;
        }
PlayerCallback_8006604c:
        uVar9 = (*pcVar17)(unaff_s0 + sVar8,(int)(short)uVar9);
      }
PlayerCallback_80066064:
      iVar15 = *(int *)(unaff_s0 + 0x58);
      if (iVar15 == 0) {
        trap(0x1c00);
      }
      if ((iVar15 == -1) && ((uVar9 & 0xfff0) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar9 & 0xfff0) << 0x10) / iVar15) + 8;
      EntitySetState();
    }
  }
  else {
    cVar3 = EntityApplyMovementCallbacks();
    if ((cVar3 == '}') && (cVar3 = EntityApplyMovementCallbacks(), cVar3 == '}')) {
      iVar15 = (int)*(short *)(unaff_s0 + 0x26);
      uVar9 = *(short *)(unaff_s0 + 0x68) - 0x10;
      if (iVar15 != 0) {
        if (iVar15 < 1) {
          pcVar17 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000080 = *(undefined4 *)(iVar12 + -8);
          pcVar17 = *(code **)(iVar12 + -4);
          in_stack_00000084 = pcVar17;
        }
        sVar8 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar15 << 0x10) {
          PlayerCallback_80066050();
          return;
        }
        goto PlayerCallback_8006604c;
      }
      goto PlayerCallback_80066064;
    }
  }
  sVar8 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar8 = -0xc;
  }
  iVar15 = FUN_8001b594();
  bVar2 = false;
  if (iVar15 == 0) {
    iVar15 = (int)*(short *)(unaff_s0 + 0x26);
    sVar10 = *(short *)(unaff_s0 + 0x68) + sVar8;
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_00000094 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_00000090 + iVar12;
      }
      sVar10 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar10);
    }
    iVar15 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar11 = *(short *)(unaff_s0 + 0x6a);
    if (iVar15 != 0) {
      if (iVar15 < 1) {
        pcVar17 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar12 = iVar15 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar12 + -8);
        pcVar17 = *(code **)(iVar12 + -4);
        in_stack_000000a4 = pcVar17;
      }
      iVar12 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar15 << 0x10) {
        iVar12 = (short)in_stack_000000a0 + iVar12;
      }
      sVar11 = (*pcVar17)(unaff_s0 + iVar12,(int)sVar11);
    }
    iVar15 = FUN_800224d0(g_GameStatePtr,(int)sVar10,(int)sVar11,8);
    if (iVar15 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar12 = *(int *)(iVar15 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar12 = iVar12 << 1;
    }
    FUN_8001a448(iVar15,&stack0x00000028);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x58);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar14);
    iVar14 = *(int *)(unaff_s0 + 0x5c);
    if (iVar14 == 0) {
      trap(0x1c00);
    }
    if ((iVar14 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar14);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar12) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar12 >> 0x10))) {
      iVar12 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar12) && (iVar12 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar12 + sVar8 && (iVar12 + sVar8 <= (int)sStack0000002c)))) {
        sVar10 = *(short *)(unaff_s0 + 0x68);
        if ((sVar10 < sStack00000028) || (sStack0000002c < sVar10)) {
          *(short *)(unaff_s0 + 0x68) = sVar10 + sVar8;
        }
        iVar12 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar15;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar12 = iVar12 >> 1;
        }
        iVar14 = (int)*(short *)(iVar15 + 10);
        if (iVar14 != 0) {
          if (iVar14 < 1) {
            pcVar17 = *(code **)(iVar15 + 0xc);
          }
          else {
            iVar13 = iVar14 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar13 + -8);
            pcVar17 = *(code **)(iVar13 + -4);
            in_stack_000000bc = pcVar17;
          }
          iVar13 = (int)*(short *)(iVar15 + 8);
          if (0 < iVar14 << 0x10) {
            iVar13 = (short)in_stack_000000b8 + iVar13;
          }
          (*pcVar17)(iVar15 + iVar13,0x1004,iVar12);
        }
        iVar15 = *(int *)(unaff_s0 + 300);
        iVar12 = (int)*(short *)(iVar15 + 0x26);
        uVar16 = (uint)*(ushort *)(iVar15 + 0x68);
        if (iVar12 != 0) {
          if (iVar12 < 1) {
            pcVar17 = *(code **)(iVar15 + 0x28);
          }
          else {
            iVar14 = iVar12 * 8 + *(int *)(iVar15 + *(short *)(iVar15 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000cc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar15 + 0x24);
          if (0 < iVar12 << 0x10) {
            iVar14 = (short)in_stack_000000c8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar15 + iVar14,(int)(short)*(ushort *)(iVar15 + 0x68));
        }
        iVar15 = *(int *)(unaff_s0 + 0x58);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar12 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar16 << 0x10) / iVar15);
        iVar15 = (int)*(short *)(iVar12 + 0x2e);
        uVar16 = (uint)*(ushort *)(iVar12 + 0x6a);
        if (iVar15 != 0) {
          if (iVar15 < 1) {
            pcVar17 = *(code **)(iVar12 + 0x30);
          }
          else {
            iVar14 = iVar15 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar14 + -8);
            pcVar17 = *(code **)(iVar14 + -4);
            in_stack_000000dc = pcVar17;
          }
          iVar14 = (int)*(short *)(iVar12 + 0x2c);
          if (0 < iVar15 << 0x10) {
            iVar14 = (short)in_stack_000000d8 + iVar14;
          }
          uVar16 = (*pcVar17)(iVar12 + iVar14,(int)(short)*(ushort *)(iVar12 + 0x6a));
        }
        iVar15 = *(int *)(unaff_s0 + 0x5c);
        if (iVar15 == 0) {
          trap(0x1c00);
        }
        if ((iVar15 == -1) && (uVar16 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar2 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar16 << 0x10) / iVar15);
      }
    }
  }
  if (!bVar2) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar6 = EntityApplyMovementCallbacks();
    bVar2 = false;
    if (((((bVar5 != 0 && bVar5 < 0x3c) || (bVar5 == 0x65)) && (bVar4 == 0 || 0x3b < bVar4)) &&
        (bVar4 != 0x65)) ||
       (((bVar4 != 0 && bVar4 < 0x3c || (bVar4 == 0x65)) &&
        ((bVar6 == 0 || 0x3b < bVar6 && (bVar6 != 0x65)))))) {
      bVar2 = true;
    }
    if (!bVar2) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80065bc0(void)

{
  bool bVar1;
  bool bVar2;
  char cVar3;
  byte bVar4;
  byte bVar5;
  byte bVar6;
  short sVar7;
  ushort uVar8;
  short sVar9;
  short sVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  code *pcVar16;
  int unaff_s0;
  short unaff_s3;
  char unaff_s4;
  byte bStack00000025;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  FUN_80059e3c();
  bStack00000025 = EntityApplyMovementCallbacks();
  if ((((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == -0x37)) ||
       (bStack00000025 == -0x35)) || ((byte)(bStack00000025 + 0x23) < 3)) &&
     (*(char *)(unaff_s0 + 0x128) != '\0')) {
    bStack00000025 = 'e';
  }
  bVar2 = false;
  if (bStack00000025 != 'e') {
    bStack00000025 = EntityApplyMovementCallbacks();
    if ((((byte)(bStack00000025 + 0x4b) < 3) || (bStack00000025 == 0xc9)) ||
       ((bStack00000025 == 0xcb || (bVar1 = false, (byte)(bStack00000025 + 0x23) < 3)))) {
      if (*(char *)(unaff_s0 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        bStack00000025 = 0x65;
        bVar1 = false;
      }
    }
    if (bVar1) {
      sVar7 = FUN_80059e3c();
      *(short *)(unaff_s0 + 0x6a) = sVar7 + -1;
      PlayerProcessBounceCollision();
      PlayerCallback_80065e88();
      return;
    }
    bVar1 = false;
    if (bStack00000025 == 0x65) {
      *(short *)(unaff_s0 + 0x68) = *(short *)(unaff_s0 + 0x68) + unaff_s3;
      sVar7 = FUN_80059e3c();
      sVar7 = sVar7 + -1;
    }
    else {
      if ((bStack00000025 != 0 && bStack00000025 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0'))
      {
        bVar1 = true;
      }
      if (bVar1) {
        sVar7 = *(short *)(unaff_s0 + 0x68);
      }
      else {
        bVar1 = false;
        bVar4 = EntityApplyMovementCallbacks();
        if ((bVar4 != 0 && bVar4 < 0x3c) && (cVar3 = FUN_8005a3f8(), cVar3 != '\0')) {
          bVar1 = true;
        }
        if (!bVar1) goto PlayerCallback_80065e84;
        sVar7 = *(short *)(unaff_s0 + 0x68);
      }
      *(short *)(unaff_s0 + 0x68) = sVar7 + unaff_s3;
      sVar7 = PlayerApplyPositionWithCollision();
    }
    bVar2 = true;
    *(short *)(unaff_s0 + 0x6a) = sVar7;
  }
PlayerCallback_80065e84:
  if (bVar2) goto PlayerCallback_800666cc;
  cVar3 = EntityApplyMovementCallbacks();
  if (cVar3 == '}') {
    cVar3 = EntityApplyMovementCallbacks();
    if (cVar3 == '}') {
      iVar14 = (int)*(short *)(unaff_s0 + 0x26);
      uVar8 = *(short *)(unaff_s0 + 0x68) + 0x10;
      if (iVar14 != 0) {
        if (iVar14 < 1) {
          pcVar16 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar11 = iVar14 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000070 = *(undefined4 *)(iVar11 + -8);
          pcVar16 = *(code **)(iVar11 + -4);
          in_stack_00000074 = pcVar16;
        }
        sVar7 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar14 << 0x10) {
          PlayerCallback_80066040();
          return;
        }
PlayerCallback_8006604c:
        uVar8 = (*pcVar16)(unaff_s0 + sVar7,(int)(short)uVar8);
      }
PlayerCallback_80066064:
      iVar14 = *(int *)(unaff_s0 + 0x58);
      if (iVar14 == 0) {
        trap(0x1c00);
      }
      if ((iVar14 == -1) && ((uVar8 & 0xfff0) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar8 & 0xfff0) << 0x10) / iVar14) + 8;
      EntitySetState();
    }
  }
  else {
    cVar3 = EntityApplyMovementCallbacks();
    if ((cVar3 == '}') && (cVar3 = EntityApplyMovementCallbacks(), cVar3 == '}')) {
      iVar14 = (int)*(short *)(unaff_s0 + 0x26);
      uVar8 = *(short *)(unaff_s0 + 0x68) - 0x10;
      if (iVar14 != 0) {
        if (iVar14 < 1) {
          pcVar16 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar11 = iVar14 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000080 = *(undefined4 *)(iVar11 + -8);
          pcVar16 = *(code **)(iVar11 + -4);
          in_stack_00000084 = pcVar16;
        }
        sVar7 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar14 << 0x10) {
          PlayerCallback_80066050();
          return;
        }
        goto PlayerCallback_8006604c;
      }
      goto PlayerCallback_80066064;
    }
  }
  sVar7 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar7 = -0xc;
  }
  iVar14 = FUN_8001b594();
  bVar2 = false;
  if (iVar14 == 0) {
    iVar14 = (int)*(short *)(unaff_s0 + 0x26);
    sVar9 = *(short *)(unaff_s0 + 0x68) + sVar7;
    if (iVar14 != 0) {
      if (iVar14 < 1) {
        pcVar16 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar11 = iVar14 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar11 + -8);
        pcVar16 = *(code **)(iVar11 + -4);
        in_stack_00000094 = pcVar16;
      }
      iVar11 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar14 << 0x10) {
        iVar11 = (short)in_stack_00000090 + iVar11;
      }
      sVar9 = (*pcVar16)(unaff_s0 + iVar11,(int)sVar9);
    }
    iVar14 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar10 = *(short *)(unaff_s0 + 0x6a);
    if (iVar14 != 0) {
      if (iVar14 < 1) {
        pcVar16 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar11 = iVar14 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar11 + -8);
        pcVar16 = *(code **)(iVar11 + -4);
        in_stack_000000a4 = pcVar16;
      }
      iVar11 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar14 << 0x10) {
        iVar11 = (short)in_stack_000000a0 + iVar11;
      }
      sVar10 = (*pcVar16)(unaff_s0 + iVar11,(int)sVar10);
    }
    iVar14 = FUN_800224d0(g_GameStatePtr,(int)sVar9,(int)sVar10,8);
    if (iVar14 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar11 = *(int *)(iVar14 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar11 = iVar11 << 1;
    }
    FUN_8001a448(iVar14,&stack0x00000028);
    iVar13 = *(int *)(unaff_s0 + 0x58);
    if (iVar13 == 0) {
      trap(0x1c00);
    }
    if ((iVar13 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar13);
    iVar13 = *(int *)(unaff_s0 + 0x58);
    if (iVar13 == 0) {
      trap(0x1c00);
    }
    if ((iVar13 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar13);
    iVar13 = *(int *)(unaff_s0 + 0x5c);
    if (iVar13 == 0) {
      trap(0x1c00);
    }
    if ((iVar13 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar13);
    iVar13 = *(int *)(unaff_s0 + 0x5c);
    if (iVar13 == 0) {
      trap(0x1c00);
    }
    if ((iVar13 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar13);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar11) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar11 >> 0x10))) {
      iVar11 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar11) && (iVar11 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar11 + sVar7 && (iVar11 + sVar7 <= (int)sStack0000002c)))) {
        sVar9 = *(short *)(unaff_s0 + 0x68);
        if ((sVar9 < sStack00000028) || (sStack0000002c < sVar9)) {
          *(short *)(unaff_s0 + 0x68) = sVar9 + sVar7;
        }
        iVar11 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar14;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar11 = iVar11 >> 1;
        }
        iVar13 = (int)*(short *)(iVar14 + 10);
        if (iVar13 != 0) {
          if (iVar13 < 1) {
            pcVar16 = *(code **)(iVar14 + 0xc);
          }
          else {
            iVar12 = iVar13 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar12 + -8);
            pcVar16 = *(code **)(iVar12 + -4);
            in_stack_000000bc = pcVar16;
          }
          iVar12 = (int)*(short *)(iVar14 + 8);
          if (0 < iVar13 << 0x10) {
            iVar12 = (short)in_stack_000000b8 + iVar12;
          }
          (*pcVar16)(iVar14 + iVar12,0x1004,iVar11);
        }
        iVar14 = *(int *)(unaff_s0 + 300);
        iVar11 = (int)*(short *)(iVar14 + 0x26);
        uVar15 = (uint)*(ushort *)(iVar14 + 0x68);
        if (iVar11 != 0) {
          if (iVar11 < 1) {
            pcVar16 = *(code **)(iVar14 + 0x28);
          }
          else {
            iVar13 = iVar11 * 8 + *(int *)(iVar14 + *(short *)(iVar14 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar13 + -8);
            pcVar16 = *(code **)(iVar13 + -4);
            in_stack_000000cc = pcVar16;
          }
          iVar13 = (int)*(short *)(iVar14 + 0x24);
          if (0 < iVar11 << 0x10) {
            iVar13 = (short)in_stack_000000c8 + iVar13;
          }
          uVar15 = (*pcVar16)(iVar14 + iVar13,(int)(short)*(ushort *)(iVar14 + 0x68));
        }
        iVar14 = *(int *)(unaff_s0 + 0x58);
        if (iVar14 == 0) {
          trap(0x1c00);
        }
        if ((iVar14 == -1) && (uVar15 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar11 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar15 << 0x10) / iVar14);
        iVar14 = (int)*(short *)(iVar11 + 0x2e);
        uVar15 = (uint)*(ushort *)(iVar11 + 0x6a);
        if (iVar14 != 0) {
          if (iVar14 < 1) {
            pcVar16 = *(code **)(iVar11 + 0x30);
          }
          else {
            iVar13 = iVar14 * 8 + *(int *)(iVar11 + *(short *)(iVar11 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar13 + -8);
            pcVar16 = *(code **)(iVar13 + -4);
            in_stack_000000dc = pcVar16;
          }
          iVar13 = (int)*(short *)(iVar11 + 0x2c);
          if (0 < iVar14 << 0x10) {
            iVar13 = (short)in_stack_000000d8 + iVar13;
          }
          uVar15 = (*pcVar16)(iVar11 + iVar13,(int)(short)*(ushort *)(iVar11 + 0x6a));
        }
        iVar14 = *(int *)(unaff_s0 + 0x5c);
        if (iVar14 == 0) {
          trap(0x1c00);
        }
        if ((iVar14 == -1) && (uVar15 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar2 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar15 << 0x10) / iVar14);
      }
    }
  }
  if (!bVar2) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar6 = EntityApplyMovementCallbacks();
    bVar2 = false;
    if (((((bVar5 != 0 && bVar5 < 0x3c) || (bVar5 == 0x65)) && (bVar4 == 0 || 0x3b < bVar4)) &&
        (bVar4 != 0x65)) ||
       (((bVar4 != 0 && bVar4 < 0x3c || (bVar4 == 0x65)) &&
        ((bVar6 == 0 || 0x3b < bVar6 && (bVar6 != 0x65)))))) {
      bVar2 = true;
    }
    if (!bVar2) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80065e84(void)

{
  bool bVar1;
  char cVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  ushort uVar6;
  short sVar7;
  short sVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  code *pcVar14;
  int unaff_s0;
  short sVar15;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  cVar2 = EntityApplyMovementCallbacks();
  if (cVar2 == '}') {
    cVar2 = EntityApplyMovementCallbacks();
    if (cVar2 == '}') {
      iVar12 = (int)*(short *)(unaff_s0 + 0x26);
      uVar6 = *(short *)(unaff_s0 + 0x68) + 0x10;
      if (iVar12 != 0) {
        if (iVar12 < 1) {
          pcVar14 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000070 = *(undefined4 *)(iVar9 + -8);
          pcVar14 = *(code **)(iVar9 + -4);
          in_stack_00000074 = pcVar14;
        }
        sVar15 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar12 << 0x10) {
          PlayerCallback_80066040();
          return;
        }
PlayerCallback_8006604c:
        uVar6 = (*pcVar14)(unaff_s0 + sVar15,(int)(short)uVar6);
      }
PlayerCallback_80066064:
      iVar12 = *(int *)(unaff_s0 + 0x58);
      if (iVar12 == 0) {
        trap(0x1c00);
      }
      if ((iVar12 == -1) && ((uVar6 & 0xfff0) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar6 & 0xfff0) << 0x10) / iVar12) + 8;
      EntitySetState();
    }
  }
  else {
    cVar2 = EntityApplyMovementCallbacks();
    if ((cVar2 == '}') && (cVar2 = EntityApplyMovementCallbacks(), cVar2 == '}')) {
      iVar12 = (int)*(short *)(unaff_s0 + 0x26);
      uVar6 = *(short *)(unaff_s0 + 0x68) - 0x10;
      if (iVar12 != 0) {
        if (iVar12 < 1) {
          pcVar14 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000080 = *(undefined4 *)(iVar9 + -8);
          pcVar14 = *(code **)(iVar9 + -4);
          in_stack_00000084 = pcVar14;
        }
        sVar15 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar12 << 0x10) {
          PlayerCallback_80066050();
          return;
        }
        goto PlayerCallback_8006604c;
      }
      goto PlayerCallback_80066064;
    }
  }
  sVar15 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar15 = -0xc;
  }
  iVar12 = FUN_8001b594();
  bVar1 = false;
  if (iVar12 == 0) {
    iVar12 = (int)*(short *)(unaff_s0 + 0x26);
    sVar7 = *(short *)(unaff_s0 + 0x68) + sVar15;
    if (iVar12 != 0) {
      if (iVar12 < 1) {
        pcVar14 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
        in_stack_00000094 = pcVar14;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar12 << 0x10) {
        iVar9 = (short)in_stack_00000090 + iVar9;
      }
      sVar7 = (*pcVar14)(unaff_s0 + iVar9,(int)sVar7);
    }
    iVar12 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar8 = *(short *)(unaff_s0 + 0x6a);
    if (iVar12 != 0) {
      if (iVar12 < 1) {
        pcVar14 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
        in_stack_000000a4 = pcVar14;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar12 << 0x10) {
        iVar9 = (short)in_stack_000000a0 + iVar9;
      }
      sVar8 = (*pcVar14)(unaff_s0 + iVar9,(int)sVar8);
    }
    iVar12 = FUN_800224d0(g_GameStatePtr,(int)sVar7,(int)sVar8,8);
    if (iVar12 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar9 = *(int *)(iVar12 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar9 = iVar9 << 1;
    }
    FUN_8001a448(iVar12,&stack0x00000028);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar11);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar9) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar9 >> 0x10))) {
      iVar9 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar9) && (iVar9 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar9 + sVar15 && (iVar9 + sVar15 <= (int)sStack0000002c)))) {
        sVar7 = *(short *)(unaff_s0 + 0x68);
        if ((sVar7 < sStack00000028) || (sStack0000002c < sVar7)) {
          *(short *)(unaff_s0 + 0x68) = sVar7 + sVar15;
        }
        iVar9 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar12;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar9 = iVar9 >> 1;
        }
        iVar11 = (int)*(short *)(iVar12 + 10);
        if (iVar11 != 0) {
          if (iVar11 < 1) {
            pcVar14 = *(code **)(iVar12 + 0xc);
          }
          else {
            iVar10 = iVar11 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar10 + -8);
            pcVar14 = *(code **)(iVar10 + -4);
            in_stack_000000bc = pcVar14;
          }
          iVar10 = (int)*(short *)(iVar12 + 8);
          if (0 < iVar11 << 0x10) {
            iVar10 = (short)in_stack_000000b8 + iVar10;
          }
          (*pcVar14)(iVar12 + iVar10,0x1004,iVar9);
        }
        iVar12 = *(int *)(unaff_s0 + 300);
        iVar9 = (int)*(short *)(iVar12 + 0x26);
        uVar13 = (uint)*(ushort *)(iVar12 + 0x68);
        if (iVar9 != 0) {
          if (iVar9 < 1) {
            pcVar14 = *(code **)(iVar12 + 0x28);
          }
          else {
            iVar11 = iVar9 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar11 + -8);
            pcVar14 = *(code **)(iVar11 + -4);
            in_stack_000000cc = pcVar14;
          }
          iVar11 = (int)*(short *)(iVar12 + 0x24);
          if (0 < iVar9 << 0x10) {
            iVar11 = (short)in_stack_000000c8 + iVar11;
          }
          uVar13 = (*pcVar14)(iVar12 + iVar11,(int)(short)*(ushort *)(iVar12 + 0x68));
        }
        iVar12 = *(int *)(unaff_s0 + 0x58);
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (uVar13 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar9 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar13 << 0x10) / iVar12);
        iVar12 = (int)*(short *)(iVar9 + 0x2e);
        uVar13 = (uint)*(ushort *)(iVar9 + 0x6a);
        if (iVar12 != 0) {
          if (iVar12 < 1) {
            pcVar14 = *(code **)(iVar9 + 0x30);
          }
          else {
            iVar11 = iVar12 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar11 + -8);
            pcVar14 = *(code **)(iVar11 + -4);
            in_stack_000000dc = pcVar14;
          }
          iVar11 = (int)*(short *)(iVar9 + 0x2c);
          if (0 < iVar12 << 0x10) {
            iVar11 = (short)in_stack_000000d8 + iVar11;
          }
          uVar13 = (*pcVar14)(iVar9 + iVar11,(int)(short)*(ushort *)(iVar9 + 0x6a));
        }
        iVar12 = *(int *)(unaff_s0 + 0x5c);
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (uVar13 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar13 << 0x10) / iVar12);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar4 != 0 && bVar4 < 0x3c) || (bVar4 == 0x65)) && (bVar3 == 0 || 0x3b < bVar3)) &&
        (bVar3 != 0x65)) ||
       (((bVar3 != 0 && bVar3 < 0x3c || (bVar3 == 0x65)) &&
        ((bVar5 == 0 || 0x3b < bVar5 && (bVar5 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80065e88(void)

{
  bool bVar1;
  char cVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  ushort uVar6;
  short sVar7;
  short sVar8;
  int in_v0;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  code *pcVar14;
  int unaff_s0;
  short sVar15;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000070;
  code *in_stack_00000074;
  undefined4 in_stack_00000080;
  code *in_stack_00000084;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  if (in_v0 != 0) goto PlayerCallback_800666cc;
  cVar2 = EntityApplyMovementCallbacks();
  if (cVar2 == '}') {
    cVar2 = EntityApplyMovementCallbacks();
    if (cVar2 == '}') {
      iVar12 = (int)*(short *)(unaff_s0 + 0x26);
      uVar6 = *(short *)(unaff_s0 + 0x68) + 0x10;
      if (iVar12 != 0) {
        if (iVar12 < 1) {
          pcVar14 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000070 = *(undefined4 *)(iVar9 + -8);
          pcVar14 = *(code **)(iVar9 + -4);
          in_stack_00000074 = pcVar14;
        }
        sVar15 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar12 << 0x10) {
          PlayerCallback_80066040();
          return;
        }
PlayerCallback_8006604c:
        uVar6 = (*pcVar14)(unaff_s0 + sVar15,(int)(short)uVar6);
      }
PlayerCallback_80066064:
      iVar12 = *(int *)(unaff_s0 + 0x58);
      if (iVar12 == 0) {
        trap(0x1c00);
      }
      if ((iVar12 == -1) && ((uVar6 & 0xfff0) == 0x8000)) {
        trap(0x1800);
      }
      *(short *)(unaff_s0 + 0x68) = (short)((int)((uint)(uVar6 & 0xfff0) << 0x10) / iVar12) + 8;
      EntitySetState();
    }
  }
  else {
    cVar2 = EntityApplyMovementCallbacks();
    if ((cVar2 == '}') && (cVar2 = EntityApplyMovementCallbacks(), cVar2 == '}')) {
      iVar12 = (int)*(short *)(unaff_s0 + 0x26);
      uVar6 = *(short *)(unaff_s0 + 0x68) - 0x10;
      if (iVar12 != 0) {
        if (iVar12 < 1) {
          pcVar14 = *(code **)(unaff_s0 + 0x28);
        }
        else {
          iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
          in_stack_00000080 = *(undefined4 *)(iVar9 + -8);
          pcVar14 = *(code **)(iVar9 + -4);
          in_stack_00000084 = pcVar14;
        }
        sVar15 = *(short *)(unaff_s0 + 0x24);
        if (0 < iVar12 << 0x10) {
          PlayerCallback_80066050();
          return;
        }
        goto PlayerCallback_8006604c;
      }
      goto PlayerCallback_80066064;
    }
  }
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar15 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar15 = -0xc;
  }
  iVar12 = FUN_8001b594();
  bVar1 = false;
  if (iVar12 == 0) {
    iVar12 = (int)*(short *)(unaff_s0 + 0x26);
    sVar7 = *(short *)(unaff_s0 + 0x68) + sVar15;
    if (iVar12 != 0) {
      if (iVar12 < 1) {
        pcVar14 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
        in_stack_00000094 = pcVar14;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar12 << 0x10) {
        iVar9 = (short)in_stack_00000090 + iVar9;
      }
      sVar7 = (*pcVar14)(unaff_s0 + iVar9,(int)sVar7);
    }
    iVar12 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar8 = *(short *)(unaff_s0 + 0x6a);
    if (iVar12 != 0) {
      if (iVar12 < 1) {
        pcVar14 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar9 = iVar12 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar9 + -8);
        pcVar14 = *(code **)(iVar9 + -4);
        in_stack_000000a4 = pcVar14;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar12 << 0x10) {
        iVar9 = (short)in_stack_000000a0 + iVar9;
      }
      sVar8 = (*pcVar14)(unaff_s0 + iVar9,(int)sVar8);
    }
    iVar12 = FUN_800224d0(g_GameStatePtr,(int)sVar7,(int)sVar8,8);
    if (iVar12 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar9 = *(int *)(iVar12 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar9 = iVar9 << 1;
    }
    FUN_8001a448(iVar12,&stack0x00000028);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar11);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar9) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar9 >> 0x10))) {
      iVar9 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar9) && (iVar9 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar9 + sVar15 && (iVar9 + sVar15 <= (int)sStack0000002c)))) {
        sVar7 = *(short *)(unaff_s0 + 0x68);
        if ((sVar7 < sStack00000028) || (sStack0000002c < sVar7)) {
          *(short *)(unaff_s0 + 0x68) = sVar7 + sVar15;
        }
        iVar9 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar12;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar9 = iVar9 >> 1;
        }
        iVar11 = (int)*(short *)(iVar12 + 10);
        if (iVar11 != 0) {
          if (iVar11 < 1) {
            pcVar14 = *(code **)(iVar12 + 0xc);
          }
          else {
            iVar10 = iVar11 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar10 + -8);
            pcVar14 = *(code **)(iVar10 + -4);
            in_stack_000000bc = pcVar14;
          }
          iVar10 = (int)*(short *)(iVar12 + 8);
          if (0 < iVar11 << 0x10) {
            iVar10 = (short)in_stack_000000b8 + iVar10;
          }
          (*pcVar14)(iVar12 + iVar10,0x1004,iVar9);
        }
        iVar12 = *(int *)(unaff_s0 + 300);
        iVar9 = (int)*(short *)(iVar12 + 0x26);
        uVar13 = (uint)*(ushort *)(iVar12 + 0x68);
        if (iVar9 != 0) {
          if (iVar9 < 1) {
            pcVar14 = *(code **)(iVar12 + 0x28);
          }
          else {
            iVar11 = iVar9 * 8 + *(int *)(iVar12 + *(short *)(iVar12 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar11 + -8);
            pcVar14 = *(code **)(iVar11 + -4);
            in_stack_000000cc = pcVar14;
          }
          iVar11 = (int)*(short *)(iVar12 + 0x24);
          if (0 < iVar9 << 0x10) {
            iVar11 = (short)in_stack_000000c8 + iVar11;
          }
          uVar13 = (*pcVar14)(iVar12 + iVar11,(int)(short)*(ushort *)(iVar12 + 0x68));
        }
        iVar12 = *(int *)(unaff_s0 + 0x58);
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (uVar13 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar9 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar13 << 0x10) / iVar12);
        iVar12 = (int)*(short *)(iVar9 + 0x2e);
        uVar13 = (uint)*(ushort *)(iVar9 + 0x6a);
        if (iVar12 != 0) {
          if (iVar12 < 1) {
            pcVar14 = *(code **)(iVar9 + 0x30);
          }
          else {
            iVar11 = iVar12 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar11 + -8);
            pcVar14 = *(code **)(iVar11 + -4);
            in_stack_000000dc = pcVar14;
          }
          iVar11 = (int)*(short *)(iVar9 + 0x2c);
          if (0 < iVar12 << 0x10) {
            iVar11 = (short)in_stack_000000d8 + iVar11;
          }
          uVar13 = (*pcVar14)(iVar9 + iVar11,(int)(short)*(ushort *)(iVar9 + 0x6a));
        }
        iVar12 = *(int *)(unaff_s0 + 0x5c);
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (uVar13 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar13 << 0x10) / iVar12);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar5 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar4 != 0 && bVar4 < 0x3c) || (bVar4 == 0x65)) && (bVar3 == 0 || 0x3b < bVar3)) &&
        (bVar3 != 0x65)) ||
       (((bVar3 != 0 && bVar3 < 0x3c || (bVar3 == 0x65)) &&
        ((bVar5 == 0 || 0x3b < bVar5 && (bVar5 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) != '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80066040(void)

{
  PlayerCallback_80066050();
  return;
}



void PlayerCallback_8006604c(undefined4 param_1,short param_2,code *param_3)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  int in_v1;
  int iVar10;
  int iVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  uVar7 = (*param_3)(unaff_s0 + in_v1,(int)param_2);
  iVar10 = *(int *)(unaff_s0 + 0x58);
  iVar8 = (uVar7 & 0xfffffff0) << 0x10;
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && (iVar8 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x68) = (short)(iVar8 / iVar10) + 8;
  EntitySetState();
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar8 = FUN_8001b594();
  bVar1 = false;
  if (iVar8 == 0) {
    iVar8 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar8 != 0) {
      if (iVar8 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar10 = iVar8 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar10 + -8);
        pcVar12 = *(code **)(iVar10 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar10 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar8 << 0x10) {
        iVar10 = (short)in_stack_00000090 + iVar10;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar10,(int)sVar5);
    }
    iVar8 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar8 != 0) {
      if (iVar8 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar10 = iVar8 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar10 + -8);
        pcVar12 = *(code **)(iVar10 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar10 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar8 << 0x10) {
        iVar10 = (short)in_stack_000000a0 + iVar10;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar10,(int)sVar6);
    }
    iVar8 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar8 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar10 = *(int *)(iVar8 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar10 = iVar10 << 1;
    }
    FUN_8001a448(iVar8,&stack0x00000028);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar11);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar10) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar10 >> 0x10))) {
      iVar10 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar10) && (iVar10 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar10 + sVar13 && (iVar10 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar10 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar8;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar10 = iVar10 >> 1;
        }
        iVar11 = (int)*(short *)(iVar8 + 10);
        if (iVar11 != 0) {
          if (iVar11 < 1) {
            pcVar12 = *(code **)(iVar8 + 0xc);
          }
          else {
            iVar9 = iVar11 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar9 + -8);
            pcVar12 = *(code **)(iVar9 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar9 = (int)*(short *)(iVar8 + 8);
          if (0 < iVar11 << 0x10) {
            iVar9 = (short)in_stack_000000b8 + iVar9;
          }
          (*pcVar12)(iVar8 + iVar9,0x1004,iVar10);
        }
        iVar8 = *(int *)(unaff_s0 + 300);
        iVar10 = (int)*(short *)(iVar8 + 0x26);
        uVar7 = (uint)*(ushort *)(iVar8 + 0x68);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar8 + 0x28);
          }
          else {
            iVar11 = iVar10 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar11 + -8);
            pcVar12 = *(code **)(iVar11 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar11 = (int)*(short *)(iVar8 + 0x24);
          if (0 < iVar10 << 0x10) {
            iVar11 = (short)in_stack_000000c8 + iVar11;
          }
          uVar7 = (*pcVar12)(iVar8 + iVar11,(int)(short)*(ushort *)(iVar8 + 0x68));
        }
        iVar8 = *(int *)(unaff_s0 + 0x58);
        if (iVar8 == 0) {
          trap(0x1c00);
        }
        if ((iVar8 == -1) && (uVar7 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar10 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar7 << 0x10) / iVar8);
        iVar8 = (int)*(short *)(iVar10 + 0x2e);
        uVar7 = (uint)*(ushort *)(iVar10 + 0x6a);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar12 = *(code **)(iVar10 + 0x30);
          }
          else {
            iVar11 = iVar8 * 8 + *(int *)(iVar10 + *(short *)(iVar10 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar11 + -8);
            pcVar12 = *(code **)(iVar11 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar11 = (int)*(short *)(iVar10 + 0x2c);
          if (0 < iVar8 << 0x10) {
            iVar11 = (short)in_stack_000000d8 + iVar11;
          }
          uVar7 = (*pcVar12)(iVar10 + iVar11,(int)(short)*(ushort *)(iVar10 + 0x6a));
        }
        iVar8 = *(int *)(unaff_s0 + 0x5c);
        if (iVar8 == 0) {
          trap(0x1c00);
        }
        if ((iVar8 == -1) && (uVar7 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar7 << 0x10) / iVar8);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80066050(undefined4 param_1,short param_2,code *param_3)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  int in_v0;
  uint uVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  uVar7 = (*param_3)(unaff_s0 + in_v0,(int)param_2);
  iVar10 = *(int *)(unaff_s0 + 0x58);
  iVar8 = (uVar7 & 0xfffffff0) << 0x10;
  if (iVar10 == 0) {
    trap(0x1c00);
  }
  if ((iVar10 == -1) && (iVar8 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x68) = (short)(iVar8 / iVar10) + 8;
  EntitySetState();
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar8 = FUN_8001b594();
  bVar1 = false;
  if (iVar8 == 0) {
    iVar8 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar8 != 0) {
      if (iVar8 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar10 = iVar8 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar10 + -8);
        pcVar12 = *(code **)(iVar10 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar10 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar8 << 0x10) {
        iVar10 = (short)in_stack_00000090 + iVar10;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar10,(int)sVar5);
    }
    iVar8 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar8 != 0) {
      if (iVar8 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar10 = iVar8 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar10 + -8);
        pcVar12 = *(code **)(iVar10 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar10 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar8 << 0x10) {
        iVar10 = (short)in_stack_000000a0 + iVar10;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar10,(int)sVar6);
    }
    iVar8 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar8 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar10 = *(int *)(iVar8 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar10 = iVar10 << 1;
    }
    FUN_8001a448(iVar8,&stack0x00000028);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x58);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar11);
    iVar11 = *(int *)(unaff_s0 + 0x5c);
    if (iVar11 == 0) {
      trap(0x1c00);
    }
    if ((iVar11 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar11);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar10) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar10 >> 0x10))) {
      iVar10 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar10) && (iVar10 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar10 + sVar13 && (iVar10 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar10 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar8;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar10 = iVar10 >> 1;
        }
        iVar11 = (int)*(short *)(iVar8 + 10);
        if (iVar11 != 0) {
          if (iVar11 < 1) {
            pcVar12 = *(code **)(iVar8 + 0xc);
          }
          else {
            iVar9 = iVar11 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar9 + -8);
            pcVar12 = *(code **)(iVar9 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar9 = (int)*(short *)(iVar8 + 8);
          if (0 < iVar11 << 0x10) {
            iVar9 = (short)in_stack_000000b8 + iVar9;
          }
          (*pcVar12)(iVar8 + iVar9,0x1004,iVar10);
        }
        iVar8 = *(int *)(unaff_s0 + 300);
        iVar10 = (int)*(short *)(iVar8 + 0x26);
        uVar7 = (uint)*(ushort *)(iVar8 + 0x68);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar8 + 0x28);
          }
          else {
            iVar11 = iVar10 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar11 + -8);
            pcVar12 = *(code **)(iVar11 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar11 = (int)*(short *)(iVar8 + 0x24);
          if (0 < iVar10 << 0x10) {
            iVar11 = (short)in_stack_000000c8 + iVar11;
          }
          uVar7 = (*pcVar12)(iVar8 + iVar11,(int)(short)*(ushort *)(iVar8 + 0x68));
        }
        iVar8 = *(int *)(unaff_s0 + 0x58);
        if (iVar8 == 0) {
          trap(0x1c00);
        }
        if ((iVar8 == -1) && (uVar7 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar10 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar7 << 0x10) / iVar8);
        iVar8 = (int)*(short *)(iVar10 + 0x2e);
        uVar7 = (uint)*(ushort *)(iVar10 + 0x6a);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar12 = *(code **)(iVar10 + 0x30);
          }
          else {
            iVar11 = iVar8 * 8 + *(int *)(iVar10 + *(short *)(iVar10 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar11 + -8);
            pcVar12 = *(code **)(iVar11 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar11 = (int)*(short *)(iVar10 + 0x2c);
          if (0 < iVar8 << 0x10) {
            iVar11 = (short)in_stack_000000d8 + iVar11;
          }
          uVar7 = (*pcVar12)(iVar10 + iVar11,(int)(short)*(ushort *)(iVar10 + 0x6a));
        }
        iVar8 = *(int *)(unaff_s0 + 0x5c);
        if (iVar8 == 0) {
          trap(0x1c00);
        }
        if ((iVar8 == -1) && (uVar7 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar7 << 0x10) / iVar8);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80066064(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  uint in_v1;
  int iVar9;
  int iVar10;
  uint uVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  iVar9 = *(int *)(unaff_s0 + 0x58);
  iVar7 = (in_v1 & 0xfffffff0) << 0x10;
  if (iVar9 == 0) {
    trap(0x1c00);
  }
  if ((iVar9 == -1) && (iVar7 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x68) = (short)(iVar7 / iVar9) + 8;
  EntitySetState();
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar7 = FUN_8001b594();
  bVar1 = false;
  if (iVar7 == 0) {
    iVar7 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar9 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar9 + -8);
        pcVar12 = *(code **)(iVar9 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar9 = (short)in_stack_00000090 + iVar9;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar9,(int)sVar5);
    }
    iVar7 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar9 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar9 + -8);
        pcVar12 = *(code **)(iVar9 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar9 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar7 << 0x10) {
        iVar9 = (short)in_stack_000000a0 + iVar9;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar9,(int)sVar6);
    }
    iVar7 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar7 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar9 = *(int *)(iVar7 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar9 = iVar9 << 1;
    }
    FUN_8001a448(iVar7,&stack0x00000028);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar10);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar9) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar9 >> 0x10))) {
      iVar9 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar9) && (iVar9 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar9 + sVar13 && (iVar9 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar9 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar7;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar9 = iVar9 >> 1;
        }
        iVar10 = (int)*(short *)(iVar7 + 10);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar7 + 0xc);
          }
          else {
            iVar8 = iVar10 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar8 + -8);
            pcVar12 = *(code **)(iVar8 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar8 = (int)*(short *)(iVar7 + 8);
          if (0 < iVar10 << 0x10) {
            iVar8 = (short)in_stack_000000b8 + iVar8;
          }
          (*pcVar12)(iVar7 + iVar8,0x1004,iVar9);
        }
        iVar7 = *(int *)(unaff_s0 + 300);
        iVar9 = (int)*(short *)(iVar7 + 0x26);
        uVar11 = (uint)*(ushort *)(iVar7 + 0x68);
        if (iVar9 != 0) {
          if (iVar9 < 1) {
            pcVar12 = *(code **)(iVar7 + 0x28);
          }
          else {
            iVar10 = iVar9 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar7 + 0x24);
          if (0 < iVar9 << 0x10) {
            iVar10 = (short)in_stack_000000c8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar7 + iVar10,(int)(short)*(ushort *)(iVar7 + 0x68));
        }
        iVar7 = *(int *)(unaff_s0 + 0x58);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar9 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar7);
        iVar7 = (int)*(short *)(iVar9 + 0x2e);
        uVar11 = (uint)*(ushort *)(iVar9 + 0x6a);
        if (iVar7 != 0) {
          if (iVar7 < 1) {
            pcVar12 = *(code **)(iVar9 + 0x30);
          }
          else {
            iVar10 = iVar7 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar9 + 0x2c);
          if (0 < iVar7 << 0x10) {
            iVar10 = (short)in_stack_000000d8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar9 + iVar10,(int)(short)*(ushort *)(iVar9 + 0x6a));
        }
        iVar7 = *(int *)(unaff_s0 + 0x5c);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar11 << 0x10) / iVar7);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_8006606c(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  int in_v0;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  iVar9 = *(int *)(unaff_s0 + 0x58);
  if (iVar9 == 0) {
    trap(0x1c00);
  }
  if ((iVar9 == -1) && (in_v0 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(unaff_s0 + 0x68) = (short)((in_v0 << 0x10) / iVar9) + 8;
  EntitySetState();
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar9 = FUN_8001b594();
  bVar1 = false;
  if (iVar9 == 0) {
    iVar9 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar7 + -8);
        pcVar12 = *(code **)(iVar7 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar7 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar9 << 0x10) {
        iVar7 = (short)in_stack_00000090 + iVar7;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar7,(int)sVar5);
    }
    iVar9 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar7 = iVar9 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar7 + -8);
        pcVar12 = *(code **)(iVar7 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar7 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar9 << 0x10) {
        iVar7 = (short)in_stack_000000a0 + iVar7;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar7,(int)sVar6);
    }
    iVar9 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar9 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar7 = *(int *)(iVar9 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar7 = iVar7 << 1;
    }
    FUN_8001a448(iVar9,&stack0x00000028);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar10);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar7) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar7 >> 0x10))) {
      iVar7 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar7) && (iVar7 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar7 + sVar13 && (iVar7 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar7 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar9;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar7 = iVar7 >> 1;
        }
        iVar10 = (int)*(short *)(iVar9 + 10);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar9 + 0xc);
          }
          else {
            iVar8 = iVar10 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar8 + -8);
            pcVar12 = *(code **)(iVar8 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar8 = (int)*(short *)(iVar9 + 8);
          if (0 < iVar10 << 0x10) {
            iVar8 = (short)in_stack_000000b8 + iVar8;
          }
          (*pcVar12)(iVar9 + iVar8,0x1004,iVar7);
        }
        iVar9 = *(int *)(unaff_s0 + 300);
        iVar7 = (int)*(short *)(iVar9 + 0x26);
        uVar11 = (uint)*(ushort *)(iVar9 + 0x68);
        if (iVar7 != 0) {
          if (iVar7 < 1) {
            pcVar12 = *(code **)(iVar9 + 0x28);
          }
          else {
            iVar10 = iVar7 * 8 + *(int *)(iVar9 + *(short *)(iVar9 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar9 + 0x24);
          if (0 < iVar7 << 0x10) {
            iVar10 = (short)in_stack_000000c8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar9 + iVar10,(int)(short)*(ushort *)(iVar9 + 0x68));
        }
        iVar9 = *(int *)(unaff_s0 + 0x58);
        if (iVar9 == 0) {
          trap(0x1c00);
        }
        if ((iVar9 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar7 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar9);
        iVar9 = (int)*(short *)(iVar7 + 0x2e);
        uVar11 = (uint)*(ushort *)(iVar7 + 0x6a);
        if (iVar9 != 0) {
          if (iVar9 < 1) {
            pcVar12 = *(code **)(iVar7 + 0x30);
          }
          else {
            iVar10 = iVar9 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar7 + 0x2c);
          if (0 < iVar9 << 0x10) {
            iVar10 = (short)in_stack_000000d8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar7 + iVar10,(int)(short)*(ushort *)(iVar7 + 0x6a));
        }
        iVar9 = *(int *)(unaff_s0 + 0x5c);
        if (iVar9 == 0) {
          trap(0x1c00);
        }
        if ((iVar9 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar11 << 0x10) / iVar9);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_800660bc(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  EntitySetState();
  if (unaff_s4 != '\0') goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar7 = FUN_8001b594();
  bVar1 = false;
  if (iVar7 == 0) {
    iVar7 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar8 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar8 + -8);
        pcVar12 = *(code **)(iVar8 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar8 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar8 = (short)in_stack_00000090 + iVar8;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar8,(int)sVar5);
    }
    iVar7 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar8 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar8 + -8);
        pcVar12 = *(code **)(iVar8 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar8 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar7 << 0x10) {
        iVar8 = (short)in_stack_000000a0 + iVar8;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar8,(int)sVar6);
    }
    iVar7 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar7 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar8 = *(int *)(iVar7 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar8 = iVar8 << 1;
    }
    FUN_8001a448(iVar7,&stack0x00000028);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar10);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar8) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar8 >> 0x10))) {
      iVar8 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar8) && (iVar8 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar8 + sVar13 && (iVar8 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar8 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar7;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar8 = iVar8 >> 1;
        }
        iVar10 = (int)*(short *)(iVar7 + 10);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar7 + 0xc);
          }
          else {
            iVar9 = iVar10 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar9 + -8);
            pcVar12 = *(code **)(iVar9 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar9 = (int)*(short *)(iVar7 + 8);
          if (0 < iVar10 << 0x10) {
            iVar9 = (short)in_stack_000000b8 + iVar9;
          }
          (*pcVar12)(iVar7 + iVar9,0x1004,iVar8);
        }
        iVar7 = *(int *)(unaff_s0 + 300);
        iVar8 = (int)*(short *)(iVar7 + 0x26);
        uVar11 = (uint)*(ushort *)(iVar7 + 0x68);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar12 = *(code **)(iVar7 + 0x28);
          }
          else {
            iVar10 = iVar8 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar7 + 0x24);
          if (0 < iVar8 << 0x10) {
            iVar10 = (short)in_stack_000000c8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar7 + iVar10,(int)(short)*(ushort *)(iVar7 + 0x68));
        }
        iVar7 = *(int *)(unaff_s0 + 0x58);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar8 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar7);
        iVar7 = (int)*(short *)(iVar8 + 0x2e);
        uVar11 = (uint)*(ushort *)(iVar8 + 0x6a);
        if (iVar7 != 0) {
          if (iVar7 < 1) {
            pcVar12 = *(code **)(iVar8 + 0x30);
          }
          else {
            iVar10 = iVar7 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar8 + 0x2c);
          if (0 < iVar7 << 0x10) {
            iVar10 = (short)in_stack_000000d8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar8 + iVar10,(int)(short)*(ushort *)(iVar8 + 0x6a));
        }
        iVar7 = *(int *)(unaff_s0 + 0x5c);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        bVar1 = true;
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar11 << 0x10) / iVar7);
      }
    }
  }
  if (!bVar1) {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_800660c8(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  short sVar5;
  short sVar6;
  int in_v0;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  code *pcVar12;
  int unaff_s0;
  short sVar13;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  undefined4 in_stack_00000090;
  code *in_stack_00000094;
  undefined4 in_stack_000000a0;
  code *in_stack_000000a4;
  undefined4 in_stack_000000b8;
  code *in_stack_000000bc;
  undefined4 in_stack_000000c8;
  code *in_stack_000000cc;
  undefined4 in_stack_000000d8;
  code *in_stack_000000dc;
  
  if (in_v0 != 0) goto PlayerCallback_800666cc;
  sVar13 = 0xc;
  if (*(char *)(unaff_s0 + 0x74) != '\0') {
    sVar13 = -0xc;
  }
  iVar7 = FUN_8001b594();
  if (iVar7 == 0) {
    iVar7 = (int)*(short *)(unaff_s0 + 0x26);
    sVar5 = *(short *)(unaff_s0 + 0x68) + sVar13;
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x28);
      }
      else {
        iVar8 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x28));
        in_stack_00000090 = *(undefined4 *)(iVar8 + -8);
        pcVar12 = *(code **)(iVar8 + -4);
        in_stack_00000094 = pcVar12;
      }
      iVar8 = (int)*(short *)(unaff_s0 + 0x24);
      if (0 < iVar7 << 0x10) {
        iVar8 = (short)in_stack_00000090 + iVar8;
      }
      sVar5 = (*pcVar12)(unaff_s0 + iVar8,(int)sVar5);
    }
    iVar7 = (int)*(short *)(unaff_s0 + 0x2e);
    sVar6 = *(short *)(unaff_s0 + 0x6a);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar12 = *(code **)(unaff_s0 + 0x30);
      }
      else {
        iVar8 = iVar7 * 8 + *(int *)(unaff_s0 + *(short *)(unaff_s0 + 0x30));
        in_stack_000000a0 = *(undefined4 *)(iVar8 + -8);
        pcVar12 = *(code **)(iVar8 + -4);
        in_stack_000000a4 = pcVar12;
      }
      iVar8 = (int)*(short *)(unaff_s0 + 0x2c);
      if (0 < iVar7 << 0x10) {
        iVar8 = (short)in_stack_000000a0 + iVar8;
      }
      sVar6 = (*pcVar12)(unaff_s0 + iVar8,(int)sVar6);
    }
    iVar7 = FUN_800224d0(g_GameStatePtr,(int)sVar5,(int)sVar6,8);
    if (iVar7 != 0) goto PlayerCallback_8006627c;
  }
  else {
PlayerCallback_8006627c:
    iVar8 = *(int *)(iVar7 + 0x114);
    if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
      iVar8 = iVar8 << 1;
    }
    FUN_8001a448(iVar7,&stack0x00000028);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack00000028 = (short)(((int)sStack00000028 << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x58);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002c = (short)(((int)sStack0000002c << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002a = (short)(((int)sStack0000002a << 0x10) / iVar10);
    iVar10 = *(int *)(unaff_s0 + 0x5c);
    if (iVar10 == 0) {
      trap(0x1c00);
    }
    if ((iVar10 == -1) && ((int)sStack0000002e << 0x10 == -0x80000000)) {
      trap(0x1800);
    }
    sStack0000002e = (short)(((int)sStack0000002e << 0x10) / iVar10);
    if ((0 < *(int *)(unaff_s0 + 0x110) - iVar8) &&
       ((int)*(short *)(unaff_s0 + 0x6a) - (int)sStack0000002a < 0xd - (iVar8 >> 0x10))) {
      iVar8 = (int)*(short *)(unaff_s0 + 0x68);
      if (((sStack00000028 <= iVar8) && (iVar8 <= sStack0000002c)) ||
         (((int)sStack00000028 <= iVar8 + sVar13 && (iVar8 + sVar13 <= (int)sStack0000002c)))) {
        sVar5 = *(short *)(unaff_s0 + 0x68);
        if ((sVar5 < sStack00000028) || (sStack0000002c < sVar5)) {
          *(short *)(unaff_s0 + 0x68) = sVar5 + sVar13;
        }
        iVar8 = *(int *)(unaff_s0 + 0x110);
        *(int *)(unaff_s0 + 300) = iVar7;
        *(short *)(unaff_s0 + 0x6a) = sStack0000002a + -1;
        if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
          iVar8 = iVar8 >> 1;
        }
        iVar10 = (int)*(short *)(iVar7 + 10);
        if (iVar10 != 0) {
          if (iVar10 < 1) {
            pcVar12 = *(code **)(iVar7 + 0xc);
          }
          else {
            iVar9 = iVar10 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0xc));
            in_stack_000000b8 = *(undefined4 *)(iVar9 + -8);
            pcVar12 = *(code **)(iVar9 + -4);
            in_stack_000000bc = pcVar12;
          }
          iVar9 = (int)*(short *)(iVar7 + 8);
          if (0 < iVar10 << 0x10) {
            iVar9 = (short)in_stack_000000b8 + iVar9;
          }
          (*pcVar12)(iVar7 + iVar9,0x1004,iVar8);
        }
        iVar7 = *(int *)(unaff_s0 + 300);
        iVar8 = (int)*(short *)(iVar7 + 0x26);
        uVar11 = (uint)*(ushort *)(iVar7 + 0x68);
        if (iVar8 != 0) {
          if (iVar8 < 1) {
            pcVar12 = *(code **)(iVar7 + 0x28);
          }
          else {
            iVar10 = iVar8 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x28));
            in_stack_000000c8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000cc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar7 + 0x24);
          if (0 < iVar8 << 0x10) {
            iVar10 = (short)in_stack_000000c8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar7 + iVar10,(int)(short)*(ushort *)(iVar7 + 0x68));
        }
        iVar7 = *(int *)(unaff_s0 + 0x58);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar8 = *(int *)(unaff_s0 + 300);
        *(short *)(unaff_s0 + 0x130) =
             *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar11 << 0x10) / iVar7);
        iVar7 = (int)*(short *)(iVar8 + 0x2e);
        uVar11 = (uint)*(ushort *)(iVar8 + 0x6a);
        if (iVar7 != 0) {
          if (iVar7 < 1) {
            pcVar12 = *(code **)(iVar8 + 0x30);
          }
          else {
            iVar10 = iVar7 * 8 + *(int *)(iVar8 + *(short *)(iVar8 + 0x30));
            in_stack_000000d8 = *(undefined4 *)(iVar10 + -8);
            pcVar12 = *(code **)(iVar10 + -4);
            in_stack_000000dc = pcVar12;
          }
          iVar10 = (int)*(short *)(iVar8 + 0x2c);
          if (0 < iVar7 << 0x10) {
            iVar10 = (short)in_stack_000000d8 + iVar10;
          }
          uVar11 = (*pcVar12)(iVar8 + iVar10,(int)(short)*(ushort *)(iVar8 + 0x6a));
        }
        iVar7 = *(int *)(unaff_s0 + 0x5c);
        if (iVar7 == 0) {
          trap(0x1c00);
        }
        if ((iVar7 == -1) && (uVar11 << 0x10 == -0x80000000)) {
          trap(0x1800);
        }
        unaff_s4 = '\x01';
        *(short *)(unaff_s0 + 0x132) =
             *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar11 << 0x10) / iVar7);
      }
    }
  }
  if (unaff_s4 == '\0') {
    if (*(int *)(unaff_s0 + 0x110) < 1) {
      return;
    }
    bVar2 = EntityApplyMovementCallbacks();
    bVar3 = EntityApplyMovementCallbacks();
    bVar4 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (((((bVar3 != 0 && bVar3 < 0x3c) || (bVar3 == 0x65)) && (bVar2 == 0 || 0x3b < bVar2)) &&
        (bVar2 != 0x65)) ||
       (((bVar2 != 0 && bVar2 < 0x3c || (bVar2 == 0x65)) &&
        ((bVar4 == 0 || 0x3b < bVar4 && (bVar4 != 0x65)))))) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
    return;
  }
PlayerCallback_800666cc:
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) == '\0') {
      FUN_8005b2d4();
      EntitySetState();
      return;
    }
    FUN_8005b2d4();
    PlayerCallback_80066808();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) == '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_8006627c(void)

{
  short sVar1;
  bool bVar2;
  byte bVar3;
  byte bVar4;
  byte bVar5;
  int iVar6;
  int iVar7;
  short sVar8;
  short sVar9;
  uint uVar10;
  short sVar11;
  code *pcVar12;
  int unaff_s0;
  int unaff_s1;
  int iVar13;
  short unaff_s3;
  char unaff_s4;
  short sStack00000028;
  short sStack0000002a;
  short sStack0000002c;
  short sStack0000002e;
  short in_stack_000000b8;
  short in_stack_000000c8;
  short in_stack_000000d8;
  
  iVar13 = *(int *)(unaff_s1 + 0x114);
  if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
    iVar13 = iVar13 << 1;
  }
  FUN_8001a448();
  iVar7 = *(int *)(unaff_s0 + 0x58);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack00000028 << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sVar11 = (short)(((int)sStack00000028 << 0x10) / iVar7);
  iVar7 = *(int *)(unaff_s0 + 0x58);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack0000002c << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sVar9 = (short)(((int)sStack0000002c << 0x10) / iVar7);
  iVar7 = *(int *)(unaff_s0 + 0x5c);
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && ((int)sStack0000002a << 0x10 == -0x80000000)) {
    trap(0x1800);
  }
  sVar8 = (short)(((int)sStack0000002a << 0x10) / iVar7);
  if (*(int *)(unaff_s0 + 0x5c) == 0) {
    trap(0x1c00);
  }
  if ((*(int *)(unaff_s0 + 0x5c) == -1) && (sStack0000002e == -0x8000)) {
    trap(0x1800);
  }
  if ((0 < *(int *)(unaff_s0 + 0x110) - iVar13) &&
     ((int)*(short *)(unaff_s0 + 0x6a) - (int)sVar8 < 0xd - (iVar13 >> 0x10))) {
    iVar13 = (int)*(short *)(unaff_s0 + 0x68);
    if (((sVar11 <= iVar13) && (iVar13 <= sVar9)) ||
       (((int)sVar11 <= iVar13 + unaff_s3 && (iVar13 + unaff_s3 <= (int)sVar9)))) {
      sVar1 = *(short *)(unaff_s0 + 0x68);
      if ((sVar1 < sVar11) || (sVar9 < sVar1)) {
        *(short *)(unaff_s0 + 0x68) = sVar1 + unaff_s3;
      }
      iVar13 = *(int *)(unaff_s0 + 0x110);
      *(int *)(unaff_s0 + 300) = unaff_s1;
      *(short *)(unaff_s0 + 0x6a) = sVar8 + -1;
      if (*(int *)(unaff_s0 + 0x58) == 0x8000) {
        iVar13 = iVar13 >> 1;
      }
      iVar7 = (int)*(short *)(unaff_s1 + 10);
      if (iVar7 != 0) {
        if (iVar7 < 1) {
          pcVar12 = *(code **)(unaff_s1 + 0xc);
        }
        else {
          iVar6 = iVar7 * 8 + *(int *)(unaff_s1 + *(short *)(unaff_s1 + 0xc));
          in_stack_000000b8 = (short)*(undefined4 *)(iVar6 + -8);
          pcVar12 = *(code **)(iVar6 + -4);
        }
        iVar6 = (int)*(short *)(unaff_s1 + 8);
        if (0 < iVar7 << 0x10) {
          iVar6 = in_stack_000000b8 + iVar6;
        }
        (*pcVar12)(unaff_s1 + iVar6,0x1004,iVar13);
      }
      iVar13 = *(int *)(unaff_s0 + 300);
      iVar7 = (int)*(short *)(iVar13 + 0x26);
      uVar10 = (uint)*(ushort *)(iVar13 + 0x68);
      if (iVar7 != 0) {
        if (iVar7 < 1) {
          pcVar12 = *(code **)(iVar13 + 0x28);
        }
        else {
          iVar6 = iVar7 * 8 + *(int *)(iVar13 + *(short *)(iVar13 + 0x28));
          in_stack_000000c8 = (short)*(undefined4 *)(iVar6 + -8);
          pcVar12 = *(code **)(iVar6 + -4);
        }
        iVar6 = (int)*(short *)(iVar13 + 0x24);
        if (0 < iVar7 << 0x10) {
          iVar6 = in_stack_000000c8 + iVar6;
        }
        uVar10 = (*pcVar12)(iVar13 + iVar6,(int)(short)*(ushort *)(iVar13 + 0x68));
      }
      iVar13 = *(int *)(unaff_s0 + 0x58);
      if (iVar13 == 0) {
        trap(0x1c00);
      }
      if ((iVar13 == -1) && (uVar10 << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      iVar7 = *(int *)(unaff_s0 + 300);
      *(short *)(unaff_s0 + 0x130) =
           *(short *)(unaff_s0 + 0x68) - (short)((int)(uVar10 << 0x10) / iVar13);
      iVar13 = (int)*(short *)(iVar7 + 0x2e);
      uVar10 = (uint)*(ushort *)(iVar7 + 0x6a);
      if (iVar13 != 0) {
        if (iVar13 < 1) {
          pcVar12 = *(code **)(iVar7 + 0x30);
        }
        else {
          iVar6 = iVar13 * 8 + *(int *)(iVar7 + *(short *)(iVar7 + 0x30));
          in_stack_000000d8 = (short)*(undefined4 *)(iVar6 + -8);
          pcVar12 = *(code **)(iVar6 + -4);
        }
        iVar6 = (int)*(short *)(iVar7 + 0x2c);
        if (0 < iVar13 << 0x10) {
          iVar6 = in_stack_000000d8 + iVar6;
        }
        uVar10 = (*pcVar12)(iVar7 + iVar6,(int)(short)*(ushort *)(iVar7 + 0x6a));
      }
      iVar13 = *(int *)(unaff_s0 + 0x5c);
      if (iVar13 == 0) {
        trap(0x1c00);
      }
      if ((iVar13 == -1) && (uVar10 << 0x10 == -0x80000000)) {
        trap(0x1800);
      }
      unaff_s4 = '\x01';
      *(short *)(unaff_s0 + 0x132) =
           *(short *)(unaff_s0 + 0x6a) - (short)((int)(uVar10 << 0x10) / iVar13);
    }
  }
  if (unaff_s4 == '\0') {
    if (0 < *(int *)(unaff_s0 + 0x110)) {
      bVar3 = EntityApplyMovementCallbacks();
      bVar4 = EntityApplyMovementCallbacks();
      bVar5 = EntityApplyMovementCallbacks();
      bVar2 = false;
      if (((((bVar4 != 0 && bVar4 < 0x3c) || (bVar4 == 0x65)) && (bVar3 == 0 || 0x3b < bVar3)) &&
          (bVar3 != 0x65)) ||
         (((bVar3 != 0 && bVar3 < 0x3c || (bVar3 == 0x65)) &&
          ((bVar5 == 0 || 0x3b < bVar5 && (bVar5 != 0x65)))))) {
        bVar2 = true;
      }
      if (bVar2) {
        *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
      }
    }
  }
  else {
    if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
       ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
      FUN_8005b2d4();
      if (*(char *)(unaff_s0 + 0x135) != '\0') {
        PlayerCallback_80066808();
        return;
      }
      PlayerCallback_80066808();
      return;
    }
    if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
      FUN_8005b2d4();
      *(undefined1 *)(unaff_s0 + 0x74) = 0;
      if (*(char *)(unaff_s0 + 0x135) != '\0') {
        PlayerCallback_80066808();
        return;
      }
      PlayerCallback_80066808();
      return;
    }
    if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) != 0) {
      FUN_8005b2d4();
      *(undefined1 *)(unaff_s0 + 0x74) = 1;
      if (*(char *)(unaff_s0 + 0x135) != '\0') {
        PlayerCallback_80066808();
        return;
      }
      PlayerCallback_80066808();
      return;
    }
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      FUN_8005b2d4();
      PlayerCallback_80066808();
      return;
    }
    FUN_8005b2d4();
    EntitySetState();
  }
  return;
}



void PlayerCallback_800666cc(void)

{
  int unaff_s0;
  
  if ((*(char *)(unaff_s0 + 0x13c) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s0 + 0x100)) != 0)) {
    FUN_8005b2d4();
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x2000) != 0) {
    FUN_8005b2d4();
    *(undefined1 *)(unaff_s0 + 0x74) = 0;
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      PlayerCallback_80066808();
      return;
    }
    PlayerCallback_80066808();
    return;
  }
  if ((**(ushort **)(unaff_s0 + 0x100) & 0x8000) == 0) {
    if (*(char *)(unaff_s0 + 0x135) != '\0') {
      FUN_8005b2d4();
      PlayerCallback_80066808();
      return;
    }
    FUN_8005b2d4();
    EntitySetState();
    return;
  }
  FUN_8005b2d4();
  *(undefined1 *)(unaff_s0 + 0x74) = 1;
  if (*(char *)(unaff_s0 + 0x135) != '\0') {
    PlayerCallback_80066808();
    return;
  }
  PlayerCallback_80066808();
  return;
}



void PlayerCallback_80066808(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_80066990(int param_1)

{
  bool bVar1;
  undefined4 uVar2;
  undefined *puVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  char local_10;
  char local_f;
  
  if (*(char *)(param_1 + 0x74) == '\0') {
    iVar6 = *(int *)(param_1 + 0xb4);
  }
  else {
    iVar6 = -*(int *)(param_1 + 0xb4);
  }
  iVar6 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) + iVar6;
  if (*(char *)(param_1 + 0x75) == '\0') {
    iVar5 = *(int *)(param_1 + 0xb8);
  }
  else {
    iVar5 = -*(int *)(param_1 + 0xb8);
  }
  iVar5 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) + iVar5;
  *(short *)(param_1 + 0x68) = (short)((uint)iVar6 >> 0x10);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar5 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar6;
  *(short *)(param_1 + 0x6e) = (short)iVar5;
  if (*(int *)(param_1 + 0xb8) < 0) {
    local_10 = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
    if ((((byte)(local_10 + 0x4bU) < 3) || (local_10 == -0x37)) ||
       ((local_10 == -0x35 || (bVar1 = false, (byte)(local_10 + 0x23U) < 3)))) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        local_10 = 'e';
        bVar1 = false;
      }
    }
    if (!bVar1) {
      if (local_10 == '}') {
        return;
      }
      sVar4 = FUN_80059e3c(param_1,(int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
      puVar3 = PTR_Callback_8006b658_800a5ec4;
      uVar2 = null_FFFF0000h_800a5ec0;
      *(short *)(param_1 + 0x6a) = sVar4 + 0x40;
      *(undefined2 *)(param_1 + 0x6e) = 0;
      PlayerCallback_80066c24(param_1,uVar2,puVar3);
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x62) = 0;
    local_f = local_10;
    if (*(int *)(param_1 + 0x140) != 0) {
      RemoveEntityFromAllLists(g_GameStatePtr);
      *(undefined4 *)(param_1 + 0x140) = 0;
    }
  }
  else {
    local_f = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
    if (((((byte)(local_f + 0x4bU) < 3) || (local_f == -0x37)) || (local_f == -0x35)) ||
       (bVar1 = false, (byte)(local_f + 0x23U) < 3)) {
      if (*(char *)(param_1 + 0x128) == '\0') {
        bVar1 = true;
      }
      else {
        local_f = 'e';
        bVar1 = false;
      }
    }
    if (!bVar1) {
      if (local_f == '}') {
        return;
      }
      EntitySetState(param_1,null_FFFF0000h_800a5ef4,PTR_Callback_8006bc04_800a5ef8);
      return;
    }
    *(undefined1 *)(g_GameStatePtr + 0x62) = 0;
    if (*(int *)(param_1 + 0x140) != 0) {
      RemoveEntityFromAllLists(g_GameStatePtr);
      *(undefined4 *)(param_1 + 0x140) = 0;
    }
  }
  PlayerProcessBounceCollision(param_1,local_f);
  return;
}



void PlayerCallback_80066c24(void)

{
  EntitySetState();
  return;
}



void PlayerCallback_80066c40(int param_1)

{
  short sVar1;
  ushort uVar2;
  char cVar3;
  int iVar4;
  
  sVar1 = *(short *)(param_1 + 0x6a);
  uVar2 = *(ushort *)(param_1 + 0x6e);
  cVar3 = EntityApplyMovementCallbacks(param_1,(int)*(short *)(param_1 + 0x68));
  if (cVar3 == 'S') {
    iVar4 = *(int *)(param_1 + 0x110) + -0x5000;
    *(int *)(param_1 + 0x110) = iVar4;
    if (iVar4 < -0x80000) {
      *(undefined4 *)(param_1 + 0x110) = 0xfff80000;
    }
  }
  else {
    EntitySetState(param_1,null_FFFF0000h_800a5d30,PTR_PlayerStateCallback_2_800a5d34);
  }
  iVar4 = sVar1 * 0x10000 + (uint)uVar2 + *(int *)(param_1 + 0x110);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar4 >> 0x10);
  *(short *)(param_1 + 0x6e) = (short)iVar4;
  return;
}



void PlayerStateCallback_0(undefined4 *param_1)

{
  int iVar1;
  code *pcVar2;
  
  iVar1 = rand();
  *(byte *)((int)param_1 + 0x139) = ((byte)iVar1 & 0x7f) + 0x30;
  iVar1 = rand();
  *(ushort *)((int)param_1 + 0x13a) = ((ushort)iVar1 & 0xff) + 0x100;
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  pcVar2 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar2 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bad0;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar2;
  SetEntitySpriteId(param_1,0x48204012,1);
  return;
}



void PlayerCallback_80066e38(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bad0;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x48204012,1);
  return;
}



void Callback_80066f60(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x5900c41e,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerCallback_80066e38;
  return;
}



void Callback_800670bc(undefined4 *param_1)

{
  u_short uVar1;
  uint uVar2;
  code *pcVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  undefined1 uVar7;
  uint uVar8;
  
  iVar6 = 0x5900c41e;
  if (*(char *)(param_1 + 0x67) != '\0') {
    iVar6 = rand();
    uVar4 = (uint)*(byte *)(param_1 + 0x67);
    uVar8 = iVar6 % (int)uVar4;
    uVar7 = (undefined1)uVar8;
    if (uVar4 == 0) {
      trap(0x1c00);
    }
    if ((uVar4 == 0xffffffff) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    uVar2 = uVar8 & 0xff;
    if (uVar2 == *(byte *)((int)param_1 + 0x19d)) {
      uVar8 = uVar8 + 1;
      uVar7 = (undefined1)uVar8;
      uVar2 = uVar8 & 0xff;
      if (uVar4 <= (uVar8 & 0xff)) {
        uVar7 = 0;
        uVar2 = 0;
      }
    }
    iVar6 = param_1[uVar2 + 0x60];
    *(undefined1 *)((int)param_1 + 0x19d) = uVar7;
  }
  if (iVar6 == -0x2cfa2fbb) {
    iVar5 = param_1[0xd];
    uVar1 = GetTPage((uint)*(byte *)(iVar5 + 0x32),1,(int)*(short *)(iVar5 + 0x10) & 0xffffffc0,
                     (int)*(short *)(iVar5 + 0x12) & 0xffffff00);
    *(u_short *)(iVar5 + 0x24) = uVar1;
  }
  pcVar3 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar3 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bdb4;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cce0;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar3;
  SetEntitySpriteId(param_1,iVar6,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerCallback_80066e38;
  EntitySetCallback(param_1,null_FFFF0000h_800a5efc,PTR_Callback_800672f4_800a5f00);
  return;
}



void Callback_800672f4(int param_1)

{
  u_short uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x34);
  uVar1 = GetTPage((uint)*(byte *)(iVar2 + 0x32),0,(int)*(short *)(iVar2 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar2 + 0x12) & 0xffffff00);
  *(u_short *)(iVar2 + 0x24) = uVar1;
  iVar2 = *(int *)(param_1 + 0x1a0);
  if (iVar2 != 0) {
    *(undefined2 *)(iVar2 + 0x100) = 1;
    EntitySetRenderFlags(iVar2,1);
    *(undefined4 *)(param_1 + 0x1a0) = 0;
  }
  return;
}



// Player State: Walking/Running Right
// 
// Transition: From idle when right input detected
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (main tick)
// - +0x08/+0x0C: PlayerCallback_8005cc84 (secondary)
// - +0x104/+0x108: PlayerCallback_800638d0 (or 80062ad4 if +0x12C != 0)
// - +0x98/+0x9C: Callback_800678d4 (falling state - can lead to falling off edges)
// 
// Sprite: 0x292e8480 (same as running animation)
// Clears: +0x156 (unknown field)
// 
// Observed in trace at frames 601, 618, 641 (short walk bursts right)

void PlayerState_WalkingRight(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x156) = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fb18;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x292e8480,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerState_Falling;
  return;
}



// Player State: Walking Left (or Right, mirrored)
// 
// Transition: From idle when horizontal input detected
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (main tick)
// - +0x08/+0x0C: PlayerCallback_8005f540 (secondary)
// - +0x104/+0x108: PlayerCallback_800638d0 (or 80062ad4 if +0x12C != 0)
// - +0x98/+0x9C: PlayerStateCallback_0 (next state)
// 
// Sprite: 0x18298210 (walking animation)
// Clears: +0x156 (unknown field)
// 
// Observed in trace at frame 505 during left movement.

void PlayerState_WalkingLeft(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x156) = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005f540;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fb18;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x18298210,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



// Player State: Running (increased speed)
// 
// Transition: From walking when sustained horizontal input
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (main tick)  
// - +0x08/+0x0C: PlayerCallback_8005f540 (secondary, same as walk)
// - +0x104/+0x108: PlayerCallback_800638d0 (or 80062ad4 if +0x12C != 0)
// - +0x98/+0x9C: Callback_800678d4 (next state - different from walk!)
// 
// Sprite: 0x292e8480 (running animation)
// Clears: +0x156 (unknown field)
// Calls: FUN_8001d0c0(entity, 1) - unknown function
// 
// Observed in trace at frame 509 after continued left movement.

void PlayerState_Running(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x156) = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005f540;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fb18;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x292e8480,1);
  FUN_8001d0c0(param_1,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerState_Falling;
  return;
}



// Player State: Jump Apex (Top of Jump Arc)
// 
// Brief state at the peak of a jump before transitioning to falling.
// Observed at frames 2345, 2477 in trace.
// 
// Characteristics:
// - Sets vy to 0xffd8 (-40 in fixed point) at +0x136
// - Clears +0x156 (horizontal velocity modifier?)
// - Sets +0x135 to 1 (air state flag?)
// - Next state set to PlayerState_Falling @ 0x800678D4
// - Sprite: 0x88b9833c
// 
// This is the transition state when upward velocity becomes zero
// at the top of the jump arc, before gravity pulls player down.

void PlayerState_JumpApex(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  param_1[0x44] = 0;
  *(undefined2 *)((int)param_1 + 0x156) = 0;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fb18;
  if (param_1[0x4b] == 0) {
    pcVar1 = PlayerCallback_HandleMovementAndCollision;
  }
  else {
    pcVar1 = PlayerCallback_80062ad4;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  FUN_8001d0b0(param_1,0x88b9833c,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerState_Falling;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



// Player State: Falling/Airborne
// 
// Transition: From jump apex, or running off edge
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerCallback_8005bb80 (special falling tick, NOT PlayerTickCallback!)
// - +0x08/+0x0C: FUN_8005c1c4 (secondary, gravity/fall physics)
// - +0x104/+0x108: PlayerCallback_800638d0 (or 80062ad4 if +0x12C != 0)
// 
// Sprite: 0x0b2084d0 (falling/descending animation)
// 
// Special Logic:
// - If previous sprite was jump (0x092b8480 or 0x88B9833C): sets +0x156 = 0x0C
// - Otherwise: sets +0x156 = 0
// - Clears +0x110 field (twice in code)
// 
// Observed in trace at frames 653 (sprite change), 1059 (before jump), 1238 (post-pickup fall)

void PlayerState_Falling(undefined4 *param_1)

{
  code *pcVar1;
  
  param_1[0x44] = 0;
  if ((param_1[0x33] == 0x92b8480) || (param_1[0x33] == -0x77467cc4)) {
    *(undefined2 *)((int)param_1 + 0x156) = 0xc;
  }
  else {
    *(undefined2 *)((int)param_1 + 0x156) = 0;
  }
  param_1[0x44] = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bb80;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fd3c;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0xb2084d0,1);
  return;
}



void Callback_80067a34(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x282b8491,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



// Player State: Special Move Type 2
// 
// Very similar to SpecialMove1 (0x80068A0C) but differs in field initialization.
// Observed at frame 2479 in trace.
// 
// Differences from SpecialMove1:
// - Does NOT clear +0x44 (SpecialMove1 clears it)
// - Otherwise identical code structure
// 
// Characteristics:
// - Sets vy to 0xffd8 (-40) at +0x136
// - Sets +0x135 to 1
// - Clears +0x43 only
// - Sprite: 0x8d01c734
// - Same conditional callbacks as SpecialMove1
// - Next state: PlayerStateCallback_0
// 
// Part of the same movement sequence as SpecialMove1.

void PlayerState_SpecialMove2(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  param_1[0x43] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  if (param_1[0x4b] == 0) {
    pcVar1 = PlayerCallback_8006120c;
  }
  else {
    pcVar1 = PlayerCallback_80061934;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  FUN_8001d0b0(param_1,0x8d01c734,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



// Player State: Jump
// 
// Transition: From ground when X button pressed
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (main tick)
// - +0x08/+0x0C: FUN_8005c1c4 (secondary, jump physics)
// - +0x104/+0x108: PlayerCallback_800638d0 (or 80062ad4 if +0x12C != 0)
// 
// Sprite: 0x092b8480 (jump/ascending animation)
// Sets: +0x156 = 0x0C (jump parameter, affects apex detection)
// 
// Sound: Plays jump sound via FUN_8001c4a4(entity, 0x248e52)
// Stops previous sound: FUN_8007c7b8(entity[0x5D])
// State table: Calls FUN_8001ec18 with state params
// 
// Observed in trace at frames 731 (first jump), 1064 (second jump after death)

void PlayerState_Jump(undefined4 *param_1)

{
  undefined4 uVar1;
  code *pcVar2;
  
  FUN_8007c7b8(param_1[0x5d]);
  uVar1 = FUN_8001c4a4(param_1,0x248e52);
  param_1[0x5d] = uVar1;
  *(undefined2 *)((int)param_1 + 0x156) = 0xc;
  pcVar2 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar2 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005ff20;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar2;
  SetEntitySpriteId(param_1,0x92b8480,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f0c,PTR_Callback_80067f90_800a5f10);
  return;
}



void Callback_80067f90(int param_1)

{
  FUN_8007c7b8(*(undefined4 *)(param_1 + 0x174));
  *(undefined4 *)(param_1 + 0x174) = 0xffffffff;
  return;
}



void Callback_80067fc8(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x156) = 0xc;
  param_1[0x44] = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800600e0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x1e089010,1);
  FUN_8001d1f0(param_1,0x2421405);
  FUN_8001d170(param_1,0x70d006d8);
  FUN_8001d0c0(param_1,0);
  return;
}



void Callback_80068130(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x156) = 0xc;
  param_1[0x44] = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x1e089010,1);
  FUN_8001d0c0(param_1,0xe);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void Callback_800682a4(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_HandleMovementAndCollision;
  SetEntitySpriteId(param_1,0x4a298690,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80068514;
  return;
}



void EntityInitCallback_800683d4(undefined4 *param_1)

{
  *(undefined1 *)(param_1 + 0x5f) = 3;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005bf5c;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_HandleMovementAndCollision;
  SetEntitySpriteId(param_1,0x5a2082f2,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80068514;
  return;
}



void EntityInitCallback_80068514(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_HandleMovementAndCollision;
  SetEntitySpriteId(param_1,0xa08c490,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void PlayerStateCallback_2(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  
  uVar1 = 0x30000;
  if ((g_DefaultBGColorB & *(ushort *)param_1[0x40]) == 0) {
    uVar1 = 0x20000;
  }
  param_1[0x49] = uVar1 | 0x8000;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x46] = 0;
  param_1[0x45] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  if ((int)param_1[0x44] < -0x90000) {
    param_1[0x44] = 0xfff70000;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerEntityCollisionHandler;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x388110,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d0c0(param_1,0);
  iVar3 = param_1[0x4b];
  if (iVar3 != 0) {
    sVar4 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar4 = sVar4 >> 1;
    }
    iVar5 = (int)*(short *)(iVar3 + 10);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar6 = *(code **)(iVar3 + 0xc);
      }
      else {
        iVar2 = iVar5 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar6 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar3 + 8);
      if (0 < iVar5 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar6)(iVar3 + iVar2,0x1005,(int)sVar4,param_1);
    }
    param_1[0x4b] = 0;
  }
  return;
}



// Player State: Standing Idle
// 
// Transition: From movement states when no input or velocity stops
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (main tick)
// - +0x08/+0x0C: PlayerCallback_8005cc84 (secondary)
// - +0x104/+0x108: PlayerCallback_8006120c (or 80061934 if +0x12C != 0)
// - +0x98/+0x9C: PlayerStateCallback_0 (next state)
// 
// Sprite: 0x1c395196 (if +0xCC == 0x388110), else 0x3838801a
// 
// Observed in trace at frame 504 after movement input stopped.

void PlayerState_StandingIdle(undefined4 *param_1)

{
  code *pcVar1;
  undefined4 uVar2;
  
  uVar2 = 0x3838801a;
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  if (param_1[0x33] == 0x388110) {
    uVar2 = 0x1c395196;
  }
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,uVar2,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



// Player State: Special Move Type 1
// 
// Special move state with unique sprite and callbacks.
// Observed at frame 2473 in trace (single frame transition).
// 
// Characteristics:
// - Sets vy to 0xffd8 (-40) at +0x136
// - Sets +0x135 to 1 (air state flag)
// - Clears +0x43, +0x44
// - Sprite: 0x8d01c734
// - Conditional callbacks based on +0x4b:
//   * If +0x4b == 0: PlayerCallback_8006120c
//   * If +0x4b != 0: PlayerCallback_80061934
// - Next state: PlayerStateCallback_0
// 
// Context: Appeared briefly during a complex movement sequence
// between frames 2425-2505 involving multiple state transitions.

void PlayerState_SpecialMove1(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  if (param_1[0x4b] == 0) {
    pcVar1 = PlayerCallback_8006120c;
  }
  else {
    pcVar1 = PlayerCallback_80061934;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  FUN_8001d0b0(param_1,0x8d01c734,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



// Player State: Pickup Item (clayball collection)
// 
// Transition: From movement states when collision with pickup entity
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerCallback_8005bbac (special tick handler!)
// - +0x08/+0x0C: FUN_8005cf24 (secondary)
// - +0x104/+0x108: PlayerCallback_80064b40 (or 80064008 if +0x12C != 0)
// - +0x98/+0x9C: EntityInitCallback_80069600 (next state)
// 
// Sprite: 0x1c3aa013 (pickup animation)
// 
// Special Logic:
// - Sets g_GameStatePtr[0x60] = 1 (pickup flag?)
// - Velocity: 0x30000 (if bit match), else 0x20000, OR'd with 0x8000
// - Clears multiple entity fields: +0x11C, +0x11E, +0x11F, +0x120, +0x114, +0x118, +0x13C
// - Calls FUN_8001d0c0(entity, 1) if previous sprite was idle (0x1c395196/0x3838801a)
// - Calls FUN_8001ec18 with state table parameters
// 
// Observed in trace at frame 574 during clayball collection.
// IMPORTANT: This state may spam SetEntitySpriteId causing segfaults on rapid pickups!

void PlayerState_PickupItem(undefined4 *param_1)

{
  uint uVar1;
  code *pcVar2;
  
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  uVar1 = 0x30000;
  if ((g_DefaultBGColorB & *(ushort *)param_1[0x40]) == 0) {
    uVar1 = 0x20000;
  }
  param_1[0x49] = uVar1 | 0x8000;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x45] = 0;
  param_1[0x46] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  pcVar2 = PlayerCallback_80064b40;
  if (param_1[0x4b] != 0) {
    pcVar2 = PlayerCallback_80064008;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005cf24;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar2;
  SetEntitySpriteId(param_1,0x1c3aa013,1);
  if ((param_1[0x33] == 0x1c395196) || (param_1[0x33] == 0x3838801a)) {
    FUN_8001d0c0(param_1,1);
  }
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



// Player State: Landing From Ride (Dismount)
// 
// State for landing after riding an entity (vehicle/platform/creature).
// Observed at frame 1408 in trace.
// 
// Characteristics:
// - Sets GameState+0x60 to 1
// - Conditional max_vy based on background color flag:
//   * If g_DefaultBGColorB & entity+0x100: vy_max = 0x30000
//   * Else: vy_max = 0x20000
//   * Final: (vy_max | 0x8000) stored at +0x124
// - Sets +0x11c to 5 (landing timer?)
// - Sets +0x118 to 0xffffee00 (negative value)
// - Sets +0x110 to 0xfffa0000 (gravity/acceleration)
// - Sprite: 0x1c3aa013 (standard IdleLook sprite)
// 
// Entity Interaction (+0x4b):
// - If entity exists at +0x4b:
//   * Sends message 0x1005 to that entity
//   * Clears +0x4b (dismount)
// - This is the dismount notification
// 
// The entity at +0x4b is the ride/vehicle being dismounted from.
// Message 0x1005 likely tells it the player has dismounted.

void PlayerState_LandingFromRide(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  short in_t2;
  code *pcVar5;
  
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  uVar1 = 0x30000;
  if ((g_DefaultBGColorB & *(ushort *)param_1[0x40]) == 0) {
    uVar1 = 0x20000;
  }
  param_1[0x49] = uVar1 | 0x8000;
  iVar3 = param_1[0x4b];
  *(undefined1 *)(param_1 + 0x47) = 5;
  param_1[0x46] = 0xffffee00;
  param_1[0x45] = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x44] = 0xfffa0000;
  if (iVar3 != 0) {
    iVar4 = (int)*(short *)(iVar3 + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar3 + 0xc);
      }
      else {
        iVar2 = iVar4 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
        in_t2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar5 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar3 + 8);
      if (0 < iVar4 << 0x10) {
        iVar2 = in_t2 + iVar2;
      }
      (*pcVar5)(iVar3 + iVar2,0x1005,0,param_1);
    }
    param_1[0x4b] = 0;
  }
  *(undefined1 *)(param_1 + 0x4f) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x1c3aa013,1);
  FUN_8001d0c0(param_1,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



void Callback_80068f80(undefined4 *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd9;
  uVar1 = 0x30000;
  if ((g_DefaultBGColorB & *(ushort *)param_1[0x40]) == 0) {
    uVar1 = 0x20000;
  }
  param_1[0x49] = uVar1 | 0x8000;
  *(undefined1 *)(param_1 + 0x47) = 5;
  param_1[0x46] = 0xffffee00;
  param_1[0x45] = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  param_1[0x44] = param_1[0x44] + -0x60000;
  if ((int)param_1[0x44] < -0x90000) {
    param_1[0x44] = 0xfff70000;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d25c;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  FUN_8001d0b0(param_1,0xc8099196,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f1c,PTR_Callback_800691e8_800a5f20);
  iVar3 = param_1[0x4b];
  if (iVar3 != 0) {
    sVar4 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar4 = sVar4 >> 1;
    }
    iVar5 = (int)*(short *)(iVar3 + 10);
    if (iVar5 != 0) {
      if (iVar5 < 1) {
        pcVar6 = *(code **)(iVar3 + 0xc);
      }
      else {
        iVar2 = iVar5 * 8 + *(int *)(iVar3 + *(short *)(iVar3 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar6 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar3 + 8);
      if (0 < iVar5 << 0x10) {
        iVar2 = unaff_s2 + iVar2;
      }
      (*pcVar6)(iVar3 + iVar2,0x1005,(int)sVar4,param_1);
    }
    param_1[0x4b] = 0;
  }
  return;
}



void Callback_800691d8(void)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  return;
}



void Callback_800691e8(int param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  *(undefined1 *)(param_1 + 0x135) = 0;
  return;
}



void Callback_80069200(undefined4 *param_1)

{
  undefined1 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  short sVar5;
  int iVar6;
  uint uVar7;
  short in_t0;
  code *pcVar8;
  
  iVar4 = param_1[0x4b];
  if (iVar4 != 0) {
    sVar5 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar5 = sVar5 >> 1;
    }
    iVar6 = (int)*(short *)(iVar4 + 10);
    if (iVar6 != 0) {
      if (iVar6 < 1) {
        pcVar8 = *(code **)(iVar4 + 0xc);
      }
      else {
        iVar2 = iVar6 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
        in_t0 = (short)*(undefined4 *)(iVar2 + -8);
        pcVar8 = *(code **)(iVar2 + -4);
      }
      iVar2 = (int)*(short *)(iVar4 + 8);
      if (0 < iVar6 << 0x10) {
        iVar2 = in_t0 + iVar2;
      }
      (*pcVar8)(iVar4 + iVar2,0x1005,(int)sVar5,param_1);
    }
    param_1[0x4b] = 0;
  }
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  uVar3 = (uint)*(byte *)(param_1 + 0x59) % 3;
  *(char *)(param_1 + 0x59) = (char)uVar3;
  if (uVar3 == 0) {
    uVar7 = 0x1cf90000;
  }
  else {
    uVar7 = 0x1ef99931;
    if (uVar3 != 1) goto EntityInitCallback_8006931c;
    uVar7 = 0x1df90000;
  }
  uVar7 = uVar7 | 0x9931;
EntityInitCallback_8006931c:
  if (*(char *)(param_1 + 0x4f) == '\0') {
    *(undefined1 *)(param_1 + 0x47) = 0;
    *(undefined1 *)((int)param_1 + 0x11d) = 5;
  }
  else {
    uVar1 = 5;
    if (*(char *)(param_1 + 0x59) == '\x02') {
      uVar1 = 10;
    }
    *(undefined1 *)(param_1 + 0x47) = uVar1;
    *(undefined1 *)((int)param_1 + 0x11d) = 0;
  }
  param_1[0x46] = 0xffffee00;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x45] = 0;
  param_1[0x44] = 0xfffa0000;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800605d8;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,uVar7,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_800694ac;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



void EntityInitCallback_8006931c(void)

{
  undefined1 uVar1;
  undefined4 *unaff_s1;
  undefined4 uStack00000014;
  code *pcStack00000018;
  undefined4 uStack0000001c;
  code *pcStack00000020;
  undefined4 uStack00000024;
  code *pcStack00000028;
  undefined4 uStack0000002c;
  code *pcStack00000030;
  undefined4 uStack0000003c;
  code *pcStack00000040;
  
  if (*(char *)(unaff_s1 + 0x4f) == '\0') {
    *(undefined1 *)(unaff_s1 + 0x47) = 0;
    *(undefined1 *)((int)unaff_s1 + 0x11d) = 5;
  }
  else {
    uVar1 = 5;
    if (*(char *)(unaff_s1 + 0x59) == '\x02') {
      uVar1 = 10;
    }
    *(undefined1 *)(unaff_s1 + 0x47) = uVar1;
    *(undefined1 *)((int)unaff_s1 + 0x11d) = 0;
  }
  unaff_s1[0x46] = 0xffffee00;
  *(undefined1 *)((int)unaff_s1 + 0x11e) = 0;
  *(undefined1 *)((int)unaff_s1 + 0x11f) = 0;
  unaff_s1[0x48] = 0;
  unaff_s1[0x45] = 0;
  unaff_s1[0x44] = 0xfffa0000;
  *(undefined1 *)(unaff_s1 + 0x4f) = 0;
  uStack00000014 = 0xffff0000;
  pcStack00000018 = PlayerCallback_8005bbac;
  uStack0000001c = 0xffff0000;
  pcStack00000020 = PlayerCallback_8005cec8;
  uStack00000024 = 0xffff0000;
  pcStack00000028 = PlayerCallback_800605d8;
  uStack0000002c = 0xffff0000;
  pcStack00000030 = PlayerCallback_800650c4;
  *unaff_s1 = 0xffff0000;
  unaff_s1[1] = PlayerCallback_8005bbac;
  unaff_s1[2] = 0xffff0000;
  unaff_s1[3] = PlayerCallback_8005cec8;
  unaff_s1[0x41] = 0xffff0000;
  unaff_s1[0x42] = PlayerCallback_800605d8;
  uStack0000003c = 0xffff0000;
  pcStack00000040 = PlayerCallback_800650c4;
  unaff_s1[7] = 0xffff0000;
  unaff_s1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId();
  uStack00000014 = 0xffff0000;
  pcStack00000018 = EntityInitCallback_800694ac;
  unaff_s1[0x26] = 0xffff0000;
  unaff_s1[0x27] = EntityInitCallback_800694ac;
  EntitySetCallback();
  return;
}



void EntityInitCallback_800694ac(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerEntityCollisionHandler;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x1c3aa013,1);
  EntitySetRenderFlags(param_1,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



void EntityInitCallback_80069600(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerEntityCollisionHandler;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x1c3aa013,1);
  EntitySetRenderFlags(param_1,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



// Player State: Special Idle Animation
// 
// A variant of IdleLook with a different sprite and GameState flag.
// Observed at frame 2425 in trace.
// 
// Characteristics:
// - Sets GameState+0x60 to 1 (global flag)
// - Sets vy to 0xffd9 (-39) at +0x136
// - Sets +0x135 to 1
// - Clears +0x4d
// - Uses IdleLook callback @ 0x8005bbac
// - Sprite: 0xc8099196 (different from normal IdleLook)
// - Callback table: 0x800A5F1C (different from normal)
// 
// This appears to be a special idle state with a different animation,
// possibly triggered during specific movement sequences or conditions.

void PlayerState_SpecialIdleAnim(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd9;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *(undefined1 *)(param_1 + 0x4d) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d25c;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0xc8099196,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f1c,PTR_Callback_800691e8_800a5f20);
  return;
}



void Callback_800698b8(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *(undefined1 *)(param_1 + 0x4d) = 0;
  param_1[0x43] = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x8d01c734,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



void Callback_80069a3c(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *(undefined1 *)(param_1 + 0x4d) = 0;
  pcVar1 = PlayerCallback_HandleMovementAndCollision;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80062ad4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005fb18;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x88b9833c,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerState_Falling;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



void Callback_80069bbc(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffe9;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *(undefined1 *)(param_1 + 0x4d) = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060890;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0xd02dc3d5,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006a818;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



void Callback_80069d3c(int param_1)

{
  *(undefined1 *)(param_1 + 0x135) = 0;
  return;
}



void Callback_80069ea4(int param_1)

{
  FUN_8001d1c0(param_1,(int)*(short *)(param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(g_GameStatePtr + 0x144) = 1;
  *(undefined1 *)(param_1 + 0x159) = 1;
  return;
}



void Callback_80069ef4(undefined4 *param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  *(undefined1 *)(g_GameStatePtr + 0x170) = 0;
  *(undefined1 *)(param_1 + 0x5e) = 1;
  FUN_8007c7b8(param_1[0x5d]);
  uVar2 = PlaySoundEffect(0x4810c2c4,0xa0,0);
  iVar1 = g_GameStatePtr;
  param_1[0x5d] = uVar2;
  param_1[0x14] = 0x30000;
  param_1[0x15] = 0x30000;
  param_1[0x16] = 0x10000;
  param_1[0x17] = 0x10000;
  *(undefined1 *)(iVar1 + 0x144) = 1;
  param_1[9] = 0xffff0000;
  param_1[10] = EntityCallback_8001a2cc;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = EntityCallback_8001a2e8;
  *(undefined2 *)(param_1 + 0x1a) = 0xa0;
  *(undefined2 *)((int)param_1 + 0x6a) = 0x78;
  *(undefined1 *)(param_1 + 0x4a) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbe0;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d404;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  SetEntitySpriteId(param_1,0x1e28e0d4,1);
  *(undefined1 *)(param_1 + 0x56) = 1;
  return;
}



// Player State: Death
// 
// Transition: From damage when health depleted
// 
// Entity Callbacks Set:
// - +0x00/+0x04: PlayerTickCallback (normal tick)
// - +0x08/+0x0C: PlayerCallback_8005d404 (death secondary)
// - +0x104/+0x108: PlayerCallback_80061180 (position update ONLY, no collision!)
// - Clears +0x104/+0x108 by setting to 0 (disables movement processing)
// 
// Sprite: 0x1b301085 (death/explosion animation)
// 
// Special Logic:
// - Sets g_GameStatePtr[0x170] = 0 (global death flag?)
// - Sets +0x178 = 1 (entity death flag)
// - Sets +0x128 = 0 (clear field)
// - Sets +0x158 = 1 (render/visible flag)
// - Updates sprite texture page via GetTPage
// 
// Observed in trace at frame 814 after collision with enemy type 25 (monkey)
// 
// NOTE: After death, player respawns via PlayerStateCallback_2 (0x8006864C)

void PlayerState_Death(undefined4 *param_1)

{
  u_short uVar1;
  int iVar2;
  
  *(undefined1 *)(g_GameStatePtr + 0x170) = 0;
  iVar2 = param_1[0xd];
  *(undefined1 *)(param_1 + 0x5e) = 1;
  uVar1 = GetTPage((uint)*(byte *)(iVar2 + 0x32),1,(int)*(short *)(iVar2 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar2 + 0x12) & 0xffffff00);
  *(u_short *)(iVar2 + 0x24) = uVar1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d404;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = ApplyEntityPositionUpdate;
  SetEntitySpriteId(param_1,0x1b301085,1);
  *(undefined1 *)(param_1 + 0x4a) = 0;
  *(undefined1 *)(param_1 + 0x56) = 1;
  return;
}



// Player State: Level Exit Teleporter (NOT Checkpoint)
// 
// This state is triggered when the player activates the level exit teleporter,
// typically at the end of a stage. This is DIFFERENT from Ma-Bird checkpoints.
// 
// Ma-Bird Checkpoints:
// - Save progress for death respawn
// - Do NOT teleport the player
// - PickupItem event (state 0x80068B48)
// 
// Level Exit Teleporter (THIS function):
// - Teleports player to stage exit point
// - Triggers level reload sequence
// - Does NOT create a death respawn point
// 
// Sequence observed in trace (frame 3810-4216):
// 1. Player reaches teleporter at (6739, 667)
// 2. Transition to this state (0x8006A214)
// 3. Locks player in cutscene (EntityUpdateCallback @ 0x8001CB88) for ~160 frames
// 4. StopCDStreaming() called
// 5. Clears entity callbacks except EntityUpdateCallback
// 6. Level reload triggered (same level PHRO Stage 1)
// 7. SpawnEntities places player at exit point (632, 927)
// 8. Transition to PlayerState_CheckpointExit @ 0x8006A3F8
// 9. Return to normal gameplay (IdleLook)
// 
// Fields modified:
// - +0x1B2: Set to 1 (teleporter active flag?)
// - +0x5A: Linked entity reference (teleporter entity?)
// - Entity at +0x5A gets flag at +0x2C set to 1
// - Clears +0x4A, +0x43, +0x44

void PlayerState_LevelExitTeleporter(undefined4 *param_1)

{
  *(undefined1 *)((int)param_1 + 0x1b2) = 1;
  StopCDStreaming();
  if (param_1[0x5a] != 0) {
    *(undefined1 *)(param_1[0x5a] + 0x2c) = 1;
    param_1[0x5a] = 0;
  }
  *(undefined1 *)(param_1 + 0x4a) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  FUN_8001d1c0(param_1,(int)*(short *)((int)param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  return;
}



void PlayerStateCallback_1(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined *puVar2;
  
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005be6c;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  FUN_8001d1c0(param_1,(int)*(short *)((int)param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  puVar2 = PTR_Callback_800691d8_800a5f18;
  uVar1 = null_FFFF0000h_800a5f14;
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  EntitySetCallback(param_1,uVar1,puVar2);
  return;
}



// Player State: Checkpoint Exit Transition
// 
// This state is triggered after the checkpoint teleport sequence completes.
// Observed at frame 4215 in trace - immediately after level reload finishes.
// 
// Sequence:
// 1. Level reload completes (frame 4046-4120)
// 2. SpawnEntities places player at exit position (632, 927)
// 3. This state transitions player back to normal gameplay
// 4. Restores normal player callbacks (IdleLook @ 0x8005BBAC)
// 5. Sets sprite to 0x8208902 (exit animation)
// 6. Calls FUN_8001ec18 with callback table @ 0x800A5F18
// 7. Sets flags at GameState+0x60 and entity+0xD+10
// 
// This is the "teleporter exit cutscene" state - briefly locks player
// while showing exit animation, then returns to IdleLook.

void PlayerState_CheckpointExit(undefined4 *param_1)

{
  param_1[0x49] = 0x28000;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x45] = 0;
  param_1[0x46] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *(undefined1 *)(param_1[0xd] + 10) = 1;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x8208902,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  return;
}



void Callback_8006a584(undefined4 *param_1)

{
  code *pcVar1;
  
  param_1[0x43] = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060890;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0xa3a4051,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006a818;
  return;
}



void Callback_8006a6e4(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffe9;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060890;
  if (param_1[0x4b] == 0) {
    pcVar1 = PlayerCallback_8006120c;
  }
  else {
    pcVar1 = PlayerCallback_80061934;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  FUN_8001d0b0(param_1,0xd02dc3d5,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006a818;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



void EntityInitCallback_8006a818(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005c1c4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060890;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0xe0ac230,1);
  return;
}



void Callback_8006a940(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060890;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0xaabc010,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006a818;
  return;
}



void Callback_8006aa9c(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cc84;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x1a28c11a,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void Callback_8006abf8(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined2 *)((int)param_1 + 0x136) = 0xffd8;
  *(undefined1 *)((int)param_1 + 0x135) = 1;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005d0c8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  if (param_1[0x4b] == 0) {
    pcVar1 = PlayerCallback_8006120c;
  }
  else {
    pcVar1 = PlayerCallback_80061934;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  FUN_8001d0b0(param_1,0x8d01c734,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f04,PTR_Callback_80069d3c_800a5f08);
  return;
}



// Primary Bounce Callback (Collision 0xDE)
// 
// Sets bounce state variables and upward velocity, then calls
// PlayerSetupBounceAnimation to handle animation and special effects.
// 
// Player Entity Updates:
//   +0x11c = 8
//   +0x11e = 8
//   +0x11f = 8
//   +0x120 = 0
//   +0x110 = 0xFFFDC000 (upward velocity, fixed-point)
// 
// Velocity: 0xFFFDC000 = -0x24000 = negative (upward) bounce impulse

void PlayerBounceCallback_Primary(int param_1)

{
  *(undefined1 *)(param_1 + 0x11c) = 8;
  *(undefined1 *)(param_1 + 0x11e) = 8;
  *(undefined4 *)(param_1 + 0x120) = 0;
  *(undefined4 *)(param_1 + 0x110) = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



void Callback_8006ad70(int param_1)

{
  *(undefined1 *)(param_1 + 0x11c) = 8;
  *(undefined1 *)(param_1 + 0x11e) = 8;
  *(undefined1 *)(param_1 + 0x74) = 1;
  *(undefined4 *)(param_1 + 0x120) = 0x28000;
  *(undefined4 *)(param_1 + 0x110) = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



void Callback_8006adbc(int param_1)

{
  *(undefined1 *)(param_1 + 0x11c) = 4;
  *(undefined1 *)(param_1 + 0x11e) = 4;
  *(undefined1 *)(param_1 + 0x74) = 1;
  *(undefined4 *)(param_1 + 0x120) = 0x28000;
  *(undefined4 *)(param_1 + 0x110) = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x11f) = 10;
  PlayerSetupBounceAnimation();
  return;
}



void PlayerStateCallback_3(int param_1)

{
  *(undefined1 *)(param_1 + 0x74) = 1;
  *(undefined1 *)(param_1 + 0x11c) = 0;
  *(undefined1 *)(param_1 + 0x11e) = 0;
  *(undefined4 *)(param_1 + 0x120) = 0x28000;
  *(undefined4 *)(param_1 + 0x110) = 0x24000;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



void Callback_8006ae58(int param_1)

{
  *(undefined4 *)(param_1 + 0x110) = 0x24000;
  *(undefined1 *)(param_1 + 0x11c) = 0;
  *(undefined1 *)(param_1 + 0x11e) = 0;
  *(undefined4 *)(param_1 + 0x120) = 0;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



void Callback_8006ae94(int param_1)

{
  *(undefined4 *)(param_1 + 0x110) = 0x24000;
  *(undefined1 *)(param_1 + 0x11c) = 0;
  *(undefined1 *)(param_1 + 0x11e) = 0;
  *(undefined1 *)(param_1 + 0x74) = 0;
  *(undefined4 *)(param_1 + 0x120) = 0xfffd8000;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



// Player State: Quick Turn Around
// 
// Brief state for turning around quickly.
// Observed at frame 3142 in trace.
// 
// Characteristics:
// - Sets +0x11c to 4
// - Sets +0x11e to 4
// - Clears +0x74 (facing_left flag - turn direction reset?)
// - Sets +0x120 to 0xfffd8000
// - Sets +0x110 to 0xfffdc000
// - Sets +0x11f to 10
// - Calls FUN_8006af70() (likely turn animation setup)
// 
// This is a very short function suggesting a brief transitional state.
// The clearing of +0x74 and the call to another function suggest
// this handles the mechanics of turning around.

void PlayerState_QuickTurn(int param_1)

{
  *(undefined1 *)(param_1 + 0x11c) = 4;
  *(undefined1 *)(param_1 + 0x11e) = 4;
  *(undefined1 *)(param_1 + 0x74) = 0;
  *(undefined4 *)(param_1 + 0x120) = 0xfffd8000;
  *(undefined4 *)(param_1 + 0x110) = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x11f) = 10;
  PlayerSetupBounceAnimation();
  return;
}



void Callback_8006af28(int param_1)

{
  *(undefined1 *)(param_1 + 0x11c) = 8;
  *(undefined1 *)(param_1 + 0x11e) = 8;
  *(undefined1 *)(param_1 + 0x74) = 0;
  *(undefined4 *)(param_1 + 0x120) = 0xfffd8000;
  *(undefined4 *)(param_1 + 0x110) = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x11f) = 8;
  PlayerSetupBounceAnimation();
  return;
}



// Bounce Animation & Triple-Bounce Handler
// 
// Main bounce setup function that:
// 1. Applies damage/interaction to bounced entity (if entity collision)
// 2. Sets bounce animation sprite (0x393c80c2)
// 3. Handles triple-bounce special effect via g_pPlayerState[0x17] bit 0
// 
// Triple-Bounce Mechanism:
//   - Normal bounces: g_pPlayerState[0x17] & 1 == 1
//   - After 3 bounces: bit 0 cleared
//   - Next bounce: Special animation path triggered
//     - Sets entity+0x5e = 1
//     - Calls special callback PTR_Callback_8006b2dc_800a5f28
//     - Plays special sound effect
// 
// Player Entity Updates:
//   +0x128 (0x4a) = 0x78
//   +0x10C (0x43) = 0
//   +0x124 (0x49) = 0x28000
//   +0x114 (0x45) = 0
//   +0x118 (0x46) = 0
//   +0x13C (0x4f) = 0
//   +0x12C (0x4b) = 0 (cleared after entity interaction)
// 
// Global State:
//   g_GameStatePtr+0x60 = 1
// 
// Bounced Entity Interaction:
//   If player_entity[0x4b] != 0:
//     - Reads damage from player_entity[0x44]
//     - Halves damage if player_entity[0x16] == 0x8000
//     - Calls entity callback with opcode 0x1005
//     - Clears player_entity[0x4b] reference

void PlayerSetupBounceAnimation(undefined4 *param_1)

{
  int iVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  short in_t2;
  code *pcVar5;
  
  *(undefined1 *)(param_1 + 0x4a) = 0x78;
  iVar4 = g_GameStatePtr;
  param_1[0x43] = 0;
  *(undefined1 *)(iVar4 + 0x60) = 1;
  iVar4 = param_1[0x4b];
  param_1[0x49] = 0x28000;
  param_1[0x45] = 0;
  param_1[0x46] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  if (iVar4 != 0) {
    sVar2 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar2 = sVar2 >> 1;
    }
    iVar3 = (int)*(short *)(iVar4 + 10);
    if (iVar3 != 0) {
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar4 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
        in_t2 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar4 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = in_t2 + iVar1;
      }
      (*pcVar5)(iVar4 + iVar1,0x1005,(int)sVar2,param_1);
    }
    param_1[0x4b] = 0;
  }
  if ((g_pPlayerState[0x17] & 1) == 0) {
    *(undefined1 *)(param_1 + 0x5e) = 1;
    *param_1 = 0xffff0000;
    param_1[1] = PlayerCallback_8005bbac;
    param_1[2] = 0xffff0000;
    param_1[3] = PlayerCallback_8005c0a0;
    param_1[0x41] = 0;
    param_1[0x42] = 0;
    param_1[7] = 0xffff0000;
    param_1[8] = PlayerCallback_800650c4;
    SetEntitySpriteId(param_1,0x393c80c2,1);
    EntitySetCallback(param_1,null_FFFF0000h_800a5f24,PTR_Callback_8006b2dc_800a5f28);
    param_1[0x26] = 0xffff0000;
    param_1[0x27] = Callback_80069ea4;
  }
  else {
    g_pPlayerState[0x17] = g_pPlayerState[0x17] & 0xfe;
    *param_1 = 0xffff0000;
    param_1[1] = PlayerCallback_8005bbac;
    param_1[2] = 0xffff0000;
    param_1[3] = PlayerCallback_8005cec8;
    param_1[0x41] = 0xffff0000;
    param_1[0x42] = PlayerCallback_800602e0;
    param_1[7] = 0xffff0000;
    param_1[8] = PlayerCallback_800650c4;
    SetEntitySpriteId(param_1,0x393c80c2,1);
    param_1[0x26] = 0xffff0000;
    param_1[0x27] = EntityInitCallback_80069600;
    EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  }
  return;
}



void Callback_8006b2dc(undefined4 param_1)

{
  EntitySetState(param_1,null_FFFF0000h_800a5f2c,PTR_Callback_80069ea4_800a5f30);
  return;
}



void EntityInitCallback_8006b304(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005ca60;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060a5c;
  param_1[7] = 0;
  param_1[8] = 0;
  SetEntitySpriteId(param_1,0x708a4a0,1);
  return;
}



void Callback_8006b3f8(undefined4 *param_1)

{
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005ca60;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060c9c;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_80066990;
  SetEntitySpriteId(param_1,0x52aa082,1);
  return;
}



void Callback_8006b4f4(undefined4 *param_1)

{
  undefined4 uVar1;
  
  FUN_8007c7b8(param_1[0x5d]);
  uVar1 = PlaySoundEffect(0x421586c2,0xa0,0);
  param_1[0x5d] = uVar1;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_8005ca60;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060c9c;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_80066990;
  SetEntitySpriteId(param_1,0x8569a090,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f34,PTR_Callback_8006b634_800a5f38);
  return;
}



void Callback_8006b634(int param_1)

{
  FUN_8007c7b8(*(undefined4 *)(param_1 + 0x174));
  return;
}



void Callback_8006b658(undefined4 *param_1)

{
  if (param_1[0x33] == -0x7a965f70) {
    *param_1 = 0xffff0000;
    param_1[1] = PlayerTickCallback;
    param_1[2] = 0xffff0000;
    param_1[3] = FUN_8005ca60;
    param_1[0x41] = 0xffff0000;
    param_1[0x42] = PlayerCallback_80060a5c;
    param_1[7] = 0;
    param_1[8] = 0;
    SetEntitySpriteId(param_1,0x708a4a0,1);
  }
  else {
    param_1[7] = 0;
    param_1[8] = 0;
    param_1[2] = 0xffff0000;
    param_1[3] = PlayerCallback_8005f3d4;
    param_1[0x41] = 0xffff0000;
    param_1[0x42] = PlayerCallback_80060a5c;
    param_1[0x26] = 0xffff0000;
    param_1[0x27] = EntityInitCallback_8006b304;
  }
  return;
}



void Callback_8006b7f8(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  
  if (param_1[0x50] == 0) {
    uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
    uVar2 = FUN_8006dae8(uVar1,param_1);
    uVar1 = g_GameStatePtr;
    param_1[0x50] = uVar2;
    AddEntityToSortedRenderList(uVar1);
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005f3d4;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060a5c;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_80066990;
  SetEntitySpriteId(param_1,0x628a800,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006b304;
  return;
}



void Callback_8006b974(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  short sVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  
  *(undefined1 *)(g_GameStatePtr + 0x62) = 0;
  if (param_1[0x50] != 0) {
    RemoveEntityFromAllLists(g_GameStatePtr);
    param_1[0x50] = 0;
  }
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *(undefined1 *)(param_1 + 0x47) = 10;
  *(undefined1 *)((int)param_1 + 0x11e) = 3;
  param_1[0x49] = 0x28000;
  param_1[0x45] = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x46] = 0xffffb400;
  param_1[0x44] = 0xfffdc000;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x1c3aa013,1);
  FUN_8001d0f0(param_1,0x1a800898);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f14,PTR_Callback_800691d8_800a5f18);
  iVar2 = param_1[0x4b];
  if (iVar2 != 0) {
    sVar3 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar3 = sVar3 >> 1;
    }
    iVar4 = (int)*(short *)(iVar2 + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar4 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar4 << 0x10) {
        iVar1 = unaff_s2 + iVar1;
      }
      (*pcVar5)(iVar2 + iVar1,0x1005,(int)sVar3,param_1);
    }
    param_1[0x4b] = 0;
  }
  return;
}



void Callback_8006bc04(undefined4 *param_1)

{
  uint uVar1;
  
  uVar1 = 0x30000;
  if ((g_DefaultBGColorB & *(ushort *)param_1[0x40]) == 0) {
    uVar1 = 0x20000;
  }
  param_1[0x49] = uVar1 | 0x8000;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x46] = 0;
  param_1[0x45] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  if ((int)param_1[0x44] < -0x90000) {
    param_1[0x44] = 0xfff70000;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005f430;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x8524a880,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f3c,PTR_Callback_8006bd80_800a5f40);
  return;
}



void Callback_8006bd80(int param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x62) = 0;
  if (*(int *)(param_1 + 0x140) != 0) {
    RemoveEntityFromAllLists(g_GameStatePtr);
    *(undefined4 *)(param_1 + 0x140) = 0;
  }
  return;
}



void Callback_8006bdd4(undefined4 *param_1)

{
  code *pcVar1;
  
  param_1[0x43] = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005daa4;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x4084011,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void Callback_8006bf2c(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x149) = 1;
  param_1[0x49] = 0x28000;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined1 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11f) = 0;
  param_1[0x48] = 0;
  param_1[0x45] = 0;
  param_1[0x46] = 0;
  *(undefined1 *)(param_1 + 0x4f) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005dde0;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = ApplyEntityPositionUpdate;
  SetEntitySpriteId(param_1,0x1e1000b3,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f44,PTR_Callback_8006c0ac_800a5f48);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  return;
}



void Callback_8006c0ac(int param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x149) = 0;
  if (*(char *)(param_1 + 0x128) == '\0') {
    *(undefined1 *)(param_1 + 0x128) = 1;
  }
  return;
}



void Callback_8006c0d8(undefined4 *param_1)

{
  code *pcVar1;
  
  FUN_80022f24(g_GameStatePtr,0x40,0x1018,0,param_1);
  *(undefined1 *)(g_GameStatePtr + 0x149) = 1;
  param_1[0x43] = 0;
  *(undefined1 *)((int)param_1 + 0x179) = 0;
  *(undefined1 *)((int)param_1 + 0x17a) = 0;
  *(undefined1 *)((int)param_1 + 0x17b) = 0;
  pcVar1 = PlayerCallback_8006187c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_800625b4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005e574;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x6c22083a,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f4c,PTR_Callback_8006c278_800a5f50);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_800683d4;
  return;
}



void Callback_8006c278(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  undefined4 unaff_s2;
  code *pcVar5;
  
  for (piVar4 = *(int **)(g_GameStatePtr + 0x24); piVar4 != (int *)0x0; piVar4 = (int *)*piVar4) {
    iVar2 = piVar4[1];
    if (((*(ushort *)(iVar2 + 0x12) & 4) != 0) && (iVar3 = (int)*(short *)(iVar2 + 10), iVar3 != 0))
    {
      if (iVar3 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar3 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s2 = *(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar3 << 0x10) {
        iVar1 = (short)unaff_s2 + iVar1;
      }
      (*pcVar5)(iVar2 + iVar1,0x1002,0,param_1);
    }
  }
  g_pPlayerState[0x16] = g_pPlayerState[0x16] + -1;
  *(undefined1 *)(g_GameStatePtr + 0x149) = 0;
  if (*(char *)(param_1 + 0x128) == '\0') {
    *(undefined1 *)(param_1 + 0x128) = 1;
  }
  return;
}



void Callback_8006c3ac(undefined4 *param_1)

{
  code *pcVar1;
  
  *(undefined1 *)(g_GameStatePtr + 0x149) = 1;
  param_1[0x43] = 0;
  pcVar1 = PlayerCallback_8006187c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_800625b4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005e170;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x1c8c2437,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006c514;
  return;
}



void EntityInitCallback_8006c514(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006187c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_800625b4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005e170;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x3838801a,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006c668;
  return;
}



void EntityInitCallback_8006c668(undefined4 *param_1)

{
  code *pcVar1;
  
  pcVar1 = PlayerCallback_8006187c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_800625b4;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005e450;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x48204012,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f54,PTR_Callback_8006c7cc_800a5f58);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void Callback_8006c7cc(int param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x149) = 0;
  if (*(char *)(param_1 + 0x128) == '\0') {
    *(undefined1 *)(param_1 + 0x128) = 1;
  }
  return;
}



void EntityInitCallback_8006c7f8(undefined4 *param_1)

{
  code *pcVar1;
  
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  pcVar1 = PlayerCallback_8006120c;
  if (param_1[0x4b] != 0) {
    pcVar1 = PlayerCallback_80061934;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005c0a0;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_8005f834;
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar1;
  SetEntitySpriteId(param_1,0x392cb014,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = PlayerStateCallback_0;
  return;
}



void Callback_8006c95c(undefined4 *param_1)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  short sVar6;
  int iVar7;
  short unaff_s2;
  code *pcVar8;
  
  FUN_8007eed8(g_GameStatePtr);
  RemoveEntityFromAllLists(g_GameStatePtr,param_1[0x53]);
  *(undefined1 *)(param_1 + 0x4a) = 0x78;
  param_1[0x53] = 0;
  *(undefined2 *)(param_1 + 0x1a) = *(undefined2 *)((int)param_1 + 0x146);
  *(undefined2 *)((int)param_1 + 0x6a) = *(undefined2 *)(param_1 + 0x52);
  if (*(char *)((int)param_1 + 0x1ae) == '\0') {
    *(undefined1 *)((int)param_1 + 0x15d) = *(undefined1 *)(param_1 + 0x54);
    *(undefined1 *)((int)param_1 + 0x15e) = *(undefined1 *)((int)param_1 + 0x151);
    *(undefined1 *)((int)param_1 + 0x15f) = *(undefined1 *)((int)param_1 + 0x152);
  }
  g_pPlayerState[0x18] = *(undefined1 *)(param_1 + 0x55);
  uVar3 = 0x8000;
  if (g_pPlayerState[0x18] == '\0') {
    uVar3 = *(undefined4 *)(g_GameStatePtr + 0x11c);
  }
  param_1[0x16] = uVar3;
  param_1[0x17] = uVar3;
  param_1[0x14] = uVar3;
  param_1[0x15] = uVar3;
  *(undefined1 *)((int)param_1 + 0x1b3) = *(undefined1 *)((int)param_1 + 0x153);
  SetGameMode(*(undefined1 *)((int)param_1 + 0x153));
  FUN_80025664(g_GameStatePtr,*(undefined1 *)((int)param_1 + 0x1aa));
  FUN_800256b8(g_GameStatePtr,*(undefined1 *)(param_1 + 0x6b));
  iVar4 = g_GameStatePtr;
  *(undefined2 *)((int)param_1 + 0x1a6) = *(undefined2 *)((int)param_1 + 0x1aa);
  *(undefined2 *)(param_1 + 0x6a) = *(undefined2 *)(param_1 + 0x6b);
  UpdateCameraPosition(iVar4,0,0);
  *(undefined1 *)(param_1[0xd] + 0x38) = 0;
  *(undefined1 *)((int)param_1 + 0x15b) = *(undefined1 *)((int)param_1 + 0x15e);
  *(undefined1 *)((int)param_1 + 0x15a) = *(undefined1 *)((int)param_1 + 0x15d);
  iVar4 = param_1[0xd];
  uVar1 = *(undefined1 *)((int)param_1 + 0x15a);
  uVar2 = *(undefined1 *)((int)param_1 + 0x15b);
  *(undefined1 *)(param_1 + 0x57) = *(undefined1 *)((int)param_1 + 0x15f);
  *(undefined1 *)(iVar4 + 0x36) = *(undefined1 *)((int)param_1 + 0x15f);
  *(undefined1 *)(iVar4 + 0x34) = uVar1;
  *(undefined1 *)(iVar4 + 0x35) = uVar2;
  iVar4 = param_1[0x4b];
  *(undefined2 *)(param_1 + 0x51) = 0;
  if (iVar4 != 0) {
    sVar6 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar6 = sVar6 >> 1;
    }
    iVar7 = (int)*(short *)(iVar4 + 10);
    if (iVar7 != 0) {
      if (iVar7 < 1) {
        pcVar8 = *(code **)(iVar4 + 0xc);
      }
      else {
        iVar5 = iVar7 * 8 + *(int *)(iVar4 + *(short *)(iVar4 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar5 + -8);
        pcVar8 = *(code **)(iVar5 + -4);
      }
      iVar5 = (int)*(short *)(iVar4 + 8);
      if (0 < iVar7 << 0x10) {
        iVar5 = unaff_s2 + iVar5;
      }
      (*pcVar8)(iVar4 + iVar5,0x1005,(int)sVar6,param_1);
    }
    param_1[0x4b] = 0;
  }
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  *(undefined2 *)((int)param_1 + 0x166) = 0x3c;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bd60;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005be6c;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  SetEntitySpriteId(param_1,0x1e1000b3,1);
  FUN_8001d0c0(param_1,0xffffffff);
  EntitySetRenderFlags(param_1,0);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006c7f8;
  return;
}



void FUN_8006ccb4(int param_1,undefined4 param_2,short param_3)

{
  undefined *puVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  code *pcVar8;
  short unaff_s2;
  
  iVar7 = (int)*(short *)(param_1 + 0x26);
  sVar2 = *(short *)(param_1 + 0x68);
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar4 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar8 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar7 << 0x10) {
      iVar4 = param_3 + iVar4;
    }
    sVar2 = (*pcVar8)(param_1 + iVar4,(int)sVar2);
  }
  iVar7 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = *(short *)(param_1 + 0x6a);
  *(short *)(param_1 + 0x68) = sVar2;
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar4 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar8 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar7 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    sVar3 = (*pcVar8)(param_1 + iVar4,(int)sVar3);
  }
  *(undefined4 *)(param_1 + 0x58) = 0x8000;
  iVar7 = *(int *)(param_1 + 0x58);
  iVar4 = (int)*(short *)(param_1 + 0x68) << 0x10;
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && (iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x6a) = sVar3;
  *(undefined4 *)(param_1 + 0x5c) = 0x8000;
  puVar1 = g_pPlayerState;
  iVar6 = *(int *)(param_1 + 0x5c);
  iVar5 = (int)*(short *)(param_1 + 0x6a) << 0x10;
  if (iVar6 == 0) {
    trap(0x1c00);
  }
  if ((iVar6 == -1) && (iVar5 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x68) = (short)(iVar4 / iVar7);
  *(short *)(param_1 + 0x6a) = (short)(iVar5 / iVar6);
  puVar1[0x18] = 1;
  return;
}



void FUN_8006ce80(int param_1,undefined4 param_2,short param_3)

{
  undefined *puVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  code *pcVar8;
  short unaff_s2;
  
  iVar7 = (int)*(short *)(param_1 + 0x26);
  sVar2 = *(short *)(param_1 + 0x68);
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar4 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar8 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar7 << 0x10) {
      iVar4 = param_3 + iVar4;
    }
    sVar2 = (*pcVar8)(param_1 + iVar4,(int)sVar2);
  }
  iVar7 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = *(short *)(param_1 + 0x6a);
  *(short *)(param_1 + 0x68) = sVar2;
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar4 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar8 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar7 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    sVar3 = (*pcVar8)(param_1 + iVar4,(int)sVar3);
  }
  *(undefined4 *)(param_1 + 0x58) = 0x10000;
  iVar7 = *(int *)(param_1 + 0x58);
  iVar4 = (int)*(short *)(param_1 + 0x68) << 0x10;
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && (iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x6a) = sVar3;
  *(undefined4 *)(param_1 + 0x5c) = 0x10000;
  puVar1 = g_pPlayerState;
  iVar6 = *(int *)(param_1 + 0x5c);
  iVar5 = (int)*(short *)(param_1 + 0x6a) << 0x10;
  if (iVar6 == 0) {
    trap(0x1c00);
  }
  if ((iVar6 == -1) && (iVar5 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_1 + 0x68) = (short)(iVar4 / iVar7);
  *(short *)(param_1 + 0x6a) = (short)(iVar5 / iVar6);
  puVar1[0x18] = 0;
  return;
}



void Callback_8006d048(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  short sVar3;
  int iVar4;
  short in_t0;
  code *pcVar5;
  
  iVar2 = param_1[0x4b];
  if (iVar2 != 0) {
    sVar3 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar3 = sVar3 >> 1;
    }
    iVar4 = (int)*(short *)(iVar2 + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar4 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        in_t0 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar4 << 0x10) {
        iVar1 = in_t0 + iVar1;
      }
      (*pcVar5)(iVar2 + iVar1,0x1005,(int)sVar3,param_1);
    }
    param_1[0x4b] = 0;
  }
  FUN_8006e8dc(param_1[0x5b]);
  *(undefined1 *)(param_1 + 0x5c) = 1;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  iVar2 = g_GameStatePtr;
  *(undefined2 *)(g_GameStatePtr + 100) = 0x28;
  *(undefined2 *)(iVar2 + 0x66) = 0xfff0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x90b102a1,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006d270;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f5c,PTR_Callback_8006d6c8_800a5f60);
  return;
}



void EntityInitCallback_8006d270(undefined4 *param_1)

{
  int iVar1;
  
  FUN_8006e8dc(param_1[0x5b]);
  *(undefined1 *)(param_1 + 0x5c) = 1;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  iVar1 = g_GameStatePtr;
  *(undefined2 *)(g_GameStatePtr + 100) = 0x28;
  *(undefined2 *)(iVar1 + 0x66) = 0xfff0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerEntityCollisionHandler;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0xd0a5f094,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5f5c,PTR_Callback_8006d6c8_800a5f60);
  return;
}



void Callback_8006d3c8(undefined4 *param_1)

{
  int iVar1;
  
  FUN_8006e8dc(param_1[0x5b]);
  *(undefined1 *)(param_1 + 0x5c) = 1;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  iVar1 = g_GameStatePtr;
  *(undefined2 *)(g_GameStatePtr + 100) = 0x28;
  *(undefined2 *)(iVar1 + 0x66) = 0xfff0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005cec8;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x90a19011,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_8006d270;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f5c,PTR_Callback_8006d6c8_800a5f60);
  return;
}



void Callback_8006d548(undefined4 *param_1)

{
  int iVar1;
  
  FUN_8006e8dc(param_1[0x5b]);
  *(undefined1 *)(param_1 + 0x5c) = 0;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  iVar1 = g_GameStatePtr;
  *(undefined2 *)(g_GameStatePtr + 100) = 0x28;
  *(undefined2 *)(iVar1 + 0x66) = 0xffd0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bbac;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerCallback_8005f604;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_800602e0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_800650c4;
  SetEntitySpriteId(param_1,0x987101b9,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80069600;
  EntitySetCallback(param_1,null_FFFF0000h_800a5f5c,PTR_Callback_8006d6c8_800a5f60);
  return;
}



void Callback_8006d6c8(int param_1)

{
  int iVar1;
  
  FUN_8006e8e4(*(undefined4 *)(param_1 + 0x16c),0);
  *(undefined1 *)(param_1 + 0x170) = 0;
  *(undefined1 *)(g_GameStatePtr + 0x60) = 0;
  iVar1 = g_GameStatePtr;
  *(undefined2 *)(g_GameStatePtr + 100) = 0x28;
  *(undefined2 *)(iVar1 + 0x66) = 0xffd0;
  return;
}



void Callback_8006d724(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  short sVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  
  FUN_8001c4a4(param_1,0x6e0a824);
  param_1[0x44] = 0;
  param_1[0x43] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = PlayerTickCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = PlayerEntityCollisionHandler;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = PlayerCallback_80066c40;
  SetEntitySpriteId(param_1,0x388110,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d0c0(param_1,0);
  iVar2 = param_1[0x4b];
  if (iVar2 != 0) {
    sVar3 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar3 = sVar3 >> 1;
    }
    iVar4 = (int)*(short *)(iVar2 + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar4 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar4 << 0x10) {
        iVar1 = unaff_s2 + iVar1;
      }
      (*pcVar5)(iVar2 + iVar1,0x1005,(int)sVar3,param_1);
    }
    param_1[0x4b] = 0;
  }
  return;
}



void Callback_8006d910(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  short sVar3;
  int iVar4;
  short unaff_s2;
  code *pcVar5;
  
  if (param_1[0x50] != 0) {
    RemoveEntityFromAllLists(g_GameStatePtr);
    param_1[0x50] = 0;
  }
  *param_1 = 0xffff0000;
  param_1[1] = PlayerCallback_8005bc3c;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[0x41] = 0xffff0000;
  param_1[0x42] = PlayerCallback_80060e24;
  param_1[7] = 0;
  param_1[8] = 0;
  SetEntitySpriteId(param_1,0x80e85ea0,1);
  iVar2 = param_1[0x4b];
  if (iVar2 != 0) {
    sVar3 = (short)param_1[0x44];
    if (param_1[0x16] == 0x8000) {
      sVar3 = sVar3 >> 1;
    }
    iVar4 = (int)*(short *)(iVar2 + 10);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar5 = *(code **)(iVar2 + 0xc);
      }
      else {
        iVar1 = iVar4 * 8 + *(int *)(iVar2 + *(short *)(iVar2 + 0xc));
        unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
        pcVar5 = *(code **)(iVar1 + -4);
      }
      iVar1 = (int)*(short *)(iVar2 + 8);
      if (0 < iVar4 << 0x10) {
        iVar1 = unaff_s2 + iVar1;
      }
      (*pcVar5)(iVar2 + iVar1,0x1005,(int)sVar3,param_1);
    }
    param_1[0x4b] = 0;
  }
  return;
}



undefined4 * FUN_8006dae8(undefined4 *param_1,undefined4 param_2)

{
  InitEntityWithSprite(param_1,&DAT_8009c254,0x424,0,0);
  param_1[6] = &DAT_800117e4;
  param_1[0x40] = param_2;
  *(undefined2 *)(param_1 + 4) = 0x3e9;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8006dbbc;
  param_1[9] = 0xffff0000;
  param_1[10] = ScaleXByEntityScale;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = ScaleYByEntityScale;
  return param_1;
}



int FUN_8006dd98(int param_1,short param_2,short param_3,undefined1 param_4,int param_5)

{
  InitEntitySprite(param_1,0x1e1000b3,999,(int)param_2,(int)param_3,0);
  *(undefined **)(param_1 + 0x18) = &DAT_800117c4;
  *(undefined2 *)(param_1 + 0x10) = 0x3e9;
  *(undefined1 *)(param_1 + 0x74) = param_4;
  if (param_5 != 0x10000) {
    *(int *)(param_1 + 0x50) = param_5;
    *(int *)(param_1 + 0x54) = param_5;
    *(int *)(param_1 + 0x58) = param_5;
    *(int *)(param_1 + 0x5c) = param_5;
    *(undefined4 *)(param_1 + 0x24) = 0xffff0000;
    *(code **)(param_1 + 0x28) = ScaleXByEntityScale;
    *(undefined4 *)(param_1 + 0x2c) = 0xffff0000;
    *(code **)(param_1 + 0x30) = ScaleYByEntityScale;
  }
  FUN_8001d0f0(param_1,0x182d840c);
  EntitySetRenderFlags(param_1,0);
  return param_1;
}



// Create Halo Entity - Invincibility Powerup Visual Effect
// 
// Creates the halo ring entity that follows the player when invincibility 
// powerup is active.
// 
// TRIGGERED BY: g_pPlayerState[0x17] bit 0x01 (powerup_flags)
// ENTITY REFERENCE: Stored at player entity+0x168 (halo_entity_ptr)
// DURATION: Timed via player entity+0x144 (powerup_timer)
// 
// NOTE: This creates the VISUAL EFFECT entity, not the collectible pickup.
// The halo pickup is entity type 8 (Item with variant).
// 
// When player collects 2 halos, they receive clay/orbs.
// 
// Referenced in: docs/reference/items.md, docs/systems/game-loop.md

void CreateHaloEntity(undefined4 *param_1,undefined4 param_2)

{
  undefined1 *puVar1;
  short sVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  undefined1 local_1e [2];
  undefined1 local_1c [4];
  undefined1 *local_18;
  
  InitMenuEntityWithVtable(param_1,0x3e9);
  param_1[6] = &DAT_800117a4;
  param_1[7] = param_2;
  local_1c = (undefined1  [4])0xffff0000;
  local_18 = &LAB_8006e008;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8006e008;
  uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x1e8,1,0);
  iVar9 = FUN_8003286c(uVar8,0);
  param_1[9] = iVar9;
  *(undefined1 *)(iVar9 + 0x1e7) = 1;
  iVar11 = param_1[7];
  uVar3 = *(ushort *)(param_1[7] + 0x68);
  *(ushort *)(param_1 + 8) = uVar3;
  uVar4 = iVar11 + 0x3bU & 3;
  uVar5 = iVar11 + 0x38U & 3;
  uVar10 = (*(int *)((iVar11 + 0x3bU) - uVar4) << (3 - uVar4) * 8 |
           (uint)uVar3 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar5) * 8 |
           *(uint *)((iVar11 + 0x38U) - uVar5) >> uVar5 * 8;
  uVar4 = iVar11 + 0x3fU & 3;
  iVar9 = *(int *)((iVar11 + 0x3fU) - uVar4);
  uVar5 = iVar11 + 0x3cU & 3;
  uVar6 = *(uint *)((iVar11 + 0x3cU) - uVar5);
  puVar1 = local_1e + 1;
  uVar7 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar7) =
       *(uint *)(puVar1 + -uVar7) & -1 << (uVar7 + 1) * 8 | uVar10 >> (3 - uVar7) * 8;
  puVar1 = local_1c + 3;
  uVar7 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar7) =
       *(uint *)(puVar1 + -uVar7) & -1 << (uVar7 + 1) * 8 |
       ((iVar9 << (3 - uVar4) * 8 | uVar8 & 0xffffffffU >> (uVar4 + 1) * 8) & -1 << (4 - uVar5) * 8
       | uVar6 >> uVar5 * 8) >> (3 - uVar7) * 8;
  local_1e = SUB42(uVar10 >> 0x10,0);
  sVar2 = *(short *)(param_1[7] + 0x6a);
  *(undefined1 *)(param_1 + 0xb) = 0;
  *(short *)((int)param_1 + 0x22) = sVar2 + (short)local_1e;
  return;
}



undefined4 * FUN_8006e1d8(undefined4 *param_1,undefined4 param_2)

{
  undefined1 *puVar1;
  uint uVar2;
  undefined *puVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  undefined1 auStack_20 [4];
  undefined1 local_1c [4];
  code *local_18;
  
  InitEntityWithSprite(param_1,&DAT_8009c3c4,999,0,0);
  param_1[6] = &DAT_80011784;
  *(undefined1 *)((int)param_1 + 0x10d) = 1;
  *(undefined1 *)((int)param_1 + 0x10e) = 1;
  param_1[0x40] = param_2;
  *(undefined2 *)(param_1 + 4) = 0x3e9;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_8006e77c;
  param_1[9] = 0xffff0000;
  param_1[10] = ScaleXByEntityScale;
  local_1c = (undefined1  [4])0xffff0000;
  local_18 = ScaleYByEntityScale;
  param_1[0xb] = 0xffff0000;
  param_1[0xc] = ScaleYByEntityScale;
  uVar4 = 0x8000;
  if (g_pPlayerState[0x18] == '\0') {
    uVar4 = *(undefined4 *)(g_GameStatePtr + 0x11c);
  }
  param_1[0x16] = uVar4;
  param_1[0x41] = 0;
  param_1[0x42] = 0;
  *(undefined2 *)(param_1 + 0x1b) = 0;
  *(undefined2 *)((int)param_1 + 0x6e) = 0;
  *(undefined1 *)(param_1 + 0x43) = 0;
  param_1[0x17] = param_1[0x16];
  param_1[0x14] = param_1[0x16];
  param_1[0x15] = param_1[0x16];
  uVar7 = 0xffffffec;
  if (*(char *)(param_1[0x40] + 0x74) != '\0') {
    uVar7 = 0x14;
  }
  iVar6 = param_1[0x40];
  uVar5 = (int)*(short *)(param_1[0x40] + 0x68) + uVar7;
  *(short *)(param_1 + 0x1a) = (short)uVar5;
  puVar3 = PTR_Callback_8006e8f4_800a5f68;
  uVar4 = null_FFFF0000h_800a5f64;
  uVar8 = iVar6 + 0x3bU & 3;
  uVar2 = iVar6 + 0x38U & 3;
  uVar5 = (*(int *)((iVar6 + 0x3bU) - uVar8) << (3 - uVar8) * 8 |
          uVar5 & 0xffffffffU >> (uVar8 + 1) * 8) & -1 << (4 - uVar2) * 8 |
          *(uint *)((iVar6 + 0x38U) - uVar2) >> uVar2 * 8;
  uVar8 = iVar6 + 0x3fU & 3;
  uVar2 = iVar6 + 0x3cU & 3;
  uVar8 = (*(int *)((iVar6 + 0x3fU) - uVar8) << (3 - uVar8) * 8 |
          uVar7 & 0xffffffffU >> (uVar8 + 1) * 8) & -1 << (4 - uVar2) * 8 |
          *(uint *)((iVar6 + 0x3cU) - uVar2) >> uVar2 * 8;
  puVar1 = auStack_20 + 3;
  uVar7 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar7) =
       *(uint *)(puVar1 + -uVar7) & -1 << (uVar7 + 1) * 8 | uVar5 >> (3 - uVar7) * 8;
  puVar1 = local_1c + 3;
  uVar7 = (uint)puVar1 & 3;
  *(uint *)(puVar1 + -uVar7) =
       *(uint *)(puVar1 + -uVar7) & -1 << (uVar7 + 1) * 8 | uVar8 >> (3 - uVar7) * 8;
  auStack_20._2_2_ = (undefined2)(uVar5 >> 0x10);
  *(short *)((int)param_1 + 0x6a) = *(short *)(param_1[0x40] + 0x6a) + auStack_20._2_2_ + -10;
  auStack_20 = (undefined1  [4])uVar5;
  local_1c = (undefined1  [4])uVar8;
  EntitySetState(param_1,uVar4,puVar3);
  return param_1;
}



undefined4 EntityInitCallback_8006e8b0(undefined4 param_1,short param_2)

{
  if (param_2 == 2) {
    EntityProcessCallbackQueue();
  }
  return 0;
}



void FUN_8006e8dc(int param_1)

{
  *(undefined1 *)(param_1 + 0x10d) = 0;
  return;
}



void FUN_8006e8e4(int param_1,undefined1 param_2)

{
  *(undefined1 *)(param_1 + 0x10f) = param_2;
  *(undefined1 *)(param_1 + 0x10d) = 1;
  return;
}



void Callback_8006e8f4(int param_1)

{
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined4 *)(param_1 + 0xc) = 0;
  SetEntitySpriteId(param_1,0xc87ca082,1);
  if (*(char *)(param_1 + 0x10e) == '\0') {
    FUN_8001d218(param_1,0);
  }
  return;
}



void Callback_8006e960(int param_1)

{
  FUN_8001aab4(param_1,2);
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityInitCallback_8006e8b0;
  SetEntitySpriteId(param_1,0x8a7ce022,1);
  if (*(char *)(param_1 + 0x10e) == '\0') {
    FUN_8001d218(param_1,0);
  }
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_8006e8f4;
  return;
}



void Callback_8006ea0c(int param_1)

{
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(code **)(param_1 + 0xc) = EntityInitCallback_8006e8b0;
  SetEntitySpriteId(param_1,0x8b7ce0b2,1);
  if (*(char *)(param_1 + 0x10e) == '\0') {
    FUN_8001d218(param_1,0);
  }
  *(undefined4 *)(param_1 + 0x98) = 0xffff0000;
  *(code **)(param_1 + 0x9c) = Callback_8006e8f4;
  return;
}



void CreateGlidePlayerEntity(undefined4 *param_1,undefined4 param_2,short param_3,short param_4)

{
  undefined4 uVar1;
  undefined *puVar2;
  
  InitEntityWithSprite(param_1,&DAT_8009ca34,1000,(int)param_3,(int)param_4);
  param_1[6] = &DAT_80011cf4;
  param_1[0x45] = 0xffffffff;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  *param_1 = 0xffff0000;
  param_1[1] = FinnMainTickHandler;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_8006f190;
  puVar2 = PTR_Callback_8006fdf4_800a5f88;
  uVar1 = null_FFFF0000h_800a5f84;
  param_1[0x41] = 0x20000;
  *(undefined2 *)(param_1 + 0x43) = 0x400;
  param_1[0x42] = 0;
  *(undefined2 *)(param_1 + 0x1b) = 0;
  *(undefined2 *)((int)param_1 + 0x6e) = 0;
  *(undefined1 *)((int)param_1 + 0x10e) = 0;
  *(undefined1 *)((int)param_1 + 0x10f) = 0;
  *(undefined1 *)(param_1 + 0x44) = 0;
  *(undefined1 *)((int)param_1 + 0x111) = 0;
  *(undefined1 *)((int)param_1 + 0x112) = 0x14;
  EntitySetState(param_1,uVar1,puVar2);
  *(undefined1 *)((int)param_1 + 0x113) = 0;
  *(undefined1 *)((int)param_1 + 0x119) = 0;
  return;
}



// FINN boat/fish main active state handler (runs every frame during gameplay).
// This is the primary callback at entity+0x04, not a state table entry.
// 
// Entity structure:
// +0x100 = Input controller pointer
// +0x104 = X velocity (16.16 fixed-point)
// +0x108 = Y velocity (16.16 fixed-point)
// +0x10c = Rotation angle (0-0x400)
// +0x10f = Rotation velocity (signed char)
// +0x110 = Move flag
// +0x111 = Turn flag
// +0x112 = Random timer (decrements, resets to 0x14)
// +0x114 = Secondary entity pointer (wake/shadow)
// 
// Calls subsystems:
// - FUN_80070128: Trigger zone collision detection
// - FinnHandleInput (0x8006fbd0): Tank control input
// - FUN_8006f250: Physics/constraints
// - FUN_8006fd48: Animation
// - EntityUpdateCallback: Standard entity update

void FinnMainTickHandler(int param_1)

{
  char cVar1;
  undefined4 uVar2;
  
  if (*(int *)(param_1 + 0x114) < 0) {
    if (*(short *)(param_1 + 0x110) == 0) goto code_r0x8006f038;
    uVar2 = FUN_8001c4a4(param_1,0x40e0824c);
  }
  else {
    if (*(short *)(param_1 + 0x110) != 0) {
      FUN_8001c5b4();
      EntityInitCallback_8006f038();
      return;
    }
    FUN_8007c7b8(*(int *)(param_1 + 0x114));
    uVar2 = 0xffffffff;
  }
  *(undefined4 *)(param_1 + 0x114) = uVar2;
code_r0x8006f038:
  cVar1 = *(char *)(param_1 + 0x112) + -1;
  *(char *)(param_1 + 0x112) = cVar1;
  if (cVar1 == '\0') {
    rand();
    *(undefined1 *)(param_1 + 0x112) = 0x14;
  }
  *(undefined1 *)(param_1 + 0x110) = 0;
  *(undefined1 *)(param_1 + 0x111) = 0;
  FinnCheckTriggerZones(param_1);
  FinnHandleInput(param_1);
  FUN_8006f250(param_1);
  FUN_8006fd48(param_1);
  EntityUpdateCallback(param_1);
  return;
}



void EntityInitCallback_8006f038(void)

{
  char cVar1;
  int unaff_s0;
  
  cVar1 = *(char *)(unaff_s0 + 0x112) + -1;
  *(char *)(unaff_s0 + 0x112) = cVar1;
  if (cVar1 == '\0') {
    rand();
    *(undefined1 *)(unaff_s0 + 0x112) = 0x14;
  }
  *(undefined1 *)(unaff_s0 + 0x110) = 0;
  *(undefined1 *)(unaff_s0 + 0x111) = 0;
  FinnCheckTriggerZones();
  FinnHandleInput();
  FUN_8006f250();
  FUN_8006fd48();
  EntityUpdateCallback();
  return;
}



void EntityInitCallback_8006f0a8(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  
  bVar1 = *(char *)(param_1 + 0x118) - 1;
  *(byte *)(param_1 + 0x118) = bVar1;
  if (bVar1 == 0) {
    *(undefined1 *)(g_GameStatePtr + 0x148) = *(undefined1 *)(param_1 + 0x119);
  }
  else if ((*(char *)(param_1 + 0x11a) == '\0') && (bVar1 < 0x21)) {
    uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x24,1,0);
    uVar2 = FUN_80038300(uVar2);
    AddToZOrderList(g_GameStatePtr,uVar2);
    *(undefined1 *)(param_1 + 0x11a) = 1;
  }
  if (-1 < *(int *)(param_1 + 0x114)) {
    FUN_8007c7b8();
    *(undefined4 *)(param_1 + 0x114) = 0xffffffff;
  }
  *(undefined1 *)(param_1 + 0x110) = 0;
  *(undefined1 *)(param_1 + 0x111) = 0;
  *(int *)(param_1 + 0x104) = *(int *)(param_1 + 0x104) + 0x2000;
  FUN_8006f250(param_1);
  FUN_8006fd48(param_1);
  EntityUpdateCallback(param_1);
  return;
}



undefined4 EntityInitCallback_8006f190(undefined4 param_1,short param_2)

{
  if (param_2 == 0x1000) {
    EntitySetState(param_1,null_FFFF0000h_800a5f8c,PTR_FinnDeathExplosion_800a5f90);
  }
  return 0;
}



undefined4 EntityInitCallback_8006f224(undefined4 param_1,short param_2)

{
  if (param_2 == 2) {
    EntityProcessCallbackQueue();
  }
  return 0;
}



void FUN_8006f250(int param_1)

{
  ushort uVar1;
  ushort uVar2;
  bool bVar3;
  bool bVar4;
  char cVar5;
  short sVar6;
  short sVar7;
  int iVar8;
  undefined4 uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  byte local_18 [8];
  
  uVar9 = 0x20000;
  if ((0x20000 < *(int *)(param_1 + 0x104)) ||
     (uVar9 = 0xfffe0000, *(int *)(param_1 + 0x104) < -0x20000)) {
    *(undefined4 *)(param_1 + 0x104) = uVar9;
  }
  uVar9 = 0x20000;
  if ((0x20000 < *(int *)(param_1 + 0x108)) ||
     (uVar9 = 0xfffe0000, *(int *)(param_1 + 0x108) < -0x20000)) {
    *(undefined4 *)(param_1 + 0x108) = uVar9;
  }
  iVar8 = *(int *)(param_1 + 0x104);
  if (iVar8 < 0) {
    *(int *)(param_1 + 0x104) = iVar8 + 0xc00;
    if (0 < iVar8 + 0xc00) {
      *(undefined4 *)(param_1 + 0x104) = 0;
    }
  }
  else if ((0 < iVar8) && (*(int *)(param_1 + 0x104) = iVar8 + -0xc00, iVar8 + -0xc00 < 0)) {
    *(undefined4 *)(param_1 + 0x104) = 0;
  }
  iVar8 = *(int *)(param_1 + 0x108);
  if (iVar8 < 0) {
    *(int *)(param_1 + 0x108) = iVar8 + 0xc00;
    if (0 < iVar8 + 0xc00) {
      *(undefined4 *)(param_1 + 0x108) = 0;
    }
  }
  else if ((0 < iVar8) && (*(int *)(param_1 + 0x108) = iVar8 + -0xc00, iVar8 + -0xc00 < 0)) {
    *(undefined4 *)(param_1 + 0x108) = 0;
  }
  local_18[0] = EntityApplyMovementCallbacks
                          (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
  uVar1 = *(ushort *)(param_1 + 0x68);
  uVar2 = *(ushort *)(param_1 + 0x6a);
  uVar12 = uVar1 & 0xf;
  uVar11 = uVar2 & 0xf;
  bVar3 = false;
  if (local_18[0] == 0) goto LAB_8006fb38;
  bVar4 = true;
  sVar6 = (short)uVar12;
  sVar7 = (short)uVar11;
  bVar3 = bVar4;
  if (local_18[0] == 0xba) {
    if (0xe < uVar11 + uVar12) {
      sVar6 = uVar1 - sVar6;
      goto LAB_8006f4dc;
    }
    sVar7 = uVar2 - (sVar7 + 1);
    goto LAB_8006f4f4;
  }
  if (local_18[0] < 0xbb) {
    if (local_18[0] == 0x65) {
      if (uVar12 + uVar11 < 0x10) {
        if ((int)((uVar12 + 0xf) - uVar11) < 0x10) {
          sVar6 = uVar1 - (sVar6 + 1);
          goto LAB_8006f4e0;
        }
        sVar7 = uVar2 - (sVar7 + 1);
        goto LAB_8006f4f4;
      }
      sVar7 = uVar2 - sVar7;
      if (0xf < (int)((uVar12 + 0xf) - uVar11)) {
        sVar6 = uVar1 - sVar6;
        goto LAB_8006f4dc;
      }
LAB_8006f4f0:
      sVar7 = sVar7 + 0x10;
    }
    else {
      if (local_18[0] < 0x66) {
        if (local_18[0] == 0x52) {
          EntitySetState(param_1,null_FFFF0000h_800a5f8c,PTR_FinnDeathExplosion_800a5f90);
          bVar3 = true;
          goto LAB_8006fb38;
        }
LAB_8006f518:
        cVar5 = FUN_800700d8(param_1,local_18);
        if (cVar5 != '\0') {
          if ((local_18[0] == 0xb5) &&
             ((byte)((*(byte *)(param_1 + 0x68) & 0xf) + (*(byte *)(param_1 + 0x6a) & 0xf)) < 0x10))
          {
            iVar8 = *(int *)(param_1 + 0x108);
            if (*(int *)(param_1 + 0x104) < iVar8) {
              if (iVar8 < 0) {
                *(int *)(param_1 + 0x108) = -(iVar8 >> 1);
                if (*(int *)(param_1 + 0x104) < 0) {
                  *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xb5 &&
                     (bVar3 = bVar4,
                     (*(byte *)(param_1 + 0x68) & 0xf) + (*(ushort *)(param_1 + 0x6a) & 0xf) < 0x10)
                     )) {
                iVar8 = *(ushort *)(param_1 + 0x6a) + 1;
                *(short *)(param_1 + 0x6a) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,(int)*(short *)(param_1 + 0x68),
                                         iVar8 * 0x10000 >> 0x10);
              }
            }
            else {
              if (*(int *)(param_1 + 0x104) < 0) {
                *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                if (*(int *)(param_1 + 0x108) < 0) {
                  *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xb5 &&
                     (bVar3 = bVar4,
                     (*(ushort *)(param_1 + 0x68) & 0xf) + (*(byte *)(param_1 + 0x6a) & 0xf) < 0x10)
                     )) {
                iVar8 = *(ushort *)(param_1 + 0x68) + 1;
                *(short *)(param_1 + 0x68) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,iVar8 * 0x10000 >> 0x10,
                                         (int)*(short *)(param_1 + 0x6a));
              }
            }
          }
          else if ((local_18[0] == 0xb7) &&
                  (0xe < (int)(((*(byte *)(param_1 + 0x68) & 0xf) + 0xf) -
                              (*(byte *)(param_1 + 0x6a) & 0xf)))) {
            iVar8 = *(int *)(param_1 + 0x108);
            if (-*(int *)(param_1 + 0x104) < iVar8) {
              if (iVar8 < 0) {
                *(int *)(param_1 + 0x108) = -(iVar8 >> 1);
                if (0 < *(int *)(param_1 + 0x104)) {
                  *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xb7 &&
                     (bVar3 = bVar4,
                     0xe < (int)(((*(byte *)(param_1 + 0x68) & 0xf) + 0xf) -
                                (*(ushort *)(param_1 + 0x6a) & 0xf))))) {
                iVar8 = *(ushort *)(param_1 + 0x6a) + 1;
                *(short *)(param_1 + 0x6a) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,(int)*(short *)(param_1 + 0x68),
                                         iVar8 * 0x10000 >> 0x10);
              }
            }
            else {
              if (0 < *(int *)(param_1 + 0x104)) {
                *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                if (*(int *)(param_1 + 0x108) < 0) {
                  *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xb7 &&
                     (bVar3 = bVar4,
                     0xe < (int)(((*(ushort *)(param_1 + 0x68) & 0xf) + 0xf) -
                                (*(byte *)(param_1 + 0x6a) & 0xf))))) {
                iVar8 = *(ushort *)(param_1 + 0x68) - 1;
                *(short *)(param_1 + 0x68) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,iVar8 * 0x10000 >> 0x10,
                                         (int)*(short *)(param_1 + 0x6a));
              }
            }
          }
          else if ((local_18[0] == 0xdd) &&
                  ((int)(((*(byte *)(param_1 + 0x68) & 0xf) + 0xf) -
                        (*(byte *)(param_1 + 0x6a) & 0xf)) < 0x10)) {
            iVar8 = *(int *)(param_1 + 0x108);
            if (*(int *)(param_1 + 0x104) < -iVar8) {
              if (0 < iVar8) {
                *(int *)(param_1 + 0x108) = -(iVar8 >> 1);
                if (*(int *)(param_1 + 0x104) < 0) {
                  *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xdd &&
                     (bVar3 = bVar4,
                     (int)(((*(byte *)(param_1 + 0x68) & 0xf) + 0xf) -
                          (*(ushort *)(param_1 + 0x6a) & 0xf)) < 0x10))) {
                iVar8 = *(ushort *)(param_1 + 0x6a) - 1;
                *(short *)(param_1 + 0x6a) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,(int)*(short *)(param_1 + 0x68),
                                         iVar8 * 0x10000 >> 0x10);
              }
            }
            else {
              if (*(int *)(param_1 + 0x104) < 0) {
                *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                if (0 < *(int *)(param_1 + 0x108)) {
                  *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xdd &&
                     (bVar3 = bVar4,
                     (int)(((*(ushort *)(param_1 + 0x68) & 0xf) + 0xf) -
                          (*(byte *)(param_1 + 0x6a) & 0xf)) < 0x10))) {
                iVar8 = *(ushort *)(param_1 + 0x68) + 1;
                *(short *)(param_1 + 0x68) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,iVar8 * 0x10000 >> 0x10,
                                         (int)*(short *)(param_1 + 0x6a));
              }
            }
          }
          else if ((local_18[0] == 0xdf) &&
                  (0xe < (byte)((*(byte *)(param_1 + 0x68) & 0xf) +
                               (*(byte *)(param_1 + 0x6a) & 0xf)))) {
            iVar8 = *(int *)(param_1 + 0x108);
            if (-*(int *)(param_1 + 0x104) < -iVar8) {
              if (0 < iVar8) {
                *(int *)(param_1 + 0x108) = -(iVar8 >> 1);
                if (0 < *(int *)(param_1 + 0x104)) {
                  *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xdf &&
                     (bVar3 = bVar4,
                     0xe < (*(byte *)(param_1 + 0x68) & 0xf) + (*(ushort *)(param_1 + 0x6a) & 0xf)))
                    ) {
                iVar8 = *(ushort *)(param_1 + 0x6a) - 1;
                *(short *)(param_1 + 0x6a) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,(int)*(short *)(param_1 + 0x68),
                                         iVar8 * 0x10000 >> 0x10);
              }
            }
            else {
              if (0 < *(int *)(param_1 + 0x104)) {
                *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
                if (0 < *(int *)(param_1 + 0x108)) {
                  *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
                }
              }
              while ((bVar3 = true, local_18[0] == 0xdf &&
                     (bVar3 = bVar4,
                     0xe < (*(ushort *)(param_1 + 0x68) & 0xf) + (*(byte *)(param_1 + 0x6a) & 0xf)))
                    ) {
                iVar8 = *(ushort *)(param_1 + 0x68) - 1;
                *(short *)(param_1 + 0x68) = (short)iVar8;
                local_18[0] = EntityApplyMovementCallbacks
                                        (param_1,iVar8 * 0x10000 >> 0x10,
                                         (int)*(short *)(param_1 + 0x6a));
              }
            }
          }
          else if (local_18[0] == 0xb6) {
            if (*(int *)(param_1 + 0x108) < 0) {
              *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
            }
            *(ushort *)(param_1 + 0x6a) =
                 (*(ushort *)(param_1 + 0x6a) - (*(ushort *)(param_1 + 0x6a) & 0xf)) + 0x10;
          }
          else if (local_18[0] == 0xde) {
            if (0 < *(int *)(param_1 + 0x108)) {
              *(int *)(param_1 + 0x108) = -(*(int *)(param_1 + 0x108) >> 1);
            }
            *(ushort *)(param_1 + 0x6a) =
                 *(ushort *)(param_1 + 0x6a) - ((*(ushort *)(param_1 + 0x6a) & 0xf) + 1);
          }
          else if (local_18[0] == 0xc9) {
            if (*(int *)(param_1 + 0x104) < 0) {
              *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
            }
            *(ushort *)(param_1 + 0x68) =
                 (*(ushort *)(param_1 + 0x68) - (*(ushort *)(param_1 + 0x68) & 0xf)) + 0x10;
          }
          else {
            bVar3 = true;
            if (local_18[0] == 0xcb) {
              if (0 < *(int *)(param_1 + 0x104)) {
                *(int *)(param_1 + 0x104) = -(*(int *)(param_1 + 0x104) >> 1);
              }
              *(ushort *)(param_1 + 0x68) =
                   *(ushort *)(param_1 + 0x68) - ((*(ushort *)(param_1 + 0x68) & 0xf) + 1);
              bVar3 = bVar4;
            }
          }
        }
        goto LAB_8006fb38;
      }
      if (local_18[0] == 0xb8) {
        if ((int)((uVar12 + 0xf) - uVar11) < 0x10) {
          sVar6 = uVar1 - (sVar6 + 1);
          goto LAB_8006f4e0;
        }
        sVar7 = uVar2 - (sVar7 + 1);
      }
      else {
        if (local_18[0] != 0xb9) goto LAB_8006f518;
        sVar7 = uVar2 - (sVar7 + 1);
      }
    }
LAB_8006f4f4:
    *(short *)(param_1 + 0x6a) = sVar7;
    *(undefined4 *)(param_1 + 0x108) = 0;
  }
  else {
    if (local_18[0] == 0xe0) {
      if (0xf < uVar11 + uVar12) goto LAB_8006f4ec;
      sVar6 = uVar1 - (sVar6 + 1);
    }
    else {
      if (0xe0 < local_18[0]) {
        if (local_18[0] != 0xe1) {
          if (local_18[0] == 0xe2) {
            sVar6 = uVar1 - sVar6;
            if ((int)((uVar12 + 0xf) - uVar11) < 0xf) {
              sVar7 = uVar2 - sVar7;
              goto LAB_8006f4f0;
            }
            goto LAB_8006f4dc;
          }
          goto LAB_8006f518;
        }
LAB_8006f4ec:
        sVar7 = uVar2 - sVar7;
        goto LAB_8006f4f0;
      }
      if (local_18[0] == 0xcc) {
        sVar6 = uVar1 - (sVar6 + 1);
      }
      else {
        sVar6 = uVar1 - sVar6;
        if (local_18[0] != 0xce) goto LAB_8006f518;
LAB_8006f4dc:
        sVar6 = sVar6 + 0x10;
      }
    }
LAB_8006f4e0:
    *(short *)(param_1 + 0x68) = sVar6;
    *(undefined4 *)(param_1 + 0x104) = 0;
  }
LAB_8006fb38:
  if (bVar3) {
    if (*(char *)(param_1 + 0x113) == '\0') {
      FUN_8001c4a4(param_1,0x6ae1a244);
    }
    *(undefined1 *)(param_1 + 0x113) = 1;
  }
  else {
    *(undefined1 *)(param_1 + 0x113) = 0;
  }
  iVar8 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) +
          *(int *)(param_1 + 0x108);
  *(short *)(param_1 + 0x6e) = (short)iVar8;
  iVar10 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
           *(int *)(param_1 + 0x104);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar10 >> 0x10);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar8 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar10;
  return;
}



// FINN boat/fish tank control input handler.
// Handles rotation with Up/Down buttons and forward movement with action button.
// 
// Inputs at entity+0x100:
// - 0x2000 (Down) = Turn right (+0x10 rotation velocity)
// - 0x8000 (Up) = Turn left (-0x10 rotation velocity)
// - g_DefaultBGColorR (action) = Move forward using sin/cos of angle
// 
// Rotation velocity at +0x10f: 0x10 per frame input, 8 drag, 0x40 max
// Angle accumulator at +0x10c: Wraps 0-0x400 (360 degrees)
// Velocities: +0x104 (X), +0x108 (Y) in 16.16 fixed-point
// Flags: +0x110 (move flag), +0x111 (turn flag)

void FinnHandleInput(int param_1)

{
  char cVar1;
  int iVar2;
  short sVar3;
  
  if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) {
    if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) {
      iVar2 = (int)*(char *)(param_1 + 0x10f);
      if (iVar2 < 1) {
        if ((iVar2 < 0) &&
           (*(char *)(param_1 + 0x10f) = (char)(iVar2 + 8), 0 < (iVar2 + 8) * 0x1000000)) {
          *(undefined1 *)(param_1 + 0x10f) = 0;
        }
      }
      else {
        *(char *)(param_1 + 0x10f) = (char)(iVar2 + -8);
        if ((iVar2 + -8) * 0x1000000 < 0) {
          *(undefined1 *)(param_1 + 0x10f) = 0;
        }
      }
    }
    else {
      *(undefined1 *)(param_1 + 0x111) = 1;
      cVar1 = *(char *)(param_1 + 0x10f) + -0x10;
      *(char *)(param_1 + 0x10f) = cVar1;
      if (cVar1 < -0x40) {
        *(undefined1 *)(param_1 + 0x10f) = 0xc0;
      }
    }
  }
  else {
    *(undefined1 *)(param_1 + 0x111) = 1;
    cVar1 = *(char *)(param_1 + 0x10f) + '\x10';
    *(char *)(param_1 + 0x10f) = cVar1;
    if ('@' < cVar1) {
                    // Possible PsyQ macro: setLineF2()
      *(undefined1 *)(param_1 + 0x10f) = 0x40;
    }
  }
  sVar3 = *(short *)(param_1 + 0x10c) + (short)*(char *)(param_1 + 0x10f);
  *(short *)(param_1 + 0x10c) = sVar3;
  if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) != 0) {
    iVar2 = csin(0x400 - sVar3);
    *(int *)(param_1 + 0x108) = *(int *)(param_1 + 0x108) - ((iVar2 << 0xd) >> 0xc);
    iVar2 = ccos(0x400 - *(short *)(param_1 + 0x10c));
    *(undefined1 *)(param_1 + 0x110) = 1;
    *(int *)(param_1 + 0x104) = *(int *)(param_1 + 0x104) + ((iVar2 << 0xd) >> 0xc);
  }
  return;
}



void FUN_8006fd48(int param_1)

{
  undefined2 uVar1;
  uint uVar2;
  
  uVar2 = *(short *)(param_1 + 0x10c) + 0x80 >> 8 & 0xf;
  *(short *)(param_1 + 0x72) = (short)(char)*(short *)(param_1 + 0x10c);
  if ((*(char *)(param_1 + 0x110) != '\0') && (*(short *)(param_1 + 0xec) == 4)) {
    *(undefined2 *)(param_1 + 0xec) = 2;
  }
  if (uVar2 != *(byte *)(param_1 + 0x10e)) {
    *(char *)(param_1 + 0x10e) = (char)uVar2;
    uVar1 = *(undefined2 *)(param_1 + 0xec);
    *(undefined4 *)(param_1 + 0xcc) = *(undefined4 *)(&DAT_8009ca7c + uVar2 * 4);
    InitSpriteContext(param_1 + 0x78);
    UpdateSpriteFrameData(param_1);
    *(undefined2 *)(param_1 + 0xec) = uVar1;
    *(undefined1 *)(param_1 + 0x76) = 1;
  }
  return;
}



void Callback_8006fdf4(undefined4 *param_1)

{
  uint uVar1;
  
  *param_1 = 0xffff0000;
  param_1[1] = FinnMainTickHandler;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_8006f190;
  uVar1 = *(short *)(param_1 + 0x43) + 0x80 >> 8 & 0xf;
  *(char *)((int)param_1 + 0x10e) = (char)uVar1;
  *(short *)((int)param_1 + 0x72) = (short)(char)*(short *)(param_1 + 0x43);
  SetEntitySpriteId(param_1,*(undefined4 *)(&DAT_8009ca7c + uVar1 * 4),1);
  return;
}



// FINN death/explosion handler (triggered by mine collision or hazard).
// 
// Actions:
// 1. Spawns explosion particle entities in a loop (8 projectiles at different angles)
// 2. Changes player sprite to 0x88c5011 (explosion animation)
// 3. Updates callbacks:
//    - +0x00/+0x04: EntityUpdateCallback
//    - +0x08/+0x0c: EntityInitCallback_8006f224
//    - +0x98/+0x9c: EntityInitCallback_80070064
// 4. Calls FUN_8001d240(entity, 0) to trigger death sequence
// 5. Level reload occurs shortly after (respawn)
// 
// Observed in trace at frame 1056 when player hit sea mine.

void FinnDeathExplosion(undefined4 *param_1)

{
  undefined4 uVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  
  uVar3 = param_1[0x1a];
  uVar4 = 0;
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
  iVar2 = FUN_80034a54(uVar1,&PTR_PTR_8009c9c4,uVar3,0x3d6,0);
  *(undefined1 *)(*(int *)(iVar2 + 0x20) + 0x54) = 3;
  AddEntityToBothLists(g_GameStatePtr,iVar2);
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  uVar3 = InitParticleEntity(uVar1,0x344210b1,uVar3,0,0x10000,0x3d4,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
  ChangeRenderZOrder(g_GameStatePtr,param_1[0xd],0x3c5);
  do {
    SpawnProjectileEntity(param_1,uVar4 & 0xffff,((uVar4 & 0xffff) >> 9) + 0x10);
    uVar4 = uVar4 + 0x200;
  } while ((uVar4 & 0xffff) < 0x1000);
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_8006f224;
  SetEntitySpriteId(param_1,0x88c5011,1);
  *(undefined2 *)((int)param_1 + 0x72) = *(undefined2 *)(param_1 + 0x43);
  EntitySetRenderFlags(param_1,0);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80070064;
  return;
}



void EntityInitCallback_80070064(undefined4 param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x146) = 1;
  EntitySetRenderFlags(param_1,0);
  return;
}



void Callback_80070094(undefined4 *param_1)

{
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  *(undefined1 *)(param_1 + 0x46) = 0x5c;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_8006f0a8;
  return;
}



undefined4 FUN_800700d8(undefined4 param_1,char *param_2)

{
  char cVar1;
  undefined4 uVar2;
  
  cVar1 = *param_2;
  uVar2 = 1;
  if ((2 < (byte)(cVar1 + 0x4bU)) &&
     (((cVar1 == -0x37 || (cVar1 == -0x35)) || (uVar2 = 0, (byte)(cVar1 + 0x23U) < 3)))) {
    uVar2 = 1;
  }
  return uVar2;
}



// FINN trigger zone collision detection and pickup handling.
// 
// Applies X/Y movement callbacks (+0x26-0x30 offsets) to calculate final position,
// then checks for trigger zone collision at that position.
// 
// Trigger zone types handled:
// 0x00 = State transition (sets callback at 0x80070094)
// 0x51 = Trigger event 1
// 0x52 = Trigger with data 1
// 0x65 = Trigger event 0
// 0x66 = Trigger with data 0  
// 0x79 = Trigger event 2
// 0x7a = Trigger with data 2
// Other = Custom handling via FUN_8007ee6c
// 
// Handles pickups observed in trace:
// - Klayman heads (extra lives)
// - Clayballs (weapons)
// - Collision with sea mines triggers death via different path

void FinnCheckTriggerZones(int param_1,undefined4 param_2,short param_3)

{
  char cVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  code *pcVar6;
  short unaff_s2;
  uint local_38;
  undefined1 local_34 [4];
  undefined1 local_30;
  undefined1 local_2f;
  undefined1 local_2e [22];
  
  iVar5 = (int)*(short *)(param_1 + 0x26);
  sVar2 = *(short *)(param_1 + 0x68);
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar5 << 0x10) {
      iVar4 = param_3 + iVar4;
    }
    sVar2 = (*pcVar6)(param_1 + iVar4,(int)sVar2);
  }
  iVar5 = (int)*(short *)(param_1 + 0x2e);
  sVar3 = *(short *)(param_1 + 0x6a);
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar5 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    sVar3 = (*pcVar6)(param_1 + iVar4,(int)sVar3);
  }
  cVar1 = CheckTriggerZoneCollision(g_GameStatePtr,(int)sVar2,(int)sVar3,&local_38,local_34);
  if (cVar1 != '\0') {
    if (local_38 == 0x65) {
      FUN_80025664(g_GameStatePtr,0);
    }
    else {
      if (local_38 < 0x66) {
        if (local_38 == 0x51) {
          FUN_80025664(g_GameStatePtr,1);
          return;
        }
        if (local_38 < 0x52) {
          if (local_38 == 0) {
            EntitySetState(param_1,null_FFFF0000h_800a5f94,PTR_Callback_80070094_800a5f98);
            *(undefined1 *)(param_1 + 0x119) = local_34[0];
            return;
          }
        }
        else if (local_38 == 0x52) {
          FUN_800256b8(g_GameStatePtr,1,&local_30);
          return;
        }
      }
      else {
        if (local_38 == 0x79) {
          FUN_80025664(g_GameStatePtr,2);
          return;
        }
        if (local_38 < 0x7a) {
          if (local_38 == 0x66) {
            FUN_800256b8(g_GameStatePtr,0,&local_30);
            return;
          }
        }
        else if (local_38 == 0x7a) {
          FUN_800256b8(g_GameStatePtr,2,&local_30);
          return;
        }
      }
      cVar1 = FUN_8007ee6c(g_GameStatePtr,local_38 & 0xff,&local_30,&local_2f,local_2e);
      if (cVar1 != '\0') {
        iVar5 = *(int *)(param_1 + 0x34);
        *(undefined1 *)(iVar5 + 0x34) = local_30;
        *(undefined1 *)(iVar5 + 0x35) = local_2f;
        *(undefined1 *)(iVar5 + 0x36) = local_2e[0];
      }
    }
  }
  return;
}



// Spawns a projectile entity using sprite hash 0x168254b5. Calculates trajectory using sin/cos
// based on angle and speed parameters.

void SpawnProjectileEntity(int param_1,uint param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  int a;
  int iVar3;
  
  a = 0xc00 - (param_2 & 0xffff);
  iVar1 = csin(a);
  iVar3 = iVar1 * param_3 >> 0xc;
  iVar1 = ccos(a);
  iVar1 = iVar1 * param_3 >> 0xc;
  uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x114,1,0);
  uVar2 = InitEntity_168254b5(uVar2,*(undefined4 *)(param_1 + 0x60),
                              (int)(((uint)*(ushort *)(param_1 + 0x68) + iVar1) * 0x10000) >> 0x10,
                              (int)(((uint)*(ushort *)(param_1 + 0x6a) - iVar3) * 0x10000) >> 0x10,
                              (iVar1 << 0x10) >> 6,iVar3 * -0x10000 >> 6);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar2);
  return;
}



void EntityInitCallback_80070804(int param_1)

{
  FUN_8001cc6c();
  if (*(short *)(param_1 + 0xda) < 0x11) {
    *(short *)(param_1 + 0x68) = *(short *)(param_1 + 0x68) + 5;
  }
  return;
}



undefined4 EntityInitCallback_80070850(int param_1,short param_2,int param_3)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  undefined4 local_30;
  
  if (param_2 == 1) {
    if (param_3 == 0x146ce002) {
      iVar1 = *(int *)(param_1 + 0x50);
      iVar6 = (int)*(short *)(param_1 + 0x68) << 0x10;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (iVar6 == -0x80000000)) {
        trap(0x1800);
      }
      iVar4 = *(int *)(param_1 + 0x54);
      iVar2 = (int)*(short *)(param_1 + 0x6a) << 0x10;
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
      iVar8 = 0;
      *(undefined1 *)(g_GameStatePtr + 0x11a) = 0x1d;
      sVar5 = (short)(iVar6 / iVar1);
      iVar7 = (int)sVar5;
      iVar6 = (iVar2 / iVar4 + -0x1e) * 0x10000 >> 0x10;
      iVar1 = 0;
      while (iVar1 >> 0x10 < 2) {
        iVar8 = iVar8 + 1;
        uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        uVar3 = InitDebrisParticleEntity
                          (uVar3,0xbe68d0c6,iVar7,iVar6,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                           0x7fffffff,0x7fffffff);
        AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
        uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        uVar3 = InitDebrisParticleEntity
                          (uVar3,0xb868d0c6,iVar7,iVar6,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                           0x7fffffff,0x7fffffff);
        AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
        uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
        uVar3 = InitDebrisParticleEntity
                          (uVar3,0xb468d0c6,iVar7,iVar6,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                           0x7fffffff,0x7fffffff);
        AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
        iVar1 = iVar8 * 0x10000;
      }
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      uVar3 = InitDebrisParticleEntity
                        (uVar3,0x3d348056,(int)sVar5,
                         (int)((*(ushort *)(param_1 + 0x6a) - 0x32) * 0x10000) >> 0x10,
                         *(undefined4 *)(param_1 + 0x50),0x60000,0xfff30000,0x400);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
    }
    else if (param_3 == 0x80ca433) {
      iVar1 = *(int *)(param_1 + 0x50);
      iVar6 = (int)*(short *)(param_1 + 0x68) << 0x10;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (iVar6 == -0x80000000)) {
        trap(0x1800);
      }
      iVar2 = *(int *)(param_1 + 0x54);
      iVar4 = (int)*(short *)(param_1 + 0x6a) << 0x10;
      if (iVar2 == 0) {
        trap(0x1c00);
      }
      if ((iVar2 == -1) && (iVar4 == -0x80000000)) {
        trap(0x1800);
      }
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      iVar6 = (int)(short)(iVar6 / iVar1);
      iVar1 = (iVar4 / iVar2 + -0x1e) * 0x10000 >> 0x10;
      uVar3 = InitDebrisParticleEntity
                        (uVar3,0xbe68d0c6,iVar6,iVar1,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                         0x7fffffff,0x7fffffff);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      uVar3 = InitDebrisParticleEntity
                        (uVar3,0xb868d0c6,iVar6,iVar1,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                         0x7fffffff,0x7fffffff);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
      uVar3 = InitDebrisParticleEntity
                        (uVar3,0xb468d0c6,iVar6,iVar1,*(undefined4 *)(param_1 + 0x50),0x7fffffff,
                         0x7fffffff,0x7fffffff);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar3);
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
      uVar3 = FUN_80034a54(uVar3,&PTR_PTR_8009c288,0,10000,1);
      AddEntityToBothLists(g_GameStatePtr,uVar3);
      local_30 = CONCAT22(*(short *)(param_1 + 0x6a) + -0x32,*(undefined2 *)(param_1 + 0x68));
      uVar3 = AllocateFromHeap(blbHeaderBufferBase,0x38,1,0);
      iVar1 = FUN_80034a54(uVar3,&PTR_PTR_8009c9c4,local_30,0x3d6,0);
      *(undefined1 *)(*(int *)(iVar1 + 0x20) + 0x54) = 3;
      AddEntityToBothLists(g_GameStatePtr,iVar1);
    }
  }
  else if (param_2 == 2) {
    *(undefined1 *)(g_GameStatePtr + 0x146) = 1;
  }
  return 0;
}



undefined4 *
CreateSoarPlayerEntity(undefined4 *param_1,undefined4 param_2,short param_3,short param_4)

{
  undefined1 uVar1;
  undefined1 uVar2;
  undefined *puVar3;
  undefined4 *puVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  undefined4 local_28;
  
  InitEntityWithSprite(param_1,&DAT_8009cabc,1000,(int)param_3,(int)param_4);
  param_1[6] = &DAT_80011d34;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  *(undefined1 *)(param_1 + 0x46) = 0;
  *(undefined1 *)((int)param_1 + 0x119) = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  *(undefined2 *)((int)param_1 + 0x11e) = 0;
  *(undefined1 *)((int)param_1 + 0x11b) = 0;
  *(undefined1 *)(param_1 + 0x47) = 0;
  *(undefined2 *)(param_1 + 0x48) = 0;
  *(undefined1 *)((int)param_1 + 0x122) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x123) = 0x40;
  *(undefined1 *)(param_1 + 0x49) = 0x40;
  *(undefined1 *)((int)param_1 + 0x11d) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  puVar4 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
  InitEntitySprite(puVar4,0xca1b20cb,2000,(int)*(short *)(param_1 + 0x1a),
                   (int)((*(ushort *)((int)param_1 + 0x6a) + 0x80) * 0x10000) >> 0x10,0);
  puVar4[6] = &DAT_80011d74;
  FUN_8001d1c0(puVar4,(int)*(short *)((int)puVar4 + 0xda));
  EntitySetRenderFlags(puVar4,0);
  *puVar4 = 0xffff0000;
  puVar4[1] = &LAB_8007061c;
  *(undefined1 *)(puVar4 + 0x40) = 0xaa;
  AddToZOrderList(g_GameStatePtr,puVar4);
  local_28 = CONCAT22(*(short *)((int)param_1 + 0x6a) + 0x80,*(undefined2 *)(param_1 + 0x1a));
  FUN_800722ec(param_1);
  uVar5 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  iVar6 = InitParticleEntity(uVar5,0x4835000,local_28,0,0x10000,0x3d4,0);
  *(undefined2 *)(iVar6 + 0x100) = 0x6f;
  EntitySetRenderFlags(iVar6,1);
  iVar7 = *(int *)(iVar6 + 0x34);
  uVar1 = *(undefined1 *)((int)param_1 + 0x123);
  uVar2 = *(undefined1 *)(param_1 + 0x49);
  *(undefined1 *)(iVar7 + 0x34) = *(undefined1 *)((int)param_1 + 0x122);
  *(undefined1 *)(iVar7 + 0x35) = uVar1;
  *(undefined1 *)(iVar7 + 0x36) = uVar2;
  AddEntityToSortedRenderList(g_GameStatePtr,iVar6);
  puVar3 = PTR_Callback_800729d8_800a5fa8;
  uVar5 = null_FFFF0000h_800a5fa4;
  param_1[0x41] = 0;
  param_1[0x43] = 0xffffffff;
  EntitySetState(param_1,uVar5,puVar3);
  return param_1;
}



int FUN_80071048(int param_1,undefined1 param_2,short param_3,uint param_4)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short unaff_s2;
  
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_4 = (*pcVar4)(param_1 + iVar1,(int)(short)param_4);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar4)(param_1 + iVar1,(int)param_3);
  }
  uVar2 = FUN_80081c0c(g_GameStatePtr,param_2,(int)param_3);
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar1 = ((param_4 | 0xf) - (uVar2 & 0xff)) * 0x10000;
  uVar2 = iVar1 / iVar3;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  iVar3 = uVar2 << 0x10;
  if ((*(int *)(param_1 + 0x58) == 0xc000) && (iVar3 = uVar2 << 0x10, (uVar2 & 3) - 1 < 2)) {
    iVar3 = (uVar2 + 1) * 0x10000;
  }
  return iVar3 >> 0x10;
}



bool FUN_80071228(int param_1,undefined1 param_2,short param_3,uint param_4,ushort param_5)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  short in_t0;
  code *pcVar4;
  short unaff_s2;
  
  iVar3 = (int)*(short *)(param_1 + 0x2e);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      in_t0 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar3 << 0x10) {
      iVar1 = in_t0 + iVar1;
    }
    param_4 = (*pcVar4)(param_1 + iVar1,(int)(short)param_4);
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar1 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar1 + -8);
      pcVar4 = *(code **)(iVar1 + -4);
    }
    iVar1 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar1 = unaff_s2 + iVar1;
    }
    param_3 = (*pcVar4)(param_1 + iVar1,(int)param_3);
  }
  uVar2 = FUN_80081c0c(g_GameStatePtr,param_2,(int)param_3);
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar1 = ((param_4 | 0xf) - (uVar2 & 0xff)) * 0x10000;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  return ((uint)param_5 - iVar1 / iVar3 & 0xffff) < 10;
}



void EntityInitCallback_800713f4(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  short unaff_s2;
  code *pcVar4;
  
  FUN_8001c5b4(param_1,*(undefined4 *)(param_1 + 0x10c));
  sVar1 = *(short *)(param_1 + 0x11e);
  if ((sVar1 != 0) && (*(short *)(param_1 + 0x11e) = sVar1 + -1, sVar1 == 1)) {
    EntitySetState(param_1,null_FFFF0000h_800a5fac,PTR_Callback_8007301c_800a5fb0);
  }
  sVar1 = *(short *)(param_1 + 0x120);
  if ((sVar1 != 0) && (*(short *)(param_1 + 0x120) = sVar1 + -1, sVar1 == 1)) {
    *(undefined1 *)(g_GameStatePtr + 0x148) = *(undefined1 *)(param_1 + 0x11c);
  }
  if (*(char *)(param_1 + 0x11b) != '\0') {
    *(char *)(param_1 + 0x11b) = *(char *)(param_1 + 0x11b) + -1;
  }
  iVar3 = (int)*(short *)(param_1 + 0x26);
  sVar1 = *(short *)(param_1 + 0x68);
  if (iVar3 != 0) {
    if (iVar3 < 1) {
      pcVar4 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar2 = iVar3 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      unaff_s2 = (short)*(undefined4 *)(iVar2 + -8);
      pcVar4 = *(code **)(iVar2 + -4);
    }
    iVar2 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar3 << 0x10) {
      iVar2 = unaff_s2 + iVar2;
    }
    sVar1 = (*pcVar4)(param_1 + iVar2,(int)sVar1);
  }
  *(short *)(param_1 + 0x110) = sVar1 - *(short *)(g_GameStatePtr + 0x44);
  if (*(char *)(param_1 + 0x11d) != '\0') {
    FUN_800720c4(param_1);
  }
  FUN_800722ec(param_1);
  EntityUpdateCallback(param_1);
  return;
}



undefined4 FUN_80071560(int param_1,short param_2,undefined4 param_3,int param_4)

{
  undefined2 uVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  undefined *puVar6;
  short in_t0;
  code *pcVar7;
  short unaff_s2;
  
  uVar5 = null_FFFF0000h_800a5fbc;
  puVar6 = PTR_Callback_80072de0_800a5fc0;
  if (param_2 != 0x1000) {
    if (param_2 != 0x100f) {
      return 0;
    }
    iVar4 = (int)*(short *)(param_4 + 0x26);
    if (iVar4 == 0) {
      *(short *)(param_1 + 0x68) = *(short *)(param_4 + 0x68);
    }
    else {
      if (iVar4 < 1) {
        pcVar7 = *(code **)(param_4 + 0x28);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_4 + *(short *)(param_4 + 0x28));
        in_t0 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar7 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_4 + 0x24);
      if (0 < iVar4 << 0x10) {
        iVar3 = in_t0 + iVar3;
      }
      uVar1 = (*pcVar7)(param_4 + iVar3,(int)*(short *)(param_4 + 0x68));
      *(undefined2 *)(param_1 + 0x68) = uVar1;
    }
    iVar4 = (int)*(short *)(param_4 + 0x2e);
    sVar2 = *(short *)(param_4 + 0x6a);
    if (iVar4 != 0) {
      if (iVar4 < 1) {
        pcVar7 = *(code **)(param_4 + 0x30);
      }
      else {
        iVar3 = iVar4 * 8 + *(int *)(param_4 + *(short *)(param_4 + 0x30));
        unaff_s2 = (short)*(undefined4 *)(iVar3 + -8);
        pcVar7 = *(code **)(iVar3 + -4);
      }
      iVar3 = (int)*(short *)(param_4 + 0x2c);
      if (0 < iVar4 << 0x10) {
        iVar3 = unaff_s2 + iVar3;
      }
      sVar2 = (*pcVar7)(param_4 + iVar3,(int)sVar2);
    }
    puVar6 = PTR_Callback_80072a98_800a5fb8;
    uVar5 = null_FFFF0000h_800a5fb4;
    *(short *)(param_1 + 0x6a) = sVar2 + 0x20;
  }
  EntitySetState(param_1,uVar5,puVar6);
  return 0;
}



undefined4 EntityInitCallback_800716f0(undefined4 param_1,short param_2)

{
  undefined4 uVar1;
  
  uVar1 = FUN_80071560(param_1,param_2);
  if (param_2 == 2) {
    EntityProcessCallbackQueue(param_1);
  }
  return uVar1;
}



undefined4 EntityInitCallback_8007174c(undefined4 param_1,short param_2)

{
  if (param_2 == 2) {
    EntityProcessCallbackQueue();
  }
  return 0;
}



void FUN_800717a0(int param_1)

{
  char cVar1;
  char cVar2;
  char cVar3;
  char cVar4;
  char cVar5;
  byte bVar6;
  undefined2 uVar7;
  int iVar8;
  undefined4 uVar9;
  undefined *puVar10;
  short sVar11;
  
  iVar8 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
          *(int *)(param_1 + 0x104);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar8 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar8;
  cVar1 = EntityApplyMovementCallbacks
                    (param_1,(int)((*(ushort *)(param_1 + 0x68) + 2) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0xf) * 0x10000) >> 0x10);
  cVar2 = EntityApplyMovementCallbacks
                    (param_1,(int)((*(ushort *)(param_1 + 0x68) + 2) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  cVar3 = EntityApplyMovementCallbacks
                    (param_1,(int)((*(ushort *)(param_1 + 0x68) + 2) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  cVar4 = EntityApplyMovementCallbacks
                    (param_1,(int)((*(ushort *)(param_1 + 0x68) + 2) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  cVar5 = EntityApplyMovementCallbacks
                    (param_1,(int)((*(ushort *)(param_1 + 0x68) + 2) * 0x10000) >> 0x10,
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
  uVar9 = null_FFFF0000h_800a5fbc;
  puVar10 = PTR_Callback_80072de0_800a5fc0;
  if ((((cVar1 == -0x4b) || (cVar2 == -0x4b)) || (cVar3 == -0x4b)) ||
     ((cVar4 == -0x4b || (cVar5 == -0x4b)))) {
LAB_80071a00:
    EntitySetState(param_1,uVar9,puVar10);
  }
  else {
    bVar6 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) - 7) * 0x10000) >> 0x10);
    if (bVar6 == 0 || 0x3b < bVar6) {
      bVar6 = EntityApplyMovementCallbacks
                        (param_1,(int)*(short *)(param_1 + 0x68),
                         (int)((*(ushort *)(param_1 + 0x6a) + 2) * 0x10000) >> 0x10);
      uVar9 = null_FFFF0000h_800a5fbc;
      puVar10 = PTR_Callback_80072de0_800a5fc0;
      if (bVar6 == 0xb5) goto LAB_80071a00;
      if (bVar6 == 0 || 0x3b < bVar6) {
        if (bVar6 != 0) {
          return;
        }
        bVar6 = EntityApplyMovementCallbacks
                          (param_1,(int)*(short *)(param_1 + 0x68),
                           (int)((*(ushort *)(param_1 + 0x6a) + 0x10) * 0x10000) >> 0x10);
        uVar9 = null_FFFF0000h_800a5fc4;
        puVar10 = PTR_Callback_800728e8_800a5fc8;
        if (bVar6 == 0 || 0x3b < bVar6) goto LAB_80071a00;
        iVar8 = (int)*(short *)(param_1 + 0x68);
        sVar11 = *(short *)(param_1 + 0x6a) + 0x10;
      }
      else {
        iVar8 = (int)*(short *)(param_1 + 0x68);
        sVar11 = *(short *)(param_1 + 0x6a) + 2;
      }
    }
    else {
      iVar8 = (int)*(short *)(param_1 + 0x68);
      sVar11 = *(short *)(param_1 + 0x6a) + -7;
    }
    uVar7 = FUN_80071048(param_1,bVar6,iVar8,(int)sVar11);
    *(undefined2 *)(param_1 + 0x6a) = uVar7;
  }
  return;
}



void EntityInitCallback_80071a30(int param_1)

{
  int iVar1;
  bool bVar2;
  
  bVar2 = false;
  if ((*(short *)(param_1 + 0x110) < 0x100) && (*(int *)(param_1 + 0x104) < 0x80000)) {
    iVar1 = *(int *)(param_1 + 0x104) + 0x4000;
    *(int *)(param_1 + 0x104) = iVar1;
    bVar2 = true;
    if (0x80000 < iVar1) {
      *(undefined4 *)(param_1 + 0x104) = 0x80000;
    }
  }
  if (((!bVar2) && (0x50000 < *(int *)(param_1 + 0x104))) &&
     (iVar1 = *(int *)(param_1 + 0x104) + -0x8000, *(int *)(param_1 + 0x104) = iVar1,
     iVar1 < 0x50000)) {
    *(undefined4 *)(param_1 + 0x104) = 0x50000;
  }
  FUN_800717a0();
  return;
}



void EntityInitCallback_80071ad4(int param_1)

{
  short sVar1;
  ushort uVar2;
  bool bVar3;
  bool bVar4;
  undefined4 uVar5;
  undefined *puVar6;
  char cVar7;
  char cVar8;
  char cVar9;
  byte bVar10;
  undefined2 uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  
  bVar3 = false;
  sVar1 = *(short *)(param_1 + 0x6a);
  iVar13 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
           *(int *)(param_1 + 0x104);
  uVar2 = *(ushort *)(param_1 + 0x6e);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar13 >> 0x10);
  *(short *)(param_1 + 0x6c) = (short)iVar13;
  cVar7 = EntityApplyMovementCallbacks(param_1,(int)*(short *)(param_1 + 0x68));
  cVar8 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x10) * 0x10000) >> 0x10);
  cVar9 = EntityApplyMovementCallbacks
                    (param_1,(int)*(short *)(param_1 + 0x68),
                     (int)((*(ushort *)(param_1 + 0x6a) - 0x20) * 0x10000) >> 0x10);
  uVar12 = EntityApplyMovementCallbacks
                     (param_1,(int)*(short *)(param_1 + 0x68),
                      (int)((*(ushort *)(param_1 + 0x6a) - 0x30) * 0x10000) >> 0x10);
  if ((((cVar7 == -0x4b) || (cVar8 == -0x4b)) || (cVar9 == -0x4b)) || ((uVar12 & 0xff) == 0xb5)) {
    EntityInitCallback_80072024(uVar12,null_FFFF0000h_800a5fbc,PTR_Callback_80072de0_800a5fc0);
    return;
  }
  iVar13 = *(int *)(param_1 + 0x114);
  if (iVar13 == 0) {
    iVar13 = *(int *)(param_1 + 0x108) + 0x5000;
    *(int *)(param_1 + 0x108) = iVar13;
    if (0x80000 < iVar13) {
      *(undefined4 *)(param_1 + 0x108) = 0x80000;
    }
    iVar13 = *(int *)(param_1 + 0x108);
  }
  else {
    *(undefined4 *)(param_1 + 0x114) = 0;
    iVar13 = *(int *)(param_1 + 0x108) + iVar13;
    *(int *)(param_1 + 0x108) = iVar13;
  }
  iVar13 = sVar1 * 0x10000 + (uint)uVar2 + iVar13;
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar13 >> 0x10);
  *(short *)(param_1 + 0x6e) = (short)iVar13;
  if (*(int *)(param_1 + 0x108) < 0) {
    cVar7 = EntityApplyMovementCallbacks
                      (param_1,(int)*(short *)(param_1 + 0x68),
                       (int)((*(ushort *)(param_1 + 0x6a) - 0x40) * 0x10000) >> 0x10);
    if (cVar7 == -0x4b) {
      EntityInitCallback_80071e88(param_1,null_FFFF0000h_800a5fbc,PTR_Callback_80072de0_800a5fc0);
      return;
    }
  }
  else {
    bVar3 = false;
    if (0 < *(int *)(param_1 + 0x108)) {
      bVar10 = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
      if (bVar10 == 0x5b) {
EntityInitCallback_80071d10:
        EntitySetState(param_1,null_FFFF0000h_800a5fcc,PTR_Callback_80072fc4_800a5fd0);
        EntityInitCallback_80071fd0();
        return;
      }
      iVar14 = *(int *)(param_1 + 0x5c);
      iVar13 = (int)*(short *)(g_GameStatePtr + 0x4a) << 0x10;
      if (iVar14 == 0) {
        trap(0x1c00);
      }
      if ((iVar14 == -1) && (iVar13 == -0x80000000)) {
        trap(0x1800);
      }
      iVar15 = (int)*(short *)(param_1 + 0x6a);
      if ((short)(iVar13 / iVar14) < iVar15) goto EntityInitCallback_80071d10;
      bVar3 = false;
      if (bVar10 == 0xb5) {
        EntityInitCallback_80071e84(param_1,null_FFFF0000h_800a5fbc,PTR_Callback_80072de0_800a5fc0);
        return;
      }
      if ((bVar10 != 0 && bVar10 < 0x3c) &&
         (cVar7 = FUN_80071228(param_1,bVar10,(int)*(short *)(param_1 + 0x68),iVar15,iVar15),
         cVar7 != '\0')) {
        bVar3 = true;
      }
      if (bVar3) {
        EntityInitCallback_80071e2c
                  (param_1,bVar10,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
        return;
      }
      bVar3 = false;
      bVar10 = EntityApplyMovementCallbacks
                         (param_1,(int)*(short *)(param_1 + 0x68),
                          (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
      if ((bVar10 != 0 && bVar10 < 0x3c) &&
         (cVar7 = FUN_80071228(param_1,bVar10,(int)*(short *)(param_1 + 0x68),
                               (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10,
                               (int)(short)*(ushort *)(param_1 + 0x6a)), cVar7 != '\0')) {
        bVar3 = true;
      }
      if (bVar3) {
        uVar11 = FUN_80071048(param_1,bVar10,(int)*(short *)(param_1 + 0x68),
                              (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
        *(undefined2 *)(param_1 + 0x6a) = uVar11;
        goto EntityInitCallback_80071fd8;
      }
      bVar10 = EntityApplyMovementCallbacks
                         (param_1,(int)((*(ushort *)(param_1 + 0x68) + 0xc) * 0x10000) >> 0x10,
                          (int)*(short *)(param_1 + 0x6a));
      puVar6 = PTR_Callback_80072de0_800a5fc0;
      uVar5 = null_FFFF0000h_800a5fbc;
      bVar4 = false;
      if (bVar10 == 0xb5) {
        *(ushort *)(param_1 + 0x6a) = (*(ushort *)(param_1 + 0x6a) & 0xfff0) - 1;
        EntitySetState(param_1,uVar5,puVar6);
        EntityInitCallback_80071fd0();
        return;
      }
      if ((bVar10 != 0 && bVar10 < 0x3c) &&
         (cVar7 = FUN_80071228(param_1,bVar10,
                               (int)((*(ushort *)(param_1 + 0x68) + 0xc) * 0x10000) >> 0x10,
                               (int)*(short *)(param_1 + 0x6a),(int)*(short *)(param_1 + 0x6a)),
         cVar7 != '\0')) {
        bVar4 = true;
      }
      if (bVar4) {
        EntityInitCallback_80071fbc
                  (param_1,bVar10,(int)((*(ushort *)(param_1 + 0x68) + 0x18) * 0x10000) >> 0x10,
                   (int)*(short *)(param_1 + 0x6a));
        return;
      }
      bVar4 = false;
      bVar10 = EntityApplyMovementCallbacks
                         (param_1,(int)((*(ushort *)(param_1 + 0x68) + 0xc) * 0x10000) >> 0x10,
                          (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
      if ((bVar10 != 0 && bVar10 < 0x3c) &&
         (cVar7 = FUN_80071228(param_1,bVar10,
                               (int)((*(ushort *)(param_1 + 0x68) + 0xc) * 0x10000) >> 0x10,
                               (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10,
                               (int)(short)*(ushort *)(param_1 + 0x6a)), cVar7 != '\0')) {
        bVar4 = true;
      }
      if (bVar4) {
        bVar3 = true;
        sVar1 = *(short *)(param_1 + 0x68);
        *(short *)(param_1 + 0x68) = sVar1 + 0xc;
        uVar11 = FUN_80071048(param_1,bVar10,(int)(short)(sVar1 + 0x18),
                              (int)((*(ushort *)(param_1 + 0x6a) - 8) * 0x10000) >> 0x10);
        *(undefined2 *)(param_1 + 0x6a) = uVar11;
      }
    }
  }
  if (!bVar3) {
    return;
  }
EntityInitCallback_80071fd8:
  if ((*(char *)(param_1 + 0x11b) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) != 0)) {
    EntityInitCallback_80072024();
    return;
  }
  EntitySetState(param_1,null_FFFF0000h_800a5fdc,PTR_Callback_80072ce8_800a5fe0);
  return;
}



void EntityInitCallback_80071d10(void)

{
  EntitySetState();
  EntityInitCallback_80071fd0();
  return;
}



void EntityInitCallback_80071e2c(void)

{
  bool bVar1;
  byte bVar2;
  char cVar3;
  undefined2 uVar4;
  int unaff_s1;
  char unaff_s5;
  
  uVar4 = FUN_80071048();
  *(undefined2 *)(unaff_s1 + 0x6a) = uVar4;
  if (unaff_s5 == '\0') {
    bVar2 = EntityApplyMovementCallbacks();
    bVar1 = false;
    if (bVar2 == 0xb5) {
      *(ushort *)(unaff_s1 + 0x6a) = (*(ushort *)(unaff_s1 + 0x6a) & 0xfff0) - 1;
      EntitySetState();
      EntityInitCallback_80071fd0();
      return;
    }
    if ((bVar2 != 0 && bVar2 < 0x3c) && (cVar3 = FUN_80071228(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (bVar1) {
      EntityInitCallback_80071fbc();
      return;
    }
    bVar1 = false;
    bVar2 = EntityApplyMovementCallbacks();
    if ((bVar2 != 0 && bVar2 < 0x3c) && (cVar3 = FUN_80071228(), cVar3 != '\0')) {
      bVar1 = true;
    }
    if (!bVar1) {
      return;
    }
    *(short *)(unaff_s1 + 0x68) = *(short *)(unaff_s1 + 0x68) + 0xc;
    uVar4 = FUN_80071048();
    *(undefined2 *)(unaff_s1 + 0x6a) = uVar4;
  }
  if ((*(char *)(unaff_s1 + 0x11b) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s1 + 0x100)) != 0)) {
    EntityInitCallback_80072024();
    return;
  }
  EntitySetState();
  return;
}



void EntityInitCallback_80071e84(void)

{
  short in_v0;
  int unaff_s1;
  
  *(short *)(unaff_s1 + 0x6a) = in_v0 + -1;
  EntitySetState();
  EntityInitCallback_80071fd0();
  return;
}



void EntityInitCallback_80071e88(void)

{
  undefined2 in_v0;
  int unaff_s1;
  
  *(undefined2 *)(unaff_s1 + 0x6a) = in_v0;
  EntitySetState();
  EntityInitCallback_80071fd0();
  return;
}



void EntityInitCallback_80071fbc(void)

{
  short in_v0;
  undefined2 uVar1;
  int unaff_s1;
  char unaff_s5;
  
  *(short *)(unaff_s1 + 0x68) = in_v0 + 0xc;
  uVar1 = FUN_80071048();
  *(undefined2 *)(unaff_s1 + 0x6a) = uVar1;
  if (unaff_s5 != '\0') {
    if ((*(char *)(unaff_s1 + 0x11b) != '\0') &&
       ((g_DefaultBGColorR & **(ushort **)(unaff_s1 + 0x100)) != 0)) {
      EntityInitCallback_80072024();
      return;
    }
    EntitySetState();
  }
  return;
}



void EntityInitCallback_80071fd0(undefined4 param_1)

{
  int in_v0;
  int unaff_s1;
  
  if (in_v0 != 0) {
    if ((*(char *)(unaff_s1 + 0x11b) != '\0') &&
       ((g_DefaultBGColorR & **(ushort **)(unaff_s1 + 0x100)) != 0)) {
      EntityInitCallback_80072024(param_1,null_FFFF0000h_800a5fd4,PTR_Callback_800727ec_800a5fd8);
      return;
    }
    EntitySetState();
  }
  return;
}



void EntityInitCallback_80071fd8(undefined4 param_1)

{
  int unaff_s1;
  
  if ((*(char *)(unaff_s1 + 0x11b) != '\0') &&
     ((g_DefaultBGColorR & **(ushort **)(unaff_s1 + 0x100)) != 0)) {
    EntityInitCallback_80072024(param_1,null_FFFF0000h_800a5fd4,PTR_Callback_800727ec_800a5fd8);
    return;
  }
  EntitySetState();
  return;
}



void EntityInitCallback_80072024(void)

{
  EntitySetState();
  return;
}



void EntityInitCallback_80072054(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = *(int *)(param_1 + 0x108) + 0x5000;
  *(int *)(param_1 + 0x108) = iVar1;
  if (0x80000 < iVar1) {
    *(undefined4 *)(param_1 + 0x108) = 0x80000;
  }
  iVar2 = *(short *)(param_1 + 0x68) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6c) +
          *(int *)(param_1 + 0x104);
  iVar1 = *(short *)(param_1 + 0x6a) * 0x10000 + (uint)*(ushort *)(param_1 + 0x6e) +
          *(int *)(param_1 + 0x108);
  *(short *)(param_1 + 0x6a) = (short)((uint)iVar1 >> 0x10);
  *(short *)(param_1 + 0x68) = (short)((uint)iVar2 >> 0x10);
  *(short *)(param_1 + 0x6e) = (short)iVar1;
  *(short *)(param_1 + 0x6c) = (short)iVar2;
  return;
}



void FUN_800720c4(int param_1)

{
  bool bVar1;
  int iVar2;
  
  *(undefined4 *)(param_1 + 0x114) = 0;
  bVar1 = false;
  if ((g_DefaultBGColorR & *(ushort *)(*(int *)(param_1 + 0x100) + 2)) != 0) {
    if (*(char *)(param_1 + 0x11a) == '\0') {
      EntitySetState(param_1,null_FFFF0000h_800a5fd4,PTR_Callback_800727ec_800a5fd8);
    }
    else {
      *(undefined1 *)(param_1 + 0x11b) = 10;
    }
  }
  if ((((**(ushort **)(param_1 + 0x100) & 0x2000) != 0) && (*(short *)(param_1 + 0x110) < 0x100)) &&
     (iVar2 = *(int *)(param_1 + 0x104) + 0x4000, *(int *)(param_1 + 0x104) < 0x80000)) {
    *(int *)(param_1 + 0x104) = iVar2;
    bVar1 = true;
    if (0x80000 < iVar2) {
      *(undefined4 *)(param_1 + 0x104) = 0x80000;
    }
  }
  if ((((**(ushort **)(param_1 + 0x100) & 0x8000) != 0) && (0x40 < *(short *)(param_1 + 0x110))) &&
     (0x20000 < *(int *)(param_1 + 0x104))) {
    if (bVar1) goto LAB_80072250;
    iVar2 = *(int *)(param_1 + 0x104) + -0x8000;
    *(int *)(param_1 + 0x104) = iVar2;
    if (iVar2 < 0x20000) {
      *(undefined4 *)(param_1 + 0x104) = 0x20000;
    }
    bVar1 = true;
  }
  if (!bVar1) {
    iVar2 = *(int *)(param_1 + 0x104);
    if (iVar2 < 0x50000) {
      *(int *)(param_1 + 0x104) = iVar2 + 0x4000;
      if (0x50000 < iVar2 + 0x4000) {
        *(undefined4 *)(param_1 + 0x104) = 0x50000;
      }
    }
    else if ((0x50000 < iVar2) &&
            (*(int *)(param_1 + 0x104) = iVar2 + -0x8000, iVar2 + -0x8000 < 0x50000)) {
      *(undefined4 *)(param_1 + 0x104) = 0x50000;
    }
  }
LAB_80072250:
  if (*(char *)(param_1 + 0x119) == '\0') {
    if (*(char *)(param_1 + 0x118) != '\0') {
      *(char *)(param_1 + 0x118) = *(char *)(param_1 + 0x118) + -1;
      if ((g_DefaultBGColorR & **(ushort **)(param_1 + 0x100)) == 0) {
        if (*(int *)(param_1 + 0x108) < -0x48000) {
          *(undefined4 *)(param_1 + 0x108) = 0xfffb8000;
        }
      }
      else {
        *(undefined4 *)(param_1 + 0x114) = 0xffffee00;
      }
    }
  }
  else {
    *(char *)(param_1 + 0x119) = *(char *)(param_1 + 0x119) + -1;
    *(undefined4 *)(param_1 + 0x114) = 0xffffee00;
    *(char *)(param_1 + 0x118) = *(char *)(param_1 + 0x118) + -1;
  }
  return;
}



void FUN_800722ec(int param_1,undefined4 param_2,short param_3)

{
  undefined1 uVar1;
  char cVar2;
  undefined1 uVar3;
  short sVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  code *pcVar8;
  short unaff_s2;
  uint local_40;
  undefined1 local_3c [36];
  
  iVar7 = (int)*(short *)(param_1 + 0x26);
  sVar4 = *(short *)(param_1 + 0x68);
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x28);
    }
    else {
      iVar6 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x28));
      param_3 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar8 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x24);
    if (0 < iVar7 << 0x10) {
      iVar6 = param_3 + iVar6;
    }
    sVar4 = (*pcVar8)(param_1 + iVar6,(int)sVar4);
  }
  iVar7 = (int)*(short *)(param_1 + 0x2e);
  sVar5 = *(short *)(param_1 + 0x6a);
  if (iVar7 != 0) {
    if (iVar7 < 1) {
      pcVar8 = *(code **)(param_1 + 0x30);
    }
    else {
      iVar6 = iVar7 * 8 + *(int *)(param_1 + *(short *)(param_1 + 0x30));
      unaff_s2 = (short)*(undefined4 *)(iVar6 + -8);
      pcVar8 = *(code **)(iVar6 + -4);
    }
    iVar6 = (int)*(short *)(param_1 + 0x2c);
    if (0 < iVar7 << 0x10) {
      iVar6 = unaff_s2 + iVar6;
    }
    sVar5 = (*pcVar8)(param_1 + iVar6,(int)sVar5);
  }
  cVar2 = CheckTriggerZoneCollision(g_GameStatePtr,(int)sVar4,(int)sVar5,&local_40,local_3c);
  if (cVar2 != '\0') {
    if (local_40 == 0x65) {
      FUN_80025664(g_GameStatePtr,0);
    }
    else {
      if (local_40 < 0x66) {
        if (local_40 == 0x51) {
          FUN_80025664(g_GameStatePtr,1);
          return;
        }
        if (local_40 < 0x52) {
          if (local_40 == 0) {
            if (*(char *)(param_1 + 0x11d) == '\0') {
              return;
            }
            if ((*(short *)(param_1 + 0xa2) == -1) &&
               (*(code **)(param_1 + 0xa4) == EntityInitCallback_800726c8)) {
              *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
              *(code **)(param_1 + 0x20) = EntityInitCallback_80071a30;
            }
            *(undefined1 *)(param_1 + 0x11d) = 0;
            *(undefined2 *)(param_1 + 0x11e) = 0x5a;
            *(undefined1 *)(param_1 + 0x11c) = local_3c[0];
            return;
          }
          if (local_40 == 0x2d) {
            if (*(char *)(param_1 + 0x11d) == '\0') {
              return;
            }
            if ((*(short *)(param_1 + 0xa2) == -1) &&
               (*(code **)(param_1 + 0xa4) == EntityInitCallback_800726c8)) {
              *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
              *(code **)(param_1 + 0x20) = EntityInitCallback_80071a30;
            }
            uVar3 = 99;
            if (2 < (byte)g_pPlayerState[0x1a]) {
              uVar3 = local_3c[0];
            }
            *(undefined1 *)(param_1 + 0x11c) = uVar3;
            *(undefined1 *)(param_1 + 0x11d) = 0;
            *(undefined2 *)(param_1 + 0x11e) = 0x5a;
            return;
          }
        }
        else if (local_40 == 0x52) {
          FUN_800256b8(g_GameStatePtr,1,param_1 + 0x122);
          return;
        }
      }
      else {
        if (local_40 == 0x79) {
          FUN_80025664(g_GameStatePtr,2);
          return;
        }
        if (local_40 < 0x7a) {
          if (local_40 == 0x66) {
            FUN_800256b8(g_GameStatePtr,0,param_1 + 0x122);
            return;
          }
        }
        else if (local_40 == 0x7a) {
          FUN_800256b8(g_GameStatePtr,2,param_1 + 0x122);
          return;
        }
      }
      cVar2 = FUN_8007ee6c(g_GameStatePtr,local_40 & 0xff,param_1 + 0x122,param_1 + 0x123,
                           param_1 + 0x124);
      if (cVar2 != '\0') {
        iVar7 = *(int *)(param_1 + 0x34);
        uVar3 = *(undefined1 *)(param_1 + 0x123);
        uVar1 = *(undefined1 *)(param_1 + 0x124);
        *(undefined1 *)(iVar7 + 0x34) = *(undefined1 *)(param_1 + 0x122);
        *(undefined1 *)(iVar7 + 0x35) = uVar3;
        *(undefined1 *)(iVar7 + 0x36) = uVar1;
      }
    }
  }
  return;
}



void EntityInitCallback_800726c8(undefined4 *param_1)

{
  undefined4 uVar1;
  code *pcVar2;
  
  uVar1 = FUN_8001c4a4(param_1,0x40f8c274);
  param_1[0x43] = uVar1;
  param_1[0x42] = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  if (*(char *)((int)param_1 + 0x11d) == '\0') {
    pcVar2 = EntityInitCallback_80071a30;
  }
  else {
    pcVar2 = FUN_800717a0;
  }
  param_1[7] = 0xffff0000;
  param_1[8] = pcVar2;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  SetEntitySpriteId(param_1,0x3c389550,1);
  EntitySetCallback(param_1,null_FFFF0000h_800a5fe4,PTR_Callback_800727b4_800a5fe8);
  return;
}



void Callback_800727b4(int param_1)

{
  FUN_8007c7b8(*(undefined4 *)(param_1 + 0x10c));
  *(undefined4 *)(param_1 + 0x10c) = 0xffffffff;
  return;
}



void Callback_800727ec(undefined4 *param_1)

{
  *(undefined1 *)(param_1 + 0x46) = 5;
  param_1[0x45] = 0xffffee00;
  param_1[0x42] = 0xfffa0000;
  *(undefined1 *)((int)param_1 + 0x119) = 0;
  *(undefined1 *)((int)param_1 + 0x11b) = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 1;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityInitCallback_80071ad4;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  SetEntitySpriteId(param_1,0x1a202d81,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  FUN_8001d0c0(param_1,0);
  return;
}



void Callback_800728e8(undefined4 *param_1)

{
  *(undefined1 *)(param_1 + 0x46) = 0;
  *(undefined1 *)((int)param_1 + 0x119) = 0;
  param_1[0x45] = 0;
  param_1[0x42] = 0;
  *(undefined1 *)((int)param_1 + 0x11b) = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 1;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityInitCallback_80071ad4;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  SetEntitySpriteId(param_1,0x1a202d81,1);
  FUN_8001d170(param_1,0x1084280);
  FUN_8001d1f0(param_1,0x2421405);
  FUN_8001d0c0(param_1,0);
  return;
}



void Callback_800729d8(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x60) = 1;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  param_1[7] = 0;
  param_1[8] = 0;
  FUN_8001d1c0(param_1,(int)*(short *)((int)param_1 + 0xda));
  EntitySetRenderFlags(param_1,0);
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  return;
}



void Callback_80072a98(undefined4 *param_1)

{
  param_1[0x14] = 0xa000;
  param_1[0x15] = 0xa000;
  *(undefined1 *)(param_1[0xd] + 10) = 1;
  *(undefined1 *)(param_1 + 0x46) = 0;
  *(undefined1 *)((int)param_1 + 0x119) = 0;
  param_1[0x45] = 0;
  param_1[0x42] = 0;
  *(undefined1 *)((int)param_1 + 0x11b) = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 1;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityInitCallback_80071ad4;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_800716f0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  *(undefined1 *)((int)param_1 + 0x11d) = 0;
  SetEntitySpriteId(param_1,0x8208902,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_80072ba0;
  return;
}



void EntityInitCallback_80072ba0(undefined4 *param_1)

{
  param_1[0x14] = 0x10000;
  param_1[0x15] = 0x10000;
  param_1[0x42] = 0;
  param_1[0x41] = 0x50000;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  *(short *)((int)param_1 + 0x6a) = *(short *)((int)param_1 + 0x6a) + 0x1e;
  param_1[7] = 0xffff0000;
  param_1[8] = FUN_8001cc6c;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_800716f0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  *(undefined1 *)((int)param_1 + 0x11d) = 0;
  SetEntitySpriteId(param_1,0x3eb98520,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_800726c8;
  EntitySetCallback(param_1,null_FFFF0000h_800a5fec,PTR_Callback_80072cac_800a5ff0);
  return;
}



void Callback_80072cac(int param_1)

{
  *(undefined1 *)(param_1 + 0x11d) = 1;
  FUN_80022d94(g_GameStatePtr,4,0x100f,0,0);
  return;
}



void Callback_80072ce8(undefined4 *param_1)

{
  param_1[0x42] = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = FUN_800717a0;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_800716f0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  SetEntitySpriteId(param_1,0x1a202d81,1);
  FUN_8001d0f0(param_1,0x60680076);
  FUN_8001d1c0(param_1,0xffffffff);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_800726c8;
  return;
}



void Callback_80072de0(undefined4 *param_1)

{
  int iVar1;
  
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = EntityInitCallback_80072054;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_8007174c;
  *param_1 = 0xffff0000;
  param_1[1] = EntityUpdateCallback;
  SetEntitySpriteId(param_1,0x1e181d10,1);
  FUN_8001c4a4(param_1,0x40784034);
  iVar1 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  InitEntitySprite(iVar1,0x1b301085,1000,(int)*(short *)(param_1 + 0x1a),
                   (int)((*(ushort *)((int)param_1 + 0x6a) - 0x1e) * 0x10000) >> 0x10,0);
  *(undefined **)(iVar1 + 0x18) = &DAT_80011d54;
  *(undefined4 *)(iVar1 + 0x50) = 0xa000;
  *(undefined4 *)(iVar1 + 0x54) = 0xa000;
  *(undefined2 *)(iVar1 + 0x10) = 0x442;
  *(undefined4 *)(iVar1 + 8) = 0xffff0000;
  *(code **)(iVar1 + 0xc) = EntityInitCallback_80070850;
  EntitySetRenderFlags(iVar1,0);
  *(undefined4 *)(iVar1 + 0x1c) = 0xffff0000;
  *(code **)(iVar1 + 0x20) = EntityInitCallback_80070804;
  *(undefined4 *)(iVar1 + 0x24) = 0xffff0000;
  *(code **)(iVar1 + 0x28) = ScaleXByEntityScale;
  *(undefined4 *)(iVar1 + 0x2c) = 0xffff0000;
  *(code **)(iVar1 + 0x30) = ScaleYByEntityScale;
  AddEntityToSortedRenderList(g_GameStatePtr,iVar1);
  return;
}



void Callback_80072fc4(undefined4 *param_1)

{
  *(undefined1 *)(g_GameStatePtr + 0x146) = 1;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[7] = 0;
  param_1[8] = 0;
  return;
}



void Callback_8007301c(undefined4 *param_1)

{
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  param_1[7] = 0xffff0000;
  param_1[8] = FUN_8001cc6c;
  param_1[2] = 0xffff0000;
  param_1[3] = EntityInitCallback_800716f0;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  *(undefined1 *)((int)param_1 + 0x11d) = 0;
  SetEntitySpriteId(param_1,0x5238cd10,1);
  param_1[0x26] = 0xffff0000;
  param_1[0x27] = EntityInitCallback_800730f8;
  return;
}



void EntityInitCallback_800730f8(undefined4 *param_1)

{
  undefined4 uVar1;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x24,1,0);
  uVar1 = FUN_80038300(uVar1);
  AddToZOrderList(g_GameStatePtr,uVar1);
  *(undefined2 *)(param_1 + 0x48) = 0x20;
  SetEntitySpriteId(param_1,0x4835000,1);
  param_1[2] = 0xffff0000;
  param_1[3] = FUN_80071560;
  *param_1 = 0xffff0000;
  param_1[1] = EntityInitCallback_800713f4;
  param_1[7] = 0;
  param_1[8] = 0;
  return;
}



int FUN_80073338(int param_1,short param_2,short param_3)

{
  u_short uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  InitEntitySprite(param_1,0x1b301085,1000,(int)param_2,(int)param_3,0);
  *(undefined **)(param_1 + 0x18) = &DAT_80011dd4;
  *(undefined4 *)(param_1 + 0x24) = 0xffff0000;
  *(code **)(param_1 + 0x28) = ScaleXByEntityScale;
  *(undefined4 *)(param_1 + 0x2c) = 0xffff0000;
  *(code **)(param_1 + 0x30) = ScaleYByEntityScale;
  *(undefined4 *)(param_1 + 0x58) = 0xc000;
  iVar2 = *(int *)(param_1 + 0x58);
  iVar5 = (int)*(short *)(param_1 + 0x68) << 0x10;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (iVar5 == -0x80000000)) {
    trap(0x1800);
  }
  *(undefined4 *)(param_1 + 0x5c) = 0xc000;
  iVar3 = *(int *)(param_1 + 0x5c);
  iVar4 = (int)*(short *)(param_1 + 0x6a) << 0x10;
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  *(undefined4 *)(param_1 + 0x50) = 0xc000;
  *(undefined4 *)(param_1 + 0x54) = 0xc000;
  *(undefined2 *)(param_1 + 0x10) = 0x442;
  *(short *)(param_1 + 0x68) = (short)(iVar5 / iVar2);
  *(short *)(param_1 + 0x6a) = (short)(iVar4 / iVar3);
  *(undefined4 *)(param_1 + 8) = 0xffff0000;
  *(undefined1 **)(param_1 + 0xc) = &LAB_800734fc;
  EntitySetRenderFlags(param_1,0);
  *(undefined4 *)(param_1 + 0x1c) = 0xffff0000;
  *(code **)(param_1 + 0x20) = FUN_8001cc6c;
  iVar2 = *(int *)(param_1 + 0x34);
  uVar1 = GetTPage((uint)*(byte *)(iVar2 + 0x32),1,(int)*(short *)(iVar2 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar2 + 0x12) & 0xffffff00);
  *(u_short *)(iVar2 + 0x24) = uVar1;
  return param_1;
}



undefined4 *
CreateRunnPlayerEntity(undefined4 *param_1,undefined4 param_2,short param_3,short param_4)

{
  InitEntityWithSprite(param_1,&DAT_8009cadc,1000,(int)param_3,(int)param_4);
  param_1[6] = &DAT_80011db4;
  param_1[0x43] = 0xffffffff;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  param_1[0x41] = 0;
  *(undefined1 *)(param_1 + 0x42) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80073a88;
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_80073b88;
  EntitySetState(param_1,null_FFFF0000h_800a5ffc,PTR_LAB_800a6000);
  return param_1;
}



void FUN_80073ce8(int param_1)

{
  int iVar1;
  int iVar2;
  
  EntityApplyMovementCallbacks
            (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
  if ((**(ushort **)(param_1 + 0x100) & 0x1000) == 0) {
    iVar2 = 0xc000;
    if ((**(ushort **)(param_1 + 0x100) & 0x4000) == 0) goto LAB_80073d4c;
    iVar1 = *(int *)(param_1 + 0x104);
  }
  else {
    iVar1 = *(int *)(param_1 + 0x104);
    iVar2 = -0xc000;
  }
  *(int *)(param_1 + 0x104) = iVar1 + iVar2;
LAB_80073d4c:
  if ((*(ushort *)(*(int *)(param_1 + 0x100) + 2) & 0xf0) != 0) {
    EntitySetState(param_1,null_FFFF0000h_800a600c,PTR_LAB_800a6010);
  }
  return;
}



// Create FINN boat/fish player entity for flag 0x0400 levels.
// 
// Parameters:
// - param_1: Entity buffer pointer
// - param_2: Input controller pointer (g_pPlayer1Input)
// - param_3: Spawn X position
// - param_4: Spawn Y position
// 
// Initializes:
// - Main sprite 0x3da80d13 at z-order 1000
// - Secondary sprite (wake/shadow) 0x3da80d13 at z-order 0x3e9
// - Tank control system (rotation + forward movement)
// - Inline tick callbacks at 0x800742c8 and 0x80074a40
// - State machine with table at 0x800a601c
// - Animation system via 0xcc6c8070
// 
// Entity offsets set:
// +0x100 = inputController
// +0x104 = xVelocity (0)
// +0x108 = yVelocity (0)
// +0x10c = rotationAngle (0)
// +0x10f = rotationVel (0)
// +0x41 = shadowEntity

undefined4 *
CreateFinnPlayerEntity(undefined4 *param_1,undefined4 param_2,short param_3,short param_4)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 uVar4;
  
  InitEntityWithSprite(param_1,&DAT_8009caec,1000,(int)param_3,(int)param_4);
  puVar1 = blbHeaderBufferBase;
  param_1[6] = &DAT_80011e14;
  uVar2 = AllocateFromHeap(puVar1,0x100,1,0);
  iVar3 = InitEntitySprite(uVar2,0x3da80d13,0x3e9,(int)param_3,(int)param_4,0);
  param_1[0x41] = iVar3;
  *(undefined1 *)(*(int *)(iVar3 + 0x34) + 10) = 0;
  AddEntityToSortedRenderList(g_GameStatePtr,param_1[0x41]);
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  param_1[0x42] = 0;
  *(undefined1 *)(param_1 + 0x43) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800742c8;
  param_1[7] = 0xffff0000;
  param_1[8] = &LAB_80074a40;
  uVar4 = FUN_8001c4a4(param_1,0xcc6c8070);
  puVar1 = PTR_LAB_800a6020;
  uVar2 = null_FFFF0000h_800a601c;
  param_1[0x44] = uVar4;
  EntitySetState(param_1,uVar2,puVar1);
  return param_1;
}



void FinnStateIdle(int param_1)

{
  int iVar1;
  int iVar2;
  
  EntityApplyMovementCallbacks
            (param_1,(int)*(short *)(param_1 + 0x68),(int)*(short *)(param_1 + 0x6a));
  if ((**(ushort **)(param_1 + 0x100) & 0x8000) == 0) {
    iVar2 = 0x20000;
    if ((**(ushort **)(param_1 + 0x100) & 0x2000) == 0) goto LAB_80074bb4;
    iVar1 = *(int *)(param_1 + 0x108);
  }
  else {
    iVar1 = *(int *)(param_1 + 0x108);
    iVar2 = -0x20000;
  }
  *(int *)(param_1 + 0x108) = iVar1 + iVar2;
LAB_80074bb4:
  if ((*(ushort *)(*(int *)(param_1 + 0x100) + 2) & 0xf0) != 0) {
    EntitySetState(param_1,null_FFFF0000h_800a6034,PTR_LAB_800a6038);
  }
  return;
}



void FUN_800754cc(int param_1)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  InitEntityWithSprite
            (iVar2,&DAT_8009cbe8,2000,(int)((*(ushort *)(param_1 + 0x68) + 0x6a) * 0x10000) >> 0x10,
             (int)((*(ushort *)(param_1 + 0x6a) + 0xe) * 0x10000) >> 0x10);
  *(undefined **)(iVar2 + 0x18) = &DAT_8001208c;
  *(undefined4 *)(iVar2 + 0x24) = 0xffff0000;
  *(code **)(iVar2 + 0x28) = EntityCallback_8001a2cc;
  *(undefined4 *)(iVar2 + 0x2c) = 0xffff0000;
  *(code **)(iVar2 + 0x30) = EntityCallback_8001a2e8;
  uVar1 = g_GameStatePtr;
  *(int *)(param_1 + 0x100) = iVar2;
  AddEntityToSortedRenderList(uVar1);
  *(undefined1 *)(param_1 + 0x104) = 0;
  *(undefined4 *)(param_1 + 0x24) = 0xffff0000;
  *(code **)(param_1 + 0x28) = EntityCallback_8001a2cc;
  *(undefined4 *)(param_1 + 0x2c) = 0xffff0000;
  *(code **)(param_1 + 0x30) = EntityCallback_8001a2e8;
  return;
}



int FUN_80075ff4(int param_1,short param_2,short param_3,undefined4 param_4,undefined4 param_5)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  
  InitEntitySprite(param_1,0x10094096,1000,(int)param_2,(int)param_3,0);
  *(undefined **)(param_1 + 0x18) = &DAT_80012034;
  FUN_800754cc(param_1);
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(param_1 + 0x18) = &DAT_80011ed4;
  *(undefined4 *)(param_1 + 0x140) = param_4;
  *(undefined4 *)(param_1 + 0x13c) = param_5;
  uVar2 = AllocateFromHeap(puVar1,0x100,1,0);
  uVar5 = (uint)**(byte **)(param_1 + 0x13c) % 0xc;
  iVar3 = InitEntitySprite(uVar2,0x3099991b,2000,(int)(short)(&null_00B2h_8009cb4c)[uVar5 * 2],
                           (int)(short)(&null_0076h_8009cb4e)[uVar5 * 2],0);
  *(int *)(param_1 + 0x138) = iVar3;
  *(undefined1 *)(*(int *)(iVar3 + 0x34) + 10) = 0;
  uVar6 = 0;
  AddEntityToSortedRenderList(g_GameStatePtr,*(undefined4 *)(param_1 + 0x138));
  uVar5 = 0;
  while (uVar5 < 0xc) {
    uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
    uVar4 = InitEntitySprite(uVar2,0xec95689b,2000,(int)(short)(&null_00B2h_8009cb4c)[uVar5 * 2],
                             (int)(short)(&null_0076h_8009cb4e)[uVar5 * 2],0);
    uVar2 = g_GameStatePtr;
    iVar3 = uVar5 * 4 + param_1;
    *(undefined4 *)(iVar3 + 0x108) = uVar4;
    AddEntityToSortedRenderList(uVar2);
    if (uVar5 < **(byte **)(param_1 + 0x13c)) {
      FUN_8001d0c0(*(undefined4 *)(iVar3 + 0x108),*(undefined1 *)(*(int *)(param_1 + 0x140) + uVar5)
                  );
    }
    else {
      *(undefined1 *)(*(int *)(*(int *)(iVar3 + 0x108) + 0x34) + 10) = 0;
    }
    uVar5 = uVar6 & 0xff;
    uVar6 = uVar6 + 1;
    FUN_8001d218(*(undefined4 *)(uVar5 * 4 + param_1 + 0x108),0);
    uVar5 = uVar6 & 0xff;
  }
  return param_1;
}



// Menu/UI entity initialization. Uses sprite ID 0xb8700ca1 for menu system elements.

undefined4 *
InitMenuEntity(undefined4 *param_1,undefined4 param_2,undefined4 param_3,undefined1 param_4)

{
  byte bVar1;
  int iVar2;
  
  InitEntitySprite(param_1,0xb8700ca1,1000,0,0,1);
  param_1[6] = &DAT_80011e94;
  null_00h_800a6045 = 0;
  *(undefined2 *)((int)param_1 + 0x13a) = 0;
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  *(undefined1 *)(param_1 + 0x4b) = 0;
  *(undefined1 *)((int)param_1 + 0x12d) = 0;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  param_1[0x4d] = param_3;
  *(undefined1 *)(param_1 + 0x4e) = param_4;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_80077940;
  FUN_800778ec(param_1);
  bVar1 = GetCurrentStageIndex(g_GameStatePtr + 0x84);
  if (4 < bVar1) {
    bVar1 = 1;
  }
  if (bVar1 == 2) {
    FUN_80077068(param_1);
    goto LAB_80076a6c;
  }
  if (2 < bVar1) {
    if (bVar1 == 3) {
      FUN_800771c4(param_1);
      goto LAB_80076a6c;
    }
    if (bVar1 == 4) {
      FUN_800773fc(param_1);
      goto LAB_80076a6c;
    }
  }
  FUN_80076ba0(param_1);
LAB_80076a6c:
  if (*(char *)(param_1 + 0x4b) != '\0') {
    iVar2 = *(int *)(param_1[*(byte *)((int)param_1 + 0x12d) + 0x41] + 0x18);
    (**(code **)(iVar2 + 0x24))
              (param_1[*(byte *)((int)param_1 + 0x12d) + 0x41] + (int)*(short *)(iVar2 + 0x20));
  }
  return param_1;
}



void FUN_80076ba0(int param_1)

{
  undefined1 *puVar1;
  undefined1 uVar2;
  bool bVar3;
  undefined1 auVar4 [4];
  code *pcVar5;
  undefined4 uVar6;
  int iVar7;
  int *piVar8;
  uint uVar9;
  uint uVar10;
  undefined1 local_48 [4];
  undefined4 local_44;
  undefined1 local_40 [8];
  undefined1 auStack_38 [12];
  code *pcStack_2c;
  
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  uVar6 = InitEntitySprite(uVar6,0x68c01218,2000,0xa0,0xa8,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar6);
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  uVar6 = InitEntitySprite(uVar6,0x3080840d,2000,0xa0,0xa8,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar6);
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  uVar6 = InitEntitySprite(uVar6,0x3080820d,2000,0xa0,0xa8,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar6);
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  uVar6 = InitEntitySprite(uVar6,0x30808e0d,2000,0xa0,0xa8,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar6);
  uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  uVar6 = InitEntitySprite(uVar6,0x38a0c119,2000,0xa0,0xa8,0);
  AddEntityToSortedRenderList(g_GameStatePtr,uVar6);
  iVar7 = AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
  InitEntityWithSprite(iVar7,&DAT_8009cbdc,2000,0xa0,0xa8);
  *(undefined **)(iVar7 + 0x18) = &DAT_800120ac;
  *(undefined4 *)(iVar7 + 0x24) = 0xffff0000;
  *(code **)(iVar7 + 0x28) = EntityCallback_8001a2cc;
  local_44 = 0xffff0000;
  local_40._0_4_ = EntityCallback_8001a2e8;
  *(undefined4 *)(iVar7 + 0x2c) = 0xffff0000;
  *(code **)(iVar7 + 0x30) = EntityCallback_8001a2e8;
  EntitySetState(iVar7,null_FFFF0000h_800a6050,PTR_LAB_800a6054);
  AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
  for (uVar10 = 0; uVar9 = uVar10 & 0xff, uVar9 < 4; uVar10 = uVar10 + 1) {
    iVar7 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
    uVar2 = (&null_62h_8009cb10)[uVar9 * 6];
    InitEntitySprite(iVar7,0x10094096,1000,(int)(short)(&null_002Ch_8009cb0c)[uVar9 * 3],
                     (int)(short)(&null_0063h_8009cb0e)[uVar9 * 3],0);
    *(undefined **)(iVar7 + 0x18) = &DAT_80012034;
    FUN_800754cc(iVar7);
    *(undefined **)(iVar7 + 0x18) = &DAT_80011fdc;
    *(undefined1 *)(iVar7 + 0x109) = 0;
    *(undefined1 *)(iVar7 + 0x108) = uVar2;
    *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar7;
    AddEntityToSortedRenderList
              (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104))
    ;
    *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  }
  piVar8 = &null_28A0C119h_8009cc08;
  InitSpriteContext(param_1 + 0x78,null_28A0C119h_8009cc08);
  while( true ) {
    if (*piVar8 == 0) {
      return;
    }
    FUN_8007bbec(auStack_38);
    local_48 = (undefined1  [4])pcStack_2c;
    puVar1 = local_48 + 3;
    uVar10 = (uint)puVar1 & 3;
    *(uint *)(puVar1 + -uVar10) =
         *(uint *)(puVar1 + -uVar10) & -1 << (uVar10 + 1) * 8 | (uint)pcStack_2c >> (3 - uVar10) * 8
    ;
    pcVar5 = pcStack_2c;
    auVar4 = local_48;
    bVar3 = false;
    if (local_48._0_2_ != 0) {
      puVar1 = local_40 + 3;
      uVar10 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar10) =
           *(uint *)(puVar1 + -uVar10) & -1 << (uVar10 + 1) * 8 |
           (uint)pcStack_2c >> (3 - uVar10) * 8;
      local_40._0_4_ = pcVar5;
      uVar6 = local_40._0_4_;
      local_40._2_2_ = (undefined2)((uint)pcVar5 >> 0x10);
      bVar3 = local_40._2_2_ != 0;
      local_40._0_4_ = uVar6;
    }
    local_48 = auVar4;
    if (bVar3) break;
    piVar8 = piVar8 + 1;
  }
  if (*piVar8 == 0) {
    return;
  }
  if (*piVar8 == 0x40b18011) {
    iVar7 = AllocateFromHeap(blbHeaderBufferBase,0x104,1,0);
    InitEntityWithSprite(iVar7,&DAT_8009cbf8,0x44c,0x9f,0xa8);
    *(undefined **)(iVar7 + 0x18) = &DAT_80011eb4;
    local_44 = 0xffff0000;
    local_40._0_4_ = &LAB_8007683c;
    *(undefined4 *)(iVar7 + 8) = 0xffff0000;
    *(undefined1 **)(iVar7 + 0xc) = &LAB_8007683c;
    *(undefined1 *)(iVar7 + 0x100) = 0;
  }
  else {
    local_48 = (undefined1  [4])0xa8009f;
    uVar6 = AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
    iVar7 = InitParticleEntity(uVar6,*piVar8,local_48,0,0x10000,0x3d4,0);
  }
  AddEntityToSortedRenderList(g_GameStatePtr,iVar7);
  return;
}



void FUN_80077068(int param_1)

{
  undefined4 uVar1;
  int iVar2;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x144,1,0);
  uVar1 = FUN_80075ff4(uVar1,0x24,0x69,&DAT_8009cb00,&DAT_800a6041);
  *(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = uVar1;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
  InitEntitySprite(iVar2,0x10094096,1000,0x20,0x85,0);
  *(undefined **)(iVar2 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar2);
  *(undefined **)(iVar2 + 0x18) = &DAT_80011fdc;
  *(undefined1 *)(iVar2 + 0x109) = 1;
  *(undefined1 *)(iVar2 + 0x108) = 1;
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar2;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(undefined1 *)(param_1 + 0x12d) = 1;
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  return;
}



void FUN_800771c4(int param_1)

{
  undefined *puVar1;
  u_short uVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  
  iVar3 = AllocateFromHeap(blbHeaderBufferBase,0x110,1,0);
  InitEntitySprite(iVar3,0x10094096,1000,0x5f,0x9b,0);
  *(undefined **)(iVar3 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar3);
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(iVar3 + 0x18) = &DAT_80011f2c;
  *(undefined1 **)(iVar3 + 0x108) = &null_00h_800a6042;
  uVar4 = AllocateFromHeap(puVar1,0x100,1,0);
  iVar5 = InitEntitySprite(uVar4,0x81100030,2000,0xe8,0xac,0);
  *(int *)(iVar3 + 0x10c) = iVar5;
  iVar5 = *(int *)(iVar5 + 0x34);
  uVar2 = GetTPage((uint)*(byte *)(iVar5 + 0x32),2,(int)*(short *)(iVar5 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar5 + 0x12) & 0xffffff00);
  uVar4 = g_GameStatePtr;
  *(u_short *)(iVar5 + 0x24) = uVar2;
  *(undefined2 *)(*(int *)(iVar3 + 0x10c) + 0x10) = 0x4b0;
  AddEntityToSortedRenderList(uVar4,*(undefined4 *)(iVar3 + 0x10c));
  FUN_8001d218(*(undefined4 *)(iVar3 + 0x10c),0);
  FUN_8001d0c0(*(undefined4 *)(iVar3 + 0x10c),**(undefined1 **)(iVar3 + 0x108));
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar3;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  iVar3 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
  InitEntitySprite(iVar3,0x10094096,1000,0x59,0xb7,0);
  *(undefined **)(iVar3 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar3);
  *(undefined **)(iVar3 + 0x18) = &DAT_80011fdc;
  *(undefined1 *)(iVar3 + 0x109) = 1;
  *(undefined1 *)(iVar3 + 0x108) = 1;
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar3;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(undefined1 *)(param_1 + 0x12d) = 1;
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  return;
}



void FUN_800773fc(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined4 uVar3;
  short *psVar4;
  int iVar5;
  
  *(undefined1 *)(param_1 + 0x12e) = null_04h_800a607f;
  *(undefined1 *)(param_1 + 0x12f) = null_04h_800a6080;
  *(char *)(param_1 + 0x130) = null_02h_800a607e + -1;
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x11c,1,0);
  InitEntitySprite(iVar2,0x10094096,1000,0x29,0x41,0);
  *(undefined **)(iVar2 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar2);
  *(undefined1 *)(iVar2 + 0x10c) = 2;
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(iVar2 + 0x108) = &DAT_800a6048;
  *(undefined **)(iVar2 + 0x18) = &DAT_80011f84;
  *(int *)(iVar2 + 0x110) = param_1 + 0x130;
  *(int *)(iVar2 + 0x118) = param_1;
  uVar3 = AllocateFromHeap(puVar1,0x100,1,0);
  psVar4 = (short *)((uint)**(byte **)(iVar2 + 0x110) * 4 + *(int *)(iVar2 + 0x108));
  iVar5 = InitEntitySprite(uVar3,0xe289c059,2000,(int)*psVar4,(int)psVar4[1],0);
  uVar3 = g_GameStatePtr;
  *(int *)(iVar2 + 0x114) = iVar5;
  *(undefined2 *)(iVar5 + 0x10) = 0x4b0;
  AddEntityToSortedRenderList(uVar3,*(undefined4 *)(iVar2 + 0x114));
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar2;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x11c,1,0);
  InitEntitySprite(iVar2,0x10094096,1000,0x2b,0x5e,0);
  *(undefined **)(iVar2 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar2);
  *(undefined1 *)(iVar2 + 0x10c) = 5;
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(iVar2 + 0x108) = &DAT_8009cb24;
  *(undefined **)(iVar2 + 0x18) = &DAT_80011f84;
  *(int *)(iVar2 + 0x110) = param_1 + 0x12f;
  *(int *)(iVar2 + 0x118) = param_1;
  uVar3 = AllocateFromHeap(puVar1,0x100,1,0);
  psVar4 = (short *)((uint)**(byte **)(iVar2 + 0x110) * 4 + *(int *)(iVar2 + 0x108));
  iVar5 = InitEntitySprite(uVar3,0xe289c059,2000,(int)*psVar4,(int)psVar4[1],0);
  uVar3 = g_GameStatePtr;
  *(int *)(iVar2 + 0x114) = iVar5;
  *(undefined2 *)(iVar5 + 0x10) = 0x4b0;
  AddEntityToSortedRenderList(uVar3,*(undefined4 *)(iVar2 + 0x114));
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar2;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x11c,1,0);
  InitEntitySprite(iVar2,0x10094096,1000,0x29,0x7f,0);
  *(undefined **)(iVar2 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar2);
  *(undefined1 *)(iVar2 + 0x10c) = 5;
  puVar1 = blbHeaderBufferBase;
  *(undefined **)(iVar2 + 0x108) = &DAT_8009cb38;
  *(undefined **)(iVar2 + 0x18) = &DAT_80011f84;
  *(int *)(iVar2 + 0x110) = param_1 + 0x12e;
  *(int *)(iVar2 + 0x118) = param_1;
  uVar3 = AllocateFromHeap(puVar1,0x100,1,0);
  psVar4 = (short *)((uint)**(byte **)(iVar2 + 0x110) * 4 + *(int *)(iVar2 + 0x108));
  iVar5 = InitEntitySprite(uVar3,0xe289c059,2000,(int)*psVar4,(int)psVar4[1],0);
  uVar3 = g_GameStatePtr;
  *(int *)(iVar2 + 0x114) = iVar5;
  *(undefined2 *)(iVar5 + 0x10) = 0x4b0;
  AddEntityToSortedRenderList(uVar3,*(undefined4 *)(iVar2 + 0x114));
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar2;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  iVar2 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
  InitEntitySprite(iVar2,0x10094096,1000,0x29,0xa2,0);
  *(undefined **)(iVar2 + 0x18) = &DAT_80012034;
  FUN_800754cc(iVar2);
  *(undefined **)(iVar2 + 0x18) = &DAT_80011fdc;
  *(undefined1 *)(iVar2 + 0x109) = 1;
  *(undefined1 *)(iVar2 + 0x108) = 1;
  *(int *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104) = iVar2;
  AddEntityToSortedRenderList
            (g_GameStatePtr,*(undefined4 *)((uint)*(byte *)(param_1 + 300) * 4 + param_1 + 0x104));
  *(undefined1 *)(param_1 + 0x12d) = 3;
  *(char *)(param_1 + 300) = *(char *)(param_1 + 300) + '\x01';
  return;
}



void FUN_800778ec(void)

{
  int iVar1;
  
  iVar1 = (uint)null_00h_800a6042 * 3;
  g_DefaultBGColorB = (ushort)(byte)(&DAT_8009cbac)[iVar1];
  g_DefaultBGColorR = (ushort)(byte)(&DAT_8009cbad)[iVar1];
  g_DefaultBGColorG = (ushort)(byte)(&DAT_8009cbae)[iVar1];
  return;
}



void FUN_80077af0(int param_1)

{
  ushort uVar1;
  ushort uVar2;
  byte bVar3;
  int iVar4;
  code *pcVar5;
  int iVar6;
  uint *puVar7;
  undefined4 uVar8;
  
  if (*(byte *)(param_1 + 300) == 0) {
    return;
  }
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if ((uVar1 & 0x4000) == 0) {
    if ((uVar1 & 0x1000) != 0) {
      if (*(byte *)(param_1 + 0x12d) == 0) {
        iVar4 = *(int *)(*(int *)(param_1 + 0x104) + 0x18);
        (**(code **)(iVar4 + 0x2c))(*(int *)(param_1 + 0x104) + (int)*(short *)(iVar4 + 0x28));
        bVar3 = *(char *)(param_1 + 300) - 1;
      }
      else {
        iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
        iVar4 = *(int *)(iVar6 + 0x18);
        (**(code **)(iVar4 + 0x2c))(iVar6 + *(short *)(iVar4 + 0x28));
        bVar3 = *(char *)(param_1 + 0x12d) - 1;
      }
      goto LAB_80077c24;
    }
  }
  else {
    iVar4 = (uint)*(byte *)(param_1 + 0x12d) * 4;
    if ((uint)*(byte *)(param_1 + 0x12d) == *(byte *)(param_1 + 300) - 1) {
      iVar6 = *(int *)(iVar4 + param_1 + 0x104);
      iVar4 = *(int *)(iVar6 + 0x18);
      (**(code **)(iVar4 + 0x2c))(iVar6 + *(short *)(iVar4 + 0x28));
      iVar4 = *(int *)(param_1 + 0x104);
      *(undefined1 *)(param_1 + 0x12d) = 0;
    }
    else {
      iVar6 = *(int *)(iVar4 + param_1 + 0x104);
      iVar4 = *(int *)(iVar6 + 0x18);
      (**(code **)(iVar4 + 0x2c))(iVar6 + *(short *)(iVar4 + 0x28));
      bVar3 = *(char *)(param_1 + 0x12d) + 1;
LAB_80077c24:
      *(byte *)(param_1 + 0x12d) = bVar3;
      iVar4 = *(int *)((uint)bVar3 * 4 + param_1 + 0x104);
    }
    (**(code **)(*(int *)(iVar4 + 0x18) + 0x24))(iVar4 + *(short *)(*(int *)(iVar4 + 0x18) + 0x20));
    PlaySoundEffect(0x646c2cc0,0xa0,0);
  }
  uVar1 = (*(ushort **)(param_1 + 0x100))[1];
  if ((uVar1 & 0x8000) == 0) {
    uVar2 = **(ushort **)(param_1 + 0x100);
    if ((uVar2 & 0x8000) == 0) {
      if (((uVar1 & 0x2000) != 0) ||
         (((uVar2 & 0x2000) != 0 &&
          (bVar3 = *(char *)(param_1 + 0x131) + 1, *(byte *)(param_1 + 0x131) = bVar3, 10 < bVar3)))
         ) {
        iVar4 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
        iVar6 = (int)*(short *)(*(int *)(iVar4 + 0x18) + 0x40);
        pcVar5 = *(code **)(*(int *)(iVar4 + 0x18) + 0x44);
        goto code_r0x80077d78;
      }
    }
    else {
      bVar3 = *(char *)(param_1 + 0x131) + 1;
      *(byte *)(param_1 + 0x131) = bVar3;
      if (10 < bVar3) {
        iVar4 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
        iVar6 = (int)*(short *)(*(int *)(iVar4 + 0x18) + 0x48);
        pcVar5 = *(code **)(*(int *)(iVar4 + 0x18) + 0x4c);
        goto code_r0x80077d78;
      }
    }
  }
  else {
    iVar4 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
    iVar6 = (int)*(short *)(*(int *)(iVar4 + 0x18) + 0x48);
    pcVar5 = *(code **)(*(int *)(iVar4 + 0x18) + 0x4c);
code_r0x80077d78:
    (*pcVar5)(iVar4 + iVar6);
    *(undefined1 *)(param_1 + 0x131) = 0;
  }
  puVar7 = *(uint **)(param_1 + 0x100);
  if ((*puVar7 & 0x8400000) == 0) {
    if ((*puVar7 & 0x100000) != 0) {
      iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
      iVar4 = *(int *)(iVar6 + 0x18);
      (**(code **)(iVar4 + 0x3c))(iVar6 + *(short *)(iVar4 + 0x38));
      goto LAB_80077e24;
    }
  }
  else {
    iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
    iVar4 = *(int *)(iVar6 + 0x18);
    (**(code **)(iVar4 + 0x34))
              (iVar6 + *(short *)(iVar4 + 0x30),*(ushort *)((int)puVar7 + 2) >> 0xb & 1);
LAB_80077e24:
    uVar8 = 2;
    if ((*(ushort *)(*(int *)(param_1 + 0x100) + 2) & 0x10) != 0) {
      iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
      iVar4 = *(int *)(iVar6 + 0x18);
      goto code_r0x80077fc0;
    }
  }
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  uVar8 = 1;
  if ((uVar1 & 0x80) == 0) {
    uVar8 = 3;
    if ((uVar1 & 0x20) == 0) {
      uVar8 = 0;
      if ((uVar1 & 0x40) == 0) {
        uVar8 = 4;
        if ((uVar1 & 4) == 0) {
          uVar8 = 5;
          if ((uVar1 & 1) == 0) {
            uVar8 = 6;
            if ((uVar1 & 8) == 0) {
              uVar8 = 7;
              if ((uVar1 & 2) == 0) {
                return;
              }
              iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
              iVar4 = *(int *)(iVar6 + 0x18);
            }
            else {
              iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
              iVar4 = *(int *)(iVar6 + 0x18);
            }
          }
          else {
            iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
            iVar4 = *(int *)(iVar6 + 0x18);
          }
        }
        else {
          iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
          iVar4 = *(int *)(iVar6 + 0x18);
        }
      }
      else {
        iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
        iVar4 = *(int *)(iVar6 + 0x18);
      }
    }
    else {
      iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
      iVar4 = *(int *)(iVar6 + 0x18);
    }
  }
  else {
    iVar6 = *(int *)((uint)*(byte *)(param_1 + 0x12d) * 4 + param_1 + 0x104);
    iVar4 = *(int *)(iVar6 + 0x18);
  }
code_r0x80077fc0:
  (**(code **)(iVar4 + 0x54))(iVar6 + *(short *)(iVar4 + 0x50),uVar8);
  return;
}



undefined4 * CreateBossPlayerEntity(undefined4 *param_1,undefined4 param_2,undefined1 param_3)

{
  byte bVar1;
  undefined *puVar2;
  undefined *puVar3;
  u_short uVar4;
  short sVar5;
  undefined4 *puVar6;
  undefined4 uVar7;
  int iVar8;
  uint uVar9;
  undefined4 *puVar10;
  uint uVar11;
  undefined1 local_1e0 [4];
  undefined4 local_1dc;
  code *local_1d8;
  undefined4 local_1cc;
  code *local_1c8;
  
  InitEntitySprite(param_1,0xec95689b,1000,0xa0,0x78,0);
  param_1[6] = &DAT_80011e54;
  *(undefined2 *)(param_1 + 0x55) = 300;
  param_1[0x54] = 0xffffffff;
  *(undefined1 *)(param_1 + 0x53) = param_3;
  *(undefined1 *)(param_1[0xd] + 10) = 0;
  *(undefined1 *)((int)param_1 + 0x149) = 0;
  *(undefined1 *)((int)param_1 + 0x14a) = 0;
  puVar3 = g_pPlayerState;
  puVar2 = blbHeaderBufferBase;
  *(undefined2 *)(param_1 + 4) = 1000;
  param_1[0x40] = param_2;
  *(ushort *)((int)param_1 + 0x136) = (ushort)(byte)puVar3[5];
  *(ushort *)(param_1 + 0x4e) = (ushort)(byte)puVar3[5];
  *(ushort *)((int)param_1 + 0x13a) = (ushort)(byte)puVar3[4];
  puVar6 = (undefined4 *)AllocateFromHeap(puVar2,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x96,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x136;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x8c,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x136;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x2a,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 1;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x4e;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x22,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x4e;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x4b,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 1;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x13a;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x43,0x3c,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x13a;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar3 = g_pPlayerState;
  puVar2 = blbHeaderBufferBase;
  *(ushort *)((int)param_1 + 0x142) = (ushort)(byte)g_pPlayerState[0x10];
  bVar1 = puVar3[0x10];
  *(undefined2 *)((int)param_1 + 0x13e) = 0x11;
  *(ushort *)(param_1 + 0x4f) = (ushort)bVar1;
  puVar6 = (undefined4 *)AllocateFromHeap(puVar2,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x96,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x142;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x8c,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x142;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x2a,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 1;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x4f;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x22,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x4f;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x4b,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x13e;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x43,0x50,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = (int)param_1 + 0x13e;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar2 = blbHeaderBufferBase;
  *(ushort *)(param_1 + 0x50) = (ushort)(byte)g_pPlayerState[0x11];
  puVar6 = (undefined4 *)AllocateFromHeap(puVar2,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x96,100,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x50;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x8c,100,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = param_1 + 0x50;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar2 = g_pPlayerState;
  *(undefined2 *)(param_1 + 0x51) = *(undefined2 *)(g_pPlayerState + 2);
  sVar5 = *(short *)((int)param_1 + 0x142) +
          *(short *)(param_1 + 0x50) + *(short *)(puVar2 + 2) + *(short *)((int)param_1 + 0x136);
  *(short *)((int)param_1 + 0x146) = sVar5;
  if (*(char *)(param_1 + 0x53) == '\0') {
    *(short *)(puVar2 + 2) = sVar5;
  }
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x96,0x78,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar10 = param_1 + 0x51;
  puVar6[0x40] = puVar10;
  *(undefined2 *)(puVar6 + 0x41) = 0;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x8c,0x78,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = puVar10;
  *(undefined2 *)(puVar6 + 0x41) = 10;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x82,0x78,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = puVar10;
  *(undefined2 *)(puVar6 + 0x41) = 100;
  AddEntityToSortedRenderList(uVar7);
  puVar6 = (undefined4 *)AllocateFromHeap(blbHeaderBufferBase,0x108,1,0);
  InitEntitySprite(puVar6,0xe4ac9451,2000,0x78,0x78,0);
  puVar6[6] = &DAT_80011e74;
  puVar6[9] = 0xffff0000;
  puVar6[10] = EntityCallback_8001a2cc;
  local_1dc = 0xffff0000;
  local_1d8 = EntityCallback_8001a2e8;
  puVar6[0xb] = 0xffff0000;
  puVar6[0xc] = EntityCallback_8001a2e8;
  iVar8 = puVar6[0xd];
  uVar4 = GetTPage((uint)*(byte *)(iVar8 + 0x32),2,(int)*(short *)(iVar8 + 0x10) & 0xffffffc0,
                   (int)*(short *)(iVar8 + 0x12) & 0xffffff00);
  *(u_short *)(iVar8 + 0x24) = uVar4;
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_8007811c;
  *puVar6 = 0xffff0000;
  puVar6[1] = &LAB_8007811c;
  *(undefined1 *)((int)puVar6 + 0x106) = 0;
  uVar7 = g_GameStatePtr;
  puVar6[0x40] = puVar10;
  *(undefined2 *)(puVar6 + 0x41) = 1000;
  AddEntityToSortedRenderList(uVar7);
  if (*(char *)(param_1 + 0x53) == '\0') {
    uVar11 = 0;
    FUN_80025c7c(g_pPlayerState,local_1e0,(int)param_1 + 0x135);
    *(undefined1 *)(param_1 + 0x4d) = 0;
    uVar9 = 0;
    while (uVar9 < 0xc) {
      uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
      iVar8 = InitEntitySprite(uVar7,0xec95689b,2000,(int)(short)(&null_00C0h_8009cb7c)[uVar9 * 2],
                               (int)(short)(&null_0046h_8009cb7e)[uVar9 * 2],0);
      param_1[uVar9 + 0x41] = iVar8;
      *(undefined4 *)(iVar8 + 0x24) = 0xffff0000;
      *(code **)(iVar8 + 0x28) = EntityCallback_8001a2cc;
      iVar8 = param_1[uVar9 + 0x41];
      local_1cc = 0xffff0000;
      local_1c8 = EntityCallback_8001a2e8;
      *(undefined4 *)(iVar8 + 0x2c) = 0xffff0000;
      *(code **)(iVar8 + 0x30) = EntityCallback_8001a2e8;
      AddEntityToSortedRenderList(g_GameStatePtr,param_1[uVar9 + 0x41]);
      if (uVar9 < *(byte *)((int)param_1 + 0x135)) {
        FUN_8001d0c0(param_1[uVar9 + 0x41],local_1e0[uVar9]);
      }
      *(undefined1 *)(*(int *)(param_1[uVar9 + 0x41] + 0x34) + 10) = 0;
      uVar11 = uVar11 + 1;
      FUN_8001d218(param_1[uVar9 + 0x41],0);
      uVar9 = uVar11 & 0xff;
    }
    if (*(char *)(param_1 + 0x53) != '\0') goto LAB_80079508;
  }
  else {
LAB_80079508:
    if (0x2f < (byte)g_pPlayerState[0x1b]) {
      uVar7 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
      uVar7 = InitEntitySprite(uVar7,0xaa0da270,1000,0,0,0);
      AddEntityToSortedRenderList(g_GameStatePtr,uVar7);
    }
    if (*(char *)(param_1 + 0x53) != '\0') {
      local_1dc = 0xffff0000;
      local_1d8 = (code *)&LAB_80079a08;
      *param_1 = 0xffff0000;
      param_1[1] = &LAB_80079a08;
      uVar7 = PlaySoundEffect(0x121941c4,0xa0,0);
      param_1[0x54] = uVar7;
      goto LAB_800795e4;
    }
  }
  local_1dc = 0xffff0000;
  local_1d8 = (code *)&LAB_800798b0;
  *param_1 = 0xffff0000;
  param_1[1] = &LAB_800798b0;
LAB_800795e4:
  if (*(char *)(param_1 + 0x53) == '\0') {
    FUN_80026260(g_pPlayerState);
  }
  return param_1;
}



void FUN_8007963c(int param_1)

{
  ushort uVar1;
  bool bVar2;
  bool bVar3;
  
  bVar2 = false;
  bVar3 = false;
  if (*(short *)(param_1 + 0x154) != 0) {
    *(short *)(param_1 + 0x154) = *(short *)(param_1 + 0x154) + -1;
  }
  uVar1 = *(ushort *)(*(int *)(param_1 + 0x100) + 2);
  if ((uVar1 & 0x800) == 0) {
    if ((((uVar1 & 0x10) == 0) || (*(char *)(param_1 + 0x14c) == '\0')) ||
       ((byte)g_pPlayerState[0x1b] < 0x30)) goto LAB_80079700;
    if (*(char *)(param_1 + 0x149) != '\0') {
      bVar2 = false;
      bVar3 = true;
      goto LAB_80079700;
    }
  }
  else if (*(char *)(param_1 + 0x149) != '\0') {
    bVar2 = true;
    goto LAB_80079700;
  }
  FUN_800797a8(param_1);
LAB_80079700:
  if (*(short *)(param_1 + 0x154) == 0) {
    if (bVar2) {
      *(undefined1 *)(g_GameStatePtr + 0x148) = 99;
      if (*(char *)(param_1 + 0x14c) != '\0') {
        initPlayerState(g_pPlayerState);
      }
    }
    else if (bVar3) {
      FUN_8007a4c0(g_GameStatePtr + 0x84,&DAT_800a603c);
      *(undefined1 *)(g_GameStatePtr + 0x148) = 99;
    }
  }
  EntityUpdateCallback(param_1);
  return;
}



void FUN_800797a8(undefined4 *param_1)

{
  uint uVar1;
  
  *(undefined1 *)((int)param_1 + 0x149) = 1;
  if (*(char *)(param_1 + 0x53) == '\0') {
    *param_1 = 0xffff0000;
    param_1[1] = &LAB_80079c24;
    PlaySoundEffect(0x2990901,0xa0,0);
    for (uVar1 = 0; (uVar1 & 0xff) < (uint)*(byte *)((int)param_1 + 0x135); uVar1 = uVar1 + 1) {
      *(undefined1 *)(*(int *)(param_1[(uVar1 & 0xff) + 0x41] + 0x34) + 10) = 1;
    }
  }
  else {
    *param_1 = 0xffff0000;
    param_1[1] = FUN_8007963c;
  }
  *(undefined2 *)((int)param_1 + 0x136) = 0;
  *(undefined2 *)((int)param_1 + 0x142) = 0;
  *(undefined2 *)(param_1 + 0x50) = 0;
  *(undefined2 *)(param_1 + 0x51) = *(undefined2 *)((int)param_1 + 0x146);
  FUN_8007c7b8(param_1[0x54]);
  param_1[0x54] = 0xffffffff;
  PlaySoundEffect(0x40023e30,0xa0,0);
  return;
}



undefined4 FUN_8007a150(undefined4 param_1)

{
  return param_1;
}



void FUN_8007a194(undefined4 param_1,uint param_2)

{
  if ((param_2 & 1) != 0) {
    __builtin_delete();
  }
  return;
}



// Initializes a LevelDataContext structure.
// The context (128 bytes) stores pointers to loaded assets:
//   +0x14: Asset 100 (TileHeader) pointer
//   +0x18: Asset 301 (PaletteIndices) pointer
//   +0x1C: Asset 302 (TileFlags) pointer
//   +0x20: Asset 200 (TilemapContainer) pointer
//   +0x24: Asset 201 (LayerEntries) pointer
//   +0x28: Asset 400 (PaletteContainer) pointer
//   +0x5C: BLB header pointer
//   +0x60: Playback state offset
// param_1: LevelDataContext* to initialize

void InitLevelDataContext(int *pLevelDataCtx,void *headerBuffer,void *loaderCallback)

{
  pLevelDataCtx[0x17] = (int)headerBuffer;
  pLevelDataCtx[0x19] = (int)loaderCallback;
  *(undefined1 *)(pLevelDataCtx + 0x18) = 0xff;
  FUN_8007a1e8();
  return;
}



void FUN_8007a1e8(undefined4 param_1)

{
  FUN_8007a218();
  FUN_8007a234(param_1);
  return;
}



void FUN_8007a218(int param_1)

{
  *(undefined4 *)(param_1 + 0x68) = 0;
  *(undefined4 *)(param_1 + 0x6c) = 0;
  *(undefined4 *)(param_1 + 0x70) = 0;
  *(undefined4 *)(param_1 + 0x74) = 0;
  *(undefined4 *)(param_1 + 0x78) = 0;
  *(undefined4 *)(param_1 + 0x7c) = 0;
  return;
}



void FUN_8007a234(undefined4 *param_1)

{
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[8] = 0;
  param_1[9] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[0xb] = 0;
  param_1[5] = 0;
  param_1[6] = 0;
  param_1[7] = 0;
  param_1[10] = 0;
  param_1[0xe] = 0;
  param_1[0xf] = 0;
  param_1[0xd] = 0;
  param_1[0xc] = 0;
  param_1[0x10] = 0;
  param_1[0x11] = 0;
  param_1[0x12] = 0;
  param_1[0x13] = 0;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  return;
}



// Advances through the playback sequence in BLB header.
// param_1: LevelDataContext* (+0x5C=headerBuffer, +0x60=stateOffset)
// Reads mode from header+stateOffset+0xF36, increments stateOffset.
// Returns next mode value (0-6), or 0 if at end of sequence.
// Checks for "CRD2" string to terminate credits sequence.

undefined1 AdvancePlaybackSequence(int param_1)

{
  undefined1 uVar1;
  byte bVar2;
  int iVar3;
  
  iVar3 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  if ((*(char *)(iVar3 + 0xf36) == '\x02') &&
     (iVar3 = strcmp((char *)((uint)*(byte *)(iVar3 + 0xf92) * 0xc + *(int *)(param_1 + 0x5c) +
                             0xf1c),&DAT_800a6058), iVar3 == 0)) {
    return 0;
  }
  bVar2 = *(char *)(param_1 + 0x60) + 1;
  *(byte *)(param_1 + 0x60) = bVar2;
  if ((uint)bVar2 < (uint)*(byte *)(*(int *)(param_1 + 0x5c) + 0xf30)) {
    uVar1 = *(undefined1 *)(*(int *)(param_1 + 0x5c) + (uint)bVar2 + 0xf36);
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



void SetSequenceIndexByMode(int param_1,char param_2,char param_3)

{
  uint uVar1;
  int iVar2;
  byte bVar3;
  
  iVar2 = *(int *)(param_1 + 0x5c);
  bVar3 = 1;
  if (1 < *(byte *)(iVar2 + 0xf30)) {
    uVar1 = 1;
    do {
      if (*(char *)(iVar2 + uVar1 + 0xf36) == param_2) {
        if (param_3 == '\0') {
          *(byte *)(param_1 + 0x60) = bVar3 - 1;
          return;
        }
        param_3 = param_3 + -1;
      }
      iVar2 = *(int *)(param_1 + 0x5c);
      bVar3 = bVar3 + 1;
      uVar1 = (uint)bVar3;
    } while (bVar3 < *(byte *)(iVar2 + 0xf30));
  }
  return;
}



// Searches playback sequence for a level with matching asset index.
// param_1: LevelDataContext*
// param_2: target level asset index byte to find (at header+levelIdx*0x70+0x0C)
// param_3: if set, decrement stateOffset after finding
// param_4: if set, also search backwards for mode=1 (movie) items
// Sets stateOffset to position before the matching level entry.

void SeekToLevelInSequence(int param_1,char param_2,char param_3,char param_4)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = *(int *)(param_1 + 0x5c);
  iVar3 = 0;
  if (*(char *)(iVar4 + 0xf30) == '\0') {
    return;
  }
  iVar2 = 0;
  while ((iVar2 = iVar4 + (iVar2 >> 0x10), *(char *)(iVar2 + 0xf36) != '\x03' ||
         (*(char *)(iVar4 + (uint)*(byte *)(iVar2 + 0xf92) * 0x70 + 0xc) != param_2))) {
    iVar3 = iVar3 + 1;
    iVar4 = *(int *)(param_1 + 0x5c);
    iVar2 = iVar3 * 0x10000;
    if ((int)(uint)*(byte *)(iVar4 + 0xf30) <= iVar3 * 0x10000 >> 0x10) {
      return;
    }
  }
  *(char *)(param_1 + 0x60) = (char)iVar3 + -1;
  iVar3 = iVar3 + -1;
  if ((param_4 != '\0') && (-1 < iVar3 * 0x10000)) {
    do {
      cVar1 = *(char *)(*(int *)(param_1 + 0x5c) + (int)(short)iVar3 + 0xf36);
      if (cVar1 == '\x01') {
        *(char *)(param_1 + 0x60) = (char)iVar3 + -1;
        return;
      }
      iVar3 = iVar3 + -1;
    } while ((cVar1 != '\x03') && (-1 < iVar3 * 0x10000));
  }
  if (param_3 != '\0') {
    *(char *)(param_1 + 0x60) = *(char *)(param_1 + 0x60) + -1;
  }
  return;
}



void FUN_8007a4c0(int param_1,char *param_2)

{
  uint uVar1;
  int iVar2;
  byte bVar3;
  
  iVar2 = *(int *)(param_1 + 0x5c);
  bVar3 = 0;
  if (*(char *)(iVar2 + 0xf30) != '\0') {
    uVar1 = 0;
    do {
      if (*(char *)(iVar2 + uVar1 + 0xf36) == '\x01') {
        iVar2 = strcmp((char *)((uint)*(byte *)(iVar2 + uVar1 + 0xf92) * 0x1c + iVar2 + 0xb64),
                       param_2);
        if (iVar2 == 0) {
          *(byte *)(param_1 + 0x60) = bVar3 - 1;
          return;
        }
      }
      iVar2 = *(int *)(param_1 + 0x5c);
      bVar3 = bVar3 + 1;
      uVar1 = (uint)bVar3;
    } while (bVar3 < *(byte *)(iVar2 + 0xf30));
  }
  return;
}



// Advances level sequence after level completion.
// 
// Called from GameModeCallback @ 0x8007E654 when level is complete (state+0x146 set and
// g_pPlayerState[0x11] == 0).
// 
// Algorithm:
// 1. Reads level sequence index from BLB header+0xF30
// 2. Decrements by 2
// 3. Stores result @ context+0x60
// 
// Parameters:
// - param_1: LevelDataContext or GameState pointer
// 
// Memory Layout:
// - param_1+0x5C: Pointer to BLB header (base pointer)
// - BLB header+0xF30: Current level sequence index (byte)
// - param_1+0x60: Next level index to load (byte)
// 
// Decrement Pattern:
// - Decrements by 2 suggests skipping forward in a level array
// - May be compensating for indexing or struct stride
// 
// Example Flow:
// - Level complete  read header[0xF30] = 5
// - Decrement by 2  3
// - Store 3 @ context+0x60 for next level load
// 
// Cross-References:
// - Called by: GameModeCallback @ 0x8007E654 (level complete path)
// - BLB header structure documented in docs/blb-data-format.md
// - Next level loaded based on context+0x60 value
// 
// Notes:
// - BLB header+0xF30 is the level progression index
// - Decrement by 2 suggests reverse indexing or level pairs
// - This sets up which level to load on next frame
// 
// Verified via Ghidra decompilation 2025-01-13.

void AdvanceLevelSequence(int param_1)

{
  *(char *)(param_1 + 0x60) = *(char *)(*(int *)(param_1 + 0x5c) + 0xf30) + -2;
  return;
}



undefined1 FUN_8007a594(int param_1)

{
  undefined1 uVar1;
  
  if ((int)(uint)*(byte *)(param_1 + 0x60) < (int)(*(byte *)(*(int *)(param_1 + 0x5c) + 0xf30) - 1))
  {
    uVar1 = *(undefined1 *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf37);
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



// Returns LevelEntry.primary_buffer_size (offset 0x04, u32).
// Used to allocate memory for level loading in InitializeAndLoadLevel.
// For mode 6, returns fixed 0x7D000 (512KB).
// param_1: LevelDataContext* - context with BLB header pointer at +0x5C
// Returns: Buffer size in bytes for primary level data

undefined4 GetPrimaryBufferSize(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  int iVar3;
  
  iVar3 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  bVar1 = *(byte *)(iVar3 + 0xf36);
  uVar2 = 0;
  if (2 < bVar1) {
    if (bVar1 == 3) {
      uVar2 = *(undefined4 *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar3 + 0xf92) * 0x70 + 4);
    }
    else {
      uVar2 = 0x7d000;
    }
  }
  return uVar2;
}



// Parses level data based on current playback mode.
// Handles mode-specific sector offset/count retrieval:
//   Mode 1: Movie playback
//   Mode 2: Credits display
//   Mode 3: Level loading (primary/secondary/tertiary)
//   Mode 4/5: Special sector loading
//   Mode 6: Mode 6 sector table (17 entries at 0xECC)
// Uses playback sequence arrays at 0xF36 (modes) and 0xF92 (indices).
// param_1: LevelDataContext*

undefined4 LevelDataParser(int *param_1,int param_2)

{
  byte bVar1;
  char cVar2;
  undefined2 *puVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  undefined2 uVar7;
  int iVar8;
  undefined2 uVar9;
  ushort *puVar10;
  int iVar11;
  uint uVar12;
  
  iVar11 = param_1[0x17];
  param_1[0x1a] = 0;
  param_1[0x1b] = 0;
  param_1[0x1c] = 0;
  param_1[0x1d] = 0;
  param_1[0x1e] = 0;
  param_1[0x1f] = 0;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[8] = 0;
  param_1[9] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[0xb] = 0;
  param_1[5] = 0;
  param_1[6] = 0;
  param_1[7] = 0;
  param_1[10] = 0;
  param_1[0xe] = 0;
  param_1[0xf] = 0;
  param_1[0xd] = 0;
  param_1[0xc] = 0;
  param_1[0x10] = 0;
  param_1[0x11] = 0;
  param_1[0x12] = 0;
  param_1[0x13] = 0;
  param_1[0x14] = 0;
  param_1[0x15] = 0;
  param_1[0x16] = 0;
  bVar1 = *(byte *)(iVar11 + (uint)*(byte *)(param_1 + 0x18) + 0xf36);
  if (bVar1 < 3) {
    uVar4 = 0;
  }
  else {
    uVar7 = 0;
    uVar12 = (uint)*(byte *)(iVar11 + (uint)*(byte *)(param_1 + 0x18) + 0xf92);
    uVar9 = 0;
    if (bVar1 == 3) {
      puVar3 = (undefined2 *)(iVar11 + uVar12 * 0x70);
      uVar7 = *puVar3;
      uVar9 = puVar3[1];
    }
    else if (bVar1 == 6) {
      iVar11 = iVar11 + uVar12 * 4;
      uVar7 = *(undefined2 *)(iVar11 + 0xecc);
      uVar9 = *(undefined2 *)(iVar11 + 0xece);
    }
    cVar2 = (*(code *)param_1[0x19])(uVar7,uVar9,param_2);
    uVar4 = 0;
    if (cVar2 != '\0') {
      param_1[0x1a] = param_2;
      if (*(char *)(param_1[0x17] + (uint)*(byte *)(param_1 + 0x18) + 0xf36) == '\x03') {
        param_1[0x1b] = param_2 + *(int *)(param_1[0x17] + uVar12 * 0x70 + 8);
      }
      else {
        param_1[0x1b] = 0;
      }
      puVar10 = (ushort *)param_1[0x1a];
      uVar12 = 0;
      while (uVar5 = uVar12 & 0xffff, uVar5 < *puVar10) {
        iVar8 = param_1[0x1a] + *(int *)(puVar10 + uVar5 * 6 + 6);
        uVar6 = *(uint *)(puVar10 + uVar5 * 6 + 2);
        iVar11 = *(int *)(puVar10 + uVar5 * 6 + 4);
        if (uVar6 == 0x259) {
          param_1[0x1d] = iVar8;
          param_1[0x1e] = iVar11;
LAB_8007a824:
          uVar12 = uVar12 + 1;
        }
        else if (uVar6 < 0x25a) {
          if (uVar6 == 600) {
            param_1[0x1c] = iVar8;
            goto LAB_8007a824;
          }
          uVar12 = uVar12 + 1;
        }
        else {
          if (uVar6 == 0x25a) {
            param_1[0x1f] = iVar8;
            goto LAB_8007a824;
          }
          uVar12 = uVar12 + 1;
        }
      }
      if (*(char *)(param_1[0x17] + (uint)*(byte *)(param_1 + 0x18) + 0xf36) != '\x03') {
        LoadAssetContainer(param_1,1,'\x01');
      }
      uVar4 = 1;
    }
  }
  return uVar4;
}



// Returns the level count from BLB header offset 0xF31.
// param_1: LevelDataContext* - context with BLB header pointer at +0x5C
// Returns: Number of levels (u8), typically 26 for retail versions

undefined1 GetLevelCount(int param_1)

{
  return *(undefined1 *)(*(int *)(param_1 + 0x5c) + 0xf31);
}



// Returns LevelEntry.level_index (offset 0x0C) for a given level table index.
// param_1: LevelDataContext* - context with BLB header pointer at +0x5C
// param_2: Level table index (0-25)
// Returns: Level asset index (u8) from LevelEntry at offset 0x0C

undefined1 GetLevelAssetIndex(int param_1,uint param_2)

{
  return *(undefined1 *)(*(int *)(param_1 + 0x5c) + (param_2 & 0xff) * 0x70 + 0xc);
}



// Returns pointer to level name string (LevelEntry offset 0x5B).
// param_1: LevelDataContext* - context with BLB header pointer at +0x5C
// param_2: Level table index (0-25)
// Returns: char* to null-terminated level name (max 21 chars)

int getLevelName(int param_1,uint param_2)

{
  return *(int *)(param_1 + 0x5c) + (param_2 & 0xff) * 0x70 + 0x5b;
}



// Returns the level_flag (offset 0x0D) for a given level index.
// Returns: 1 if level is selectable for password entry, 0 otherwise.
// Called by InitGameState to build list of password-selectable levels.
// Flag=1 levels: SCIE, TMPL, BOIL, FOOD, BRG1, GLID, CAVE, WEED (8 levels, excluding MENU).
// These are stored in a 10-entry array at GameState+0x171 for level selection.

undefined1 GetLevelFlagByIndex(int param_1,uint param_2)

{
  return *(undefined1 *)(*(int *)(param_1 + 0x5c) + (param_2 & 0xff) * 0x70 + 0xd);
}



undefined1 GetCurrentLevelAssetIndex(int param_1)

{
  undefined1 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  uVar1 = 0;
  if (*(char *)(iVar2 + 0xf36) == '\x03') {
    uVar1 = *(undefined1 *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar2 + 0xf92) * 0x70 + 0xc);
  }
  return uVar1;
}



int GetCurrentLevelDisplayName(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  if (*(char *)(iVar1 + 0xf36) == '\x03') {
    iVar1 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar1 + 0xf92) * 0x70 + 0x56;
  }
  else {
    iVar1 = 0;
  }
  return iVar1;
}



// Returns the minimum display time (in seconds) for loading screens.
// Reads entry_flags (offset 0x01) from sector table entry.
// Only returns non-zero when game_mode is 4 or 5 (loading/splash screens).
// The value is later multiplied by 60 (VSync rate) to get frame count.
// Examples: 0x05=5 seconds (loading screens), 0x03=3 seconds (game over).

undefined1 GetLoadingScreenMinDisplayTime(int param_1)

{
  undefined1 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  uVar1 = 0;
  if (*(byte *)(iVar2 + 0xf36) - 4 < 2) {
    uVar1 = *(undefined1 *)
             (*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar2 + 0xf92) * 0x10 + 0xcd1);
  }
  return uVar1;
}



// Returns the maximum display time / timeout (in seconds) for loading screens.
// Reads byte at offset 0x02 from sector table entry.
// Only returns non-zero when game_mode is 4 or 5.
// Special values:
//   0x00 = No display (skip immediately)
//   0x0A = 10 seconds (loading screens - skippable after min time)
//   0x63 = 99 seconds (game over - special skip mode with X/Start)

undefined1 GetLoadingScreenMaxDisplayTime(int param_1)

{
  undefined1 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  uVar1 = 0;
  if (*(byte *)(iVar2 + 0xf36) - 4 < 2) {
    uVar1 = *(undefined1 *)
             (*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar2 + 0xf92) * 0x10 + 0xcd2);
  }
  return uVar1;
}



// Returns sector offset based on current playback mode.
// Mode-specific behavior:
//   Mode 2: Credits - reads from credits table at 0xF10+0x08 (param_a)
//   Mode 4/5: Sector table - reads from 0xCD0 + index*0x10 + 0x0C
// Uses playback state offset at ctx+0x60 to index into mode/index arrays.
// param_1: LevelDataContext*
// Returns: Sector offset (u16)

undefined2 GetCurrentSectorOffset(int param_1)

{
  byte bVar1;
  undefined2 uVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = *(int *)(param_1 + 0x5c);
  iVar3 = iVar4 + (uint)*(byte *)(param_1 + 0x60);
  bVar1 = *(byte *)(iVar3 + 0xf36);
  if (bVar1 == 2) {
    uVar2 = *(undefined2 *)(iVar4 + (uint)*(byte *)(iVar3 + 0xf92) * 0xc + 0xf18);
  }
  else {
    uVar2 = 0;
    if (1 < bVar1) {
      if (bVar1 < 6) {
        uVar2 = 0;
        if (3 < bVar1) {
          uVar2 = *(undefined2 *)(iVar4 + (uint)*(byte *)(iVar3 + 0xf92) * 0x10 + 0xccc);
        }
      }
      else {
        uVar2 = 0;
      }
    }
  }
  return uVar2;
}



undefined2 GetCurrentSectorCount(int param_1)

{
  byte bVar1;
  undefined2 uVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = *(int *)(param_1 + 0x5c);
  iVar3 = iVar4 + (uint)*(byte *)(param_1 + 0x60);
  bVar1 = *(byte *)(iVar3 + 0xf36);
  if (bVar1 == 2) {
    uVar2 = *(undefined2 *)(iVar4 + (uint)*(byte *)(iVar3 + 0xf92) * 0xc + 0xf1a);
  }
  else {
    uVar2 = 0;
    if (1 < bVar1) {
      if (bVar1 < 6) {
        uVar2 = 0;
        if (3 < bVar1) {
          uVar2 = *(undefined2 *)(iVar4 + (uint)*(byte *)(iVar3 + 0xf92) * 0x10 + 0xcce);
        }
      }
      else {
        uVar2 = 0;
      }
    }
  }
  return uVar2;
}



undefined1 GetAssetCount(int param_1)

{
  return *(undefined1 *)(*(int *)(param_1 + 0x5c) + 0xf32);
}



int GetMovieReservedByIndex(int param_1,uint param_2)

{
  return (param_2 & 0xff) * 0x1c + *(int *)(param_1 + 0x5c) + 0xb64;
}



int GetCurrentMovieReserved(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  if (*(char *)(iVar1 + 0xf36) == '\x01') {
    iVar1 = (uint)*(byte *)(iVar1 + 0xf92) * 0x1c + *(int *)(param_1 + 0x5c) + 0xb64;
  }
  else {
    iVar1 = 0;
  }
  return iVar1;
}



// Returns pointer to movie filename string.
// Reads MovieEntry.filename (offset 0x0C, char[16]).
// Example: "\\MVLOGO.STR;1"
// param_1: LevelDataContext*
// Returns: char* to ISO path string

int GetCurrentMovieFilename(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  if (*(char *)(iVar1 + 0xf36) == '\x01') {
    iVar1 = (uint)*(byte *)(iVar1 + 0xf92) * 0x1c + *(int *)(param_1 + 0x5c) + 0xb6c;
  }
  else {
    iVar1 = 0;
  }
  return iVar1;
}



undefined2 GetMovieUnknown00(int param_1)

{
  undefined2 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  uVar1 = 0;
  if (*(char *)(iVar2 + 0xf36) == '\x01') {
    uVar1 = *(undefined2 *)
             (*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar2 + 0xf92) * 0x1c + 0xb60);
  }
  return uVar1;
}



// Returns sector count for a movie from MovieEntry.
// Reads MovieEntry.sector_count (offset 0x02, u16).
// Movies are stored at header offset 0xB60, 0x1C bytes each.
// param_1: LevelDataContext*
// param_2: Movie index (0-12)
// Returns: Movie size in sectors (u16)

undefined2 GetMovieSectorCount(int param_1)

{
  undefined2 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60);
  uVar1 = 0;
  if (*(char *)(iVar2 + 0xf36) == '\x01') {
    uVar1 = *(undefined2 *)
             (*(int *)(param_1 + 0x5c) + (uint)*(byte *)(iVar2 + 0xf92) * 0x1c + 0xb62);
  }
  return uVar1;
}



int GetCurrentModeReservedData(int param_1)

{
  int iVar1;
  
  switch(*(undefined1 *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf36)) {
  case 1:
    iVar1 = (uint)*(byte *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf92) *
            0x1c + *(int *)(param_1 + 0x5c) + 0xb64;
    break;
  case 2:
    iVar1 = (uint)*(byte *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf92) *
            0xc + *(int *)(param_1 + 0x5c) + 0xf1c;
    break;
  case 3:
    iVar1 = *(int *)(param_1 + 0x5c) +
            (uint)*(byte *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf92) *
            0x70 + 0x56;
    break;
  case 4:
  case 5:
    iVar1 = (uint)*(byte *)(*(int *)(param_1 + 0x5c) + (uint)*(byte *)(param_1 + 0x60) + 0xf92) *
            0x10 + *(int *)(param_1 + 0x5c) + 0xcd3;
    break;
  default:
    iVar1 = 0;
  }
  return iVar1;
}



// Returns tertiary data size for current stage.
// Reads LevelEntry.tert_data_off[stage_index] and shifts left by 5.
// Formula: size = tert_data_off[stage] << 5
// For mode 6, returns fixed 0x7D000 (512KB).
// param_1: LevelDataContext*
// Returns: Tertiary segment size in bytes

int GetCurrentTertiaryDataSize(int *param_1)

{
  char cVar1;
  int iVar2;
  
  iVar2 = param_1[0x17] + (uint)*(byte *)(param_1 + 0x18);
  cVar1 = *(char *)(iVar2 + 0xf36);
  if (cVar1 == '\x06') {
    iVar2 = 0x7d000;
  }
  else if ((cVar1 == '\x03') && (*param_1 != 0)) {
    iVar2 = (uint)*(ushort *)
                   (param_1[0x17] + (uint)*(byte *)(iVar2 + 0xf92) * 0x70 + *param_1 * 2 + 0xe) << 5
    ;
  }
  else {
    iVar2 = 0;
  }
  return iVar2;
}



// Loads asset container by type ID and populates LevelDataContext pointers.
// Parses segment TOC (12-byte entries: {type, size, offset}) and stores data pointers.
// 
// Asset type mapping:
//   100 (0x64)   ctx[1]  +0x04 = TileHeader
//   101 (0x65)   ctx[2]  +0x08 = Unknown
//   200 (0xC8)   ctx[3]  +0x0C = TilemapContainer
//   201 (0xC9)   ctx[4]  +0x10 = LayerEntries (92 bytes each)
//   300 (0x12C)  ctx[5]  +0x14 = TilePixels (8bpp)
//   301 (0x12D)  ctx[6]  +0x18 = PaletteIndices
//   302 (0x12E)  ctx[7]  +0x1C = TileFlags
//   303 (0x12F)  ctx[10] +0x28 = AnimatedTiles
//   400 (0x190)  ctx[8]  +0x20 = PaletteContainer
//   401 (0x191)  ctx[9]  +0x24 = PaletteAnim
//   500 (0x1F4)  ctx[11] +0x2C = TileAttributes
//   501 (0x1F5)  ctx[14] +0x38 = Entities (24-byte structs)
//   502 (0x1F6)  ctx[15] +0x3C = VRAMRects
//   503 (0x1F7)  ctx[12] +0x30 = AnimOffsets
//   504 (0x1F8)  ctx[13] +0x34 = VehicleData
//   600 (0x258)  ctx[16-17] = Geometry + size
//   601 (0x259)  ctx[18-19] = Audio + size
//   602 (0x25A)  ctx[20] +0x50 = Palette/AudioMeta
//   700 (0x2BC)  ctx[21-22] = SPUAudio + size

void LoadAssetContainer(int *pLevelDataCtx,int subBlockIndex,char containerType)

{
  byte bVar1;
  undefined2 uVar2;
  undefined2 uVar3;
  char cVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint *puVar9;
  uint *puVar10;
  
  bVar1 = *(byte *)(pLevelDataCtx[0x17] + (uint)*(byte *)(pLevelDataCtx + 0x18) + 0xf36);
  if ((2 < bVar1) && ((bVar1 == 3 || (containerType != '\0')))) {
    iVar7 = pLevelDataCtx[0x17];
    *pLevelDataCtx = 0;
    pLevelDataCtx[1] = 0;
    pLevelDataCtx[2] = 0;
    pLevelDataCtx[8] = 0;
    pLevelDataCtx[9] = 0;
    pLevelDataCtx[3] = 0;
    pLevelDataCtx[4] = 0;
    pLevelDataCtx[0xb] = 0;
    pLevelDataCtx[5] = 0;
    pLevelDataCtx[6] = 0;
    pLevelDataCtx[7] = 0;
    pLevelDataCtx[10] = 0;
    pLevelDataCtx[0xe] = 0;
    pLevelDataCtx[0xf] = 0;
    pLevelDataCtx[0xd] = 0;
    pLevelDataCtx[0xc] = 0;
    pLevelDataCtx[0x10] = 0;
    pLevelDataCtx[0x11] = 0;
    pLevelDataCtx[0x12] = 0;
    pLevelDataCtx[0x13] = 0;
    pLevelDataCtx[0x14] = 0;
    pLevelDataCtx[0x15] = 0;
    pLevelDataCtx[0x16] = 0;
    if (*(char *)(iVar7 + (uint)*(byte *)(pLevelDataCtx + 0x18) + 0xf36) == '\x03') {
      uVar5 = (uint)*(byte *)(iVar7 + (uint)*(byte *)(pLevelDataCtx + 0x18) + 0xf92);
      if (containerType == '\0') {
        iVar7 = iVar7 + uVar5 * 0x70 + subBlockIndex * 2;
        uVar2 = *(undefined2 *)(iVar7 + 0x38);
        uVar3 = *(undefined2 *)(iVar7 + 0x46);
      }
      else {
        iVar7 = iVar7 + uVar5 * 0x70 + subBlockIndex * 2;
        uVar2 = *(undefined2 *)(iVar7 + 0x1c);
        uVar3 = *(undefined2 *)(iVar7 + 0x2a);
      }
      cVar4 = (*(code *)pLevelDataCtx[0x19])(uVar2,uVar3,pLevelDataCtx[0x1b]);
      if (cVar4 == '\0') {
        if (subBlockIndex == 1) {
          return;
        }
        LoadAssetContainer(pLevelDataCtx,1,containerType);
        return;
      }
      puVar10 = (uint *)pLevelDataCtx[0x1b];
      *pLevelDataCtx = subBlockIndex;
    }
    else {
      puVar10 = (uint *)pLevelDataCtx[0x1a];
      *pLevelDataCtx = 1;
    }
    puVar9 = puVar10;
    for (uVar5 = 0; uVar5 < *puVar10; uVar5 = uVar5 + 1) {
      uVar6 = puVar9[1];
      uVar8 = puVar9[2];
      iVar7 = (int)puVar10 + puVar9[3];
      if (uVar6 == 0x191) {
        pLevelDataCtx[9] = iVar7;
      }
      else if (uVar6 < 0x192) {
        if (uVar6 == 300) {
          pLevelDataCtx[5] = iVar7;
        }
        else if (uVar6 < 0x12d) {
          if (uVar6 == 0x65) {
            pLevelDataCtx[2] = iVar7;
          }
          else if (uVar6 < 0x66) {
            if (uVar6 == 100) {
              pLevelDataCtx[1] = iVar7;
            }
          }
          else if (uVar6 == 200) {
            pLevelDataCtx[3] = iVar7;
          }
          else if (uVar6 == 0xc9) {
            pLevelDataCtx[4] = iVar7;
          }
        }
        else if (uVar6 == 0x12e) {
          pLevelDataCtx[7] = iVar7;
        }
        else if (uVar6 < 0x12e) {
          pLevelDataCtx[6] = iVar7;
        }
        else if (uVar6 == 0x12f) {
          pLevelDataCtx[10] = iVar7;
        }
        else if (uVar6 == 400) {
          pLevelDataCtx[8] = iVar7;
        }
      }
      else if (uVar6 == 0x1f8) {
        pLevelDataCtx[0xd] = iVar7;
      }
      else if (uVar6 < 0x1f9) {
        if (uVar6 == 0x1f5) {
          pLevelDataCtx[0xe] = iVar7;
        }
        else if (uVar6 < 0x1f6) {
          if (uVar6 == 500) {
            pLevelDataCtx[0xb] = iVar7;
          }
        }
        else if (uVar6 == 0x1f6) {
          pLevelDataCtx[0xf] = iVar7;
        }
        else if (uVar6 == 0x1f7) {
          pLevelDataCtx[0xc] = iVar7;
        }
      }
      else if (uVar6 == 0x259) {
        pLevelDataCtx[0x12] = iVar7;
        pLevelDataCtx[0x13] = uVar8;
      }
      else if (uVar6 < 0x25a) {
        if (uVar6 == 600) {
          pLevelDataCtx[0x10] = iVar7;
          pLevelDataCtx[0x11] = uVar8;
        }
      }
      else if (uVar6 == 0x25a) {
        pLevelDataCtx[0x14] = iVar7;
      }
      else if (uVar6 == 700) {
        pLevelDataCtx[0x15] = iVar7;
        pLevelDataCtx[0x16] = uVar8;
      }
      puVar9 = puVar9 + 3;
    }
  }
  return;
}



undefined1 GetCurrentStageIndex(undefined1 *param_1)

{
  return *param_1;
}



// Returns entry from Asset 101 (VRAM slot configuration).
// Index 0: bank_a_count (texture slots in upper VRAM)
// Index 1: bank_b_count (texture slots in lower VRAM)
// Returns 0 if Asset 101 is not present or index > 1.
// Called by InitializeAndLoadLevel to configure texture page allocation.

undefined4 GetAsset101Entry(int param_1,uint param_2)

{
  undefined4 uVar1;
  
  if ((*(int *)(param_1 + 8) == 0) || (1 < (param_2 & 0xffff))) {
    uVar1 = 0;
  }
  else {
    uVar1 = *(undefined4 *)((param_2 & 0xffff) * 4 + *(int *)(param_1 + 8));
  }
  return uVar1;
}



// Returns level dimensions from TileHeader (Asset 100).
// Reads level_width (offset 0x08) and level_height (offset 0x0A).
// Multiplies by 16 to convert tiles to pixels.
// param_1: LevelDataContext* - ctx->asset100_ptr at offset 0x14
// param_2: Output pointer for width (pixels)
// param_3: Output pointer for height (pixels)

void GetLevelDimensions(uint param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  uint uVar5;
  
  uVar1 = *(int *)(param_2 + 4) + 0xb;
  uVar2 = uVar1 & 3;
  uVar5 = *(int *)(param_2 + 4) + 8;
  uVar3 = uVar5 & 3;
  uVar5 = (*(int *)(uVar1 - uVar2) << (3 - uVar2) * 8 | param_1 & 0xffffffffU >> (uVar2 + 1) * 8) &
          -1 << (4 - uVar3) * 8 | *(uint *)(uVar5 - uVar3) >> uVar3 * 8;
  uVar1 = param_1 + 3 & 3;
  puVar4 = (uint *)((param_1 + 3) - uVar1);
  *puVar4 = *puVar4 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = param_1 & 3;
  *(uint *)(param_1 - uVar1) =
       *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  return;
}



// GetSpawnPosition - Reads player spawn position from TileHeader (Asset 100).
// 
// VERIFIED via runtime memory analysis:
// - Reads 4 bytes from TileHeader offset 0x0C-0x0F (spawn_x, spawn_y as u16 pairs)
// - Uses unaligned load (lwl/lwr) to copy bytes to output buffer
// - Output: Two u16 values - spawn_x and spawn_y in tiles
// 
// Called by: InitPlayerSpawnPosition (0x80024720)
// 
// TileHeader layout at offsets 0x0C-0x0F:
//   0x0C: u16 spawn_x - Player spawn X position in tiles
//   0x0E: u16 spawn_y - Player spawn Y position in tiles
// 
// The caller converts these to pixel coordinates:
//   spawn_x_pixels = spawn_x * 16 + 8
//   spawn_y_pixels = spawn_y * 16 + 15

void GetSpawnPosition(uint param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  uint uVar5;
  
  uVar1 = *(int *)(param_2 + 4) + 0xf;
  uVar2 = uVar1 & 3;
  uVar5 = *(int *)(param_2 + 4) + 0xc;
  uVar3 = uVar5 & 3;
  uVar5 = (*(int *)(uVar1 - uVar2) << (3 - uVar2) * 8 | param_1 & 0xffffffffU >> (uVar2 + 1) * 8) &
          -1 << (4 - uVar3) * 8 | *(uint *)(uVar5 - uVar3) >> uVar3 * 8;
  uVar1 = param_1 + 3 & 3;
  puVar4 = (uint *)((param_1 + 3) - uVar1);
  *puVar4 = *puVar4 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = param_1 & 3;
  *(uint *)(param_1 - uVar1) =
       *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  return;
}



// Returns level flags word at ctx->tileHeader+0x18. Used to determine level type (platformer,
// flying, etc).

undefined2 GetLevelFlags(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x18);
}



// Returns world/area index from Tile Header offset 0x20.
// NOTE: Function was originally misnamed "GetTileHeaderField08" but actually reads offset 0x20.
// Values 0-6 observed. Accumulated across level transitions into g_pPlayerState[4].
// Likely used to select audio themes or visual styling per world/area.

undefined2 GetTileHeaderWorldIndex(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x20);
}



undefined2 GetTileHeaderField1A(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x1a);
}



int GetTileHeaderPtr(int ctx)

{
  return *(int *)(ctx + 4);
}



int GetSecondaryColorPtr(int param_1)

{
  return *(int *)(param_1 + 4) + 4;
}



// Returns number of palettes in PaletteContainer (Asset 400).
// Reads the count (first u32 in container).
// param_1: LevelDataContext* - ctx->palette_container_ptr at offset 0x28
// Returns: Number of 256-color palettes (u32)

undefined1 GetPaletteGroupCount(int param_1)

{
  undefined1 uVar1;
  
  if (*(undefined1 **)(param_1 + 0x20) == (undefined1 *)0x0) {
    uVar1 = 0;
  }
  else {
    uVar1 = **(undefined1 **)(param_1 + 0x20);
  }
  return uVar1;
}



// Returns pointer to a specific palette (Asset 400).
// Each palette is 512 bytes (256  16-bit PSX colors).
// PSX color format: 0BBBBBGGGGGRRRRR (5-5-5 RGB)
//   - Color 0 = transparent
//   - Bit 15 = STP (semi-transparency processing)
// 
// Sub-TOC lookup: offset = base + *(base + index * 12 + 12)

int GetPaletteDataPtr(int ctx,uint palette_index)

{
  int iVar1;
  
  iVar1 = *(int *)(ctx + 0x20);
  if (iVar1 == 0) {
    iVar1 = 0;
  }
  else {
    iVar1 = iVar1 + *(int *)(iVar1 + (palette_index & 0xff) * 0xc + 0xc);
  }
  return iVar1;
}



// GetPaletteAnimData - Returns pointer to Asset 401 (palette animation data).
// param_1 = TileDataContext
// Returns: ctx[9] = Asset 401 pointer (per-palette animation flags, 4 bytes each).

undefined4 GetPaletteAnimData(int param_1)

{
  return *(undefined4 *)(param_1 + 0x24);
}



// Returns total tile count from Asset 100 (TileHeader).
// Computes: count_16x16 + count_8x8_a + count_8x8_b
// (offsets 0x10 + 0x12 + 0x14 in TileHeader)

int GetTotalTileCount(int ctx)

{
  int iVar1;
  
  iVar1 = *(int *)(ctx + 4);
  return (uint)*(ushort *)(iVar1 + 0x10) + (uint)*(ushort *)(iVar1 + 0x12) +
         (uint)*(ushort *)(iVar1 + 0x14);
}



// Copies tile pixel data from Asset 300 to destination buffer.
// Uses TileHeader (Asset 100) to determine 16x16 vs 8x8 tile layout.
// 
// Storage layout:
// - 16x16 tiles: 256 bytes each (16 rows  16 bytes)
// - 8x8 tiles: 128 bytes each, stored after all 16x16 tiles
// 
// Offset calculation:
// - 16x16: base + (tile_index - 1) * 256
// - 8x8: base + count_16x16 * 128 + (tile_index - 1) * 128
// 
// Note: tile_index is 1-based (0 = transparent/invalid, returns 0)

int CopyTilePixelData(int *ctx,int tile_index,uchar *dest_buffer,uint dest_stride)

{
  int iVar1;
  uint uVar2;
  uchar *puVar3;
  ushort uVar4;
  
  if (tile_index == 0) {
    iVar1 = 0;
  }
  else {
    uVar2 = tile_index - 1;
    iVar1 = 0x10;
    if (uVar2 < *(ushort *)(ctx[1] + 0x10)) {
      puVar3 = (uchar *)(ctx[5] + uVar2 * 0x100);
    }
    else {
      puVar3 = (uchar *)(ctx[5] + (uint)*(ushort *)(ctx[1] + 0x10) * 0x80 + uVar2 * 0x80);
      iVar1 = 8;
    }
    uVar4 = 0;
    do {
      memcpy(dest_buffer,puVar3,iVar1);
      dest_buffer = dest_buffer + (dest_stride & 0xffff);
      uVar4 = uVar4 + 1;
      puVar3 = puVar3 + iVar1;
    } while (uVar4 < 0x10);
    iVar1 = 1;
  }
  return iVar1;
}



// GetAnimatedTileData - Returns animation data for 8x8 tile.
// param_1 = TileDataContext, param_2 = tile index (1-based)
// Only returns data if tile_index > (n_16x16 + n_8x8) and ctx[0x28] != NULL.
// Animation entries are 4 bytes each, accessed at ctx[0x28] + (adjusted_index) * 4.

undefined4 GetAnimatedTileData(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = (uint)*(ushort *)(*(int *)(param_1 + 4) + 0x10) +
          (uint)*(ushort *)(*(int *)(param_1 + 4) + 0x12) & 0xffff;
  if (uVar1 <= param_2 - 1U) {
    if (*(int *)(param_1 + 0x28) != 0) {
      return *(undefined4 *)(((param_2 - 1U) - uVar1) * 4 + *(int *)(param_1 + 0x28));
    }
  }
  return 0;
}



// Returns pointer to Asset 301 (palette indices per tile).
// Each byte is an index into the palette container (Asset 400).
// Size: total_tiles bytes (count_16x16 + count_8x8)

int GetPaletteIndices(int ctx)

{
  return *(int *)(ctx + 0x18);
}



// Returns pointer to Asset 302 (tile size/rendering flags).
// Each byte controls one tile:
//   - Bit 0 (0x01): Semi-transparency (enables GPU alpha blend)
//   - Bit 1 (0x02): Tile size (0=1616, 1=88)
//   - Bit 2 (0x04): Skip flag (don't render this tile)

int GetTileSizeFlags(int ctx)

{
  return *(int *)(ctx + 0x1c);
}



// Returns number of layers from TilemapContainer (Asset 200).
// Reads the layer count u16 at offset 0 of the container.

ushort GetLayerCount(int ctx)

{
  return **(ushort **)(ctx + 0xc);
}



// Returns pointer to tilemap data for a specific layer.
// Each tilemap entry is u16:
//   - Bits 0-11 (0xFFF): Tile index (12 bits, 1-based, 0=transparent)
//   - Bits 12-15: Color tint selector (indexes layer color table)
// 
// Layer dimensions determine array size: width  height entries.
// Sub-TOC lookup from Asset 200 (TilemapContainer).

int GetTilemapDataPtr(int ctx,uint layer_index)

{
  return *(int *)(ctx + 0xc) + *(int *)(*(int *)(ctx + 0xc) + (layer_index & 0xffff) * 0xc + 0xc);
}



// Returns pointer to a specific LayerEntry (Asset 201).
// Each LayerEntry is 92 bytes (0x5C) containing:
//   - 0x00-0x07: Position (x_offset, y_offset, width, height)
//   - 0x0C: render_param (priority in low 16 bits)
//   - 0x10-0x17: Parallax scroll factors (0x10000 = 1.0)
//   - 0x26: layer_type (0=normal, 3=skip)
//   - 0x2C: color_tints[16] (RGB triplets for tile tinting)

int GetLayerEntry(int ctx,uint layer_index)

{
  return *(int *)(ctx + 0x10) + (layer_index & 0xffff) * 0x5c;
}



// Returns true if Asset 500 (TileAttributes/collision data) exists for current level. Checks
// ctx[0x2c] != 0.

bool HasTileAttributes(int param_1)

{
  return *(int *)(param_1 + 0x2c) != 0;
}



// Reads bytes 0-3 from TileAttributeHeader (Asset 500). Contains two u16 values with unknown
// purpose (range 0-21 each). Values copied to GameState+0x6c but no consumers found.

void GetTileAttributeUnknown(uint param_1,int param_2)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  
  uVar3 = *(uint *)(param_2 + 0x2c);
  uVar1 = uVar3 + 3 & 3;
  uVar4 = uVar3 & 3;
  uVar4 = (*(int *)((uVar3 + 3) - uVar1) << (3 - uVar1) * 8 |
          param_1 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar4) * 8 |
          *(uint *)(uVar3 - uVar4) >> uVar4 * 8;
  uVar1 = param_1 + 3 & 3;
  puVar2 = (uint *)((param_1 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar4 >> (3 - uVar1) * 8;
  uVar1 = param_1 & 3;
  *(uint *)(param_1 - uVar1) =
       *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar4 << uVar1 * 8;
  return;
}



// Reads bytes 4-7 from TileAttributeHeader (Asset 500). Contains level_width and level_height as
// u16 values in tiles.

void GetTileAttributeDimensions(uint param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  uint uVar5;
  
  uVar1 = *(int *)(param_2 + 0x2c) + 7;
  uVar2 = uVar1 & 3;
  uVar5 = *(int *)(param_2 + 0x2c) + 4;
  uVar3 = uVar5 & 3;
  uVar5 = (*(int *)(uVar1 - uVar2) << (3 - uVar2) * 8 | param_1 & 0xffffffffU >> (uVar2 + 1) * 8) &
          -1 << (4 - uVar3) * 8 | *(uint *)(uVar5 - uVar3) >> uVar3 * 8;
  uVar1 = param_1 + 3 & 3;
  puVar4 = (uint *)((param_1 + 3) - uVar1);
  *puVar4 = *puVar4 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = param_1 & 3;
  *(uint *)(param_1 - uVar1) =
       *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  return;
}



// Returns pointer to collision data (Asset 500 + 8, skipping 8-byte header). Each byte is collision
// type for one tile.

int GetTileAttributeData(int param_1)

{
  return *(int *)(param_1 + 0x2c) + 8;
}



undefined2 GetEntityCount(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x1e);
}



undefined4 GetEntityDataPtr(int param_1)

{
  return *(undefined4 *)(param_1 + 0x38);
}



// GetAsset100Field1C - Returns TileHeader field at offset 0x1C.
// 
// Reads u16 from ctx[1] + 0x1C where ctx[1] is pointer to Asset 100 (TileHeader).
// The value is stored at GameState+0x78 by InitLayersAndTileState.
// 
// WARNING: No reader found for GameState+0x78 in analyzed code.
// This field may be legacy/unused, or read through dynamic offset calculation.
// 
// Observed patterns in field_1c values:
// - Boss levels (Options, Joe-Head-Joe): field_1c = 0
// - Vertical scrolling levels: field_1c  level_height (e.g., Soar Head: 209 for height 211)
// - Horizontal scrolling: field_1c can exceed level_height
// 
// param_1: LevelDataContext pointer
// returns: u16 value from TileHeader+0x1C

undefined2 GetAsset100Field1C(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x1c);
}



// GetLevelDataContextField3C - Returns pointer from LevelDataContext+0x3C.
// 
// Simple getter that returns the 32-bit value at offset 0x3C of LevelDataContext.
// This appears to be a pointer to additional level data.
// Stored at GameState+0x74 by InitLayersAndTileState.
// 
// param_1: LevelDataContext pointer
// returns: Pointer value from LevelDataContext+0x3C

undefined4 GetLevelDataContextField3C(int param_1)

{
  return *(undefined4 *)(param_1 + 0x3c);
}



undefined2 FUN_8007b80c(int param_1,int param_2)

{
  undefined2 uVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x30);
  if (iVar2 == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = *(undefined2 *)(iVar2 + *(int *)(iVar2 + (param_2 - 1U & 0xffff) * 0xc + 0xc) + 4);
  }
  return uVar1;
}



int FUN_8007b850(int param_1,int param_2)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x30);
  if (iVar1 == 0) {
    iVar1 = 0;
  }
  else {
    iVar1 = iVar1 + *(int *)(iVar1 + (param_2 - 1U & 0xffff) * 0xc + 0xc) + 6;
  }
  return iVar1;
}



uint FUN_8007b894(uint param_1,int param_2,int param_3)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  
  iVar6 = *(int *)(param_2 + 0x30);
  if (iVar6 == 0) {
    uVar1 = param_1 + 3 & 3;
    puVar2 = (uint *)((param_1 + 3) - uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | 0U >> (3 - uVar1) * 8;
    uVar1 = param_1 & 3;
    *(uint *)(param_1 - uVar1) =
         *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | 0 << uVar1 * 8;
  }
  else {
    uVar4 = param_3 - 1U & 0xffff;
    uVar3 = iVar6 + *(int *)(iVar6 + uVar4 * 0xc + 0xc);
    uVar1 = uVar3 + 3 & 3;
    uVar5 = uVar3 & 3;
    uVar5 = (*(int *)((uVar3 + 3) - uVar1) << (3 - uVar1) * 8 |
            uVar4 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar5) * 8 |
            *(uint *)(uVar3 - uVar5) >> uVar5 * 8;
    uVar1 = param_1 + 3 & 3;
    puVar2 = (uint *)((param_1 + 3) - uVar1);
    *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
    uVar1 = param_1 & 3;
    *(uint *)(param_1 - uVar1) =
         *(uint *)(param_1 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  }
  return param_1;
}



undefined2 GetTileHeaderField16(int param_1)

{
  return *(undefined2 *)(*(int *)(param_1 + 4) + 0x16);
}



undefined4 GetVehicleDataPtr(int param_1)

{
  return *(undefined4 *)(param_1 + 0x34);
}



// FindSpriteInTOC - Searches sprite TOC at context+0x70 and context+0x40. Each TOC entry is 12
// bytes: [count, sprite_id, offset]. Returns base + offset when sprite_id matches.

int FindSpriteInTOC(int param_1,uint param_2)

{
  uint *puVar1;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  uint uVar5;
  
  puVar1 = *(uint **)(param_1 + 0x70);
  if (puVar1 != (uint *)0x0) {
    uVar5 = 0;
    if (*puVar1 != 0) {
      uVar2 = 0;
      do {
        puVar4 = puVar1 + uVar2 * 3;
        if (puVar4[1] == param_2) {
          iVar3 = *(int *)(param_1 + 0x70);
          goto LAB_8007ba24;
        }
        uVar5 = uVar5 + 1;
        uVar2 = uVar5 & 0xffff;
      } while ((uVar5 & 0xffff) < *puVar1);
    }
  }
  puVar1 = *(uint **)(param_1 + 0x40);
  if (puVar1 != (uint *)0x0) {
    uVar5 = 0;
    if (*puVar1 != 0) {
      uVar2 = 0;
      do {
        puVar4 = puVar1 + uVar2 * 3;
        if (puVar4[1] == param_2) {
          iVar3 = *(int *)(param_1 + 0x40);
LAB_8007ba24:
          return iVar3 + puVar4[3];
        }
        uVar5 = uVar5 + 1;
        uVar2 = uVar5 & 0xffff;
      } while ((uVar5 & 0xffff) < *puVar1);
    }
  }
  return 0;
}



// Returns size of Audio Sample Bank (Secondary Asset 601).\n\nSelects between primary (ctx+0x78)
// and secondary (ctx+0x4C) based on ctx[1].\nUsed by UploadAudioToSPU to determine total transfer
// size.

undefined4 GetAsset601Size(int param_1)

{
  undefined4 uVar1;
  
  if (*(int *)(param_1 + 4) == 0) {
    uVar1 = *(undefined4 *)(param_1 + 0x78);
  }
  else {
    uVar1 = *(undefined4 *)(param_1 + 0x4c);
  }
  return uVar1;
}



// Returns pointer to Audio Sample Bank (Secondary Asset 601).\n\nSelects between primary (ctx+0x74)
// and secondary (ctx+0x48) based on ctx[1].\nAsset 601 contains: u16 count, u16 reserved,
// Entry[count], ADPCM audio data.

undefined4 GetAsset601Ptr(int param_1)

{
  undefined4 uVar1;
  
  if (*(int *)(param_1 + 4) == 0) {
    uVar1 = *(undefined4 *)(param_1 + 0x74);
  }
  else {
    uVar1 = *(undefined4 *)(param_1 + 0x48);
  }
  return uVar1;
}



// Returns pointer to Audio Volume/Pan Table (Secondary Asset 602).\n\nSelects between primary
// (ctx+0x7C) and secondary (ctx+0x50) based on ctx[1].\nFormat: u16 volume (0-0x3FFF), u16 pan
// (0=center) per sample.\nIf NULL, UploadAudioToSPU uses defaults: volume=0x3FFF, pan=0.

undefined4 GetAsset602Ptr(int param_1)

{
  undefined4 uVar1;
  
  if (*(int *)(param_1 + 4) == 0) {
    uVar1 = *(undefined4 *)(param_1 + 0x7c);
  }
  else {
    uVar1 = *(undefined4 *)(param_1 + 0x50);
  }
  return uVar1;
}



int FUN_8007bac8(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x54) + 0x10;
  if (*(int *)(param_1 + 0x54) == 0) {
    iVar1 = 0;
  }
  return iVar1;
}



void SetSpriteTables(undefined4 param_1,undefined4 param_2)

{
  g_pSecondarySpriteBank = param_1;
  g_pLevelDataContext = param_2;
  return;
}



// Searches for sprite by 32-bit ID. First checks g_pLevelDataContext TOCs at +0x70 and +0x40, then
// falls back to g_pSecondarySpriteBank. Returns pointer to sprite data or NULL if not found. Used
// by InitSpriteContext.

int LookupSpriteById(int param_1)

{
  int iVar1;
  uint uVar2;
  int *piVar3;
  
  if ((g_pLevelDataContext == 0) ||
     (iVar1 = FindSpriteInTOC(g_pLevelDataContext,param_1), iVar1 == 0)) {
    uVar2 = 0;
    if (g_pSecondarySpriteBank == 0) {
      iVar1 = 0;
    }
    else {
      piVar3 = (int *)(g_pSecondarySpriteBank + 0x10);
      for (; iVar1 = 0, uVar2 < *(uint *)(g_pSecondarySpriteBank + 0xc); uVar2 = uVar2 + 1) {
        if (*piVar3 == param_1) {
          return g_pSecondarySpriteBank +
                 *(int *)(uVar2 * 0x14 +
                          g_pSecondarySpriteBank + *(uint *)(g_pSecondarySpriteBank + 0xc) * 4 +
                         0x18);
        }
        piVar3 = piVar3 + 1;
      }
    }
  }
  return iVar1;
}



// Wrapper function to clear sprite context.
// 
// Called from InitFullEntityWithAnimation @ 0x8001C6C8 during entity initialization.
// 
// Algorithm:
// 1. Calls ClearSpriteContext() - likely zeros sprite/animation data
// 2. Returns param_1 unchanged
// 
// Parameters:
// - param_1: Sprite context pointer or offset (passed through)
// 
// Return:
// - param_1 (unchanged)
// 
// Cross-References:
// - Called by: InitFullEntityWithAnimation @ 0x8001C6C8 (with entity+0x78)
// - Calls: ClearSpriteContext
// 
// Notes:
// - Simple wrapper to allow chaining/returning value
// - ClearSpriteContext likely zeros animation frame, sprite ID, etc.
// - Called with entity+0x78 offset (sprite context area)
// 
// Verified via Ghidra decompilation 2025-01-13.

undefined4 ClearSpriteContextWrapper(undefined4 param_1)

{
  ClearSpriteContext();
  return param_1;
}



undefined4 FUN_8007bbec(undefined4 param_1)

{
  InitSpriteContext();
  return param_1;
}



void ClearSpriteContext(undefined4 *param_1)

{
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  *(undefined2 *)(param_1 + 3) = 0;
  *(undefined2 *)((int)param_1 + 0xe) = 0;
  *(undefined2 *)(param_1 + 4) = 0;
  *(undefined1 *)((int)param_1 + 0x12) = 0;
  *(undefined1 *)((int)param_1 + 0x13) = 0;
  return;
}



// InitSpriteContext - Initializes a SpriteContext from raw sprite data. Takes sprite_id as 2nd
// param, searches Asset 600 TOC via LookupSpriteById. VERIFIED: EntitySprite mapping is
// hardcoded in caller code.

undefined4 InitSpriteContext(int *param_1,int param_2)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  undefined1 *puVar6;
  ushort *puVar7;
  int iVar8;
  ushort *puVar9;
  uint uVar10;
  uint uVar11;
  int iVar12;
  undefined1 auStack_2d [3];
  undefined1 local_2a [26];
  
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  *(undefined2 *)(param_1 + 3) = 0;
  *(undefined2 *)((int)param_1 + 0xe) = 0;
  *(undefined2 *)(param_1 + 4) = 0;
  *(undefined1 *)((int)param_1 + 0x12) = 0;
  *(undefined1 *)((int)param_1 + 0x13) = 0;
  puVar7 = (ushort *)LookupSpriteById(param_2);
  uVar10 = 0;
  if (puVar7 != (ushort *)0x0) {
    puVar9 = puVar7 + 6;
    if (*puVar7 != 0) {
      do {
        if (*(int *)puVar9 == param_2) break;
        uVar10 = uVar10 + 1;
        puVar9 = puVar9 + 6;
      } while (uVar10 < *puVar7);
      if (uVar10 < *puVar7) {
        puVar9 = puVar7 + 6 + uVar10 * 6;
        *(ushort *)(param_1 + 4) = puVar9[2];
        uVar1 = puVar9[3];
        *param_1 = (int)puVar7 + (uint)puVar7[1] + (int)(uint)uVar1;
        param_1[2] = (int)puVar7 + *(int *)(puVar7 + 2);
        *(char *)((int)param_1 + 0x12) = (char)puVar9[4];
        if (*(int *)(puVar7 + 4) != 0) {
          param_1[1] = (int)puVar7 + *(int *)(puVar7 + 4);
        }
        iVar12 = 0;
        puVar7 = (ushort *)(uint)uVar1;
        for (uVar10 = 0; uVar10 < *(ushort *)(param_1 + 4); uVar10 = uVar10 + 1) {
          iVar8 = iVar12 + *param_1;
          uVar2 = iVar8 + 9U & 3;
          uVar4 = iVar8 + 6U & 3;
          uVar3 = iVar8 + 0xdU & 3;
          uVar11 = iVar8 + 10U & 3;
          uVar11 = (*(int *)((iVar8 + 0xdU) - uVar3) << (3 - uVar3) * 8 |
                   (uint)puVar7 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar11) * 8 |
                   *(uint *)((iVar8 + 10U) - uVar11) >> uVar11 * 8;
          uVar3 = (uint)auStack_2d & 3;
          puVar5 = (uint *)(auStack_2d + -uVar3);
          *puVar5 = *puVar5 & -1 << (uVar3 + 1) * 8 |
                    ((*(int *)((iVar8 + 9U) - uVar2) << (3 - uVar2) * 8 |
                     (uint)puVar9 & 0xffffffffU >> (uVar2 + 1) * 8) & -1 << (4 - uVar4) * 8 |
                    *(uint *)((iVar8 + 6U) - uVar4) >> uVar4 * 8) >> (3 - uVar3) * 8;
          puVar6 = local_2a + 1;
          uVar2 = (uint)puVar6 & 3;
          *(uint *)(puVar6 + -uVar2) =
               *(uint *)(puVar6 + -uVar2) & -1 << (uVar2 + 1) * 8 | uVar11 >> (3 - uVar2) * 8;
          stack0xffffffd4 = uVar11;
          auStack_2d._1_2_ = (undefined2)uVar11;
          if ((short)param_1[3] < (short)auStack_2d._1_2_) {
            *(undefined2 *)(param_1 + 3) = auStack_2d._1_2_;
          }
          local_2a._0_2_ = (undefined2)(uVar11 >> 0x10);
          puVar9 = (ushort *)(int)(short)local_2a._0_2_;
          if ((int)*(short *)((int)param_1 + 0xe) < (int)puVar9) {
            *(undefined2 *)((int)param_1 + 0xe) = local_2a._0_2_;
          }
          iVar12 = iVar12 + 0x24;
          puVar7 = puVar9;
        }
        *(undefined1 *)((int)param_1 + 0x13) = 1;
        return 1;
      }
    }
  }
  return 0;
}



void RenderSprite(int param_1,undefined2 param_2,undefined4 param_3,undefined4 param_4,
                 undefined1 param_5,undefined1 param_6)

{
  undefined4 uVar1;
  
  if (*(char *)(param_1 + 0x13) != '\0') {
    uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x18,1,0);
    GetFrameMetadata(param_1,uVar1,param_2,param_3,param_4,param_5,param_6);
    DecodeRLESpriteChecked(param_1,uVar1,0xffff);
    FreeFromHeap(blbHeaderBufferBase,uVar1,0,0);
  }
  return;
}



// GetFrameMetadata - Retrieves metadata for a specific animation frame.
// Reads from SpriteFrameEntry (36 bytes per frame):
//   - Width at offset 0x0A
//   - Height at offset 0x0C  
//   - RLE offset at offset 0x20
// Returns pointer to RLE data for the requested frame.

void GetFrameMetadata(int *param_1,uint *param_2,uint param_3,uint param_4,uint param_5,byte param_6
                     ,char param_7)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  int iVar4;
  uint uVar5;
  ushort *puVar6;
  
  if (*(char *)((int)param_1 + 0x13) != '\0') {
    iVar4 = (param_3 & 0xffff) * 0x24 + *param_1;
    uVar1 = *(ushort *)(iVar4 + 10);
    uVar2 = *(ushort *)(iVar4 + 0xc);
    puVar6 = (ushort *)(param_1[2] + *(int *)(iVar4 + 0x20));
    param_2[3] = (uint)puVar6;
    uVar3 = *puVar6;
    param_2[1] = param_5 & 0xffff;
    uVar5 = param_2[3];
    param_2[2] = param_4;
    *(ushort *)(param_2 + 5) = (ushort)param_6;
    *param_2 = (uint)uVar3;
    param_2[3] = uVar5 + 2;
    param_2[4] = uVar5 + 2 + *param_2 * 2;
    if (param_7 != '\0') {
      param_2[1] = -param_2[1];
      param_2[2] = param_2[2] + param_5 * (uVar2 - 1);
    }
    if (param_6 != 0) {
      param_2[2] = param_2[2] + (uVar1 - 1);
    }
  }
  return;
}



undefined1 DecodeRLESpriteChecked(int param_1,undefined4 param_2,undefined2 param_3)

{
  undefined1 uVar1;
  
  if (*(char *)(param_1 + 0x13) == '\0') {
    uVar1 = 1;
  }
  else {
    uVar1 = DecodeRLESprite(0,param_2,param_3);
  }
  return uVar1;
}



void FUN_8007bfb8(void)

{
  SpuCommonAttr local_38;
  
  SsUtReverbOff();
  local_38.mask = 0x2c3;
  local_38.mvol.left = 0x3fff;
  local_38.mvol.right = 0x3fff;
  local_38.cd.volume.left = 0x7fff;
  local_38.cd.volume.right = 0x7fff;
  local_38.cd.mix = 1;
  SpuSetCommonAttr(&local_38);
  null_00000000h_8009d1fc = 0xff93;
  null_0000h_8009d20c = 0x800;
  null_00000000h_8009d224 = 3;
  null_0000h_8009d200 = 0x3fff;
  null_0000h_8009d202 = 0x3fff;
  null_00000000h_8009d21c = 1;
  null_00000000h_8009d220 = 1;
  null_0000h_8009d228 = 0;
  null_0000h_8009d22a = 0;
  null_0000h_8009d22c = 0;
  null_0000h_8009d22e = 0;
  null_0000h_8009d230 = 0xf;
  null_00h_800a6088 = 0;
  return;
}



// Uploads audio samples to SPU RAM.\n\nParameters:\n  param_1: Audio sample bank (Asset 601) - u16
// count + Entry[count]  12 bytes + ADPCM data\n  param_2: Volume/pan table (Asset 602) - u16
// volume, u16 pan per sample (NULL uses defaults)\n  param_3: Total asset size in bytes\n\nEntry
// format: u32 sample_id, u32 spu_size, u32 data_offset\nSPU base address: 0x1010 (first upload) or
// after previous upload\nSound table built at DAT_8009cc60 (12-byte entries per sample)

void UploadAudioToSPU(undefined4 *param_1,undefined2 *param_2,int param_3)

{
  short sVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  undefined1 *puVar6;
  int iVar7;
  uchar *addr;
  ulong size;
  ulong addr_00;
  
  iVar4 = g_SoundTableCount;
  if (g_SPUUploadBlockCount == 0) {
    addr_00 = 0x1010;
  }
  else {
    iVar2 = (g_SPUUploadBlockCount - 1) * 0xc;
    addr_00 = *(int *)(&DAT_8009cfa8 + iVar2) + *(int *)(&DAT_8009cfac + iVar2);
  }
  addr = (uchar *)(param_1 + 1);
  if (param_1 == (undefined4 *)0x0) {
    uVar3 = (uint)g_SPUUploadBlockCount;
    g_SPUUploadBlockCount = g_SPUUploadBlockCount + 1;
    iVar4 = uVar3 * 0xc;
    *(ulong *)(&DAT_8009cfa8 + iVar4) = addr_00;
    *(undefined4 *)(&DAT_8009cfac + iVar4) = 0;
    *(undefined2 *)(&DAT_8009cfb0 + iVar4) = 0;
  }
  else {
    g_SPUUploadBlockCount = g_SPUUploadBlockCount + 1;
    sVar1 = (short)*param_1;
    iVar2 = sVar1 * 0xc + 4;
    if (0x46 < (uint)(g_SoundTableCount + sVar1)) {
      sVar1 = (short)g_SoundTableCount + -0x46;
    }
    iVar7 = 0;
    if (0 < sVar1) {
      do {
        iVar5 = (iVar4 + iVar7) * 0xc;
        (&g_SoundTable)[(iVar4 + iVar7) * 3] = *(undefined4 *)addr;
        *(ulong *)(&DAT_8009cc64 + iVar5) = (*(int *)(addr + 8) + addr_00) - iVar2;
        if (param_2 == (undefined2 *)0x0) {
          *(undefined2 *)(&DAT_8009cc68 + iVar5) = 0x3fff;
          *(undefined2 *)(&DAT_8009cc6a + iVar5) = 0;
        }
        else {
          *(undefined2 *)(&DAT_8009cc68 + iVar5) = *param_2;
          *(undefined2 *)(&DAT_8009cc6a + iVar5) = param_2[1];
          param_2 = param_2 + 2;
        }
        iVar7 = iVar7 + 1;
        addr = addr + 0xc;
      } while (iVar7 < sVar1);
    }
    SpuSetTransferMode(0);
    SpuSetTransferStartAddr(addr_00);
    size = param_3 - iVar2;
    SpuRead(addr,size);
    SpuIsTransferCompleted(1);
    iVar2 = 0x17;
    puVar6 = &null_00h_8009cc2f;
    g_SoundTableCount = g_SoundTableCount + sVar1;
    iVar4 = (g_SPUUploadBlockCount - 1) * 0xc;
    *(ulong *)(&DAT_8009cfa8 + iVar4) = addr_00;
    *(ulong *)(&DAT_8009cfac + iVar4) = size;
    *(short *)(&DAT_8009cfb0 + iVar4) = sVar1;
    do {
      *puVar6 = 0;
      iVar2 = iVar2 + -1;
      puVar6 = puVar6 + -1;
    } while (-1 < iVar2);
    null_00h_800a6082 = 0;
  }
  return;
}



void FUN_8007c2e0(void)

{
  if (g_SPUUploadBlockCount != 0) {
    g_SoundTableCount =
         g_SoundTableCount -
         (uint)*(ushort *)(&DAT_8009cfb0 + (uint)(byte)(g_SPUUploadBlockCount - 1) * 0xc);
    g_SPUUploadBlockCount = g_SPUUploadBlockCount - 1;
  }
  return;
}



void SetGameMode(byte param_1)

{
  if (param_1 < 7) {
    null_00h_800a6082 = param_1;
  }
  return;
}



// PlaySoundEffect - Play a sound effect with panning.
// Params:
// - param_1: Sound ID (32-bit hash)
// - param_2: Pan position (-128 to +127)
// - param_3: Force flag (0=respect mute, non-0=force play)
// 
// Mode-dependent sound remapping via table at 0x8009d0fc if DAT_800a6082 != 0.
// Finds available SPU voice (0-23), sets up voice attributes, triggers playback.

uint PlaySoundEffect(uint param_1,short param_2,char param_3)

{
  bool bVar1;
  uint uVar2;
  long lVar3;
  ushort uVar4;
  int iVar5;
  uint uVar6;
  
  if (g_SoundTableCount != 0) {
    if ((null_00h_800a6087 != '\0') && (param_3 == '\0')) {
      return 0xffffffff;
    }
    if (null_00h_800a6082 != 0) {
      if (param_1 == 0x44d4c8d8) {
        iVar5 = 2;
      }
      else if (param_1 < 0x44d4c8d9) {
        if (param_1 == 0x248e52) {
          iVar5 = 3;
        }
        else {
          iVar5 = 0xff;
          if (param_1 == 0x246166fa) {
            iVar5 = 1;
          }
        }
      }
      else if (param_1 == 0x5860c640) {
        iVar5 = 4;
      }
      else {
        iVar5 = 0xff;
        if (param_1 == 0x70d006d8) {
          iVar5 = 0;
        }
      }
      if (iVar5 != 0xff) {
        param_1 = *(uint *)(s__8009d0fc + ((uint)null_00h_800a6082 * 5 + iVar5) * 4);
      }
    }
    bVar1 = false;
    uVar6 = 0;
    if (g_SoundTableCount != 0) {
      iVar5 = 0;
      do {
        if (param_1 == *(uint *)((int)&g_SoundTable + iVar5)) {
          bVar1 = true;
          break;
        }
        uVar6 = uVar6 + 1;
        iVar5 = iVar5 + 0xc;
      } while (uVar6 < g_SoundTableCount);
    }
    if (bVar1) {
      if ((*(ushort *)(&DAT_8009cc6a + uVar6 * 0xc) & 0xf00) != 0) {
        uVar2 = rand();
        uVar2 = uVar2 & 3;
        uVar4 = *(ushort *)(&DAT_8009cc6a + uVar6 * 0xc) & 0xf00;
        if (uVar4 == 0x200) {
          if (1 < uVar2) {
            return 0xffffffff;
          }
        }
        else if (uVar4 < 0x201) {
          if ((uVar4 == 0x100) && (uVar2 != 0)) {
            return 0xffffffff;
          }
        }
        else if ((uVar4 == 0x400) && (uVar2 == 0)) {
          return 0xffffffff;
        }
      }
      uVar2 = (uint)null_00h_800a6088;
      for (iVar5 = 0; bVar1 = false, iVar5 < 0x18; iVar5 = iVar5 + 1) {
        lVar3 = SpuGetKeyStatus(1 << (uVar2 & 0x1f));
        if ((lVar3 == 0) || (lVar3 == 3)) {
          bVar1 = true;
          break;
        }
        uVar2 = uVar2 + 1;
        if (0x17 < (uVar2 & 0xffff)) {
          uVar2 = 0;
        }
      }
      if (bVar1) {
        null_00h_800a6088 = (byte)(uVar2 + 1);
        if (0x17 < (uVar2 + 1 & 0xff)) {
          null_00h_800a6088 = 0;
        }
        null_00000000h_8009d1f8 = 1 << (uVar2 & 0x1f);
        (&null_00h_8009cc18)[uVar2 & 0xffff] = (char)uVar6;
        iVar5 = uVar6 * 0xc;
        null_00000000h_8009d214 = *(undefined4 *)(&DAT_8009cc64 + iVar5);
        FUN_8007c818(&null_0000h_8009d200,(int)*(short *)(&DAT_8009cc68 + iVar5),(int)param_2);
        null_0000h_8009d20c = 0x400;
        if ((*(ushort *)(&DAT_8009cc6a + iVar5) & 1) != 0) {
          null_0000h_8009d20c = 0x800;
        }
        uVar4 = *(ushort *)(&DAT_8009cc6a + iVar5);
        if ((uVar4 & 0xf0) != 0) {
          if ((uVar4 & 0x10) == 0) {
            if ((uVar4 & 0x20) == 0) {
              if ((uVar4 & 0x40) != 0) {
                iVar5 = rand();
                null_0000h_8009d20c = ((ushort)iVar5 & 0x5ff) + 0x200;
              }
            }
            else {
              iVar5 = rand();
              null_0000h_8009d20c = ((ushort)iVar5 & 0x2ff) + 0x300;
            }
          }
          else {
            iVar5 = rand();
            null_0000h_8009d20c = ((ushort)iVar5 & 0x17f) + 0x380;
          }
        }
        SpuSetVoiceAttr((SpuVoiceAttr *)&null_00000000h_8009d1f8);
        SpuSetKey(1,1 << (uVar2 & 0x1f));
        return uVar2 & 0xffff;
      }
    }
  }
  return 0xffffffff;
}



void FUN_8007c7b8(uint param_1)

{
  if (param_1 != 0xffffffff) {
    SpuSetKey(0,1 << (param_1 & 0x1f));
  }
  return;
}



void StopAllSPUVoices(void)

{
  SpuSetKey(0,0xffffff);
  null_00h_800a6088 = 0;
  return;
}



void FUN_8007c818(ushort *param_1,ushort param_2,short param_3)

{
  short sVar1;
  int iVar2;
  ushort uVar3;
  int iVar4;
  
  *param_1 = 0;
  param_1[1] = 0;
  if (0x27e < (ushort)(param_3 + 0x9fU)) {
    return;
  }
  if (null_02h_800a607e != '\x01') {
    if (param_3 < 0x140) {
      if (param_3 < 0) {
        iVar2 = (uint)param_2 << 0x10;
        iVar4 = (int)((ulonglong)((longlong)(iVar2 >> 0x10) * 0x66666667) >> 0x20);
        sVar1 = param_3 + 0xa0;
      }
      else {
        if (param_3 < 0xa1) {
          *param_1 = param_2;
          goto LAB_8007c94c;
        }
        iVar2 = (uint)param_2 << 0x10;
        iVar4 = (int)((ulonglong)((longlong)(iVar2 >> 0x10) * 0x66666667) >> 0x20);
        sVar1 = 0x140 - param_3;
      }
      *param_1 = sVar1 * (short)((uint)(((iVar4 >> 6) - (iVar2 >> 0x1f)) * 0x10000) >> 0x10);
    }
LAB_8007c94c:
    if (0 < param_3) {
      if (param_3 < 0xa0) {
        uVar3 = param_3 * ((short)param_2 / 0xa0);
      }
      else {
        if (param_3 < 0x141) {
          param_1[1] = param_2;
          goto LAB_8007c9d8;
        }
        uVar3 = (0x1e0 - param_3) * (short)((uint)(((int)(short)param_2 / 0xa0) * 0x10000) >> 0x10);
      }
      param_1[1] = uVar3;
    }
    goto LAB_8007c9d8;
  }
  if (param_3 < 0) {
    iVar2 = (int)((ulonglong)((longlong)(int)(short)param_2 * 0x66666667) >> 0x20);
    param_3 = param_3 + 0xa0;
LAB_8007c894:
    *param_1 = param_3 * (short)((uint)(((iVar2 >> 6) - ((int)((uint)param_2 << 0x10) >> 0x1f)) *
                                       0x10000) >> 0x10);
  }
  else {
    if (0x140 < param_3) {
      iVar2 = (int)((ulonglong)((longlong)(int)(short)param_2 * 0x66666667) >> 0x20);
      param_3 = 0x1e0 - param_3;
      goto LAB_8007c894;
    }
    *param_1 = param_2;
  }
  param_1[1] = *param_1;
LAB_8007c9d8:
  iVar2 = (int)(short)*param_1 * (uint)null_04h_800a607f;
  if (iVar2 < 0) {
    iVar2 = iVar2 + 3;
  }
  iVar4 = (int)(short)param_1[1] * (uint)null_04h_800a607f;
  *param_1 = (ushort)(iVar2 >> 2);
  if (iVar4 < 0) {
    iVar4 = iVar4 + 3;
  }
  param_1[1] = (ushort)(iVar4 >> 2);
  return;
}



void FUN_8007ca28(uint param_1,short param_2)

{
  short local_10;
  short local_e;
  
  if (param_1 < 0x18) {
    FUN_8007c818(&local_10,
                 (int)*(short *)(&DAT_8009cc68 + (uint)(byte)(&null_00h_8009cc18)[param_1] * 0xc),
                 (int)param_2);
    SpuSetVoiceVolume(param_1,local_10,local_e);
  }
  return;
}



void StartCDAudioForLevel(uint param_1,char param_2)

{
  int iVar1;
  
  if (((param_1 & 0xff) < 0x1a) && ((byte)(param_2 - 1U) < 6)) {
    iVar1 = ((uint)(byte)(param_2 - 1U) + (param_1 & 0xff) * 6) * 2;
    if ((byte)(&DAT_8009cfd8)[iVar1] < 5) {
      FUN_80038cac((&DAT_8009cfd8)[iVar1],(&DAT_8009cfd9)[iVar1]);
      g_CDStreamEnabled = 1;
    }
  }
  return;
}



void StopCDStreaming(void)

{
  FUN_80038e0c();
  g_CDStreamEnabled = 0;
  return;
}



void SaveAndMuteAllVoicePitches(void)

{
  int vNum;
  int iVar1;
  ushort *puVar2;
  ushort local_18 [4];
  
  if (null_00h_800a6087 == '\0') {
    puVar2 = &null_0000h_8009cc30;
    vNum = 0;
    do {
      SpuGetVoicePitch(vNum,local_18);
      iVar1 = vNum + 1;
      *puVar2 = local_18[0];
      SpuSetVoicePitch(vNum,0);
      puVar2 = puVar2 + 1;
      vNum = iVar1;
    } while (iVar1 < 0x18);
    PauseCDAudio();
    null_00h_800a6087 = '\x01';
  }
  return;
}



void ResumeAllVoicePitches(void)

{
  ushort pitch;
  int vNum;
  int iVar1;
  ushort *puVar2;
  
  if (null_00h_800a6087 != '\0') {
    puVar2 = &null_0000h_8009cc30;
    vNum = 0;
    do {
      pitch = *puVar2;
      puVar2 = puVar2 + 1;
      iVar1 = vNum + 1;
      SpuSetVoicePitch(vNum,pitch);
      vNum = iVar1;
    } while (iVar1 < 0x18);
    ResumeCDAudio();
    null_00h_800a6087 = '\0';
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8007cc94)

void FUN_8007cc68(byte param_1)

{
  int iVar1;
  
  if (param_1 < 5) {
    iVar1 = (int)((uint)param_1 * 0x1fffc000) >> 0x10;
    null_04h_800a6080 = param_1;
    FUN_800907b4(iVar1,iVar1);
  }
  return;
}



// Tick CD Stream Buffer - Frame-Based CD Streaming Manager
// 
// Called first in main game loop to handle asynchronous CD data streaming.
// Calls ProcessCDStreamState every 4 frames (when frame_counter & 3 == 0).
// 
// ALGORITHM:
// 1. Check if g_CDStreamEnabled != 0
// 2. Increment g_FrameCounter
// 3. If (old_frame_counter & 3) == 0:
//    - Call ProcessCDStreamState @ 0x80038ef0
// 
// PARAMETERS:
//   None (uses globals)
// 
// GLOBALS:
//   g_CDStreamEnabled: Enable/disable streaming system
//   g_FrameCounter: Global frame counter (incremented here)
// 
// STREAMING RATE: 15Hz on 60Hz system (every 4 frames)
// This provides smooth background loading without blocking gameplay.
// 
// RELATED:
//   ProcessCDStreamState @ 0x80038ef0: Actual CD command processing

void TickCDStreamBuffer(void)

{
  uint uVar1;
  uint uVar2;
  
  if ((g_CDStreamEnabled != '\0') &&
     (uVar2 = g_FrameCounter + 1, uVar1 = g_FrameCounter & 3, g_FrameCounter = uVar2, uVar1 == 0)) {
    ProcessCDStreamState();
  }
  return;
}



int FUN_8007ccfc(int param_1)

{
  FUN_8002086c();
  *(undefined **)(param_1 + 0x18) = &DAT_80012100;
  return param_1;
}



// Initializes game state on startup.
// Key operations:
// 1. Loads BLB header
// 2. Initializes level loading system
// 3. Builds password-selectable level list at +0x171 (max 10 entries):
//    - Iterates all levels
//    - Adds levels where level_flag=1 AND level_index!=0
//    - Flag=1 levels: SCIE, TMPL, BOIL, FOOD, BRG1, GLID, CAVE, WEED
// 4. Stores count at +0x17b
// Called from main() during game initialization.
// param_1: GameState*
// param_2: Unknown initialization parameter

void InitGameState(undefined4 *param_1,undefined4 param_2)

{
  char cVar1;
  undefined1 uVar2;
  undefined1 uVar3;
  byte bVar4;
  undefined2 uVar5;
  int iVar6;
  undefined4 uVar7;
  int iVar8;
  undefined4 *puVar9;
  byte bVar10;
  
  LoadBLBHeader(g_GameStatePtr);
  InitializeAndLoadLevel(param_1,99);
  cVar1 = GetCurrentLevelAssetIndex(g_GameStatePtr + 0x84);
  if (cVar1 == '\0') {
    *g_pPlayerState = 1;
    g_pPlayerState[1] = 1;
  }
  else {
    *g_pPlayerState = cVar1;
    uVar2 = GetCurrentStageIndex(param_1 + 0x21);
    g_pPlayerState[1] = uVar2;
  }
  iVar8 = 0;
  iVar6 = 0;
  do {
    *(undefined2 *)((int)param_1 + (iVar6 >> 0xf) + 0x17c) = 0;
    iVar8 = iVar8 + 1;
    iVar6 = iVar8 * 0x10000;
  } while (iVar8 * 0x10000 >> 0x10 < 8);
  *(undefined1 *)(param_1 + 99) = 0;
  *(undefined1 *)((int)param_1 + 399) = 0;
  *(undefined1 *)(param_1 + 100) = 0;
  *(undefined1 *)((int)param_1 + 0x18e) = 0;
  *(undefined1 *)((int)param_1 + 0x18d) = 0;
  *(undefined1 *)((int)param_1 + 0x161) = 0;
  *(undefined1 *)(param_1 + 0x66) = 0;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x199) = 0x40;
  *(undefined1 *)((int)param_1 + 0x19a) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x19b) = 0x40;
  param_1[0x5b] = 0;
  param_1[0x50] = param_2;
  *(undefined1 *)((int)param_1 + 0x14b) = 0;
  param_1[0x4f] = 0;
  param_1[0x4d] = 0;
  *(undefined1 *)(param_1 + 0x51) = 0;
  *(undefined1 *)((int)param_1 + 0x145) = 0;
  *(undefined1 *)((int)param_1 + 0x146) = 0;
  *(undefined1 *)((int)param_1 + 0x147) = 0;
  *(undefined1 *)(param_1 + 0x52) = 0;
  *(undefined1 *)((int)param_1 + 0x149) = 0;
  *(undefined1 *)((int)param_1 + 0x14a) = 0;
  *(undefined1 *)(param_1 + 0x54) = 0;
  *(undefined1 *)((int)param_1 + 0x151) = 0;
  *(undefined1 *)((int)param_1 + 0x152) = 0;
  *(undefined1 *)(param_1 + 0x67) = 0;
  *(undefined1 *)((int)param_1 + 0x19d) = 0;
  *(undefined1 *)(param_1 + 0x58) = 0;
  *param_1 = 0xffff0000;
  param_1[1] = GameStateCollisionCallback;
  RemapEntityTypesForLevel(param_1);
  puVar9 = param_1 + 0x21;
  uVar7 = GetVehicleDataPtr(puVar9);
  param_1[0x59] = uVar7;
  uVar5 = GetTileHeaderField16(puVar9);
  *(undefined2 *)(param_1 + 0x5a) = uVar5;
  ClearSaveSlotFlags(param_1);
  param_1[0x1f] = &DAT_8009d5f8;
  *(undefined2 *)(param_1 + 0x20) = 0x79;
  uVar2 = GetCurrentLevelAssetIndex(puVar9);
  uVar3 = GetCurrentStageIndex(puVar9);
  StartCDAudioForLevel(uVar2,uVar3);
  bVar10 = 0;
  *(undefined1 *)((int)param_1 + 0x17b) = 0;
  while( true ) {
    bVar4 = GetLevelCount(puVar9);
    if (bVar4 <= bVar10) break;
    if (((*(byte *)((int)param_1 + 0x17b) < 10) &&
        (cVar1 = GetLevelFlagByIndex(puVar9,bVar10), cVar1 != '\0')) &&
       (cVar1 = GetLevelAssetIndex(puVar9,bVar10), cVar1 != '\0')) {
      *(char *)((int)param_1 + *(byte *)((int)param_1 + 0x17b) + 0x171) = cVar1;
      *(char *)((int)param_1 + 0x17b) = *(char *)((int)param_1 + 0x17b) + '\x01';
    }
    bVar10 = bVar10 + 1;
  }
  uVar2 = GetTileHeaderWorldIndex(param_1 + 0x21);
  g_pPlayerState[4] = uVar2;
  SpawnPlayerAndEntities(param_1);
  return;
}



void RespawnAfterDeath(int param_1)

{
  undefined *puVar1;
  int id;
  
  StopAllSPUVoices();
  ClearOrderingTables(blbHeaderBufferBase);
  DrawSync(0);
  puVar1 = blbHeaderBufferBase;
  blbHeaderBufferBase[0x1d] = 0;
  puVar1[0x1e] = 0;
  puVar1[0x1f] = 0;
  puVar1[0x505d] = 0;
  puVar1[0x505e] = 0;
  puVar1[0x505f] = 0;
  FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  WaitForVBlankIfNeeded(blbHeaderBufferBase);
  *(undefined1 *)(param_1 + 0x130) = 1;
  FntLoad(0x3c0,0x100);
  id = FntOpen(0x10,0x20,0x120,200,0,0x200);
  SetDumpFnt(id);
  if (*(char *)(param_1 + 0x14a) != '\0') {
    RestoreCheckpointEntities(param_1);
    *(undefined1 *)(param_1 + 0x149) = 0;
  }
  if (*(int *)(param_1 + 0x13c) != 0) {
    *(int *)(param_1 + 0x28) = *(int *)(param_1 + 0x13c);
    *(undefined4 *)(param_1 + 0x13c) = 0;
  }
  g_pPlayerState[0x18] = *(undefined1 *)(param_1 + 0x14b);
  *(undefined1 *)(param_1 + 0x146) = 0;
  *(undefined1 *)(param_1 + 0x147) = 0;
  *(undefined1 *)(param_1 + 0x144) = 0;
  *(undefined1 *)(param_1 + 0x145) = 0;
  *(undefined1 *)(param_1 + 0x148) = 0;
  *(undefined2 *)(param_1 + 0x120) = 0;
  *(undefined2 *)(param_1 + 0x122) = 0;
  *(undefined1 *)(param_1 + 0x60) = 0;
  *(undefined4 *)(param_1 + 0x10c) = 0;
  FreeEntityLists(param_1);
  FreeAllLayerRenderSlots(g_pOrderingTableBase);
  CleanupDeadEntities(param_1);
  ClearSaveSlotFlags(param_1);
  DecrementPlayerLives(g_pPlayerState);
  LoadBGColorFromTileHeader(param_1);
  AddPreInitEntitiesToList(param_1);
  InitAnimatedTileEntities(param_1);
  InitLayersAndTileState(param_1);
  SpawnPlayerAndEntities(param_1);
  FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  return;
}



// Main level initialization and loading function.
// 1. Calls GetPrimaryBufferSize to determine allocation
// 2. Loads primary, secondary, and tertiary segments
// 3. Parses segment TOCs and loads asset containers
// 4. Sets up level state for gameplay
// Uses LevelEntry fields:
//   +0x00: sector_offset (primary data location)
//   +0x04: primary_buffer_size (memory allocation)
//   +0x08: entry1_offset (collision data)
//   +0x0E: stage_count
//   +0x1E-0x55: per-stage sector offsets/counts
// param_1: GameState*
// param_2: Load flags

bool InitializeAndLoadLevel(undefined4 *param_1,byte param_2)

{
  undefined *puVar1;
  char cVar2;
  undefined1 uVar3;
  undefined1 uVar4;
  char cVar5;
  undefined2 uVar6;
  undefined2 uVar7;
  char *pcVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  uint uVar12;
  int iVar13;
  uint uVar14;
  int *pLevelDataCtx;
  undefined4 *puVar15;
  int iVar16;
  bool bVar17;
  
  puVar1 = blbHeaderBufferBase;
  blbHeaderBufferBase[0x1d] = 0;
  puVar1[0x1e] = 0;
  puVar1[0x1f] = 0;
  puVar1[0x505d] = 0;
  puVar1[0x505e] = 0;
  puVar1[0x505f] = 0;
  FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  bVar17 = false;
  WaitForVBlankIfNeeded(blbHeaderBufferBase);
  FUN_80020a1c(param_1);
  FUN_80020a74(param_1);
  ClearEntityDefList(param_1);
  FUN_8007c2e0();
  if (param_2 == 99) {
    param_2 = 1;
    FUN_8007c2e0();
    puVar15 = param_1 + 0x21;
    do {
      cVar2 = AdvancePlaybackSequence(param_1 + 0x21);
      switch(cVar2) {
      case '\0':
        SeekToLevelInSequence(param_1 + 0x21,0,1,0);
        break;
      case '\x01':
        pcVar8 = (char *)GetCurrentMovieReserved(puVar15);
        iVar13 = strcmp(pcVar8,&DAT_800a608c);
        if ((iVar13 != 0) || (0x2f < (byte)g_pPlayerState[0x1b])) {
          uVar9 = GetCurrentMovieFilename(puVar15);
          uVar10 = GetMovieUnknown00(puVar15);
          uVar11 = GetMovieSectorCount(puVar15);
          cVar5 = PlayMovieFromCD(uVar9,uVar10,uVar11,param_1[0xf]);
          if (cVar5 == '\0') {
            pcVar8 = (char *)GetCurrentModeReservedData(puVar15);
            iVar13 = strcmp(pcVar8,&DAT_800a6094);
            if (iVar13 == 0) {
              AdvancePlaybackSequence(puVar15);
              AdvancePlaybackSequence(puVar15);
              goto LAB_8007d50c;
            }
          }
        }
        break;
      case '\x02':
        uVar6 = GetCurrentSectorOffset(puVar15);
        uVar7 = GetCurrentSectorCount(puVar15);
        cVar5 = PlayMovieFromBLBSectors(uVar6,uVar7,param_1[0xf]);
        if (cVar5 == '\0') {
          pcVar8 = (char *)GetCurrentModeReservedData(puVar15);
          iVar13 = strcmp(pcVar8,&DAT_800a609c);
          if (iVar13 == 0) {
LAB_8007d50c:
            AdvancePlaybackSequence(puVar15);
            goto switchD_8007d2a4_caseD_3;
          }
        }
        break;
      case '\x03':
switchD_8007d2a4_caseD_3:
        break;
      case '\x04':
      case '\x05':
        FlushDebugFontAndEndFrame(blbHeaderBufferBase);
        WaitForVBlankIfNeeded(blbHeaderBufferBase);
        uVar6 = GetCurrentSectorOffset(puVar15);
        uVar7 = GetCurrentSectorCount(puVar15);
        uVar3 = GetLoadingScreenMinDisplayTime(puVar15);
        uVar4 = GetLoadingScreenMaxDisplayTime(puVar15);
        cVar5 = DisplayLoadingScreen(uVar6,uVar7,param_1[0xf],uVar3,uVar4);
        bVar17 = cVar5 == '\0';
        if (!bVar17) goto switchD_8007d2a4_caseD_3;
        SeekToLevelInSequence(puVar15,0,1,0);
        cVar2 = AdvancePlaybackSequence(puVar15);
        FlushDebugFontAndEndFrame(blbHeaderBufferBase);
        WaitForVBlankIfNeeded(blbHeaderBufferBase);
        uVar6 = GetCurrentSectorOffset(puVar15);
        uVar7 = GetCurrentSectorCount(puVar15);
        uVar3 = GetLoadingScreenMinDisplayTime(puVar15);
        uVar4 = GetLoadingScreenMaxDisplayTime(puVar15);
        DisplayLoadingScreen(uVar6,uVar7,param_1[0xf],uVar3,uVar4);
        SeekToLevelInSequence(puVar15,*g_pPlayerState,0,0);
        param_2 = g_pPlayerState[1];
        FUN_800261d4();
      }
    } while ((cVar2 != '\x03') && (cVar2 != '\x06'));
    puVar15 = param_1 + 0x21;
    LevelDataParser(puVar15,param_1[0xf]);
    uVar9 = GetAsset601Ptr(puVar15);
    uVar10 = GetAsset602Ptr(puVar15);
    uVar11 = GetAsset601Size(puVar15);
    UploadAudioToSPU(uVar9,uVar10,uVar11);
  }
  cVar2 = GetCurrentLevelAssetIndex(param_1 + 0x21);
  if ((cVar2 == '\0') && (param_2 == 1)) {
    param_2 = 5;
    if (g_MenuDemoRotationCounter == 4) {
      g_MenuDemoRotationCounter = 0;
    }
    else {
      if ((g_MenuDemoRotationCounter == 0) || (param_2 = 6, g_MenuDemoRotationCounter == 2)) {
        param_2 = 1;
      }
      g_MenuDemoRotationCounter = g_MenuDemoRotationCounter + 1;
    }
  }
  pLevelDataCtx = param_1 + 0x21;
  LoadAssetContainer(pLevelDataCtx,(uint)param_2,'\x01');
  uVar9 = GetAsset601Ptr(pLevelDataCtx);
  uVar10 = GetAsset602Ptr(pLevelDataCtx);
  uVar11 = GetAsset601Size(pLevelDataCtx);
  UploadAudioToSPU(uVar9,uVar10,uVar11);
  uVar12 = GetPrimaryBufferSize(pLevelDataCtx);
  iVar13 = GetCurrentTertiaryDataSize(pLevelDataCtx);
  uVar14 = iVar13 + 0xfU & 0xfffffff0;
  if (uVar14 == 0) {
    uVar14 = uVar12;
  }
  iVar16 = uVar12 - uVar14;
  FUN_800143a4(blbHeaderBufferBase,param_1[0xf] + uVar14,-0x7fe04000 - (param_1[0xf] + uVar14));
  iVar13 = 0;
  FUN_80014854(blbHeaderBufferBase);
  if (iVar16 != 0) {
    iVar13 = AllocateFromHeap(blbHeaderBufferBase,1,iVar16,1);
  }
  FUN_80014968(blbHeaderBufferBase,0xeeeeeeee);
  uVar14 = GetAsset101Entry(pLevelDataCtx,0);
  uVar12 = GetAsset101Entry(pLevelDataCtx,1);
  if ((uVar14 == 0) && (uVar12 == 0)) {
    uVar12 = 2;
  }
  InitVRAMSlotTable(blbHeaderBufferBase,uVar14 & 0xff,uVar12 & 0xff);
  *(undefined2 *)(param_1 + 0x41) = 0;
  param_1[0x42] = 0;
  *param_1 = 0xffff0000;
  param_1[1] = GameStateCollisionCallback;
  param_1[2] = 0xffff0000;
  param_1[3] = &LAB_80020f48;
  param_1[7] = 0;
  param_1[8] = 0;
  param_1[9] = 0;
  param_1[10] = 0;
  param_1[0xb] = 0;
  param_1[0xc] = 0;
  param_1[0x13] = 0;
  param_1[0x14] = 0;
  *(undefined1 *)(param_1 + 0x16) = 0;
  *(undefined1 *)((int)param_1 + 0x59) = 0;
  *(undefined1 *)((int)param_1 + 0x5a) = 0;
  *(undefined1 *)((int)param_1 + 0x5b) = 0;
  *(undefined1 *)(param_1 + 0x18) = 0;
  *(undefined2 *)(param_1 + 0x17) = 0;
  *(undefined2 *)((int)param_1 + 0x5e) = 0;
  *(undefined1 *)((int)param_1 + 0x61) = 0;
  *(undefined1 *)((int)param_1 + 0x62) = 0;
  *(undefined1 *)((int)param_1 + 0x11a) = 0;
  *(undefined2 *)(param_1 + 0x15) = 0;
  *(undefined2 *)((int)param_1 + 0x56) = 0;
  param_1[0xd] = 0;
  param_1[0xe] = 0;
  param_1[0x1d] = 0;
  *(undefined2 *)(param_1 + 0x1e) = 0;
  param_1[0x1f] = 0;
  *(undefined2 *)(param_1 + 0x20) = 0;
  *(undefined2 *)(param_1 + 0x11) = 0;
  *(undefined2 *)((int)param_1 + 0x46) = 0;
  param_1[0x43] = 0;
  param_1[0x44] = 0;
  *(undefined1 *)(param_1 + 0x45) = 0;
  *(undefined1 *)((int)param_1 + 99) = 0;
  *(undefined2 *)(param_1 + 0x48) = 0;
  *(undefined2 *)((int)param_1 + 0x122) = 0;
  *(undefined1 *)((int)param_1 + 0x12a) = 0x28;
  LoadTileDataToVRAM((int)param_1);
  LoadAssetContainer(param_1 + 0x21,(uint)param_2,'\0');
  if (iVar13 != 0) {
    FreeFromHeap(blbHeaderBufferBase,iVar13,iVar16,1);
  }
  FUN_80014968(blbHeaderBufferBase,0xeeeeeeee);
  *(undefined2 *)(blbHeaderBufferBase + 0xa64e) = *(undefined2 *)(blbHeaderBufferBase + 0xa64c);
  InitPlayerSpawnPosition(param_1);
  LoadBGColorFromTileHeader(param_1);
  LoadSecondaryColorFromTileHeader(param_1);
  AddPreInitEntitiesToList(param_1);
  InitTileAttributeState(param_1);
  LoadEntitiesFromAsset501(param_1);
  InitAnimatedTileEntities(param_1);
  InitLayersAndTileState(param_1);
  return bVar17;
}



undefined1 SetupAndStartLevel(undefined4 *param_1,byte param_2)

{
  bool bVar1;
  undefined *puVar2;
  char cVar3;
  undefined1 uVar4;
  undefined1 uVar5;
  undefined1 uVar6;
  undefined2 uVar7;
  u_short uVar8;
  int iVar9;
  undefined4 uVar10;
  uint uVar11;
  byte bVar12;
  int iVar13;
  undefined4 *puVar14;
  
  StopAllSPUVoices();
  StopCDStreaming();
  ClearOrderingTables(blbHeaderBufferBase);
  DrawSync(0);
  bVar12 = param_2;
  if (param_2 == 0x62) {
    AdvancePlaybackSequence(param_1 + 0x21);
    AdvancePlaybackSequence(param_1 + 0x21);
    bVar12 = 99;
  }
  if ((param_2 < 0x62) ||
     ((bVar12 == 99 && (cVar3 = FUN_8007a594(param_1 + 0x21), cVar3 == '\x06')))) {
    DisplayTransitionSprite(param_1);
  }
  FntLoad(0x3c0,0x100);
  iVar9 = FntOpen(0x10,0x20,0x120,200,0,0x200);
  SetDumpFnt(iVar9);
  if (*(char *)((int)param_1 + 0x14a) != '\0') {
    RestoreCheckpointEntities(param_1);
    *(undefined1 *)((int)param_1 + 0x149) = 0;
  }
  if (param_1[0x4f] != 0) {
    param_1[10] = param_1[0x4f];
    param_1[0x4f] = 0;
  }
  if (param_1[0x5b] != 0) {
    FreeFromHeap(blbHeaderBufferBase,param_1[0x5b],0,0);
    param_1[0x5b] = 0;
  }
  *(undefined1 *)((int)param_1 + 0x161) = 0;
  *(undefined1 *)(param_1 + 0x66) = 0;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x199) = 0x40;
  *(undefined1 *)((int)param_1 + 0x19a) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)((int)param_1 + 0x19b) = 0x40;
  *(undefined1 *)((int)param_1 + 0x14b) = 0;
  *(undefined1 *)((int)param_1 + 0x146) = 0;
  *(undefined1 *)((int)param_1 + 0x147) = 0;
  *(undefined1 *)(param_1 + 0x52) = 0;
  *(undefined1 *)(param_1 + 0x51) = 0;
  *(undefined1 *)((int)param_1 + 0x145) = 0;
  *(undefined1 *)((int)param_1 + 0x14a) = 0;
  param_1[0x43] = 0;
  FreeEntityLists(param_1);
  FreeAllLayerRenderSlots(g_pOrderingTableBase);
  puVar2 = g_pPlayerState;
  *(undefined2 *)(blbHeaderBufferBase + 0xa08a) = 0;
  ResetPlayerCollectibles(puVar2);
  if (0x61 < bVar12) {
    FUN_8002615c(g_pPlayerState);
  }
  uVar4 = InitializeAndLoadLevel(param_1,bVar12);
  cVar3 = GetCurrentLevelAssetIndex(g_GameStatePtr + 0x84);
  if (cVar3 != '\0') {
    *g_pPlayerState = cVar3;
    uVar5 = GetCurrentStageIndex(param_1 + 0x21);
    g_pPlayerState[1] = uVar5;
  }
  puVar14 = param_1 + 0x21;
  uVar10 = GetVehicleDataPtr(puVar14);
  param_1[0x59] = uVar10;
  uVar7 = GetTileHeaderField16(puVar14);
  *(undefined2 *)(param_1 + 0x5a) = uVar7;
  ClearSaveSlotFlags(param_1);
  *param_1 = 0xffff0000;
  param_1[1] = GameStateCollisionCallback;
  RemapEntityTypesForLevel(param_1);
  param_1[0x1f] = &DAT_8009d5f8;
  *(undefined2 *)(param_1 + 0x20) = 0x79;
  uVar5 = GetCurrentLevelAssetIndex(puVar14);
  uVar6 = GetCurrentStageIndex(puVar14);
  StartCDAudioForLevel(uVar5,uVar6);
  if (*(char *)((int)param_1 + 0x152) != '\0') {
    g_DefaultBGColorR = 0x40;
    g_DefaultBGColorG = 0x20;
    g_DefaultBGColorB = 0x80;
    srand(1);
    uVar10 = FUN_8007bac8(puVar14);
    FUN_80025b7c(param_1[0x50],uVar10);
    FUN_80025bc0(param_1[0x50],1);
    uVar10 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
    iVar9 = InitEntitySprite(uVar10,0x28c080df,30000,0xa0,0x20,0);
    *(undefined4 *)(iVar9 + 0x24) = 0xffff0000;
    *(code **)(iVar9 + 0x28) = EntityCallback_8001a2cc;
    *(undefined4 *)(iVar9 + 0x2c) = 0xffff0000;
    *(code **)(iVar9 + 0x30) = EntityCallback_8001a2e8;
    iVar13 = *(int *)(iVar9 + 0x34);
    uVar8 = GetTPage((uint)*(byte *)(iVar13 + 0x32),1,(int)*(short *)(iVar13 + 0x10) & 0xffffffc0,
                     (int)*(short *)(iVar13 + 0x12) & 0xffffff00);
    *(u_short *)(iVar13 + 0x24) = uVar8;
    AddEntityToSortedRenderList(param_1,iVar9);
  }
  cVar3 = GetTileHeaderWorldIndex(puVar14);
  bVar1 = false;
  g_pPlayerState[4] = g_pPlayerState[4] + cVar3;
  uVar11 = GetLevelFlags(puVar14);
  if ((uVar11 & 0x200) == 0) {
    uVar11 = GetLevelFlags(puVar14);
    bVar1 = (uVar11 & 0x2000) == 0;
  }
  if (bVar1) {
    uVar5 = GetCurrentLevelAssetIndex(g_GameStatePtr + 0x84);
    ResetPlayerUnlocksByLevel(g_pPlayerState,uVar5);
  }
  SpawnPlayerAndEntities(param_1);
  FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  return uVar4;
}



void DisplayTransitionSprite(void)

{
  undefined *puVar1;
  undefined4 uVar2;
  short *psVar3;
  int iVar4;
  int iVar5;
  short unaff_s2;
  code *pcVar6;
  
  uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x100,1,0);
  psVar3 = (short *)InitEntitySprite(uVar2,0x8ab92024,30000,0xa0,0x7c,0);
  psVar3[0x12] = 0;
  psVar3[0x13] = -1;
  *(code **)(psVar3 + 0x14) = EntityCallback_8001a2cc;
  psVar3[0x16] = 0;
  psVar3[0x17] = -1;
  *(code **)(psVar3 + 0x18) = EntityCallback_8001a2e8;
  iVar5 = *(int *)(psVar3 + 0x1a);
  *(undefined1 *)(iVar5 + 0x34) = 0x40;
                    // Possible PsyQ macro: setLineF2()
  *(undefined1 *)(iVar5 + 0x35) = 0x40;
  *(undefined1 *)(iVar5 + 0x36) = 0x40;
  iVar5 = (int)psVar3[1];
  if (iVar5 != 0) {
    if (iVar5 < 1) {
      pcVar6 = *(code **)(psVar3 + 2);
    }
    else {
      iVar4 = iVar5 * 8 + *(int *)((int)psVar3 + (int)psVar3[2]);
      unaff_s2 = (short)*(undefined4 *)(iVar4 + -8);
      pcVar6 = *(code **)(iVar4 + -4);
    }
    iVar4 = (int)*psVar3;
    if (0 < iVar5 << 0x10) {
      iVar4 = unaff_s2 + iVar4;
    }
    (*pcVar6)((int)psVar3 + iVar4);
  }
  (**(code **)(*(int *)(psVar3 + 0xc) + 0x14))
            ((int)psVar3 + (int)*(short *)(*(int *)(psVar3 + 0xc) + 0x10));
  (**(code **)(*(int *)(psVar3 + 0xc) + 0x1c))
            ((int)psVar3 + (int)*(short *)(*(int *)(psVar3 + 0xc) + 0x18));
  iVar5 = *(int *)(*(int *)(psVar3 + 0x1a) + 0xc);
  (**(code **)(iVar5 + 0xc))(*(int *)(psVar3 + 0x1a) + (int)*(short *)(iVar5 + 8));
  DrawSync(0);
  (**(code **)(*(int *)(psVar3 + 0xc) + 0x1c))
            ((int)psVar3 + (int)*(short *)(*(int *)(psVar3 + 0xc) + 0x18));
  DrawSync(0);
  puVar1 = blbHeaderBufferBase;
  blbHeaderBufferBase[0x1d] = 0;
  puVar1[0x1e] = 0;
  puVar1[0x1f] = 0;
  puVar1[0x505d] = 0;
  puVar1[0x505e] = 0;
  puVar1[0x505f] = 0;
  FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  WaitForVBlankIfNeeded(blbHeaderBufferBase);
  if (psVar3 != (short *)0x0) {
    (**(code **)(*(int *)(psVar3 + 0xc) + 0xc))
              ((int)psVar3 + (int)*(short *)(*(int *)(psVar3 + 0xc) + 8),3);
  }
  return;
}



// Spawns player entity and level entities. Checks level flags to select player type: 0x400=FINN,
// 0x200=menu, 0x2000=boss, 0x100=RUNN, 0x10=SOAR, 0x04=GLIDE, else normal platformer. Also creates
// camera, HUD, and boss entities as needed.

void SpawnPlayerAndEntities(int param_1)

{
  bool bVar1;
  undefined *puVar2;
  undefined1 uVar3;
  char cVar4;
  byte bVar5;
  ushort uVar6;
  uint uVar7;
  undefined4 uVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  short unaff_s4;
  code *pcVar12;
  
  iVar11 = param_1 + 0x84;
  uVar7 = GetLevelFlags(iVar11);
  *(byte *)(param_1 + 0x19c) = (byte)(uVar7 >> 1) & 1;
  uVar3 = GetTileHeaderField1A(iVar11);
  *(undefined1 *)(param_1 + 0x19d) = uVar3;
  *(undefined1 *)(param_1 + 0x170) = 1;
  cVar4 = GetCurrentLevelAssetIndex(iVar11);
  if (cVar4 == '\0') {
    *(undefined1 *)(param_1 + 0x170) = 0;
  }
  uVar7 = GetLevelFlags(iVar11);
  uVar8 = 0x8000;
  if ((uVar7 & 0x80) == 0) {
    uVar7 = GetLevelFlags(iVar11);
    uVar8 = 0xc000;
    if ((uVar7 & 8) == 0) {
      uVar8 = 0x10000;
    }
  }
  *(undefined4 *)(param_1 + 0x11c) = uVar8;
  bVar5 = GetTileAttributeAtPosition
                    (param_1,(int)*(short *)(param_1 + 0x116),
                     (int)((*(ushort *)(param_1 + 0x118) + 1) * 0x10000) >> 0x10);
  if (((bVar5 != 0x65) && (bVar5 != 0)) && (bVar5 < 0x3c)) {
    uVar6 = FUN_80081c0c(param_1,bVar5,(int)*(short *)(param_1 + 0x116));
    *(ushort *)(param_1 + 0x118) =
         (*(short *)(param_1 + 0x118) + 1U & 0xfff0) - ((uVar6 & 0xff) - 0xf);
  }
  bVar1 = false;
  uVar7 = GetLevelFlags(param_1 + 0x84);
  if (((uVar7 & 0x20) != 0) || (uVar7 = GetLevelFlags(param_1 + 0x84), (uVar7 & 4) != 0)) {
    bVar1 = true;
  }
  if (bVar1) {
    if (*(int *)(param_1 + 0x16c) == 0) {
      uVar8 = AllocateFromHeap(blbHeaderBufferBase,4,0x100,0);
      *(undefined4 *)(param_1 + 0x16c) = uVar8;
    }
    FUN_80081fd0(param_1);
  }
  iVar11 = param_1 + 0x84;
  uVar7 = GetLevelFlags(iVar11);
  puVar2 = blbHeaderBufferBase;
  if ((uVar7 & 0x400) == 0) {
    uVar7 = GetLevelFlags(iVar11,0x114);
    puVar2 = blbHeaderBufferBase;
    if ((uVar7 & 0x200) == 0) {
      uVar7 = GetLevelFlags(iVar11,0x140);
      puVar2 = blbHeaderBufferBase;
      if ((uVar7 & 0x2000) == 0) {
        uVar7 = GetLevelFlags(iVar11,0x158);
        puVar2 = blbHeaderBufferBase;
        if ((uVar7 & 0x100) == 0) {
          uVar7 = GetLevelFlags(iVar11,0x110);
          puVar2 = blbHeaderBufferBase;
          if ((uVar7 & 0x10) == 0) {
            uVar7 = GetLevelFlags(iVar11,0x128);
            puVar2 = blbHeaderBufferBase;
            if ((uVar7 & 4) == 0) {
              *(undefined2 *)(param_1 + 100) = 0x28;
              *(undefined2 *)(param_1 + 0x66) = 0xffd0;
              uVar8 = AllocateFromHeap(puVar2,0x1b4,1,0);
              uVar7 = GetLevelFlags(iVar11);
              iVar9 = CreatePlayerEntity(uVar8,g_pPlayer1Input,(int)*(short *)(param_1 + 0x116),
                                         (int)*(short *)(param_1 + 0x118),
                                         ((uVar7 & 0xffff) >> 0xc ^ 1) & 1);
              *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
              *(int *)(param_1 + 0x30) = iVar9;
              if ((*(char *)(param_1 + 0x161) == '\0') &&
                 (uVar7 = GetLevelFlags(iVar11), (uVar7 & 0x1000) == 0)) {
                uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0);
                uVar8 = CreateCameraEntity(uVar8,(int)*(short *)(param_1 + 0x116),
                                           (int)*(short *)(param_1 + 0x118),0);
                AddEntityToSortedRenderList(param_1,uVar8);
                uVar8 = 0x60;
              }
              else {
                uVar8 = 0;
              }
            }
            else {
              *(undefined2 *)(param_1 + 100) = 0;
              *(undefined2 *)(param_1 + 0x66) = 0;
              uVar8 = AllocateFromHeap(puVar2,0x11c,1,0);
              iVar9 = CreateGlidePlayerEntity
                                (uVar8,g_pPlayer1Input,(int)*(short *)(param_1 + 0x116),
                                 (int)*(short *)(param_1 + 0x118));
              uVar8 = 0;
              *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
              *(undefined2 *)(param_1 + 0x120) = 0;
              *(undefined2 *)(param_1 + 0x122) = 0;
              *(undefined1 *)(param_1 + 0x12a) = 0;
              *(int *)(param_1 + 0x30) = iVar9;
            }
          }
          else {
            *(undefined2 *)(param_1 + 100) = 0x28;
            *(undefined2 *)(param_1 + 0x66) = 0xffa0;
            uVar8 = AllocateFromHeap(puVar2,0x128,1,0);
            iVar9 = CreateSoarPlayerEntity
                              (uVar8,g_pPlayer1Input,(int)*(short *)(param_1 + 0x116),
                               (int)((*(ushort *)(param_1 + 0x118) - 0x80) * 0x10000) >> 0x10);
            puVar2 = blbHeaderBufferBase;
            *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
            *(int *)(param_1 + 0x30) = iVar9;
            uVar8 = AllocateFromHeap(puVar2,0x10c,1,0);
            uVar8 = CreateCameraEntity(uVar8,(int)*(short *)(param_1 + 0x116),
                                       (int)((*(ushort *)(param_1 + 0x118) - 0x80) * 0x10000) >>
                                       0x10,0xa000);
            AddEntityToSortedRenderList(param_1,uVar8);
            uVar8 = 0x80;
          }
        }
        else {
          *(undefined2 *)(param_1 + 100) = 0x28;
          *(undefined2 *)(param_1 + 0x66) = 0xffd0;
          uVar8 = AllocateFromHeap(puVar2,0x110,1,0);
          iVar9 = CreateRunnPlayerEntity
                            (uVar8,g_pPlayer1Input,(int)*(short *)(param_1 + 0x116),
                             (int)*(short *)(param_1 + 0x118));
          uVar8 = 0;
          *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
          *(int *)(param_1 + 0x30) = iVar9;
        }
      }
      else {
        *(undefined2 *)(param_1 + 100) = 0;
        *(undefined2 *)(param_1 + 0x66) = 0;
        uVar8 = AllocateFromHeap(puVar2,0x158,1,0);
        iVar9 = CreateBossPlayerEntity(uVar8,g_pPlayer1Input,*(undefined1 *)(param_1 + 0x18e));
        uVar8 = 0;
        *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
        *(undefined2 *)(param_1 + 0x120) = 0;
        *(undefined2 *)(param_1 + 0x122) = 0;
        *(undefined1 *)(param_1 + 0x12a) = 0;
        *(int *)(param_1 + 0x30) = iVar9;
      }
    }
    else {
      *(undefined2 *)(param_1 + 100) = 0;
      *(undefined2 *)(param_1 + 0x66) = 0;
      uVar8 = AllocateFromHeap(puVar2,0x140,1,0);
      iVar9 = InitMenuEntity(uVar8,g_pPlayer1Input,param_1 + 0x171,*(undefined1 *)(param_1 + 0x17b))
      ;
      uVar8 = 0;
      *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
      *(int *)(param_1 + 0x30) = iVar9;
    }
  }
  else {
    *(undefined2 *)(param_1 + 100) = 0;
    *(undefined2 *)(param_1 + 0x66) = 0xffb0;
    uVar8 = AllocateFromHeap(puVar2,0x114,1,0);
    iVar9 = CreateFinnPlayerEntity
                      (uVar8,g_pPlayer1Input,(int)*(short *)(param_1 + 0x116),
                       (int)*(short *)(param_1 + 0x118));
    uVar8 = 0;
    *(undefined4 *)(iVar9 + 0x100) = *(undefined4 *)(param_1 + 0x140);
    *(undefined2 *)(param_1 + 0x120) = 0;
    *(undefined2 *)(param_1 + 0x122) = 0;
    *(undefined1 *)(param_1 + 0x12a) = 0;
    *(int *)(param_1 + 0x30) = iVar9;
  }
  UpdateCameraPosition(param_1,0,uVar8);
  AddEntityToSortedRenderList(param_1,iVar9);
  *(int *)(param_1 + 0x2c) = iVar9;
  LoadLevelSpriteAssets(param_1);
  uVar7 = GetLevelFlags(param_1 + 0x84);
  if ((uVar7 & 1) != 0) {
    uVar8 = AllocateFromHeap(blbHeaderBufferBase,0x30,1,0);
    iVar11 = FUN_800313cc(uVar8);
    AddToZOrderList(param_1,iVar11);
    AddToXPositionList(param_1,*(undefined4 *)(iVar11 + 0x1c));
  }
  uVar8 = AllocateFromHeap(blbHeaderBufferBase,0xb0,1,0);
  uVar8 = CreateMenuEntities(uVar8,*(undefined4 *)(param_1 + 0x140));
  *(undefined4 *)(param_1 + 0x14c) = uVar8;
  AddToZOrderList(param_1);
  cVar4 = GetCurrentLevelAssetIndex(param_1 + 0x84);
  if (cVar4 != '\0') {
    iVar11 = *(int *)(param_1 + 0x14c);
    iVar9 = (int)*(short *)(iVar11 + 10);
    if (iVar9 != 0) {
      if (iVar9 < 1) {
        pcVar12 = *(code **)(iVar11 + 0xc);
      }
      else {
        iVar10 = iVar9 * 8 + *(int *)(iVar11 + *(short *)(iVar11 + 0xc));
        unaff_s4 = (short)*(undefined4 *)(iVar10 + -8);
        pcVar12 = *(code **)(iVar10 + -4);
      }
      iVar10 = (int)*(short *)(iVar11 + 8);
      if (0 < iVar9 << 0x10) {
        iVar10 = unaff_s4 + iVar10;
      }
      (*pcVar12)(iVar11 + iVar10,0x1013,2,0);
    }
  }
  return;
}



void FUN_8007e5d0(int param_1,uint param_2)

{
  *(undefined **)(param_1 + 0x18) = &DAT_80012100;
  if (*(int *)(param_1 + 0x16c) != 0) {
    FreeFromHeap(blbHeaderBufferBase,*(int *)(param_1 + 0x16c),0,0);
  }
  FUN_80020974(param_1,0);
  if ((param_2 & 1) != 0) {
    FreeFromHeap(blbHeaderBufferBase,param_1,0,0);
  }
  return;
}



// Game State Collision Callback - Handles Collected Items
// 
// Called when entities are collected (message 3) to update game state.
// 
// HANDLES:
// - Clayball collection  g_pPlayerState[0x12]++ (100  1up)
// - Item pickups  various g_pPlayerState fields
// - Score increment and sound effects
// 
// This is the central handler for all collectible processing.
// 
// NOTE: Earlier decompilation labeled this as GameModeCallback but actual 
// purpose is collision/collection message handling from entity system.
// 
// Referenced in: docs/reference/items.md, ClayballTickCallback

void GameStateCollisionCallback(int param_1)

{
  uint uVar1;
  char cVar2;
  
  cVar2 = *(char *)(param_1 + 0x160);
  if (cVar2 != '\0') {
    *(char *)(param_1 + 0x160) = cVar2 + -1;
    if ((cVar2 == '\x01') && (*(char *)(param_1 + 0x151) != '\0')) {
      UnpauseGameAndRestoreEntities();
    }
    goto LAB_8007e7fc;
  }
  uVar1 = **(uint **)(param_1 + 0x140);
  if ((uVar1 & 0x8000000) == 0) {
    if (*(char *)(param_1 + 0x150) == '\0') goto LAB_8007e7fc;
    if ((**(uint **)(param_1 + 0x140) & 0x50000000) == 0) {
      if ((uVar1 & 0x400000) != 0) {
        cVar2 = FUN_8002be8c(*(undefined4 *)(param_1 + 0x14c));
        if (cVar2 == '\x01') {
          PauseGameWithFadeOut(param_1);
        }
        else if (cVar2 == '\x02') {
          SetNextLevelFlagWithFade(param_1);
        }
        goto LAB_8007e7c4;
      }
    }
    else {
      FUN_8002bde8(*(undefined4 *)(param_1 + 0x14c));
LAB_8007e7c4:
      if ((*(ushort *)(*(int *)(param_1 + 0x140) + 2) & 0x40) != 0) goto LAB_8007e7fc;
    }
    cVar2 = CheckCheatCodeInput(param_1);
    if (cVar2 != '\0') {
LAB_8007e7f4:
      PauseGameWithFadeOut(param_1);
    }
  }
  else if (*(char *)(param_1 + 0x150) == '\0') {
    if (*(char *)(param_1 + 399) == '\0') {
      if (*(char *)(param_1 + 0x170) != '\0') {
        PauseGameAndShowMenu(param_1);
      }
    }
    else {
      *(bool *)(param_1 + 400) = *(char *)(param_1 + 400) == '\0';
    }
  }
  else {
    cVar2 = FUN_8002be8c(*(undefined4 *)(param_1 + 0x14c));
    if (cVar2 == '\x01') goto LAB_8007e7f4;
    if (cVar2 == '\x02') {
      SetNextLevelFlagWithFade(param_1);
    }
  }
LAB_8007e7fc:
  if (((*(char *)(param_1 + 400) != '\0') &&
      ((*(ushort *)(*(int *)(param_1 + 0x140) + 2) & 0x800) == 0)) &&
     (cVar2 = CheckCheatCodeInput(param_1), cVar2 != '\0')) {
    if (*(char *)(param_1 + 400) == '\0') {
      PauseGameWithFadeOut(param_1);
    }
    else {
      *(undefined1 *)(param_1 + 400) = 0;
    }
  }
  if (*(char *)(param_1 + 0x150) != '\0') goto LAB_8007e9b4;
  if (*(char *)(param_1 + 0x146) == '\0') {
    if (*(char *)(param_1 + 0x147) != '\0') {
      SeekToLevelInSequence(param_1 + 0x84,0,1,0);
LAB_8007e900:
      cVar2 = SetupAndStartLevel(param_1,99);
      if (cVar2 == '\0') {
        initPlayerState(g_pPlayerState);
      }
    }
  }
  else if (*(char *)(param_1 + 0x19c) == '\0') {
    if (g_pPlayerState[0x11] == '\0') {
      AdvanceLevelSequence(param_1 + 0x84);
      goto LAB_8007e900;
    }
    RespawnAfterDeath(param_1);
  }
  else {
    SetupAndStartLevel(param_1,*(undefined1 *)(param_1 + 0x19d));
  }
  if (*(char *)(param_1 + 0x148) != '\0') {
    SetupAndStartLevel(param_1);
  }
  if (*(char *)(param_1 + 0x149) == '\0') {
LAB_8007e974:
    if (*(char *)(param_1 + 0x14a) != '\0') {
      RestoreCheckpointEntities(param_1);
    }
  }
  else {
    if (*(char *)(param_1 + 0x14a) == '\0') {
      SaveCheckpointState(param_1);
    }
    if (*(char *)(param_1 + 0x149) == '\0') goto LAB_8007e974;
  }
  if ((*(char *)(param_1 + 0x144) != '\0') && (*(char *)(param_1 + 0x145) == '\0')) {
    ClearEntitiesAndFadeToBlack(param_1);
  }
LAB_8007e9b4:
  if ((*(char *)(param_1 + 0x152) != '\0') && (*(char *)(*(int *)(param_1 + 0x140) + 5) == '\0')) {
    *(undefined1 *)(param_1 + 0x152) = 0;
    SeekToLevelInSequence(param_1 + 0x84,0,1,0);
    cVar2 = SetupAndStartLevel(param_1,99);
    if (cVar2 == '\0') {
      initPlayerState(g_pPlayerState);
    }
  }
  if ((*(char *)(param_1 + 0x150) == '\0') && (*(char *)(param_1 + 0x14a) == '\0')) {
    SpawnEntitiesAlternateSystem(param_1);
    SpawnOnScreenEntities(param_1);
  }
  if (*(char *)(param_1 + 400) == '\0') {
    EntityTickLoop(param_1);
  }
  if (((*(char *)(param_1 + 0x150) == '\0') && (*(char *)(param_1 + 0x144) != '\0')) &&
     (*(char *)(param_1 + 0x145) == '\0')) {
    ClearEntitiesAndFadeToBlack(param_1);
  }
  return;
}



// Saves current entity state for checkpoint system. Moves tick list from context+0x1c to
// context+0x134, saves score to 0x138, sets checkpoint flags at 0x14a and 0x63.

void SaveCheckpointState(int param_1)

{
  *(undefined4 *)(param_1 + 0x134) = *(undefined4 *)(param_1 + 0x1c);
  *(undefined1 *)(param_1 + 0x14a) = 1;
  *(undefined1 *)(param_1 + 99) = 1;
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined4 *)(param_1 + 0x138) = *(undefined4 *)(param_1 + 0x10c);
  AddToZOrderList(param_1,*(undefined4 *)(param_1 + 0x2c));
  return;
}



void RestoreCheckpointEntities(int param_1)

{
  undefined4 uVar1;
  int *piVar2;
  int iVar3;
  
  *(undefined1 *)(param_1 + 0x14a) = 0;
  *(undefined1 *)(param_1 + 99) = 0;
  *(undefined4 *)(param_1 + 0x10c) = *(undefined4 *)(param_1 + 0x138);
  RemoveFromTickList(param_1,*(undefined4 *)(param_1 + 0x2c));
  piVar2 = *(int **)(param_1 + 0x1c);
  uVar1 = *(undefined4 *)(param_1 + 0x134);
  *(undefined4 *)(param_1 + 0x134) = 0;
  *(undefined4 *)(param_1 + 0x1c) = uVar1;
  while (piVar2 != (int *)0x0) {
    AddToZOrderList(param_1,piVar2[1]);
    iVar3 = *piVar2;
    FreeFromHeap(blbHeaderBufferBase,piVar2,8,0);
    piVar2 = (int *)iVar3;
  }
  return;
}



undefined4 FUN_8007eb78(int param_1,int param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  piVar3 = (int *)*(int *)(param_1 + 0x134);
  piVar2 = (undefined4 *)0x0;
  while( true ) {
    piVar1 = piVar3;
    if (piVar1 == (int *)0x0) {
      return 0;
    }
    if (piVar1[1] == param_2) break;
    piVar3 = (int *)*piVar1;
    piVar2 = piVar1;
  }
  if (piVar2 == (undefined4 *)0x0) {
    *(int *)(param_1 + 0x134) = *piVar1;
  }
  else {
    *piVar2 = *piVar1;
  }
  FreeFromHeap(blbHeaderBufferBase,piVar1,8,0);
  return 1;
}



// Pause Game and Show Menu Entity
// 
// Pauses gameplay, plays menu sound, and displays pause menu overlay.
// 
// STATE TRANSITIONS:
// 1. Calls audio fade function @ 0x8007CB44
// 2. Plays menu open sound (ID 0x65281E40, volume 0xA0)
// 3. Sets pause countdown to 22 frames (state+0x160 = 0x16)
// 4. Sets pause menu flags (state+0x151 = 0, state+0x150 = 1)
// 5. Freezes game logic (state+0x63 = 1, halts entity spawning)
// 
// ENTITY BACKUP:
// - Saves tick list pointer from state+0x1C to state+0x15C
// - Clears active tick list (state+0x1C = 0)
// - Stores frame counter (state+0x10C  state+0x154)
// - Stores pause state byte (state+0x63  state+0x158)
// 
// MENU DISPLAY:
// - Adds pause menu entity (state+0x14C) to z-order render list
// - Calls menu entity setup @ 0x8002B22C
// - Filters entities with type 0x10, removes from saved tick list
//   (entity type 0x10 = HUD elements that shouldn't appear during pause)
// - Frees removed entity nodes from heap
// 
// Called when START button pressed during gameplay via GameModeCallback.

void PauseGameAndShowMenu(int param_1)

{
  undefined1 uVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  
  SaveAndMuteAllVoicePitches();
  PlaySoundEffect(0x65281e40,0xa0,1);
  uVar1 = *(undefined1 *)(param_1 + 99);
  uVar3 = *(undefined4 *)(param_1 + 0x1c);
  *(undefined1 *)(param_1 + 0x160) = 0x16;
  *(undefined1 *)(param_1 + 0x151) = 0;
  *(undefined1 *)(param_1 + 0x150) = 1;
  *(undefined1 *)(param_1 + 99) = 1;
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined4 *)(param_1 + 0x154) = *(undefined4 *)(param_1 + 0x10c);
  *(undefined1 *)(param_1 + 0x158) = uVar1;
  *(undefined4 *)(param_1 + 0x15c) = uVar3;
  AddToZOrderList(param_1,*(undefined4 *)(param_1 + 0x14c));
  ShowPauseMenuHUD(*(undefined4 *)(param_1 + 0x14c));
  puVar2 = (undefined4 *)0x0;
  puVar4 = *(undefined4 **)(param_1 + 0x15c);
  puVar5 = (undefined4 *)0x0;
  while (puVar4 != (undefined4 *)0x0) {
    puVar6 = puVar4;
    if (*(short *)(puVar4[1] + 0x12) == 0x10) {
      AddToZOrderList(param_1);
      puVar2 = puVar4;
      puVar6 = puVar5;
      if (puVar5 == (undefined4 *)0x0) {
        *(undefined4 *)(param_1 + 0x15c) = *puVar4;
      }
      else {
        *puVar5 = *puVar4;
      }
    }
    puVar4 = (undefined4 *)*puVar4;
    puVar5 = puVar6;
    if (puVar2 != (undefined4 *)0x0) {
      FreeFromHeap(blbHeaderBufferBase,puVar2,8,0);
      puVar2 = (undefined4 *)0x0;
    }
  }
  return;
}



// Pause Game with Fade-Out Effect
// 
// Initiates pause with audio fade and screen fade-out.
// 
// SEQUENCE:
// 1. Plays pause sound effect (ID 0x4C60F249, volume 0xA0, priority 1)
// 2. Sets fade-out flag (state+0x151 = 1)
// 3. Calls fade effect @ 0x8002BB94 with state+0x14C parameter
// 4. Sets pause countdown to 22 frames (state+0x160 = 0x16)
// 
// FADE COUNTDOWN:
// - GameModeCallback decrements state+0x160 each frame
// - When countdown hits 1 and state+0x151 is set:
//   * Calls UnpauseGameAndRestoreEntities @ 0x8007ED9C
// - Countdown blocks all game logic until it reaches 0
// 
// Called from GameModeCallback when:
// - Menu selection confirmed (button checks in pause menu)
// - Cheat code returns value 1
// - START button handling paths

void PauseGameWithFadeOut(int param_1)

{
  PlaySoundEffect(0x4c60f249,0xa0,1);
  *(undefined1 *)(param_1 + 0x151) = 1;
  HidePauseMenuHUD(*(undefined4 *)(param_1 + 0x14c));
  *(undefined1 *)(param_1 + 0x160) = 0x16;
  return;
}



// Set Next Level Flag with Fade
// 
// Triggers level advancement with fade-out effect.
// 
// FLAGS SET:
// - state+0x151 = 1 (fade-out active flag)
// - state+0x160 = 0x16 (22 frame fade countdown)
// - state+0x147 = 1 (next level flag - triggers SeekToLevelInSequence)
// 
// EXECUTION FLOW:
// - GameModeCallback checks state+0x147 each frame
// - When set, calls:
//   1. SeekToLevelInSequence(context+0x84, 0, 1, 0)
//   2. SetupAndStartLevel(state, 99)
//   3. initPlayerState(g_pPlayerState) if setup returns 0
// 
// Called from GameModeCallback during menu selection processing
// when user chooses to exit pause menu and continue to next level.

void SetNextLevelFlagWithFade(int param_1)

{
  *(undefined1 *)(param_1 + 0x151) = 1;
  *(undefined1 *)(param_1 + 0x160) = 0x16;
  *(undefined1 *)(param_1 + 0x147) = 1;
  return;
}



// Unpause Game and Restore Entities
// 
// Resumes gameplay after pause menu, restoring entity state.
// 
// STATE RESTORATION:
// 1. Calls audio resume function @ 0x8007CBC0
// 2. Clears pause flags (state+0x151 = 0, state+0x150 = 0)
// 3. Restores frame counter (state+0x154  state+0x10C)
// 4. Restores pause state byte (state+0x158  state+0x63)
// 
// ENTITY LIST RESTORATION:
// - Clears current tick list (calls ClearTickList)
// - Restores saved tick list pointer (state+0x15C  state+0x1C)
// - Clears backup pointer (state+0x15C = 0)
// 
// PLAYER RE-ADD:
// - If flag state+0x18D is set:
//   * Re-adds player entity (state+0x2C) to z-order render list
//   * Clears re-add flag (state+0x18D = 0)
// 
// Called from PauseGameWithFadeOut when fade-out countdown reaches 1.

void UnpauseGameAndRestoreEntities(int param_1)

{
  undefined4 uVar1;
  
  ResumeAllVoicePitches();
  *(undefined1 *)(param_1 + 0x151) = 0;
  *(undefined1 *)(param_1 + 0x150) = 0;
  *(undefined4 *)(param_1 + 0x10c) = *(undefined4 *)(param_1 + 0x154);
  *(undefined1 *)(param_1 + 99) = *(undefined1 *)(param_1 + 0x158);
  ClearTickList(param_1);
  uVar1 = *(undefined4 *)(param_1 + 0x15c);
  *(undefined4 *)(param_1 + 0x15c) = 0;
  *(undefined4 *)(param_1 + 0x1c) = uVar1;
  if (*(char *)(param_1 + 0x18d) != '\0') {
    AddToZOrderList(param_1,*(undefined4 *)(param_1 + 0x2c));
    *(undefined1 *)(param_1 + 0x18d) = 0;
  }
  return;
}



// Clear Entities and Fade to Black
// 
// Removes all entities and fades screen to black, preparing for level transition.
// 
// SCREEN FADE:
// - Sets background fade request flag (state+0x130 = 1)
// - Sets RGB to black (state+0x131/132/133 = 0, 0, 0)
// - RenderEntities @ 0x80020E80 applies to double-buffered framebuffer
// 
// ENTITY CLEANUP:
// - Removes player entity (state+0x2C) from tick list
// - Calls FreeEntityLists to deallocate all entity memory
// - Re-adds player to render list only (no tick processing)
// 
// ENTITY BACKUP:
// - Moves Asset 501 entity data pointer from state+0x28 to state+0x13C
// - Clears active pointer (state+0x28 = 0)
// - Preserves entity definitions for potential respawn
// 
// FLAGS SET:
// - state+0x145 = 1 (level transition complete flag)
// 
// Called from GameModeCallback when:
// - Level transition conditions met (state+0x144 set && state+0x145 clear)
// - Prepares for loading new level or respawn

void ClearEntitiesAndFadeToBlack(int param_1)

{
  undefined4 uVar1;
  
  *(undefined1 *)(param_1 + 0x145) = 1;
  *(undefined1 *)(param_1 + 0x130) = 1;
  *(undefined1 *)(param_1 + 0x131) = 0;
  *(undefined1 *)(param_1 + 0x132) = 0;
  *(undefined1 *)(param_1 + 0x133) = 0;
  RemoveFromTickList(param_1,*(undefined4 *)(param_1 + 0x2c));
  FreeEntityLists(param_1);
  AddEntityToSortedRenderList(param_1,*(undefined4 *)(param_1 + 0x2c));
  uVar1 = *(undefined4 *)(param_1 + 0x28);
  *(undefined4 *)(param_1 + 0x28) = 0;
  *(undefined4 *)(param_1 + 0x13c) = uVar1;
  return;
}



bool FUN_8007ee6c(undefined4 param_1,char param_2,undefined1 *param_3,undefined1 *param_4,
                 undefined1 *param_5)

{
  int iVar1;
  byte bVar2;
  
  bVar2 = param_2 - 0x15;
  if (bVar2 < 0x14) {
    iVar1 = (uint)bVar2 * 3;
    *param_3 = (&DAT_8009d9c0)[iVar1];
    *param_4 = (&DAT_8009d9c1)[iVar1];
    *param_5 = (&DAT_8009d9c2)[iVar1];
  }
  return bVar2 < 0x14;
}



void FUN_8007eed8(int param_1)

{
  uint uVar1;
  uint uVar2;
  int *piVar3;
  
  piVar3 = *(int **)(param_1 + 0x1c);
  while (piVar3 != (int *)0x0) {
    uVar1 = piVar3[1];
    uVar2 = 0;
    if (*(short *)(uVar1 + 0x12) == 8) {
      uVar2 = uVar1 & -(uint)(*(short *)(uVar1 + 0x70) == 1);
    }
    if ((*(short *)(uVar1 + 0x12) == 0x20) && (*(short *)(uVar1 + 0x70) == 1)) {
      uVar2 = uVar1;
    }
    piVar3 = (int *)*piVar3;
    RemoveEntityFromAllLists(param_1,uVar2);
  }
  for (piVar3 = *(int **)(param_1 + 0x28); piVar3 != (int *)0x0; piVar3 = (int *)*piVar3) {
    uVar2 = (uint)*(ushort *)(piVar3[1] + 0x12);
    if (((uVar2 - 0x39 < 2) || (uVar2 == 0x3b)) || (uVar2 - 0x1c < 2)) {
      *(undefined1 *)(piVar3[1] + 0x16) = 0;
    }
  }
  return;
}



void EntityType001_InitCallback(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x124,1,0);
  uVar1 = FUN_800560a8(uVar1,param_2,0x98f8221e,0,0);
  AddEntityToSortedRenderList(param_1,uVar1);
  AddToUpdateQueue(param_1,uVar1);
  return;
}



void EntityType005_InitCallback(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  uVar1 = AllocateFromHeap(blbHeaderBufferBase,0x124,1,0);
  uVar1 = FUN_800560a8(uVar1,param_2,0x88783718,0,0);
  AddEntityToSortedRenderList(param_1,uVar1);
  AddToUpdateQueue(param_1,uVar1);
  return;
}



// Remaps entity types based on level type (layer). Iterates entity list at param_1+0x28, reads
// entity layer byte at +0x14 and type u16 at +0x12, then translates to internal sprite IDs via
// large switch tables. Layer 1=foreground, 2=background, 3=special.

void RemapEntityTypesForLevel(int param_1)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  
  piVar4 = *(int **)(param_1 + 0x28);
  *(undefined1 *)(param_1 + 0x18e) = 0;
  do {
    if (piVar4 == (int *)0x0) {
      return;
    }
    iVar2 = piVar4[1];
    bVar1 = *(byte *)(iVar2 + 0x14);
    if (bVar1 == 2) {
      uVar3 = (uint)*(ushort *)(iVar2 + 0x12);
      if (uVar3 - 0xc9 < 0x1c) {
        *(uint *)(iVar2 + 0xc) = uVar3;
        *(undefined2 *)(iVar2 + 0x12) = 0x5f;
      }
      else {
        switch(uVar3) {
        case 2:
          *(undefined2 *)(iVar2 + 0x12) = 7;
          break;
        case 3:
          *(undefined2 *)(iVar2 + 0x12) = 2;
          break;
        default:
          goto switchD_800815a4_caseD_b;
        case 8:
          *(undefined2 *)(iVar2 + 0x12) = 0x16;
          break;
        case 9:
          *(undefined2 *)(iVar2 + 0x12) = 0xb;
          break;
        case 10:
          *(undefined2 *)(iVar2 + 0x12) = 9;
          break;
        case 0xb:
          *(undefined2 *)(iVar2 + 0x12) = 0x4b;
          break;
        case 0xc:
          *(undefined2 *)(iVar2 + 0x12) = 0x3d;
          break;
        case 0xd:
          *(undefined2 *)(iVar2 + 0x12) = 0x19;
          break;
        case 0xe:
          *(undefined2 *)(iVar2 + 0x12) = 0x48;
          break;
        case 0x10:
          *(undefined2 *)(iVar2 + 0x12) = 0x17;
          break;
        case 0x15:
          *(undefined2 *)(iVar2 + 0x12) = 0x1c;
          break;
        case 0x16:
          *(undefined2 *)(iVar2 + 0x12) = 0x1d;
          break;
        case 0x17:
          *(undefined2 *)(iVar2 + 0x12) = 0x45;
          break;
        case 0x18:
          *(undefined2 *)(iVar2 + 0x12) = 0x46;
          break;
        case 0x19:
          *(undefined2 *)(iVar2 + 0x12) = 0x4f;
          break;
        case 0x1a:
          *(undefined2 *)(iVar2 + 0x12) = 0x51;
          break;
        case 0x1b:
          *(undefined2 *)(iVar2 + 0x12) = 0x61;
          break;
        case 0x1c:
          *(undefined2 *)(iVar2 + 0x12) = 0x59;
          break;
        case 0x1d:
          *(undefined2 *)(iVar2 + 0x12) = 0x62;
          break;
        case 0x1e:
          *(undefined2 *)(iVar2 + 0x12) = 0x6e;
          break;
        case 0x1f:
          *(undefined2 *)(iVar2 + 0x12) = 0x6f;
          break;
        case 0x29:
          *(undefined2 *)(iVar2 + 0x12) = 0x53;
          break;
        case 0x2a:
          *(undefined2 *)(iVar2 + 0x12) = 0x55;
          break;
        case 0x2b:
          *(undefined2 *)(iVar2 + 0x12) = 0x68;
          break;
        case 0x2c:
          *(undefined2 *)(iVar2 + 0x12) = 0x69;
          break;
        case 0x2d:
          *(undefined2 *)(iVar2 + 0x12) = 0x77;
          break;
        case 0x3d:
          *(undefined2 *)(iVar2 + 0x12) = 0x5e;
          break;
        case 0x3e:
          *(undefined4 *)(iVar2 + 0xc) = 0xc9;
          *(undefined2 *)(iVar2 + 0x12) = 0x5f;
          break;
        case 0x51:
          *(undefined2 *)(iVar2 + 0x12) = 0x41;
          break;
        case 0xa7:
          uVar3 = GetLevelFlags(param_1 + 0x84);
          if ((uVar3 & 0x2000) != 0) {
            *(undefined1 *)(param_1 + 0x18e) = 1;
          }
        }
      }
    }
    else if (bVar1 < 3) {
      if (bVar1 == 1) {
        switch(*(undefined2 *)(iVar2 + 0x12)) {
        case 5:
          *(undefined2 *)(iVar2 + 0x12) = 0x70;
          break;
        case 6:
          *(undefined2 *)(iVar2 + 0x12) = 0x71;
          break;
        case 7:
          *(undefined2 *)(iVar2 + 0x12) = 0x72;
          break;
        case 8:
          *(undefined2 *)(iVar2 + 0x12) = 0x73;
          break;
        case 9:
          *(undefined2 *)(iVar2 + 0x12) = 0x74;
          break;
        case 10:
          *(undefined2 *)(iVar2 + 0x12) = 0x75;
          break;
        default:
switchD_800815a4_caseD_b:
          *(undefined2 *)(iVar2 + 0x12) = 8;
          break;
        case 0x15:
          *(undefined2 *)(iVar2 + 0x12) = 0x76;
          break;
        case 0x16:
          *(undefined2 *)(iVar2 + 0x12) = 0x1b;
          break;
        case 0x17:
          *(undefined2 *)(iVar2 + 0x12) = 10;
          break;
        case 0x18:
          *(undefined2 *)(iVar2 + 0x12) = 0x1a;
          break;
        case 0x19:
          *(undefined2 *)(iVar2 + 0x12) = 0;
          break;
        case 0x1a:
          *(undefined2 *)(iVar2 + 0x12) = 3;
          break;
        case 0x1b:
          *(undefined2 *)(iVar2 + 0x12) = 4;
          break;
        case 0x1c:
          *(undefined2 *)(iVar2 + 0x12) = 0x29;
          break;
        case 0x1d:
          *(undefined2 *)(iVar2 + 0x12) = 99;
          break;
        case 0x1e:
          *(undefined2 *)(iVar2 + 0x12) = 0x6d;
          break;
        case 0x21:
          *(undefined2 *)(iVar2 + 0x12) = 0x54;
          break;
        case 0x22:
          *(undefined2 *)(iVar2 + 0x12) = 0x60;
          break;
        case 0x23:
          *(undefined2 *)(iVar2 + 0x12) = 0x56;
          break;
        case 0x24:
          *(undefined2 *)(iVar2 + 0x12) = 0x57;
          break;
        case 0x25:
          *(undefined2 *)(iVar2 + 0x12) = 0x58;
          break;
        case 0x2d:
          *(undefined2 *)(iVar2 + 0x12) = 0x18;
          break;
        case 0x30:
          *(undefined2 *)(iVar2 + 0x12) = 0x6a;
          break;
        case 0x31:
          *(undefined2 *)(iVar2 + 0x12) = 0x6b;
          break;
        case 0x32:
          *(undefined2 *)(iVar2 + 0x12) = 0x6c;
          break;
        case 0x40:
          *(undefined2 *)(iVar2 + 0x12) = 0x2d;
          break;
        case 0x41:
          *(undefined2 *)(iVar2 + 0x12) = 0x2a;
          break;
        case 0x42:
          *(undefined2 *)(iVar2 + 0x12) = 0x2b;
          break;
        case 0x43:
          *(undefined2 *)(iVar2 + 0x12) = 0x2c;
          break;
        case 0x44:
          *(undefined2 *)(iVar2 + 0x12) = 0x2f;
          break;
        case 0x45:
          *(undefined2 *)(iVar2 + 0x12) = 0x30;
          break;
        case 0x46:
          *(undefined2 *)(iVar2 + 0x12) = 0x50;
          break;
        case 0x51:
          *(undefined2 *)(iVar2 + 0x12) = 0x1e;
          break;
        case 0x52:
          *(undefined2 *)(iVar2 + 0x12) = 0x1f;
          break;
        case 0x53:
          *(undefined2 *)(iVar2 + 0x12) = 0x20;
          break;
        case 0x54:
          *(undefined2 *)(iVar2 + 0x12) = 0x21;
          break;
        case 0x55:
          *(undefined2 *)(iVar2 + 0x12) = 0x22;
          break;
        case 0x56:
          *(undefined2 *)(iVar2 + 0x12) = 0x23;
          break;
        case 0x57:
          *(undefined2 *)(iVar2 + 0x12) = 0x24;
          break;
        case 0x58:
          *(undefined2 *)(iVar2 + 0x12) = 0x25;
          break;
        case 0x59:
          *(undefined2 *)(iVar2 + 0x12) = 0x26;
          break;
        case 0x5a:
          *(undefined2 *)(iVar2 + 0x12) = 0x2e;
          break;
        case 0x65:
          *(undefined2 *)(iVar2 + 0x12) = 0x27;
          break;
        case 0x66:
          *(undefined2 *)(iVar2 + 0x12) = 0x28;
          break;
        case 0x67:
          *(undefined2 *)(iVar2 + 0x12) = 0x34;
          break;
        case 0x69:
          *(undefined2 *)(iVar2 + 0x12) = 0x35;
          break;
        case 0x6a:
          *(undefined2 *)(iVar2 + 0x12) = 0x36;
          break;
        case 0x6b:
          *(undefined2 *)(iVar2 + 0x12) = 0x37;
          break;
        case 0x6d:
          *(undefined2 *)(iVar2 + 0x12) = 0x78;
          break;
        case 0x7f:
          *(undefined2 *)(iVar2 + 0x12) = 0x3c;
          break;
        case 0x8d:
          *(undefined2 *)(iVar2 + 0x12) = 0x47;
          break;
        case 0x8e:
          *(undefined2 *)(iVar2 + 0x12) = 0x65;
          break;
        case 0x8f:
          *(undefined2 *)(iVar2 + 0x12) = 100;
          break;
        case 0x90:
          *(undefined2 *)(iVar2 + 0x12) = 0x66;
          break;
        case 0x91:
          *(undefined2 *)(iVar2 + 0x12) = 0x67;
        }
      }
      else {
        *(undefined2 *)(iVar2 + 0x12) = 8;
      }
    }
    else if (bVar1 == 3) {
      switch(*(undefined2 *)(iVar2 + 0x12)) {
      case 4:
        *(undefined2 *)(iVar2 + 0x12) = 0x5c;
        break;
      case 5:
        *(undefined2 *)(iVar2 + 0x12) = 0x5d;
        break;
      case 6:
        *(undefined2 *)(iVar2 + 0x12) = 0x44;
        break;
      case 7:
        *(undefined2 *)(iVar2 + 0x12) = 0x33;
        break;
      case 8:
        *(undefined2 *)(iVar2 + 0x12) = 6;
        break;
      default:
        goto switchD_800815a4_caseD_b;
      case 0xb:
        *(undefined2 *)(iVar2 + 0x12) = 0x15;
        break;
      case 0xe:
        *(undefined2 *)(iVar2 + 0x12) = 0x12;
        break;
      case 0xf:
        *(undefined2 *)(iVar2 + 0x12) = 0x3b;
        break;
      case 0x10:
        *(undefined2 *)(iVar2 + 0x12) = 0x40;
        break;
      case 0x18:
        *(undefined2 *)(iVar2 + 0x12) = 0x5b;
        break;
      case 0x19:
        *(undefined2 *)(iVar2 + 0x12) = 0x4c;
        break;
      case 0x1a:
        *(undefined2 *)(iVar2 + 0x12) = 0x43;
        break;
      case 0x1b:
        *(undefined2 *)(iVar2 + 0x12) = 0x32;
        break;
      case 0x1c:
        *(undefined2 *)(iVar2 + 0x12) = 5;
        break;
      case 0x1f:
        *(undefined2 *)(iVar2 + 0x12) = 0x14;
        break;
      case 0x22:
        *(undefined2 *)(iVar2 + 0x12) = 0x11;
        break;
      case 0x23:
        *(undefined2 *)(iVar2 + 0x12) = 0x3a;
        break;
      case 0x24:
        *(undefined2 *)(iVar2 + 0x12) = 0x3f;
        break;
      case 0x2b:
        *(undefined2 *)(iVar2 + 0x12) = 0x52;
        break;
      case 0x2c:
        *(undefined2 *)(iVar2 + 0x12) = 0x5a;
        break;
      case 0x2e:
        *(undefined2 *)(iVar2 + 0x12) = 0x42;
        break;
      case 0x2f:
        *(undefined2 *)(iVar2 + 0x12) = 0x31;
        break;
      case 0x30:
        *(undefined2 *)(iVar2 + 0x12) = 1;
        break;
      case 0x33:
        *(undefined2 *)(iVar2 + 0x12) = 0x13;
        break;
      case 0x36:
        *(undefined2 *)(iVar2 + 0x12) = 0xc;
        break;
      case 0x37:
        *(undefined2 *)(iVar2 + 0x12) = 0x39;
        break;
      case 0x38:
        *(undefined2 *)(iVar2 + 0x12) = 0x3e;
      }
    }
    else {
      *(undefined2 *)(iVar2 + 0x12) = 8;
    }
    piVar4 = (int *)*piVar4;
  } while( true );
}



// Loads level sprite assets to VRAM. Calls LoadSpriteHashArrayToVRAM with sprite hash table at
// DAT_8009dab4, then optionally loads additional sprite 0x168254b5.

void LoadLevelSpriteAssets(int param_1)

{
  uint uVar1;
  
  LoadSpriteHashArrayToVRAM(g_pOrderingTableBase,&DAT_8009dab4);
  uVar1 = GetLevelFlags(param_1 + 0x84);
  if ((uVar1 & 4) != 0) {
    LoadSpriteFramesToVRAM(g_pOrderingTableBase,0x168254b5);
  }
  return;
}



undefined1 FUN_80081c0c(undefined4 param_1,uint param_2,uint param_3)

{
  return *(undefined1 *)((int)&null_0000h_8009d228 + (param_3 & 0xf) + (param_2 & 0xff) * 0x10);
}



// Spawn Entities Alternate System - Parallel Entity Spawner
// 
// Spawns entities from a different data structure than Asset 501. Uses 128-byte (0x80)
// stride array stored at GameState+0x164 with count at GameState+0x168.
// 
// ALGORITHM:
// 1. Get entity array from GameState+0x164
// 2. Get count from GameState+0x168
// 3. For i = 0; i < count; i += 2:
//    a. Calculate data pointer: array + (i * 0x80)
//    b. Check if entity is on screen (camera visibility test)
//    c. Check spawn flag (*(data + offset) == 0)
//    d. If visible and not spawned:
//       - Allocate 0x10C bytes from heap
//       - Call FUN_80033d3c(buffer, data) to initialize
//       - AddEntityToSortedRenderList(state, entity)
//       - Set spawn flag: *(data + spawn_flag_offset) = 1
// 4. Continue to next entity (stride = 0x80 bytes)
// 
// PARAMETERS:
//   param_1 (GameState*) - Base game state structure
// 
// DATA SOURCE:
//   GameState+0x164: Pointer to entity array (128-byte stride)
//   GameState+0x168: Entity count (processed in pairs, i += 2)
// 
// COMPARISON TO Asset 501 SPAWNING:
//   - Asset 501 (SpawnOnScreenEntities): 24-byte EntityDef structs, 121 entity types
//   - This system: 128-byte structs, different entity types (possibly animated tiles/effects)
//   - Both use screen visibility checks and spawn flags
//   - Both called from GameModeCallback @ 0x8007e654
// 
// ENTITY CREATION:
//   - Allocates 0x10C (268) bytes per entity
//   - Calls FUN_80033d3c as entity initializer
//   - Adds to render list (not tick list?)
// 
// PURPOSE: Likely handles special entity types like animated background tiles,
// particle effects, or level-specific decorative elements that aren't in Asset 501.

void SpawnEntitiesAlternateSystem(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  
  uVar1 = *(uint *)(param_1 + 0x10c) & 1;
  iVar7 = *(int *)(param_1 + 0x164) + uVar1 * 0x40;
  piVar6 = (int *)(iVar7 + 0x3c);
  for (; (uVar1 & 0xffff) < (uint)*(ushort *)(param_1 + 0x168); uVar1 = uVar1 + 2) {
    uVar4 = (uint)((int)*(short *)(param_1 + 0x44) * piVar6[-10]) >> 0x10;
    iVar5 = uVar4 - 0x10;
    iVar3 = *(ushort *)blbHeaderBufferBase + uVar4 + 0x10;
    uVar4 = (uint)((int)*(short *)(param_1 + 0x46) * piVar6[-9]) >> 0x10;
    if (((((int)(short)piVar6[-0xd] < iVar3 * 0x10000 >> 0x10) &&
         (iVar5 * 0x10000 >> 0x10 < (int)(short)piVar6[-0xc])) && (*piVar6 == 0)) &&
       (((int)*(short *)((int)piVar6 + -0x32) <
         (int)((*(ushort *)(blbHeaderBufferBase + 2) + uVar4 + 0x10) * 0x10000) >> 0x10 &&
        ((int)((uVar4 - 0x10) * 0x10000) >> 0x10 < (int)*(short *)((int)piVar6 + -0x2e))))) {
      uVar2 = AllocateFromHeap(blbHeaderBufferBase,0x10c,1,0,(short)iVar5,(short)iVar3);
      uVar2 = InitAlternateEntity(uVar2,iVar7);
      AddEntityToSortedRenderList(param_1,uVar2);
      *piVar6 = 1;
    }
    piVar6 = piVar6 + 0x20;
    iVar7 = iVar7 + 0x80;
  }
  return;
}



void ClearSaveSlotFlags(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = *(int *)(param_1 + 0x164);
  iVar2 = 0;
  if (*(short *)(param_1 + 0x168) != 0) {
    do {
      *(undefined4 *)(iVar1 + 0x3c) = 0;
      iVar2 = iVar2 + 1;
      iVar1 = iVar1 + 0x40;
    } while (iVar2 * 0x10000 >> 0x10 < (int)(uint)*(ushort *)(param_1 + 0x168));
  }
  return;
}



void FUN_80081fd0(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  do {
    iVar1 = iVar2 << 0x10;
    iVar2 = iVar2 + 1;
    *(undefined4 *)((iVar1 >> 0xe) + *(int *)(param_1 + 0x16c)) = 0;
  } while (iVar2 * 0x10000 >> 0x10 < 0x100);
  return;
}



// WARNING: Type propagation algorithm not settling
// Check Cheat Code Input - 22 Cheat Handlers
// 
// Processes 8-button cheat code sequences during pause menu.
// Contains inline switch with 22 cheat handlers.
// 
// KEY ITEM-RELATED CHEATS:
// 0x02 @ 0x80082230: Max Items - Sets multiple powerups + lives + orbs
// 0x03 @ 0x80082278: Max Swirly Q's - g_pPlayerState[0x13] = 20
// 0x05 @ 0x800822A8: Max Lives - g_pPlayerState[0x11] = 99
// 0x06 @ 0x800822D0: Max Universe Enemas - g_pPlayerState[0x16] = 7
// 0x07 @ 0x800822F8: Max Phoenix Hands - g_pPlayerState[0x14] = 7
// 0x08 @ 0x80082320: Max Super Willies - g_pPlayerState[0x1C] = 7
// 0x09 @ 0x80082348: Max Phart Heads - g_pPlayerState[0x15] = 7
// 0x0A @ 0x80082380: Max Green Bullets - g_pPlayerState[0x1A] = 3
// 0x0B @ 0x800823B0: Max 1970s Items - g_pPlayerState[0x19] = 3
// 
// SWITCH TABLE: @ 0x80012700 (22 entries  4 bytes)
// 
// All cheat sequences documented in: docs/systems/game-loop.md
// Item storage locations documented in: docs/reference/items.md

undefined4 CheckCheatCodeInput(int param_1)

{
  bool bVar1;
  byte bVar2;
  undefined1 uVar3;
  char cVar4;
  uint uVar5;
  uint uVar6;
  short sVar7;
  int iVar8;
  byte bVar9;
  
  sVar7 = *(short *)(*(int *)(param_1 + 0x140) + 2);
  if (sVar7 == 0) {
    return 0;
  }
  *(short *)((uint)*(byte *)(param_1 + 0x18c) * 2 + param_1 + 0x17c) = sVar7;
  bVar2 = *(char *)(param_1 + 0x18c) + 1;
  *(byte *)(param_1 + 0x18c) = bVar2;
  bVar9 = 0;
  if (7 < bVar2) {
    *(undefined1 *)(param_1 + 0x18c) = 0;
  }
LAB_80082124:
  iVar8 = 0;
  if (0x15 < bVar9) {
    return 0;
  }
  uVar5 = (uint)*(byte *)(param_1 + 0x18c);
  uVar6 = uVar5;
  do {
    sVar7 = (short)iVar8;
    if (*(short *)(uVar5 * 2 + param_1 + 0x17c) !=
        *(short *)((int)&null_4000h_8009dae0 + ((iVar8 << 0x10) >> 0xf) + (uint)bVar9 * 0x10))
    break;
    uVar6 = uVar6 + 1;
    iVar8 = iVar8 + 1;
    sVar7 = (short)iVar8;
    if (7 < (uVar6 & 0xff)) {
      uVar6 = 0;
    }
    uVar5 = uVar6 & 0xff;
  } while (iVar8 * 0x10000 >> 0x10 < 8);
  if (sVar7 < 8) goto code_r0x800821b0;
  if (0x15 < bVar9) {
    return 0;
  }
  PlaySoundEffect(0x90810000,0xa0,1);
  switch(bVar9) {
  case 0:
    g_GameFlags = g_GameFlags ^ 0x80;
    if ((g_GameFlags & 0x80) != 0) {
      g_GameFlags = g_GameFlags & 0xffbf;
      return 1;
    }
    break;
  default:
    g_pPlayerState[0x11] = 99;
    g_pPlayerState[0x13] = 0x14;
    g_pPlayerState[0x17] = g_pPlayerState[0x17] | 1;
    g_pPlayerState[0x14] = 7;
    g_pPlayerState[0x15] = 7;
    g_pPlayerState[0x16] = 7;
    g_pPlayerState[0x1c] = 7;
    if (bVar9 == 2) {
      g_pPlayerState[0x19] = 3;
      g_pPlayerState[0x1a] = 3;
      g_pPlayerState[0x1b] = 0x30;
    }
    goto LAB_80082374;
  case 3:
    g_pPlayerState[0x13] = 0x14;
    return 0;
  case 4:
    g_pPlayerState[0x17] = g_pPlayerState[0x17] | 1;
    return 0;
  case 5:
    g_pPlayerState[0x11] = 99;
    return 0;
  case 6:
    g_pPlayerState[0x16] = 7;
    goto LAB_80082374;
  case 7:
    g_pPlayerState[0x14] = 7;
    goto LAB_80082374;
  case 8:
    g_pPlayerState[0x1c] = 7;
    goto LAB_80082374;
  case 9:
    g_pPlayerState[0x15] = 7;
LAB_80082374:
    uVar3 = GetCurrentLevelAssetIndex(g_GameStatePtr + 0x84);
    ResetPlayerUnlocksByLevel(g_pPlayerState,uVar3);
    return 0;
  case 10:
    g_pPlayerState[0x1a] = 3;
    return 0;
  case 0xb:
    g_pPlayerState[0x19] = 3;
    return 0;
  case 0xc:
    cVar4 = GetCurrentStageIndex(param_1 + 0x84);
    cVar4 = cVar4 + '\x01';
    goto LAB_800823d8;
  case 0xd:
    cVar4 = 'c';
LAB_800823d8:
    *(char *)(param_1 + 0x148) = cVar4;
    break;
  case 0xe:
    g_GameFlags = g_GameFlags ^ 1;
    return 1;
  case 0xf:
    *(bool *)(param_1 + 399) = *(char *)(param_1 + 399) == '\0';
    return 1;
  case 0x10:
    iVar8 = param_1 + 0x84;
    uVar6 = GetLevelFlags(iVar8);
    bVar1 = false;
    if ((uVar6 & 0x400) == 0) {
      uVar6 = GetLevelFlags(iVar8);
      bVar1 = false;
      if ((uVar6 & 0x200) == 0) {
        uVar6 = GetLevelFlags(iVar8);
        bVar1 = false;
        if ((uVar6 & 0x2000) == 0) {
          uVar6 = GetLevelFlags(iVar8);
          bVar1 = false;
          if ((uVar6 & 0x100) == 0) {
            uVar6 = GetLevelFlags(iVar8);
            bVar1 = false;
            if ((uVar6 & 0x10) == 0) {
              uVar6 = GetLevelFlags(iVar8);
              bVar1 = (uVar6 & 4) == 0;
            }
          }
        }
      }
    }
    if (!bVar1) {
      return 1;
    }
    ApplyRandomRGBEffect(*(undefined4 *)(param_1 + 0x2c));
    return 1;
  case 0x11:
    iVar8 = param_1 + 0x84;
    uVar6 = GetLevelFlags(iVar8);
    bVar1 = false;
    if ((uVar6 & 0x400) == 0) {
      uVar6 = GetLevelFlags(iVar8);
      bVar1 = false;
      if ((uVar6 & 0x200) == 0) {
        uVar6 = GetLevelFlags(iVar8);
        bVar1 = false;
        if ((uVar6 & 0x2000) == 0) {
          uVar6 = GetLevelFlags(iVar8);
          bVar1 = false;
          if ((uVar6 & 0x100) == 0) {
            uVar6 = GetLevelFlags(iVar8);
            bVar1 = false;
            if ((uVar6 & 0x10) == 0) {
              uVar6 = GetLevelFlags(iVar8);
              bVar1 = (uVar6 & 4) == 0;
            }
          }
        }
      }
    }
    if (bVar1) {
      *(undefined1 *)(*(int *)(param_1 + 0x2c) + 0x1af) = 1;
    }
    break;
  case 0x12:
    g_GameFlags = (g_GameFlags ^ 2) & 0xfffb;
    return 1;
  case 0x13:
    *(undefined1 *)(param_1 + 0x18d) = 1;
    break;
  case 0x14:
    iVar8 = param_1 + 0x84;
    uVar6 = GetLevelFlags(iVar8);
    bVar1 = false;
    if ((uVar6 & 0x400) == 0) {
      uVar6 = GetLevelFlags(iVar8);
      bVar1 = false;
      if ((uVar6 & 0x200) == 0) {
        uVar6 = GetLevelFlags(iVar8);
        bVar1 = false;
        if ((uVar6 & 0x2000) == 0) {
          uVar6 = GetLevelFlags(iVar8);
          bVar1 = false;
          if ((uVar6 & 0x100) == 0) {
            uVar6 = GetLevelFlags(iVar8);
            bVar1 = false;
            if ((uVar6 & 0x10) == 0) {
              uVar6 = GetLevelFlags(iVar8);
              bVar1 = (uVar6 & 4) == 0;
            }
          }
        }
      }
    }
    if (bVar1) {
      *(undefined1 *)(*(int *)(param_1 + 0x2c) + 0x1b0) = 1;
    }
    break;
  case 0x15:
    iVar8 = param_1 + 0x84;
    uVar6 = GetLevelFlags(iVar8);
    bVar1 = false;
    if ((uVar6 & 0x400) == 0) {
      uVar6 = GetLevelFlags(iVar8);
      bVar1 = false;
      if ((uVar6 & 0x200) == 0) {
        uVar6 = GetLevelFlags(iVar8);
        bVar1 = false;
        if ((uVar6 & 0x2000) == 0) {
          uVar6 = GetLevelFlags(iVar8);
          bVar1 = false;
          if ((uVar6 & 0x100) == 0) {
            uVar6 = GetLevelFlags(iVar8);
            bVar1 = false;
            if ((uVar6 & 0x10) == 0) {
              uVar6 = GetLevelFlags(iVar8);
              bVar1 = (uVar6 & 4) == 0;
            }
          }
        }
      }
    }
    if (bVar1) {
      *(undefined1 *)(*(int *)(param_1 + 0x2c) + 0x1b1) = 1;
    }
  }
  return 1;
code_r0x800821b0:
  bVar9 = bVar9 + 1;
  goto LAB_80082124;
}



// main() - Game Entry Point
// 
// INITIALIZATION PHASE:
// 1. __main() - C runtime init
// 2. SsUtReverbOn() - Enable audio reverb
// 3. ResetCallback() - PSX interrupt setup
// 4. LoadGameAssetLocations() - Find GAME.BLB on CD
// 5. InitGraphicsSystem() - Double-buffer GPU setup (320x256)
// 6. PadInit()/InitGeom() - Controller + GTE
// 7. FntLoad()/FntOpen() - Debug font at VRAM (0x3c0, 0x100)
// 8. InitPlayerControllerState() - Player 1 controller struct
// 9. InitGameState() - Load BLB header, level 99 (menu)
// 
// LEVEL NAME POPULATION:
// - Loops GetLevelCount() times populating level name table
// - Similarly populates movie names
// 
// GAME LOOP (infinite):
// 1. TickCDStreamBuffer() - Stream CD data every 4 frames
// 2. PadRead(1) - Read controller ports
// 3. UpdateInputState(P1, P2) - Process button presses/releases
// 4. [Mode Callback] - Execute current game mode handler
// 5. EntityTickLoop() - Update all active entities
// 6. WaitForVBlankIfNeeded() - Conditional VSync
// 7. RenderEntities() - Draw entity render pass
// 8. DrawSync(0) - Wait for GPU
// 9. [Layer Render Callback] - Render tile layers
// 10. DrawSync(0) - Wait again
// 11. VSync frame timing (wait 2 frames if flag set)
// 12. ProcessDebugMenuInput() - Handle debug level select
// 13. FlushDebugFontAndEndFrame() - Draw debug text

void main(void)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined *puVar5;
  u_long uVar6;
  int iVar7;
  byte bVar8;
  uint uVar9;
  short *psVar10;
  uint uVar11;
  undefined4 unaff_s4;
  code *pcVar12;
  
  __main();
  uVar11 = 0;
  SsUtReverbOn();
  ResetCallback();
  LoadGameAssetLocations();
  InitGraphicsSystem(blbHeaderBufferBase);
  g_GameStatePtr = &g_GameStateBase;
  PadInit(0);
  InitGeom();
  SetDispMask(1);
  FntLoad(0x3c0,0x100);
  iVar2 = FntOpen(0x10,0x20,0x120,200,0,0x200);
  SetDumpFnt(iVar2);
  initPlayerState(g_pPlayerState);
  InitGameState(&g_GameStateBase,g_pPlayer1Input);
  psVar10 = g_GameStatePtr + 0x42;
  while( true ) {
    uVar3 = GetLevelCount(psVar10);
    uVar9 = uVar11 & 0xff;
    if ((uVar3 & 0xff) <= uVar9) break;
    uVar4 = getLevelName(psVar10,uVar9);
    (&g_LevelNameTable)[uVar9] = uVar4;
    g_TotalMenuItems = g_TotalMenuItems + 1;
    g_LevelCount = g_LevelCount + 1;
    uVar11 = uVar11 + 1;
  }
  for (bVar8 = 0; bVar1 = GetAssetCount(psVar10), bVar8 < bVar1; bVar8 = bVar8 + 1) {
    puVar5 = (undefined *)GetMovieReservedByIndex(psVar10);
    uVar11 = (uint)g_TotalMenuItems;
    g_TotalMenuItems = g_TotalMenuItems + 1;
    g_MovieCount = g_MovieCount + 1;
    (&g_MenuItemNames)[uVar11] = puVar5;
  }
  g_DefaultBGColorR = 0x40;
  g_DefaultBGColorG = 0x20;
  g_DefaultBGColorB = 0x80;
  g_pCurrentInputState = g_pPlayer1Input;
  do {
    TickCDStreamBuffer();
    uVar6 = PadRead(1);
    UpdateInputState(g_pPlayer1Input,uVar6 & 0xffff);
    UpdateInputState(g_pPlayer2Input,uVar6 >> 0x10);
    iVar2 = (int)g_GameStatePtr[1];
    if (iVar2 != 0) {
      if (iVar2 < 1) {
        pcVar12 = *(code **)(g_GameStatePtr + 2);
      }
      else {
        iVar7 = iVar2 * 8 + *(int *)((int)g_GameStatePtr + (int)g_GameStatePtr[2]);
        unaff_s4 = *(undefined4 *)(iVar7 + -8);
        pcVar12 = *(code **)(iVar7 + -4);
      }
      iVar7 = (int)*g_GameStatePtr;
      if (0 < iVar2 << 0x10) {
        iVar7 = (short)unaff_s4 + iVar7;
      }
      (*pcVar12)((int)g_GameStatePtr + iVar7);
    }
    EntityTickLoop(g_GameStatePtr);
    WaitForVBlankIfNeeded(blbHeaderBufferBase);
    RenderEntities(g_GameStatePtr);
    DrawSync(0);
    (**(code **)(*(int *)(g_GameStatePtr + 0xc) + 0x1c))
              ((int)g_GameStatePtr + (int)*(short *)(*(int *)(g_GameStatePtr + 0xc) + 0x18));
    DrawSync(0);
    if ((g_GameFlags & 6) != 0) {
      iVar2 = VSync(-1);
      do {
        uVar11 = VSync(-1);
      } while (uVar11 < iVar2 + 2U);
    }
    ProcessDebugMenuInput();
    FlushDebugFontAndEndFrame(blbHeaderBufferBase);
  } while( true );
}



// Process Debug Menu Input - Developer Level Select
// 
// Handles the debug menu overlay (enabled via g_GameFlags & 0x80).
// Allows selecting and jumping to any level or movie during development.
// 
// MENU DISPLAY:
// - Shows 20 items at a time (scrollable)
// - Prints using FntPrint() for each visible item
// - Cursor position tracked by g_DebugMenuCursor
// - Scroll offset tracked by g_DebugMenuScrollTop
// 
// INPUT HANDLING (every 4 frames via frame counter check):
// - D-Pad Up (0x1000): Move cursor up, scroll if needed
// - D-Pad Down (0x4000): Move cursor down, scroll if needed
// - Cross (0x40): Select item and close menu
// 
// ITEM SELECTION:
// 1. Items 0-9: Direct level select (index+1)
// 2. Items 10 to (10+g_LevelCount): Levels from name table
//    - SetSequenceIndexByMode(ctx, 4, level_index)
// 3. Remaining items: Movies
//    - SetSequenceIndexByMode(ctx, 1, movie_index)
// 4. Special case: If item name == DAT_800a60a8, ignore (separator?)
// 
// After selection:
// - Clears debug menu flag (g_GameFlags &= 0xFF7F)
// - Sets GameState+0x148 to trigger level load in GameModeCallback
// 
// MENU ITEMS:
// - g_LevelNameTable: Level names (populated in main init)
// - g_MenuItemNames: All items including movies
// - g_TotalMenuItems: Total count
// - g_LevelCount: Number of levels
// - g_MovieCount: Number of movies
// 
// GLOBALS:
//   g_GameFlags: Bit 7 (0x80) enables debug menu
//   g_DebugMenuCursor: Current selection (0 to g_TotalMenuItems-1)
//   g_DebugMenuScrollTop: First visible item index
//   g_pCurrentInputState: Controller input state
//   g_GameStatePtr+0x10C: Frame counter (for input throttling)

void ProcessDebugMenuInput(void)

{
  int iVar1;
  uint uVar2;
  ushort uVar3;
  char cVar4;
  ushort uVar5;
  
  if ((g_GameFlags & 0x80) != 0) {
    uVar3 = g_DebugMenuScrollTop + 0x14;
    if ((ushort)g_TotalMenuItems < (ushort)(g_DebugMenuScrollTop + 0x14)) {
      uVar3 = (ushort)g_TotalMenuItems;
    }
    uVar5 = g_DebugMenuScrollTop;
    if (g_DebugMenuScrollTop < uVar3) {
      do {
        FntPrint();
        uVar5 = uVar5 + 1;
        FntPrint();
        FntPrint();
      } while (uVar5 < uVar3);
    }
    if ((*(uint *)(g_GameStatePtr + 0x10c) & 3) == 0) {
      if ((*g_pCurrentInputState & 0x1000) != 0) {
        if (g_DebugMenuCursor != 0) {
          g_DebugMenuCursor = g_DebugMenuCursor - 1;
        }
        if (g_DebugMenuCursor < g_DebugMenuScrollTop) {
          g_DebugMenuScrollTop = g_DebugMenuCursor;
        }
      }
      if ((*g_pCurrentInputState & 0x4000) != 0) {
        if ((int)(uint)g_DebugMenuCursor < (int)(g_TotalMenuItems - 1)) {
          g_DebugMenuCursor = g_DebugMenuCursor + 1;
        }
        if ((int)(uint)g_DebugMenuScrollTop < (int)(g_DebugMenuCursor - 0x13)) {
          g_DebugMenuScrollTop = g_DebugMenuCursor - 0x13;
        }
      }
    }
    if ((g_pCurrentInputState[1] & 0x40) != 0) {
      uVar2 = (uint)g_DebugMenuCursor;
      g_GameFlags = g_GameFlags & 0xff7f;
      if (uVar2 < g_LevelCount + 10) {
        if (uVar2 < 10) {
          cVar4 = (char)g_DebugMenuCursor + '\x01';
        }
        else {
          cVar4 = 'c';
          SetSequenceIndexByMode(g_GameStatePtr + 0x84,4,uVar2 - 10 & 0xff);
        }
      }
      else {
        iVar1 = strcmp((&g_MenuItemNames)[uVar2],&DAT_800a60a8);
        if (iVar1 == 0) {
          return;
        }
        cVar4 = 'c';
        SetSequenceIndexByMode
                  (g_GameStatePtr + 0x84,1,(uVar2 - 10) - (uint)(byte)g_LevelCount & 0xff);
      }
      *(char *)(g_GameStatePtr + 0x148) = cVar4;
    }
  }
  return;
}



void FUN_80082f24(undefined4 param_1)

{
  FreeFromHeap(blbHeaderBufferBase,param_1,0,0);
  return;
}



int strcmp(char *param_1,char *param_2)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



void * memcpy(uchar *param_1,uchar *param_2,int param_3)

{
  void *pvVar1;
  
  pvVar1 = (void *)(*(code *)&LAB_000000a0)();
  return pvVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int rand(void)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



void srand(uint param_1)

{
  (*(code *)&LAB_000000a0)();
  return;
}



void * memmove(uchar *param_1,uchar *param_2,int param_3)

{
  bool bVar1;
  uchar uVar2;
  void *pvVar3;
  uchar *puVar4;
  int iVar5;
  uchar *puVar6;
  
  if (param_1 < param_2) {
    iVar5 = param_3 + -1;
    if (0 < param_3) {
      do {
        uVar2 = *param_2;
        param_2 = param_2 + 1;
        *param_1 = uVar2;
        bVar1 = 0 < iVar5;
        param_1 = param_1 + 1;
        iVar5 = iVar5 + -1;
      } while (bVar1);
    }
  }
  else {
    iVar5 = param_3 + -1;
    if (0 < param_3) {
      puVar6 = param_1 + iVar5;
      puVar4 = param_2 + iVar5;
      do {
        uVar2 = *puVar4;
        puVar4 = puVar4 + -1;
        *puVar6 = uVar2;
        bVar1 = 0 < iVar5;
        puVar6 = puVar6 + -1;
        iVar5 = iVar5 + -1;
      } while (bVar1);
      pvVar3 = (void *)MEMMOVE_OBJ_64();
      return pvVar3;
    }
  }
  return param_1;
}



undefined4 MEMMOVE_OBJ_64(undefined4 param_1)

{
  return param_1;
}



void StSetRing(u_long *ring_addr,u_long ring_size)

{
  null____800ae3d8 = ring_addr;
  null____800ae3dc = ring_size;
  StClearRing();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdInit(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 4;
  do {
    iVar1 = CdReset(1);
    iVar2 = iVar2 + -1;
    if (iVar1 == 1) {
      CdSyncCallback(def_cbsync);
      CdReadyCallback(def_cbready);
      CdReadCallback(def_cbread);
      CdReadMode(0);
      iVar2 = EVENT_OBJ_84();
      return iVar2;
    }
  } while (iVar2 != -1);
  printf("CdInit: Init failed\n");
  return 0;
}



void EVENT_OBJ_84(void)

{
  return;
}



void def_cbsync(void)

{
  DeliverEvent(0xf0000003,0x20);
  return;
}



void def_cbready(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



void def_cbread(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



int printf(char *fmt,...)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



void DeliverEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdStatus(void)

{
  return (uint)null_00h_8009df28;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdMode(void)

{
  return (uint)null_00h_8009df38;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdLastCom(void)

{
  return (uint)null_00h_8009df39;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

CdlLOC * CdLastPos(void)

{
  return (CdlLOC *)&null_02h_8009df34;
}



int CdReset(int mode)

{
  int iVar1;
  int iVar2;
  
  if (mode == 2) {
    CD_initintr();
    iVar1 = SYS_OBJ_98();
    return iVar1;
  }
  iVar1 = CD_init();
  iVar2 = 0;
  if ((iVar1 == 0) && (iVar2 = 1, mode == 1)) {
    iVar1 = CD_initvol();
    iVar2 = 0;
    if (iVar1 == 0) {
      iVar2 = 1;
    }
  }
  return iVar2;
}



void SYS_OBJ_98(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

void CdFlush(void)

{
  CD_flush();
  return;
}



int CdSetDebug(int level)

{
  int iVar1;
  
  iVar1 = null_00000000h_8009df24;
  null_00000000h_8009df24 = level;
  return iVar1;
}



char * CdComstr(u_char com)

{
  char *pcVar1;
  
  if (com < 0x1c) {
    pcVar1 = (char *)SYS_OBJ_110();
    return pcVar1;
  }
  return "none";
}



void SYS_OBJ_110(void)

{
  return;
}



char * CdIntstr(u_char intr)

{
  char *pcVar1;
  
  if (intr < 7) {
    pcVar1 = (char *)SYS_OBJ_144();
    return pcVar1;
  }
  return "none";
}



void SYS_OBJ_144(void)

{
  return;
}



// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

int CdSync(int mode,u_char *result)

{
  int iVar1;
  
  iVar1 = CD_sync();
  return iVar1;
}



// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

int CdReady(int mode,u_char *result)

{
  int iVar1;
  
  iVar1 = CD_ready();
  return iVar1;
}



CdlCB CdSyncCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = null_00000000h_8009df18;
  null_00000000h_8009df18 = func;
  return pCVar1;
}



CdlCB CdReadyCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = null_00000000h_8009df1c;
  null_00000000h_8009df1c = func;
  return pCVar1;
}



int CdControl(u_char com,u_char *param,u_char *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = null_00000000h_8009df18;
  iVar3 = 3;
  while( true ) {
    null_00000000h_8009df18 = 0;
    if ((com != 1) && ((null_00h_8009df28 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if ((((param == (u_char *)0x0) || (*(int *)(&DAT_8009de90 + (uint)com * 4) == 0)) ||
        (iVar2 = CD_cw(2,param,result,0), iVar2 == 0)) &&
       (null_00000000h_8009df18 = uVar1, iVar2 = CD_cw(com,param,result,0), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      null_00000000h_8009df18 = uVar1;
      return 0;
    }
  }
  return 1;
}



int CdControlF(u_char com,u_char *param)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = null_00000000h_8009df18;
  iVar3 = 3;
  while( true ) {
    null_00000000h_8009df18 = 0;
    if ((com != 1) && ((null_00h_8009df28 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if ((((param == (u_char *)0x0) || (*(int *)(&DAT_8009de90 + (uint)com * 4) == 0)) ||
        (iVar2 = CD_cw(2,param,0,0), iVar2 == 0)) &&
       (null_00000000h_8009df18 = uVar1, iVar2 = CD_cw(com,param,0,1), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      null_00000000h_8009df18 = uVar1;
      return 0;
    }
  }
  return 1;
}



int CdControlB(u_char com,u_char *param,u_char *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  uVar1 = null_00000000h_8009df18;
  iVar4 = 3;
  do {
    null_00000000h_8009df18 = 0;
    if ((com != 1) && ((null_00h_8009df28 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if (((param == (u_char *)0x0) || (*(int *)(&DAT_8009de90 + (uint)com * 4) == 0)) ||
       (iVar2 = CD_cw(2,param,result,0), iVar2 == 0)) {
      null_00000000h_8009df18 = uVar1;
      iVar2 = CD_cw(com,param,result,0);
      iVar3 = 0;
      if (iVar2 == 0) break;
    }
    iVar4 = iVar4 + -1;
    iVar3 = -1;
    null_00000000h_8009df18 = uVar1;
  } while (iVar4 != -1);
  if (iVar3 != 0) {
    return 0;
  }
  CD_sync(0,result);
  iVar4 = SYS_OBJ_538();
  return iVar4;
}



void SYS_OBJ_538(void)

{
  return;
}



int CdMix(CdlATV *vol)

{
  CD_vol();
  return 1;
}



int CdGetSector(void *madr,int size)

{
  int iVar1;
  
  iVar1 = CD_getsector();
  return (uint)(iVar1 == 0);
}



int CdGetSector2(void *madr,int size)

{
  int iVar1;
  
  iVar1 = CD_getsector2();
  return (uint)(iVar1 == 0);
}



_func_50 * CdDataCallback(func *func)

{
  _func_50 *p_Var1;
  
  p_Var1 = (_func_50 *)DMACallback(3,func);
  return p_Var1;
}



// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

int CdDataSync(int mode)

{
  int iVar1;
  
  iVar1 = CD_datasync();
  return iVar1;
}



CdlLOC * CdIntToPos(int i,CdlLOC *p)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = (i + 0x96) / 0x4b;
  iVar2 = (i + 0x96) % 0x4b;
  iVar1 = iVar3 / 0x3c;
  iVar3 = iVar3 % 0x3c;
  p->sector = (char)iVar2 + (char)(iVar2 / 10) * '\x06';
  p->second = (char)iVar3 + (char)(iVar3 / 10) * '\x06';
  p->minute = (char)iVar1 + (char)(iVar1 / 10) * '\x06';
  return p;
}



int CdPosToInt(CdlLOC *p)

{
  return (((uint)(p->minute >> 4) * 10 + (p->minute & 0xf)) * 0x3c +
         (uint)(p->second >> 4) * 10 + (p->second & 0xf)) * 0x4b +
         (uint)(p->sector >> 4) * 10 + (p->sector & 0xf) + -0x96;
}



undefined4 getintr(void)

{
  undefined4 uVar1;
  
  *PTR_CDROM_REG0_8009e1e0 = 1;
  if ((*PTR_CDROM_REG3_8009e1ec & 7) != 0) {
    uVar1 = BIOS_OBJ_64();
    return uVar1;
  }
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 BIOS_OBJ_64(byte *param_1)

{
  undefined1 uVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  undefined1 *puVar4;
  int iVar5;
  uint unaff_s1;
  byte in_stack_00000010;
  byte bStack00000018;
  byte bStack00000019;
  
  while (iVar5 = 0, in_stack_00000010 != (*param_1 & 7)) {
    in_stack_00000010 = *param_1 & 7;
  }
  puVar3 = (undefined4 *)&stack0x00000018;
  do {
    if ((*PTR_CDROM_REG0_8009e1e0 & 0x20) == 0) break;
    iVar5 = iVar5 + 1;
    *(undefined *)puVar3 = *PTR_CDROM_REG1_8009e1e4;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
  } while (iVar5 < 8);
  if (iVar5 < 8) {
    puVar4 = (undefined1 *)((int)&stack0x00000018 + iVar5);
    do {
      *puVar4 = 0;
      puVar4 = puVar4 + 1;
    } while ((int)puVar4 < (int)&stack0x00000020);
  }
  *PTR_CDROM_REG0_8009e1e0 = 1;
  *PTR_CDROM_REG3_8009e1ec = 7;
  *PTR_CDROM_REG2_8009e1e8 = 7;
  if ((in_stack_00000010 != 3) || (*(int *)(&DAT_8009e0e0 + (uint)null_00h_8009df39 * 4) != 0)) {
    if (((_null_00h_8009df28 & 0x10) == 0) && ((bStack00000018 & 0x10) != 0)) {
      null_00000000h_8009df30 = null_00000000h_8009df30 + 1;
    }
    _null_00h_8009df28 = (uint)bStack00000018;
    null_00000000h_8009df2c = (uint)bStack00000019;
    unaff_s1 = _null_00h_8009df28 & 0x1d;
  }
  if (((in_stack_00000010 == 5) && (0 < null_00000000h_8009df24)) &&
     (printf("DiskError: "), 0 < null_00000000h_8009df24)) {
    printf("com=%s,code=(%02x:%02x)\n",(&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
           _null_00h_8009df28,null_00000000h_8009df2c);
  }
  switch(in_stack_00000010) {
  case 1:
    null_00h_8009e1f9 = 1;
    if (unaff_s1 != 0) {
      if (iVar5 == 1) {
        unaff_s1 = 0;
      }
      null_00h_8009e1f9 = 1;
      if (unaff_s1 != 0) {
        null_00h_8009e1f9 = 5;
      }
    }
    puVar4 = &null____800a6170;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    *PTR_CDROM_REG0_8009e1e0 = 0;
    *PTR_CDROM_REG3_8009e1ec = 0;
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 2:
    null_00h_8009e1f8 = 2;
    if (unaff_s1 != 0) {
      null_00h_8009e1f8 = 5;
    }
    puVar4 = &null____800a6168;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 3:
    break;
  case 4:
    puVar4 = &null____800a6178;
    null_00h_8009e1fa = 4;
    puVar3 = (undefined4 *)&stack0x00000018;
    null_00h_8009e1f9 = 4;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    puVar4 = &null____800a6170;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 5:
    puVar4 = &null____800a6168;
    puVar3 = (undefined4 *)&stack0x00000018;
    null_00h_8009e1f9 = 5;
    null_00h_8009e1f8 = 5;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    puVar4 = &null____800a6170;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  default:
    FUN_800850cc("CDROM: unknown intr");
    printf("(%d)\n",(uint)in_stack_00000010);
    return 0;
  }
  if (unaff_s1 != 0) {
    null_00h_8009e1f8 = 5;
    puVar4 = &null____800a6168;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  }
  if (*(int *)(&DAT_8009dfe0 + (uint)null_00h_8009df39 * 4) != 0) {
    null_00h_8009e1f8 = 3;
    puVar4 = &null____800a6168;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar5 = 7;
    do {
      uVar1 = *(undefined1 *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar5 = iVar5 + -1;
      *puVar4 = uVar1;
      puVar4 = puVar4 + 1;
    } while (iVar5 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  }
  null_00h_8009e1f8 = 2;
  puVar4 = &null____800a6168;
  puVar3 = (undefined4 *)&stack0x00000018;
  iVar5 = 7;
  do {
    uVar1 = *(undefined1 *)puVar3;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
    iVar5 = iVar5 + -1;
    *puVar4 = uVar1;
    puVar4 = puVar4 + 1;
  } while (iVar5 != -1);
  uVar2 = BIOS_OBJ_570();
  return uVar2;
}



// WARNING: Removing unreachable block (ram,0x80083c9c)

void BIOS_OBJ_26C(void)

{
  undefined1 uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined1 *puVar4;
  int unaff_s1;
  
  if (unaff_s1 != 0) {
    null_00h_8009e1f8 = 5;
    puVar2 = &null____800a6168;
    puVar4 = &stack0x00000018;
    iVar3 = 7;
    do {
      uVar1 = *puVar4;
      puVar4 = puVar4 + 1;
      iVar3 = iVar3 + -1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    } while (iVar3 != -1);
    BIOS_OBJ_570();
    return;
  }
  if (*(int *)(&DAT_8009dfe0 + (uint)null_00h_8009df39 * 4) != 0) {
    null_00h_8009e1f8 = 3;
    puVar2 = &null____800a6168;
    puVar4 = &stack0x00000018;
    iVar3 = 7;
    do {
      uVar1 = *puVar4;
      puVar4 = puVar4 + 1;
      iVar3 = iVar3 + -1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    } while (iVar3 != -1);
    BIOS_OBJ_570();
    return;
  }
  null_00h_8009e1f8 = 2;
  puVar2 = &null____800a6168;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_36C(void)

{
  undefined1 uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined1 *puVar4;
  int unaff_s1;
  
  null_00h_8009e1f8 = 2;
  if (unaff_s1 != 0) {
    null_00h_8009e1f8 = 5;
  }
  puVar2 = &null____800a6168;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_3B8(void)

{
  undefined1 uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined1 *puVar4;
  int unaff_s0;
  int unaff_s1;
  
  null_00h_8009e1f9 = 1;
  if (unaff_s1 != 0) {
    if (unaff_s0 == 1) {
      unaff_s1 = 0;
    }
    null_00h_8009e1f9 = 1;
    if (unaff_s1 != 0) {
      null_00h_8009e1f9 = 5;
    }
  }
  puVar2 = &null____800a6170;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  *PTR_CDROM_REG0_8009e1e0 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0;
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_43C(void)

{
  undefined1 uVar1;
  int iVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  
  puVar3 = &null____800a6178;
  null_00h_8009e1fa = 4;
  puVar4 = &stack0x00000018;
  null_00h_8009e1f9 = 4;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  puVar3 = &null____800a6170;
  puVar4 = &stack0x00000018;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_4C0(void)

{
  undefined1 uVar1;
  int iVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  
  puVar3 = &null____800a6168;
  puVar4 = &stack0x00000018;
  null_00h_8009e1f9 = 5;
  null_00h_8009e1f8 = 5;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  puVar3 = &null____800a6170;
  puVar4 = &stack0x00000018;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_570(void)

{
  return;
}



undefined4 CD_sync(int param_1,undefined1 *param_2)

{
  byte bVar1;
  undefined1 uVar2;
  bool bVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  undefined1 *puVar7;
  
  iVar4 = VSync(-1);
  null____800a6180 = iVar4 + 0x3c0;
  null____800a6184 = 0;
  null____800a6188 = "CD_sync";
  while( true ) {
    iVar4 = VSync(-1);
    if ((null____800a6180 < iVar4) ||
       (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184, null____800a6184 = iVar4,
       bVar3)) {
      FUN_800850cc("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
             (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
             (&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f8],(&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f9]
            );
      CD_flush();
      uVar5 = BIOS_OBJ_6B4();
      return uVar5;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_8009e1e0;
      while( true ) {
        uVar6 = getintr();
        if (uVar6 == 0) break;
        if (((uVar6 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
          (*null_00000000h_8009df1c)(null_00h_8009e1f9,&null____800a6170);
        }
        if (((uVar6 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
          (*null_00000000h_8009df18)(null_00h_8009e1f8,&null____800a6168);
        }
      }
      *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
    }
    if ((null_00h_8009e1f8 == 2) || (null_00h_8009e1f8 == 5)) break;
    if (param_1 != 0) {
      return 0;
    }
  }
  null_00h_8009e1f8 = 2;
  puVar7 = &null____800a6168;
  iVar4 = 7;
  if (param_2 != (undefined1 *)0x0) {
    do {
      uVar2 = *puVar7;
      puVar7 = puVar7 + 1;
      iVar4 = iVar4 + -1;
      *param_2 = uVar2;
      param_2 = param_2 + 1;
    } while (iVar4 != -1);
  }
  uVar5 = BIOS_OBJ_7DC();
  return uVar5;
}



undefined4 BIOS_OBJ_6B4(void)

{
  byte bVar1;
  undefined1 uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined1 *puVar7;
  byte *unaff_s2;
  int unaff_s3;
  undefined1 *unaff_s4;
  int unaff_s5;
  undefined1 *unaff_s6;
  
  while( true ) {
    if (in_v0 != 0) {
      return 0xffffffff;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_8009e1e0;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
          (*null_00000000h_8009df1c)(*unaff_s4,&null____800a6170);
        }
        if (((uVar5 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
          (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
        }
      }
      *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
    }
    if ((*unaff_s2 == 2) || (*unaff_s2 == 5)) {
      *unaff_s2 = 2;
      puVar7 = &null____800a6168;
      iVar4 = 7;
      if (unaff_s6 != (undefined1 *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *unaff_s6 = uVar2;
          unaff_s6 = unaff_s6 + 1;
        } while (iVar4 != -1);
      }
      uVar6 = BIOS_OBJ_7DC();
      return uVar6;
    }
    if (unaff_s5 != 0) {
      return 0;
    }
    iVar4 = VSync(-1);
    if ((null____800a6180 < iVar4) ||
       (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184, null____800a6184 = iVar4,
       bVar3)) break;
    in_v0 = 0;
  }
  FUN_800850cc("CD timeout: ");
  printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,(&PTR_s_CdlSync_8009df40)[null_00h_8009df39]
         ,*(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
  CD_flush();
  uVar6 = BIOS_OBJ_6B4();
  return uVar6;
}



undefined4 BIOS_OBJ_6E4(void)

{
  undefined1 uVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined1 *puVar6;
  byte unaff_s1;
  byte *unaff_s2;
  int unaff_s3;
  undefined1 *unaff_s4;
  int unaff_s5;
  undefined1 *unaff_s6;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
        (*null_00000000h_8009df1c)(*unaff_s4,&null____800a6170);
      }
      if (((uVar3 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
        (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
      }
    }
    *PTR_CDROM_REG0_8009e1e0 = unaff_s1;
    do {
      if ((*unaff_s2 == 2) || (*unaff_s2 == 5)) {
        *unaff_s2 = 2;
        puVar6 = &null____800a6168;
        iVar5 = 7;
        if (unaff_s6 != (undefined1 *)0x0) {
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s6 = uVar1;
            unaff_s6 = unaff_s6 + 1;
          } while (iVar5 != -1);
        }
        uVar4 = BIOS_OBJ_7DC();
        return uVar4;
      }
      if (unaff_s5 != 0) {
        return 0;
      }
      iVar5 = VSync(-1);
      if ((null____800a6180 < iVar5) ||
         (iVar5 = null____800a6184 + 1, bVar2 = 0x3c0000 < null____800a6184,
         null____800a6184 = iVar5, bVar2)) {
        FUN_800850cc("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
               (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
        CD_flush();
        uVar4 = BIOS_OBJ_6B4();
        return uVar4;
      }
      iVar5 = CheckCallback();
    } while (iVar5 == 0);
    unaff_s1 = *PTR_CDROM_REG0_8009e1e0 & 3;
  } while( true );
}



void BIOS_OBJ_7DC(void)

{
  return;
}



undefined4 CD_ready(int param_1,undefined1 *param_2)

{
  byte bVar1;
  undefined1 uVar2;
  bool bVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  undefined1 *puVar7;
  
  iVar4 = VSync(-1);
  null____800a6180 = iVar4 + 0x3c0;
  null____800a6184 = 0;
  null____800a6188 = "CD_ready";
  while( true ) {
    iVar4 = VSync(-1);
    if ((null____800a6180 < iVar4) ||
       (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184, null____800a6184 = iVar4,
       bVar3)) {
      FUN_800850cc("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
             (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
             (&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f8],(&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f9]
            );
      CD_flush();
      uVar5 = BIOS_OBJ_93C();
      return uVar5;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_8009e1e0;
      while( true ) {
        uVar6 = getintr();
        if (uVar6 == 0) break;
        if (((uVar6 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
          (*null_00000000h_8009df1c)(null_00h_8009e1f9,&null____800a6170);
        }
        if (((uVar6 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
          (*null_00000000h_8009df18)(null_00h_8009e1f8,&null____800a6168);
        }
      }
      *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
    }
    if (null_00h_8009e1fa != '\0') break;
    if (null_00h_8009e1f9 != 0) {
      null_00h_8009e1f9 = 0;
      puVar7 = &null____800a6170;
      iVar4 = 7;
      if (param_2 != (undefined1 *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *param_2 = uVar2;
          param_2 = param_2 + 1;
        } while (iVar4 != -1);
      }
      goto BIOS_OBJ_A94;
    }
    if (param_1 != 0) {
      return 0;
    }
  }
  null_00h_8009e1fa = '\0';
  puVar7 = &null____800a6178;
  if (param_2 != (undefined1 *)0x0) {
    iVar4 = 7;
    do {
      uVar2 = *puVar7;
      puVar7 = puVar7 + 1;
      iVar4 = iVar4 + -1;
      *param_2 = uVar2;
      param_2 = param_2 + 1;
    } while (iVar4 != -1);
    uVar5 = BIOS_OBJ_AA4();
    return uVar5;
  }
BIOS_OBJ_A94:
  uVar5 = BIOS_OBJ_AA4();
  return uVar5;
}



undefined4 BIOS_OBJ_93C(void)

{
  byte bVar1;
  undefined1 uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined1 *puVar7;
  byte *unaff_s2;
  char *unaff_s3;
  undefined1 *unaff_s4;
  int unaff_s5;
  undefined1 *unaff_s6;
  int unaff_s7;
  
  while( true ) {
    if (in_v0 != 0) {
      return 0xffffffff;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_8009e1e0;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
          (*null_00000000h_8009df1c)(*unaff_s6,&null____800a6170);
        }
        if (((uVar5 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
          (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
        }
      }
      *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
    }
    if (*unaff_s3 != '\0') break;
    if (unaff_s3[-1] != '\0') {
      unaff_s3[-1] = '\0';
      puVar7 = &null____800a6170;
      iVar4 = 7;
      if (unaff_s4 != (undefined1 *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *unaff_s4 = uVar2;
          unaff_s4 = unaff_s4 + 1;
        } while (iVar4 != -1);
      }
      goto BIOS_OBJ_A94;
    }
    if (unaff_s7 != 0) {
      return 0;
    }
    iVar4 = VSync(-1);
    if ((null____800a6180 < iVar4) ||
       (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184, null____800a6184 = iVar4,
       bVar3)) {
      FUN_800850cc("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
             (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
             *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s5));
      CD_flush();
      uVar6 = BIOS_OBJ_93C();
      return uVar6;
    }
    in_v0 = 0;
  }
  *unaff_s3 = '\0';
  puVar7 = &null____800a6178;
  if (unaff_s4 != (undefined1 *)0x0) {
    iVar4 = 7;
    do {
      uVar2 = *puVar7;
      puVar7 = puVar7 + 1;
      iVar4 = iVar4 + -1;
      *unaff_s4 = uVar2;
      unaff_s4 = unaff_s4 + 1;
    } while (iVar4 != -1);
    uVar6 = BIOS_OBJ_AA4();
    return uVar6;
  }
BIOS_OBJ_A94:
  uVar6 = BIOS_OBJ_AA4();
  return uVar6;
}



undefined4 BIOS_OBJ_96C(void)

{
  undefined1 uVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined1 *puVar6;
  byte unaff_s1;
  byte *unaff_s2;
  char *unaff_s3;
  undefined1 *unaff_s4;
  int unaff_s5;
  undefined1 *unaff_s6;
  int unaff_s7;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
        (*null_00000000h_8009df1c)(*unaff_s6,&null____800a6170);
      }
      if (((uVar3 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
        (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
      }
    }
    *PTR_CDROM_REG0_8009e1e0 = unaff_s1;
    do {
      if (*unaff_s3 != '\0') {
        *unaff_s3 = '\0';
        puVar6 = &null____800a6178;
        if (unaff_s4 != (undefined1 *)0x0) {
          iVar5 = 7;
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s4 = uVar1;
            unaff_s4 = unaff_s4 + 1;
          } while (iVar5 != -1);
          uVar4 = BIOS_OBJ_AA4();
          return uVar4;
        }
        goto BIOS_OBJ_A94;
      }
      if (unaff_s3[-1] != '\0') {
        unaff_s3[-1] = '\0';
        puVar6 = &null____800a6170;
        iVar5 = 7;
        if (unaff_s4 != (undefined1 *)0x0) {
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s4 = uVar1;
            unaff_s4 = unaff_s4 + 1;
          } while (iVar5 != -1);
        }
BIOS_OBJ_A94:
        uVar4 = BIOS_OBJ_AA4();
        return uVar4;
      }
      if (unaff_s7 != 0) {
        return 0;
      }
      iVar5 = VSync(-1);
      if ((null____800a6180 < iVar5) ||
         (iVar5 = null____800a6184 + 1, bVar2 = 0x3c0000 < null____800a6184,
         null____800a6184 = iVar5, bVar2)) {
        FUN_800850cc("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
               (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s5));
        CD_flush();
        uVar4 = BIOS_OBJ_93C();
        return uVar4;
      }
      iVar5 = CheckCallback();
    } while (iVar5 == 0);
    unaff_s1 = *PTR_CDROM_REG0_8009e1e0 & 3;
  } while( true );
}



void BIOS_OBJ_AA4(void)

{
  return;
}



int CD_cw(byte param_1,undefined1 *param_2,undefined1 *param_3,int param_4)

{
  undefined1 uVar1;
  byte bVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  undefined1 *puVar6;
  int iVar7;
  
  if (1 < null_00000000h_8009df24) {
    printf("%s...\n",(&PTR_s_CdlSync_8009df40)[param_1]);
  }
  if ((*(int *)(&DAT_8009e160 + (uint)param_1 * 4) == 0) || (param_2 != (undefined1 *)0x0)) {
    CD_sync(0,0);
    if (param_1 == 2) {
      iVar4 = 0;
      puVar6 = param_2;
      do {
        (&null_02h_8009df34)[iVar4] = *puVar6;
        iVar4 = iVar4 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar4 < 4);
    }
    if (param_1 == 0xe) {
      null_00h_8009df38 = *param_2;
    }
    iVar4 = (uint)param_1 * 4;
    null_00h_8009e1f8 = 0;
    if (*(int *)(&DAT_8009e060 + iVar4) != 0) {
      null_00h_8009e1f9 = 0;
    }
    *PTR_CDROM_REG0_8009e1e0 = 0;
    iVar7 = 0;
    if (0 < *(int *)(&DAT_8009e160 + iVar4)) {
      do {
        uVar1 = *param_2;
        param_2 = param_2 + 1;
        *PTR_CDROM_REG2_8009e1e8 = uVar1;
        iVar7 = iVar7 + 1;
      } while (iVar7 < *(int *)(&DAT_8009e160 + iVar4));
    }
    null_00h_8009df39 = param_1;
    *PTR_CDROM_REG1_8009e1e4 = param_1;
    iVar4 = 0;
    if (param_4 == 0) {
      iVar4 = VSync(-1);
      null____800a6180 = iVar4 + 0x3c0;
      null____800a6184 = 0;
      null____800a6188 = "CD_cw";
      while (null_00h_8009e1f8 == 0) {
        iVar4 = VSync(-1);
        if ((null____800a6180 < iVar4) ||
           (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184,
           null____800a6184 = iVar4, bVar3)) {
          FUN_800850cc("CD timeout: ");
          printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
                 (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
                 (&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f8],
                 (&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f9]);
          CD_flush();
          iVar4 = BIOS_OBJ_DAC();
          return iVar4;
        }
        iVar4 = CheckCallback();
        if (iVar4 != 0) {
          bVar2 = *PTR_CDROM_REG0_8009e1e0;
          while( true ) {
            uVar5 = getintr();
            if (uVar5 == 0) break;
            if (((uVar5 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
              (*null_00000000h_8009df1c)(null_00h_8009e1f9,&null____800a6170);
            }
            if (((uVar5 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
              (*null_00000000h_8009df18)(null_00h_8009e1f8,&null____800a6168);
            }
          }
          *PTR_CDROM_REG0_8009e1e0 = bVar2 & 3;
        }
      }
      puVar6 = &null____800a6168;
      if (param_3 != (undefined1 *)0x0) {
        iVar4 = 7;
        do {
          uVar1 = *puVar6;
          puVar6 = puVar6 + 1;
          iVar4 = iVar4 + -1;
          *param_3 = uVar1;
          param_3 = param_3 + 1;
        } while (iVar4 != -1);
      }
      iVar4 = -(uint)(null_00h_8009e1f8 == 5);
    }
  }
  else {
    iVar4 = -2;
    if (0 < null_00000000h_8009df24) {
      printf("%s: no param\n",(&PTR_s_CdlSync_8009df40)[param_1]);
      iVar4 = BIOS_OBJ_EC8();
      return iVar4;
    }
  }
  return iVar4;
}



int BIOS_OBJ_DAC(void)

{
  byte bVar1;
  undefined1 uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined1 *puVar6;
  byte *unaff_s2;
  int unaff_s3;
  undefined1 *unaff_s4;
  undefined1 *unaff_s5;
  
  while( true ) {
    if (in_v0 != 0) {
      return -1;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_8009e1e0;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
          (*null_00000000h_8009df1c)(*unaff_s4,&null____800a6170);
        }
        if (((uVar5 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
          (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
        }
      }
      *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
    }
    if (*unaff_s2 != 0) break;
    iVar4 = VSync(-1);
    if ((null____800a6180 < iVar4) ||
       (iVar4 = null____800a6184 + 1, bVar3 = 0x3c0000 < null____800a6184, null____800a6184 = iVar4,
       bVar3)) {
      FUN_800850cc("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
             (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
             *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
      CD_flush();
      iVar4 = BIOS_OBJ_DAC();
      return iVar4;
    }
    in_v0 = 0;
  }
  puVar6 = &null____800a6168;
  if (unaff_s5 != (undefined1 *)0x0) {
    iVar4 = 7;
    do {
      uVar2 = *puVar6;
      puVar6 = puVar6 + 1;
      iVar4 = iVar4 + -1;
      *unaff_s5 = uVar2;
      unaff_s5 = unaff_s5 + 1;
    } while (iVar4 != -1);
  }
  return -(uint)(null_00h_8009e1f8 == '\x05');
}



int BIOS_OBJ_DDC(void)

{
  undefined1 uVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  undefined1 *puVar5;
  byte unaff_s1;
  byte *unaff_s2;
  int unaff_s3;
  undefined1 *unaff_s4;
  undefined1 *unaff_s5;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
        (*null_00000000h_8009df1c)(*unaff_s4,&null____800a6170);
      }
      if (((uVar3 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
        (*null_00000000h_8009df18)(*unaff_s2,&null____800a6168);
      }
    }
    *PTR_CDROM_REG0_8009e1e0 = unaff_s1;
    do {
      if (*unaff_s2 != 0) {
        puVar5 = &null____800a6168;
        if (unaff_s5 != (undefined1 *)0x0) {
          iVar4 = 7;
          do {
            uVar1 = *puVar5;
            puVar5 = puVar5 + 1;
            iVar4 = iVar4 + -1;
            *unaff_s5 = uVar1;
            unaff_s5 = unaff_s5 + 1;
          } while (iVar4 != -1);
        }
        return -(uint)(null_00h_8009e1f8 == '\x05');
      }
      iVar4 = VSync(-1);
      if ((null____800a6180 < iVar4) ||
         (iVar4 = null____800a6184 + 1, bVar2 = 0x3c0000 < null____800a6184,
         null____800a6184 = iVar4, bVar2)) {
        FUN_800850cc("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
               (&PTR_s_CdlSync_8009df40)[null_00h_8009df39],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
        CD_flush();
        iVar4 = BIOS_OBJ_DAC();
        return iVar4;
      }
      iVar4 = CheckCallback();
    } while (iVar4 == 0);
    unaff_s1 = *PTR_CDROM_REG0_8009e1e0 & 3;
  } while( true );
}



void BIOS_OBJ_EC8(void)

{
  return;
}



undefined4 CD_vol(undefined1 *param_1)

{
  *PTR_CDROM_REG0_8009e1e0 = 2;
  *PTR_CDROM_REG2_8009e1e8 = *param_1;
  *PTR_CDROM_REG3_8009e1ec = param_1[1];
  *PTR_CDROM_REG0_8009e1e0 = 3;
  *PTR_CDROM_REG1_8009e1e4 = param_1[2];
  *PTR_CDROM_REG2_8009e1e8 = param_1[3];
  *PTR_CDROM_REG3_8009e1ec = 0x20;
  return 0;
}



void CD_flush(void)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_8009e1e0 = 1;
  bVar1 = *PTR_CDROM_REG3_8009e1ec;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_8009e1e0 = 1;
    *PTR_CDROM_REG3_8009e1ec = 7;
    *PTR_CDROM_REG2_8009e1e8 = 7;
    bVar1 = *PTR_CDROM_REG3_8009e1ec;
  }
  null_00h_8009e1fa = 0;
  null_00h_8009e1f9 = 0;
  null_00h_8009e1f8 = 2;
  *PTR_CDROM_REG0_8009e1e0 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0;
  *(undefined4 *)PTR_COMMON_DELAY_8009e1f0 = 0x1325;
  return;
}



undefined4 CD_initvol(void)

{
  undefined *puVar1;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_8009e1f4;
  if ((*(short *)(PTR_VOICE_00_LEFT_RIGHT_8009e1f4 + 0x1b8) == 0) &&
     (*(short *)(PTR_VOICE_00_LEFT_RIGHT_8009e1f4 + 0x1ba) == 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_8009e1f4 + 0x180) = 0x3fff;
    *(undefined2 *)(puVar1 + 0x182) = 0x3fff;
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_8009e1f4;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_8009e1f4 + 0x1b0) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1b2) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1aa) = 0xc001;
  *PTR_CDROM_REG0_8009e1e0 = 2;
  *PTR_CDROM_REG2_8009e1e8 = 0x80;
  *PTR_CDROM_REG3_8009e1ec = 0;
  *PTR_CDROM_REG0_8009e1e0 = 3;
  *PTR_CDROM_REG1_8009e1e4 = 0x80;
  *PTR_CDROM_REG2_8009e1e8 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0x20;
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void CD_initintr(void)

{
  null_00000000h_8009df1c = 0;
  null_00000000h_8009df18 = 0;
  null_00000000h_8009df2c = 0;
  _null_00h_8009df28 = 0;
  ResetCallback();
  InterruptCallback(2,callback);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int CD_init(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  
  FUN_800850cc("CD_init:");
  printf("addr=%08x\n",&PTR_null_00h_8009e1f8_8009e1fc);
  null_00h_8009df39 = 0;
  null_00h_8009df38 = 0;
  null_00000000h_8009df1c = 0;
  null_00000000h_8009df18 = 0;
  null_00000000h_8009df2c = 0;
  _null_00h_8009df28 = 0;
  ResetCallback();
  InterruptCallback(2,callback);
  *PTR_CDROM_REG0_8009e1e0 = 1;
  bVar1 = *PTR_CDROM_REG3_8009e1ec;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_8009e1e0 = 1;
    *PTR_CDROM_REG3_8009e1ec = 7;
    *PTR_CDROM_REG2_8009e1e8 = 7;
    bVar1 = *PTR_CDROM_REG3_8009e1ec;
  }
  null_00h_8009e1fa = 0;
  null_00h_8009e1f9 = 0;
  null_00h_8009e1f8 = 2;
  *PTR_CDROM_REG0_8009e1e0 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0;
  *(undefined4 *)PTR_COMMON_DELAY_8009e1f0 = 0x1325;
  CD_cw(1,0,0,0);
  if ((_null_00h_8009df28 & 0x10) != 0) {
    CD_cw(1,0,0,0);
  }
  iVar2 = CD_cw(10,0,0,0);
  iVar3 = -1;
  if (iVar2 == 0) {
    iVar2 = CD_cw(0xc,0,0,0);
    iVar3 = -1;
    if (iVar2 == 0) {
      iVar3 = CD_sync(0,0);
      iVar3 = -(uint)(iVar3 != 2);
    }
  }
  return iVar3;
}



undefined4 CD_datasync(int param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar1 = VSync(-1);
  null____800a6180 = iVar1 + 0x3c0;
  null____800a6184 = 0;
  null____800a6188 = "CD_datasync";
  while (iVar2 = VSync(-1), iVar1 = null____800a6184, iVar2 <= null____800a6180) {
    null____800a6184 = null____800a6184 + 1;
    if (0x3c0000 < iVar1) break;
    uVar3 = 0;
    if (((*(uint *)PTR_DMA_CDROM_CHCR_8009e224 & 0x1000000) == 0) || (uVar3 = 1, param_1 != 0)) {
      return uVar3;
    }
  }
  FUN_800850cc("CD timeout: ");
  printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,(&PTR_s_CdlSync_8009df40)[null_00h_8009df39]
         ,(&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f8],(&PTR_s_NoIntr_8009dfc0)[null_00h_8009e1f9]);
  CD_flush();
  uVar3 = BIOS_OBJ_14A4();
  return uVar3;
}



undefined4 BIOS_OBJ_14A4(void)

{
  bool bVar1;
  int iVar2;
  int in_v0;
  undefined4 uVar3;
  int unaff_s0;
  byte *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  while (((uVar3 = 0xffffffff, in_v0 == 0 &&
          (uVar3 = 0, (*(uint *)PTR_DMA_CDROM_CHCR_8009e224 & 0x1000000) != 0)) &&
         (uVar3 = 1, unaff_s2 == 0))) {
    iVar2 = VSync(-1);
    if ((null____800a6180 < iVar2) ||
       (iVar2 = null____800a6184 + 1, bVar1 = 0x3c0000 < null____800a6184, null____800a6184 = iVar2,
       bVar1)) {
      FUN_800850cc("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",null____800a6188,
             *(undefined4 *)((uint)null_00h_8009df39 * 4 + unaff_s3),
             *(undefined4 *)((uint)*unaff_s1 * 4 + unaff_s0));
      CD_flush();
      uVar3 = BIOS_OBJ_14A4();
      return uVar3;
    }
    in_v0 = 0;
  }
  return uVar3;
}



undefined4 CD_getsector(undefined4 param_1,uint param_2)

{
  uint uVar1;
  
  *PTR_CDROM_REG0_8009e1e0 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_8009e214 = 0x20943;
  *(undefined4 *)PTR_COMMON_DELAY_8009e1f0 = 0x1323;
  *(uint *)PTR_DMA_DPCR_8009e218 = *(uint *)PTR_DMA_DPCR_8009e218 | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_8009e21c = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_8009e220 = param_2 | 0x10000;
  do {
  } while ((*PTR_CDROM_REG0_8009e1e0 & 0x40) == 0);
  *(undefined4 *)PTR_DMA_CDROM_CHCR_8009e224 = 0x11000000;
  uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_8009e224;
  while ((uVar1 & 0x1000000) != 0) {
    uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_8009e224;
  }
  *(undefined4 *)PTR_COMMON_DELAY_8009e1f0 = 0x1325;
  return 0;
}



undefined4 CD_getsector2(undefined4 param_1,uint param_2)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_8009e1e0 = 0;
  *PTR_CDROM_REG3_8009e1ec = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_8009e214 = 0x21020843;
  *(undefined4 *)PTR_COMMON_DELAY_8009e1f0 = 0x1325;
  *(uint *)PTR_DMA_DPCR_8009e218 = *(uint *)PTR_DMA_DPCR_8009e218 | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_8009e21c = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_8009e220 = param_2 | 0x10000;
  bVar1 = *PTR_CDROM_REG0_8009e1e0;
  while ((bVar1 & 0x40) == 0) {
    bVar1 = *PTR_CDROM_REG0_8009e1e0;
  }
  *(undefined4 *)PTR_DMA_CDROM_CHCR_8009e224 = 0x11400100;
  return 0;
}



// Possible GS_101.OBJ/GsSetNearClip
// Possible GS_102.OBJ/GsSetFarClip
// Possible GS_124.OBJ/GsSetWorkBase

void CD_set_test_parmnum(undefined4 param_1)

{
  null_00000000h_8009e1c4 = param_1;
  return;
}



void callback(void)

{
  byte bVar1;
  uint uVar2;
  
  bVar1 = *PTR_CDROM_REG0_8009e1e0;
  while( true ) {
    uVar2 = getintr();
    if (uVar2 == 0) break;
    if (((uVar2 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
      (*null_00000000h_8009df1c)(null_00h_8009e1f9,&null____800a6170);
    }
    if (((uVar2 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
      (*null_00000000h_8009df18)(null_00h_8009e1f8,&null____800a6168);
    }
  }
  *PTR_CDROM_REG0_8009e1e0 = bVar1 & 3;
  return;
}



void BIOS_OBJ_1728(void)

{
  uint uVar1;
  undefined1 *unaff_s1;
  undefined1 unaff_s2;
  undefined1 *unaff_s3;
  
  while( true ) {
    uVar1 = getintr();
    if (uVar1 == 0) break;
    if (((uVar1 & 4) != 0) && (null_00000000h_8009df1c != (code *)0x0)) {
      (*null_00000000h_8009df1c)(*unaff_s1,&null____800a6170);
    }
    if (((uVar1 & 2) != 0) && (null_00000000h_8009df18 != (code *)0x0)) {
      (*null_00000000h_8009df18)(*unaff_s3,&null____800a6168);
    }
  }
  *PTR_CDROM_REG0_8009e1e0 = unaff_s2;
  return;
}



// Possible A63.OBJ/puts

void FUN_800850cc(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



CdlFILE * CdSearchFile(CdlFILE *_30,char *name)

{
  char cVar1;
  u_char uVar2;
  u_char uVar3;
  u_char uVar4;
  u_char uVar5;
  int iVar6;
  CdlFILE *pCVar7;
  undefined2 *puVar8;
  int iVar9;
  CdlLOC CVar10;
  CdlLOC CVar11;
  char *pcVar12;
  CdlLOC *pCVar13;
  char *pcVar14;
  int iVar15;
  char local_38 [32];
  
  if (null_FFFFFFFFh_8009e22c != null_00000000h_8009df30) {
    iVar6 = CD_newmedia();
    if (iVar6 == 0) {
      return (CdlFILE *)0x0;
    }
    null_FFFFFFFFh_8009e22c = null_00000000h_8009df30;
  }
  iVar6 = 1;
  if (*name != '\\') {
    pCVar7 = (CdlFILE *)ISO9660_OBJ_2A8();
    return pCVar7;
  }
  local_38[0] = '\0';
  iVar15 = 0;
  pcVar12 = name;
  do {
    pcVar14 = local_38;
    cVar1 = *pcVar12;
    while (cVar1 != '\\') {
      if (cVar1 == '\0') goto ISO9660_OBJ_FC;
      pcVar12 = pcVar12 + 1;
      *pcVar14 = cVar1;
      pcVar14 = pcVar14 + 1;
      cVar1 = *pcVar12;
    }
    if (*pcVar12 == '\0') break;
    pcVar12 = pcVar12 + 1;
    *pcVar14 = '\0';
    iVar6 = CD_searchdir(iVar6,local_38);
    if (iVar6 == -1) {
      local_38[0] = '\0';
      pCVar7 = (CdlFILE *)ISO9660_OBJ_F8();
      return pCVar7;
    }
    iVar15 = iVar15 + 1;
  } while (iVar15 < 8);
ISO9660_OBJ_FC:
  if (iVar15 < 8) {
    if (local_38[0] == '\0') {
      if (0 < null_00000000h_8009df24) {
        pCVar7 = (CdlFILE *)ISO9660_OBJ_29C("%s: dir was not found\n",name);
        return pCVar7;
      }
    }
    else {
      *pcVar14 = '\0';
      iVar6 = CD_cachefile();
      if (iVar6 == 0) {
        if (0 < null_00000000h_8009df24) {
          printf("CdSearchFile: disc error\n");
          pCVar7 = (CdlFILE *)ISO9660_OBJ_2A8();
          return pCVar7;
        }
      }
      else {
        if (1 < null_00000000h_8009df24) {
          printf("CdSearchFile: searching %s...\n",local_38);
        }
        iVar15 = 0;
        puVar8 = &null____800a6198;
        pCVar13 = (CdlLOC *)&null____800a6190;
        iVar6 = 0;
        do {
          if (*(char *)((int)&null____800a6198 + iVar6) == '\0') break;
          iVar9 = _cmp(puVar8,local_38);
          if (iVar9 != 0) {
            if (1 < null_00000000h_8009df24) {
              printf("%s:  found\n",local_38);
            }
            CVar10 = pCVar13[1];
            uVar2 = pCVar13[2].minute;
            uVar3 = pCVar13[2].second;
            uVar4 = pCVar13[2].sector;
            uVar5 = pCVar13[2].track;
            CVar11 = pCVar13[3];
            _30->pos = *pCVar13;
            _30->size = (u_long)CVar10;
            _30->name[0] = uVar2;
            _30->name[1] = uVar3;
            _30->name[2] = uVar4;
            _30->name[3] = uVar5;
            *(CdlLOC *)(_30->name + 4) = CVar11;
            CVar10 = pCVar13[5];
            *(CdlLOC *)(_30->name + 8) = pCVar13[4];
            *(CdlLOC *)(_30->name + 0xc) = CVar10;
            pCVar7 = (CdlFILE *)ISO9660_OBJ_2A8();
            return pCVar7;
          }
          pCVar13 = pCVar13 + 6;
          puVar8 = puVar8 + 0xc;
          iVar15 = iVar15 + 1;
          iVar6 = iVar6 + 0x18;
        } while (iVar15 < 0x40);
        if (0 < null_00000000h_8009df24) {
          printf("%s: not found\n",local_38);
        }
      }
    }
  }
  else if (0 < null_00000000h_8009df24) {
    printf("%s: path level (%d) error\n",name,iVar15);
    pCVar7 = (CdlFILE *)ISO9660_OBJ_2A8();
    return pCVar7;
  }
  return (CdlFILE *)0x0;
}



undefined4 ISO9660_OBJ_F8(void)

{
  undefined4 uVar1;
  int iVar2;
  undefined2 *puVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  undefined1 *unaff_s1;
  int unaff_s2;
  int iVar8;
  undefined4 *unaff_s4;
  char in_stack_00000010;
  
  if (unaff_s2 < 8) {
    if (in_stack_00000010 == '\0') {
      if (0 < null_00000000h_8009df24) {
        uVar1 = ISO9660_OBJ_29C("%s: dir was not found\n");
        return uVar1;
      }
    }
    else {
      *unaff_s1 = 0;
      iVar2 = CD_cachefile();
      if (iVar2 == 0) {
        if (0 < null_00000000h_8009df24) {
          printf("CdSearchFile: disc error\n");
          uVar1 = ISO9660_OBJ_2A8();
          return uVar1;
        }
      }
      else {
        if (1 < null_00000000h_8009df24) {
          printf("CdSearchFile: searching %s...\n",&stack0x00000010);
        }
        iVar8 = 0;
        puVar3 = &null____800a6198;
        puVar7 = &null____800a6190;
        iVar2 = 0;
        do {
          if (*(char *)((int)&null____800a6198 + iVar2) == '\0') break;
          iVar4 = _cmp(puVar3,&stack0x00000010);
          if (iVar4 != 0) {
            if (1 < null_00000000h_8009df24) {
              printf("%s:  found\n",&stack0x00000010);
            }
            uVar1 = puVar7[1];
            uVar5 = puVar7[2];
            uVar6 = puVar7[3];
            *unaff_s4 = *puVar7;
            unaff_s4[1] = uVar1;
            unaff_s4[2] = uVar5;
            unaff_s4[3] = uVar6;
            uVar1 = puVar7[5];
            unaff_s4[4] = puVar7[4];
            unaff_s4[5] = uVar1;
            uVar1 = ISO9660_OBJ_2A8();
            return uVar1;
          }
          puVar7 = puVar7 + 6;
          puVar3 = puVar3 + 0xc;
          iVar8 = iVar8 + 1;
          iVar2 = iVar2 + 0x18;
        } while (iVar8 < 0x40);
        if (0 < null_00000000h_8009df24) {
          printf("%s: not found\n",&stack0x00000010);
        }
      }
    }
  }
  else if (0 < null_00000000h_8009df24) {
    printf("%s: path level (%d) error\n");
    uVar1 = ISO9660_OBJ_2A8();
    return uVar1;
  }
  return 0;
}



undefined4 ISO9660_OBJ_29C(char *param_1)

{
  printf(param_1);
  return 0;
}



void ISO9660_OBJ_2A8(void)

{
  return;
}



int _cmp(void *param_1,void *param_2)

{
  int iVar1;
  
  iVar1 = strncmp((char *)param_1,(char *)param_2,0xc);
  return (uint)(iVar1 == 0);
}



undefined4 CD_newmedia(void)

{
  undefined1 *puVar1;
  byte bVar2;
  uint uVar3;
  uint *puVar4;
  int iVar5;
  undefined4 uVar6;
  uint uVar7;
  uint uVar8;
  byte *pbVar9;
  uchar *puVar10;
  int iVar11;
  undefined8 uVar12;
  undefined1 local_28 [8];
  
  pbVar9 = (byte *)&null____800a7d90;
  iVar5 = cd_read(1,0x10,&null____800a7d90);
  if (iVar5 == 1) {
    iVar5 = strncmp((char *)((int)&null____800a7d90 + 1),"CD001",5);
    if (iVar5 == 0) {
      puVar1 = local_28 + 3;
      uVar8 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar8) =
           *(uint *)(puVar1 + -uVar8) & -1 << (uVar8 + 1) * 8 | null____800a7e1c >> (3 - uVar8) * 8;
      local_28._0_4_ = null____800a7e1c;
      uVar12 = cd_read(1,null____800a7e1c,&null____800a7d90);
      uVar8 = (uint)((ulonglong)uVar12 >> 0x20);
      if ((int)uVar12 == 1) {
        if (1 < null_00000000h_8009df24) {
          printf("CD_newmedia: sarching dir..\n");
        }
        iVar5 = 0;
        do {
          iVar11 = iVar5;
          if (*pbVar9 == 0) break;
          uVar3 = (uint)(pbVar9 + 5) & 3;
          uVar7 = (uint)(pbVar9 + 2) & 3;
          uVar7 = (*(int *)(pbVar9 + 5 + -uVar3) << (3 - uVar3) * 8 |
                  uVar8 & 0xffffffffU >> (uVar3 + 1) * 8) & -1 << (4 - uVar7) * 8 |
                  *(uint *)(pbVar9 + 2 + -uVar7) >> uVar7 * 8;
          uVar8 = iVar5 * 0x2c + 0x800a679b;
          uVar3 = uVar8 & 3;
          puVar4 = (uint *)(uVar8 - uVar3);
          *puVar4 = *puVar4 & -1 << (uVar3 + 1) * 8 | uVar7 >> (3 - uVar3) * 8;
          (&null____800a6798)[iVar5 * 0xb] = uVar7;
          puVar10 = &DAT_800a679c + iVar5 * 0x2c;
          bVar2 = pbVar9[6];
          iVar11 = iVar5 + 1;
          (&null____800a6790)[iVar5 * 0xb] = iVar11;
          (&null____800a6794)[iVar5 * 0xb] = (uint)bVar2;
          memcpy(puVar10,pbVar9 + 8,(uint)*pbVar9);
          puVar10[*pbVar9] = '\0';
          uVar8 = (uint)*pbVar9 + (*pbVar9 & 1) + 8;
          pbVar9 = pbVar9 + uVar8;
          if (1 < null_00000000h_8009df24) {
            printf("\t%08x,%04x,%04x,%s\n",(&null____800a6798)[iVar5 * 0xb],
                   (&null____800a6790)[iVar5 * 0xb],(&null____800a6794)[iVar5 * 0xb],puVar10);
          }
          if (0x7f < iVar11) goto ISO9660_OBJ_574;
          iVar5 = iVar11;
        } while (pbVar9 < &DAT_800a8590);
        if (iVar11 < 0x80) {
          (&null____800a6794)[iVar11 * 0xb] = 0;
        }
ISO9660_OBJ_574:
        null_00000000h_8009e228 = 0;
        uVar6 = 1;
        if (1 < null_00000000h_8009df24) {
          printf("CD_newmedia: %d dir entries found\n",iVar11);
          uVar6 = 1;
        }
      }
      else {
        uVar6 = 0;
        if (0 < null_00000000h_8009df24) {
          printf("CD_newmedia: Read error (PT:%08x)\n",local_28._0_4_);
          uVar6 = ISO9660_OBJ_5A4();
          return uVar6;
        }
      }
    }
    else {
      uVar6 = 0;
      if (0 < null_00000000h_8009df24) {
        printf("CD_newmedia: Disc format error in cd_read(PVD)\n");
        uVar6 = ISO9660_OBJ_5A4();
        return uVar6;
      }
    }
  }
  else {
    uVar6 = 0;
    if (0 < null_00000000h_8009df24) {
      printf("CD_newmedia: Read error in cd_read(PVD)\n");
      uVar6 = ISO9660_OBJ_5A4();
      return uVar6;
    }
  }
  return uVar6;
}



void ISO9660_OBJ_5A4(void)

{
  return;
}



undefined4 CD_searchdir(int param_1,char *param_2)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  char *pcVar5;
  
  iVar3 = 0;
  pcVar5 = &DAT_800a679c;
  iVar4 = 0;
  while( true ) {
    if (*(int *)((int)&null____800a6794 + iVar4) == 0) {
      return 0xffffffff;
    }
    if ((*(int *)((int)&null____800a6794 + iVar4) == param_1) &&
       (iVar1 = strcmp(param_2,pcVar5), iVar1 == 0)) break;
    pcVar5 = pcVar5 + 0x2c;
    iVar3 = iVar3 + 1;
    iVar4 = iVar4 + 0x2c;
    if (0x7f < iVar3) {
      return 0xffffffff;
    }
  }
  uVar2 = ISO9660_OBJ_650();
  return uVar2;
}



void ISO9660_OBJ_650(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x80085898)
// WARNING: Removing unreachable block (ram,0x800858a0)
// WARNING: Removing unreachable block (ram,0x800858b8)

undefined4 CD_cachefile(int param_1)

{
  undefined1 *puVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  undefined1 local_28 [8];
  
  if (param_1 != null_00000000h_8009e228) {
    iVar3 = cd_read(1,*(undefined4 *)(&DAT_800a676c + param_1 * 0x2c),&null____800a7d90);
    if (iVar3 != 1) {
      if (null_00000000h_8009df24 < 1) {
        return 0xffffffff;
      }
      printf("CD_cachefile: dir not found\n");
      uVar4 = ISO9660_OBJ_8F4();
      return uVar4;
    }
    if (1 < null_00000000h_8009df24) {
      printf("CD_cachefile: searching...\n");
    }
    if ((char)null____800a7d90 != '\0') {
      local_28._0_4_ = null____800a7d94 << 0x10 | null____800a7d90 >> 0x10;
      puVar1 = local_28 + 3;
      uVar2 = (uint)puVar1 & 3;
      *(uint *)(puVar1 + -uVar2) =
           *(uint *)(puVar1 + -uVar2) & -1 << (uVar2 + 1) * 8 |
           (uint)local_28._0_4_ >> (3 - uVar2) * 8;
      CdIntToPos(local_28._0_4_,(CdlLOC *)&null____800a6190);
      null____800a6194 = null____800a7d9c << 0x10 | null____800a7d98 >> 0x10;
      null____800a6198 = 0x2e;
      uVar4 = ISO9660_OBJ_810();
      return uVar4;
    }
    null____800a6198 = null____800a6198 & 0xff00;
    if (null_00000000h_8009df24 < 2) {
      null_00000000h_8009e228 = param_1;
      return 1;
    }
    null_00000000h_8009e228 = param_1;
    printf("CD_cachefile: %d files found\n",0);
  }
  return 1;
}



undefined4 ISO9660_OBJ_7F4(uchar *param_1)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  undefined4 uVar4;
  uint uVar5;
  uint in_v1;
  byte *unaff_s0;
  byte *pbVar6;
  int unaff_s1;
  int unaff_s2;
  int iVar7;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  undefined4 unaff_s6;
  uint in_stack_00000018;
  
  memcpy(param_1,unaff_s0 + 0x21,(uint)unaff_s0[0x20]);
  *(undefined1 *)(unaff_s3 + (uint)unaff_s0[0x20]) = 0;
  if (1 < null_00000000h_8009df24) {
    printf("\t(%02x:%02x:%02x) %8d %s\n",(uint)*(byte *)((int)&null____800a6190 + unaff_s1),
           (uint)*(byte *)((int)&null____800a6190 + unaff_s1 + 1),
           (uint)*(byte *)((int)&null____800a6190 + unaff_s1 + 2));
  }
  iVar7 = unaff_s2 + 1;
  pbVar6 = unaff_s0 + *unaff_s0;
  if (((0x3f < iVar7) || ((byte *)0x800a858f < pbVar6)) || (*pbVar6 == 0)) {
    null_00000000h_8009e228 = unaff_s6;
    if (iVar7 < 0x40) {
      *(undefined1 *)(&null____800a6198 + iVar7 * 0xc) = 0;
    }
    if (1 < null_00000000h_8009df24) {
      printf("CD_cachefile: %d files found\n",iVar7);
    }
    return 1;
  }
  uVar1 = (uint)(pbVar6 + 5) & 3;
  uVar5 = (uint)(pbVar6 + 2) & 3;
  in_stack_00000018 =
       (*(int *)(pbVar6 + 5 + -uVar1) << (3 - uVar1) * 8 |
       (uint)*pbVar6 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar5) * 8 |
       *(uint *)(pbVar6 + 2 + -uVar5) >> uVar5 * 8;
  uVar1 = (int)&stack0x00000018 + 3U & 3;
  puVar2 = (uint *)(((int)&stack0x00000018 + 3U) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | in_stack_00000018 >> (3 - uVar1) * 8;
  CdIntToPos(in_stack_00000018,(CdlLOC *)(unaff_s4 + 0x18));
  uVar3 = unaff_s1 + unaff_s5 + 0x1c;
  uVar1 = (uint)(pbVar6 + 0xd) & 3;
  uVar5 = (uint)(pbVar6 + 10) & 3;
  uVar5 = (*(int *)(pbVar6 + 0xd + -uVar1) << (3 - uVar1) * 8 |
          in_v1 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar5) * 8 |
          *(uint *)(pbVar6 + 10 + -uVar5) >> uVar5 * 8;
  uVar1 = uVar3 + 3 & 3;
  puVar2 = (uint *)((uVar3 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = uVar3 & 3;
  *(uint *)(uVar3 - uVar1) =
       *(uint *)(uVar3 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  if (iVar7 == 0) {
    *(undefined2 *)(unaff_s5 + 8) = 0x2e;
    uVar4 = ISO9660_OBJ_810();
    return uVar4;
  }
  if (iVar7 != 1) {
    uVar4 = ISO9660_OBJ_7F4();
    return uVar4;
  }
  *(undefined2 *)(unaff_s5 + 0x20) = 0x2e2e;
  *(undefined1 *)(unaff_s5 + 0x22) = 0;
  uVar4 = ISO9660_OBJ_810(unaff_s3 + 0x18);
  return uVar4;
}



undefined4 ISO9660_OBJ_810(void)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  undefined4 uVar4;
  uint uVar5;
  uint in_v1;
  byte *unaff_s0;
  byte *pbVar6;
  int unaff_s1;
  int unaff_s2;
  int iVar7;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  undefined4 unaff_s6;
  uint in_stack_00000018;
  
  if (1 < null_00000000h_8009df24) {
    printf("\t(%02x:%02x:%02x) %8d %s\n",(uint)*(byte *)((int)&null____800a6190 + unaff_s1),
           (uint)*(byte *)((int)&null____800a6190 + unaff_s1 + 1),
           (uint)*(byte *)((int)&null____800a6190 + unaff_s1 + 2));
  }
  iVar7 = unaff_s2 + 1;
  pbVar6 = unaff_s0 + *unaff_s0;
  if (((0x3f < iVar7) || ((byte *)0x800a858f < pbVar6)) || (*pbVar6 == 0)) {
    null_00000000h_8009e228 = unaff_s6;
    if (iVar7 < 0x40) {
      *(undefined1 *)(&null____800a6198 + iVar7 * 0xc) = 0;
    }
    if (1 < null_00000000h_8009df24) {
      printf("CD_cachefile: %d files found\n",iVar7);
    }
    return 1;
  }
  uVar1 = (uint)(pbVar6 + 5) & 3;
  uVar5 = (uint)(pbVar6 + 2) & 3;
  in_stack_00000018 =
       (*(int *)(pbVar6 + 5 + -uVar1) << (3 - uVar1) * 8 |
       (uint)*pbVar6 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar5) * 8 |
       *(uint *)(pbVar6 + 2 + -uVar5) >> uVar5 * 8;
  uVar1 = (int)&stack0x00000018 + 3U & 3;
  puVar2 = (uint *)(((int)&stack0x00000018 + 3U) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | in_stack_00000018 >> (3 - uVar1) * 8;
  CdIntToPos(in_stack_00000018,(CdlLOC *)(unaff_s4 + 0x18));
  uVar3 = unaff_s1 + unaff_s5 + 0x1c;
  uVar1 = (uint)(pbVar6 + 0xd) & 3;
  uVar5 = (uint)(pbVar6 + 10) & 3;
  uVar5 = (*(int *)(pbVar6 + 0xd + -uVar1) << (3 - uVar1) * 8 |
          in_v1 & 0xffffffffU >> (uVar1 + 1) * 8) & -1 << (4 - uVar5) * 8 |
          *(uint *)(pbVar6 + 10 + -uVar5) >> uVar5 * 8;
  uVar1 = uVar3 + 3 & 3;
  puVar2 = (uint *)((uVar3 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | uVar5 >> (3 - uVar1) * 8;
  uVar1 = uVar3 & 3;
  *(uint *)(uVar3 - uVar1) =
       *(uint *)(uVar3 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar5 << uVar1 * 8;
  if (iVar7 == 0) {
    *(undefined2 *)(unaff_s5 + 8) = 0x2e;
    uVar4 = ISO9660_OBJ_810();
    return uVar4;
  }
  if (iVar7 != 1) {
    uVar4 = ISO9660_OBJ_7F4();
    return uVar4;
  }
  *(undefined2 *)(unaff_s5 + 0x20) = 0x2e2e;
  *(undefined1 *)(unaff_s5 + 0x22) = 0;
  uVar4 = ISO9660_OBJ_810(unaff_s3 + 0x18);
  return uVar4;
}



void ISO9660_OBJ_8F4(void)

{
  return;
}



bool cd_read(int param_1,int param_2,u_long *param_3)

{
  int iVar1;
  CdlLOC aCStack_18 [2];
  
  CdIntToPos(param_2,aCStack_18);
  CdControl('\x02',&aCStack_18[0].minute,(u_char *)0x0);
  CdRead(param_1,param_3,0x80);
  iVar1 = CdReadSync(0,(u_char *)0x0);
  return iVar1 == 0;
}



int strncmp(char *param_1,char *param_2,int param_3)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



void cb_read(char param_1,undefined4 param_2)

{
  int iVar1;
  undefined4 uVar2;
  CdlLOC aCStack_18 [4];
  
  null_00000000h_8009e268 = param_2;
  if (param_1 == '\x01') {
    if (0 < null_00000000h_8009e248) {
      if (null_00000000h_8009e244 == 0x200) {
        if ((null_00000000h_8009e264 & 1) != 0) {
          CdDataCallback((func *)0x0);
          CdGetSector2(aCStack_18,3);
          CdDataSync(0);
          CdDataCallback(cb_data);
          CDREAD_OBJ_A4();
          return;
        }
        CdGetSector(aCStack_18,3);
        iVar1 = CdPosToInt(aCStack_18);
        if (iVar1 != null_00000000h_8009e254) {
          FUN_800850cc("CdRead: sector error\n");
          null_00000000h_8009e248 = -1;
        }
      }
      if ((null_00000000h_8009e264 & 1) != 0) {
        CdGetSector2(null_00000000h_8009e23c,null_00000000h_8009e244);
        CDREAD_OBJ_1A4();
        return;
      }
      CdGetSector(null_00000000h_8009e23c,null_00000000h_8009e244);
      null_00000000h_8009e23c = (void *)((int)null_00000000h_8009e23c + null_00000000h_8009e244 * 4)
      ;
      null_00000000h_8009e248 = null_00000000h_8009e248 + -1;
      null_00000000h_8009e254 = null_00000000h_8009e254 + 1;
      CDREAD_OBJ_1A4();
      return;
    }
  }
  else {
    null_00000000h_8009e248 = -1;
  }
  null_00000000h_8009e24c = VSync(-1);
  if (null_00000000h_8009e248 < 0) {
    cd_read_retry(1);
  }
  iVar1 = VSync(-1);
  if (null_00000000h_8009e250 + 0x4b0 < iVar1) {
    null_00000000h_8009e248 = -1;
  }
  if ((null_00000000h_8009e248 == 0) || (iVar1 = VSync(-1), null_00000000h_8009e250 + 0x4b0 < iVar1)
     ) {
    CdSyncCallback(null_00000000h_8009e258);
    CdReadyCallback(null_00000000h_8009e25c);
    if ((null_00000000h_8009e264 & 1) != 0) {
      CdDataCallback(null_00000000h_8009e260);
    }
    CdControlF('\t',(u_char *)0x0);
    if (null_00000000h_8009e230 != (code *)0x0) {
      uVar2 = 5;
      if (null_00000000h_8009e248 == 0) {
        uVar2 = 2;
      }
      (*null_00000000h_8009e230)(uVar2,param_2);
    }
  }
  return;
}



void CDREAD_OBJ_A4(void)

{
  int iVar1;
  
  iVar1 = CdPosToInt((CdlLOC *)&stack0x00000010);
  if (iVar1 != null_00000000h_8009e254) {
    FUN_800850cc("CdRead: sector error\n");
    null_00000000h_8009e248 = -1;
  }
  if ((null_00000000h_8009e264 & 1) != 0) {
    CdGetSector2(null_00000000h_8009e23c,null_00000000h_8009e244);
    CDREAD_OBJ_1A4();
    return;
  }
  CdGetSector(null_00000000h_8009e23c,null_00000000h_8009e244);
  null_00000000h_8009e23c = (void *)((int)null_00000000h_8009e23c + null_00000000h_8009e244 * 4);
  null_00000000h_8009e248 = null_00000000h_8009e248 + -1;
  null_00000000h_8009e254 = null_00000000h_8009e254 + 1;
  CDREAD_OBJ_1A4();
  return;
}



void CDREAD_OBJ_1A4(void)

{
  int iVar1;
  undefined4 uVar2;
  
  null_00000000h_8009e24c = VSync(-1);
  if (null_00000000h_8009e248 < 0) {
    cd_read_retry(1);
  }
  iVar1 = VSync(-1);
  if (null_00000000h_8009e250 + 0x4b0 < iVar1) {
    null_00000000h_8009e248 = -1;
  }
  if ((null_00000000h_8009e248 == 0) || (iVar1 = VSync(-1), null_00000000h_8009e250 + 0x4b0 < iVar1)
     ) {
    CdSyncCallback(null_00000000h_8009e258);
    CdReadyCallback(null_00000000h_8009e25c);
    if ((null_00000000h_8009e264 & 1) != 0) {
      CdDataCallback(null_00000000h_8009e260);
    }
    CdControlF('\t',(u_char *)0x0);
    if (null_00000000h_8009e230 != (code *)0x0) {
      uVar2 = 5;
      if (null_00000000h_8009e248 == 0) {
        uVar2 = 2;
      }
      (*null_00000000h_8009e230)(uVar2);
    }
  }
  return;
}



void cb_data(void)

{
  null_00000000h_8009e23c = null_00000000h_8009e23c + null_00000000h_8009e244 * 4;
  null_00000000h_8009e248 = null_00000000h_8009e248 + -1;
  null_00000000h_8009e254 = null_00000000h_8009e254 + 1;
  if (null_00000000h_8009e248 == 0) {
    CdSyncCallback(null_00000000h_8009e258);
    CdReadyCallback(null_00000000h_8009e25c);
    if ((null_00000000h_8009e264 & 1) != 0) {
      CdDataCallback(null_00000000h_8009e260);
    }
    CdControlF('\t',(u_char *)0x0);
    if (null_00000000h_8009e230 != (code *)0x0) {
      (*null_00000000h_8009e230)(2,null_00000000h_8009e268);
    }
  }
  return;
}



undefined4 cd_read_retry(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  CdlLOC *pCVar3;
  int iVar4;
  uint uVar5;
  u_char local_18 [8];
  
  CdSyncCallback((CdlCB)0x0);
  CdReadyCallback((CdlCB)0x0);
  if ((null_00000000h_8009e264 & 1) != 0) {
    CdDataCallback((func *)0x0);
  }
  uVar1 = CdStatus();
  if ((uVar1 & 0x10) != 0) {
    uVar1 = VSync(-1);
    if ((uVar1 & 0x3f) == 0) {
      FUN_800850cc("CdRead: Shell open...\n");
    }
    CdControlF('\x01',(u_char *)0x0);
    null_00000000h_8009e250 = VSync(-1);
    null_00000000h_8009e248 = 0xffffffff;
    uVar2 = CDREAD_OBJ_5C0();
    return uVar2;
  }
  if (param_1 != 0) {
    FUN_800850cc("CdRead: retry...\n");
    CdControl('\t',(u_char *)0x0,(u_char *)0x0);
    pCVar3 = CdLastPos();
    iVar4 = CdControl('\x02',&pCVar3->minute,(u_char *)0x0);
    if (iVar4 == 0) {
      null_00000000h_8009e248 = 0xffffffff;
      uVar2 = CDREAD_OBJ_5C0();
      return uVar2;
    }
  }
  CdFlush();
  local_18[0] = (u_char)null_00000000h_8009e240;
  uVar5 = null_00000000h_8009e240 & 0xff;
  uVar1 = CdMode();
  if (((uVar5 != uVar1) || (param_1 != 0)) &&
     (iVar4 = CdControl('\x0e',local_18,(u_char *)0x0), iVar4 == 0)) {
    null_00000000h_8009e248 = 0xffffffff;
    uVar2 = CDREAD_OBJ_5C0();
    return uVar2;
  }
  pCVar3 = CdLastPos();
  null_00000000h_8009e254 = CdPosToInt(pCVar3);
  CdReadyCallback(cb_read);
  if ((null_00000000h_8009e264 & 1) != 0) {
    CdDataCallback(cb_data);
  }
  null_00000000h_8009e23c = null_00000000h_8009e238;
  CdControlF('\x06',(u_char *)0x0);
  null_00000000h_8009e248 = null_00000000h_8009e234;
  null_00000000h_8009e24c = VSync(-1);
  return null_00000000h_8009e248;
}



undefined4 CDREAD_OBJ_5C0(void)

{
  return null_00000000h_8009e248;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void CdReadBreak(void)

{
  if ((null_00000000h_8009e264 & 1) != 0) {
    CdDataSync(0);
  }
  null_00000000h_8009e248 = 0;
  CdSyncCallback(null_00000000h_8009e258);
  CdReadyCallback(null_00000000h_8009e25c);
  if ((null_00000000h_8009e264 & 1) != 0) {
    CdDataCallback(null_00000000h_8009e260);
  }
  CdControlF('\t',(u_char *)0x0);
  return;
}



int CdRead(int sectors,u_long *buf,int mode)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  
  if ((mode & 0x30U) == 0) {
    uVar1 = 0x200;
  }
  else {
    uVar1 = 0x249;
    if ((mode & 0x30U) != 0x20) {
      null_00000000h_8009e240 = mode;
      iVar2 = CDREAD_OBJ_6B8();
      return iVar2;
    }
  }
  null_00000000h_8009e240 = mode | 0x20;
  null_00000000h_8009e234 = sectors;
  null_00000000h_8009e238 = buf;
  null_00000000h_8009e244 = uVar1;
  null_00000000h_8009e258 = CdSyncCallback((CdlCB)0x0);
  null_00000000h_8009e25c = CdReadyCallback((CdlCB)0x0);
  if ((null_00000000h_8009e264 & 1) != 0) {
    null_00000000h_8009e260 = CdDataCallback((func *)0x0);
  }
  null_00000000h_8009e250 = VSync(-1);
  uVar3 = CdStatus();
  if ((uVar3 & 0xe0) != 0) {
    CdControlB('\t',(u_char *)0x0,(u_char *)0x0);
  }
  iVar2 = cd_read_retry(0);
  return (uint)(0 < iVar2);
}



bool CDREAD_OBJ_6B8(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 in_v0;
  uint uVar1;
  int iVar2;
  
  null_00000000h_8009e240 = null_00000000h_8009e240 | 0x20;
  null_00000000h_8009e234 = param_4;
  null_00000000h_8009e238 = param_2;
  null_00000000h_8009e244 = in_v0;
  null_00000000h_8009e258 = CdSyncCallback((CdlCB)0x0);
  null_00000000h_8009e25c = CdReadyCallback((CdlCB)0x0);
  if ((null_00000000h_8009e264 & 1) != 0) {
    null_00000000h_8009e260 = CdDataCallback((func *)0x0);
  }
  null_00000000h_8009e250 = VSync(-1);
  uVar1 = CdStatus();
  if ((uVar1 & 0xe0) != 0) {
    CdControlB('\t',(u_char *)0x0,(u_char *)0x0);
  }
  iVar2 = cd_read_retry(0);
  return 0 < iVar2;
}



int CdReadSync(int mode,u_char *result)

{
  int iVar1;
  int iVar2;
  
  while( true ) {
    iVar1 = VSync(-1);
    iVar2 = -1;
    if ((iVar1 <= null_00000000h_8009e250 + 0x4b0) &&
       ((null_00000000h_8009e248 < 0 ||
        (iVar1 = VSync(-1), iVar2 = null_00000000h_8009e248, null_00000000h_8009e24c + 0x3c < iVar1)
        ))) break;
    if ((mode != 0) || (iVar2 < 1)) {
      CdReady(1,result);
      return iVar2;
    }
  }
  cd_read_retry(1);
  iVar2 = CDREAD_OBJ_810();
  return iVar2;
}



int CDREAD_OBJ_810(void)

{
  int iVar1;
  int unaff_s0;
  int *unaff_s1;
  int unaff_s2;
  u_char *unaff_s3;
  
  while( true ) {
    do {
      if ((unaff_s2 != 0) || (unaff_s0 < 1)) {
        CdReady(1,unaff_s3);
        return unaff_s0;
      }
      iVar1 = VSync(-1);
      unaff_s0 = -1;
    } while (*unaff_s1 + 0x4b0 < iVar1);
    if ((unaff_s1[-2] < 0) || (iVar1 = VSync(-1), unaff_s1[-1] + 0x3c < iVar1)) break;
    unaff_s0 = unaff_s1[-2];
  }
  cd_read_retry(1);
  iVar1 = CDREAD_OBJ_810();
  return iVar1;
}



CdlCB CdReadCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = null_00000000h_8009e230;
  null_00000000h_8009e230 = func;
  return pCVar1;
}



int CdReadMode(int mode)

{
  int iVar1;
  
  iVar1 = null_00000000h_8009e264;
  null_00000000h_8009e264 = mode;
  return iVar1;
}



int CdRead2(long mode)

{
  int iVar1;
  u_char local_10 [8];
  
  local_10[0] = (u_char)mode;
  CdControl('\x0e',local_10,(u_char *)0x0);
  if ((mode & 0x100U) != 0) {
    if ((mode & 0x20U) != 0) {
      null____800acb6c = 0;
      iVar1 = CDREAD2_OBJ_50();
      return iVar1;
    }
    null____800acb6c = 1;
    CdDataCallback(data_ready_callback);
    CdReadyCallback(StCdInterrupt2);
  }
  iVar1 = CdControl('\x1b',(u_char *)0x0,(u_char *)0x0);
  return iVar1;
}



void CDREAD2_OBJ_50(void)

{
  CdDataCallback(data_ready_callback);
  CdReadyCallback(StCdInterrupt2);
  CdControl('\x1b',(u_char *)0x0,(u_char *)0x0);
  return;
}



// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

void StCdInterrupt2(void)

{
  StCdInterrupt();
  return;
}



int CdReadFile(char *file,u_long *addr,int nbyte)

{
  byte bVar1;
  CdlFILE *pCVar2;
  int iVar3;
  int iVar4;
  char acStack_6a [82];
  
  if (file != (char *)0x0) {
    strcpy(acStack_6a + 2,file);
    iVar3 = 0;
    while (acStack_6a[2] != '\0') {
      bVar1 = acStack_6a[iVar3 + 2];
      if (bVar1 - 0x61 < 0x1a) {
        acStack_6a[iVar3 + 2] = bVar1 - 0x20;
      }
      acStack_6a[2] = acStack_6a[iVar3 + 3];
      iVar3 = iVar3 + 1;
    }
    if (acStack_6a[iVar3] != ';') {
      strcat(acStack_6a + 2,";1");
    }
    pCVar2 = CdSearchFile((CdlFILE *)&DAT_800a8590,acStack_6a + 2);
    if (pCVar2 == (CdlFILE *)0x0) {
      return 0;
    }
  }
  if ((nbyte == 0) || (null____800a8594 < (uint)nbyte)) {
    nbyte = null____800a8594;
  }
  iVar3 = CdControl('\x02',&DAT_800a8590,(u_char *)0x0);
  iVar4 = nbyte + 0x7ff;
  if (iVar3 != 0) {
    if (iVar4 < 0) {
      iVar4 = nbyte + 0xffe;
    }
    iVar4 = iVar4 >> 0xb;
    iVar3 = CdRead(iVar4,addr,0x80);
    if (iVar3 != 0) {
      iVar3 = CdPosToInt((CdlLOC *)&DAT_800a8590);
      CdIntToPos(iVar3 + iVar4,(CdlLOC *)&DAT_800a8590);
      null____800a8594 = null____800a8594 - iVar4;
      iVar3 = CDREADE_OBJ_168();
      return iVar3;
    }
  }
  return 0;
}



void CDREADE_OBJ_168(void)

{
  return;
}



EXEC * CdReadExec(char *file)

{
  undefined4 *puVar1;
  int iVar2;
  EXEC *pEVar3;
  u_long *puVar4;
  u_long *puVar5;
  u_long *puVar6;
  u_long **ppuVar7;
  u_long **ppuVar8;
  undefined4 *puVar9;
  u_long auStack_808 [4];
  u_long *local_7f8 [508];
  
  iVar2 = CdReadFile(file,auStack_808,0x800);
  if (iVar2 != 0) {
    iVar2 = CdReadSync(0,(u_char *)0x0);
    if (iVar2 != 0) {
      return (EXEC *)0x0;
    }
    iVar2 = CdReadFile((char *)0x0,local_7f8[2],0);
    if (iVar2 != 0) {
      iVar2 = CdReadSync(0,(u_char *)0x0);
      if (iVar2 == 0) {
        ppuVar8 = local_7f8;
        puVar1 = &null____800a85a8;
        do {
          puVar9 = puVar1;
          ppuVar7 = ppuVar8;
          puVar4 = ppuVar7[1];
          puVar5 = ppuVar7[2];
          puVar6 = ppuVar7[3];
          *puVar9 = *ppuVar7;
          puVar9[1] = puVar4;
          puVar9[2] = puVar5;
          puVar9[3] = puVar6;
          ppuVar8 = ppuVar7 + 4;
          puVar1 = puVar9 + 4;
        } while (ppuVar8 != local_7f8 + 0xc);
        puVar4 = ppuVar7[5];
        puVar5 = ppuVar7[6];
        puVar9[4] = *ppuVar8;
        puVar9[5] = puVar4;
        puVar9[6] = puVar5;
        null____800a85c8 = 0;
        null____800a85cc = 0;
        return (EXEC *)&null____800a85a8;
      }
    }
  }
  pEVar3 = (EXEC *)CDREADE_OBJ_24C();
  return pEVar3;
}



void CDREADE_OBJ_24C(void)

{
  return;
}



char * strcat(char *param_1,char *param_2)

{
  char *pcVar1;
  
  pcVar1 = (char *)(*(code *)&LAB_000000a0)();
  return pcVar1;
}



char * strcpy(char *param_1,char *param_2)

{
  char *pcVar1;
  
  pcVar1 = (char *)(*(code *)&LAB_000000a0)();
  return pcVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void StClearRing(void)

{
  null____800ae3c4 = 0;
  null____800ae3bc = 0;
  null____800ae3b8 = 0;
  null____800acba4 = 0;
  init_ring_status(0,null____800ae3dc);
  null____800acb78 = 0;
  null____800acb64 = 0;
  null____800acb60 = 0;
  return;
}



// Possible C_003.OBJ/StUnSetRing

void FUN_8008668c(void)

{
  FUN_80086710();
  if (null_00000000h_8009df3c == 1) {
    DsDataCallback((func *)0x0);
    DsReadyCallback((DslCB)0x0);
  }
  else {
    CdDataCallback((func *)0x0);
    CdReadyCallback((CdlCB)0x0);
  }
  *PTR_CDROM_REG0_8009e27c = 0;
  *PTR_CDROM_REG3_8009e288 = 0;
  FUN_80086720();
  return;
}



// Possible A36.OBJ/EnterCriticalSection

void FUN_80086710(void)

{
  syscall(0);
  return;
}



// Possible A37.OBJ/ExitCriticalSection

void FUN_80086720(void)

{
  syscall(0);
  return;
}



void data_ready_callback(void)

{
  uint uVar1;
  uint uVar2;
  undefined2 *puVar3;
  
  puVar3 = (undefined2 *)(null____800ae3d8 + null____800ae3bc * 0x20);
  *puVar3 = 2;
  uVar1 = (int)puVar3 + 0x1fU & 3;
  uVar2 = (uint)(puVar3 + 0xe) & 3;
  null____800a85e8 =
       (*(int *)(((int)puVar3 + 0x1fU) - uVar1) << (3 - uVar1) * 8 |
       0xffffffffU >> (uVar1 + 1) * 8 & 2) & -1 << (4 - uVar2) * 8 |
       *(uint *)((int)(puVar3 + 0xe) - uVar2) >> uVar2 * 8;
  null____800a85ec = *(undefined4 *)(puVar3 + 4);
  null____800ae3bc = null____800ae3b8;
  if (null____800acb70 != (code *)0x0) {
    (*null____800acb70)();
  }
  null____800acba4 = 0;
  return;
}



int StGetBackloc(CdlLOC *loc)

{
  int iVar1;
  
  if (null____800acb6c == 0) {
    iVar1 = CdPosToInt((CdlLOC *)&null____800a85e8);
    CdIntToPos(iVar1 + 1,loc);
    iVar1 = C_004_OBJ_DC();
    return iVar1;
  }
  return -1;
}



void C_004_OBJ_DC(void)

{
  return;
}



void StSetStream(u_long mode,u_long start_frame,u_long end_frame,func1 *func1,func2 *func2)

{
  FUN_80086a60(1);
  null____800ae3c8 = 0;
  null____800acb70 = func1;
  null____800acb68 = mode & 1;
  null____800acb9c = 0;
  null____800acb94 = 0;
  null____800acb64 = 0;
  null____800acb60 = 0;
  null____800acb74 = func2;
  return;
}



u_long StFreeRing(u_long *base)

{
  int iVar1;
  u_long uVar2;
  int iVar3;
  int iVar4;
  short *psVar5;
  int iVar6;
  
  iVar1 = ((int)base - (null____800ae3d8 + null____800ae3dc * 0x20) >> 2) / 0x1f8;
  psVar5 = (short *)(null____800ae3d8 + iVar1 * 0x20);
  if (*psVar5 == 4) {
    iVar3 = (int)psVar5[3];
    iVar6 = 0;
    if (0 < iVar3) {
      do {
        iVar4 = iVar6 + iVar1;
        iVar6 = iVar6 + 1;
        *(undefined2 *)(null____800ae3d8 + iVar4 * 0x20) = 0;
      } while (iVar6 < iVar3);
    }
    null____800ae3c4 = iVar6 + iVar1;
    return 0;
  }
  uVar2 = C_007_OBJ_AC();
  return uVar2;
}



void C_007_OBJ_AC(void)

{
  return;
}



void init_ring_status(int param_1,uint param_2)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = 0;
  if (param_2 != 0) {
    do {
      iVar1 = uVar2 + param_1;
      uVar2 = uVar2 + 1;
      *(undefined4 *)(null____800ae3d8 + iVar1 * 0x20) = 0;
    } while (uVar2 < param_2);
  }
  return;
}



u_long StGetNext(u_long **addr,u_long **header)

{
  bool bVar1;
  u_long *puVar2;
  
  puVar2 = (u_long *)(null____800ae3d8 + null____800ae3c4 * 0x20);
  if ((short)*puVar2 == 1) {
    null____800ae3c4 = 0;
    if (null____800ae3cc != 0) {
      *(short *)puVar2 = 0;
    }
    puVar2 = (u_long *)(null____800ae3d8 + null____800ae3c4 * 0x20);
  }
  bVar1 = (short)*puVar2 != 2;
  if (!bVar1) {
    *(short *)puVar2 = 4;
    *addr = (u_long *)(null____800ae3d8 + null____800ae3dc * 0x20 + null____800ae3c4 * 0x7e0);
    *header = puVar2;
  }
  return (uint)bVar1;
}



// Possible C_010.OBJ/StSetMask

void FUN_80086a60(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  null____800ae3d0 = param_1;
  null____800acb98 = param_2;
  null____800ae3cc = param_3;
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void StCdInterrupt(void)

{
  int iVar1;
  undefined4 uVar2;
  uint *puVar3;
  uint uVar4;
  short *psVar5;
  uint local_18;
  uint uStack_14;
  byte local_10 [8];
  
  if (null____800acba4 != 1) {
    if ((null____800acb68 != 0) && ((*(uint *)PTR_DMA_MDEC_OUT_CHCR_8009e30c & 0x1000000) != 0)) {
      null____800acb78 = 1;
      if (null____800ae3c8 != 0) {
        null____800acbb0 = null____800acbb0 + 1;
      }
      null_00000000h_8009e334 = 1;
      C_011_OBJ_960();
      return;
    }
    iVar1 = CdReady(1,local_10);
    if (iVar1 != 5) {
      if ((local_10[0] & 4) != 0) {
        null_00000000h_8009e334 = 3;
        C_011_OBJ_960();
        return;
      }
      null____800a85f0 = null____800ae3d8 + null____800ae3b8 * 0x10;
      if (*null____800a85f0 != 0) {
        if (null____800ae3c8 != 0) {
          null____800acbb0 = null____800acbb0 + 1;
        }
        null_00000000h_8009e334 = 4;
        C_011_OBJ_960();
        return;
      }
      *PTR_CDROM_REG0_8009e2ec = 0;
      *PTR_CDROM_REG3_8009e2f8 = 0;
      *PTR_CDROM_REG0_8009e2ec = 0;
      *PTR_CDROM_REG3_8009e2f8 = 0x80;
      *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x20943;
      *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1323;
      if (null____800acb6c == 0) {
        puVar3 = &local_18;
        do {
          *(undefined *)puVar3 = *PTR_CDROM_REG2_8009e2f4;
          puVar3 = (uint *)((int)puVar3 + 1);
        } while (puVar3 < &uStack_14);
        uVar4 = 0;
        do {
          uVar4 = uVar4 + 1;
        } while (uVar4 < 8);
      }
      if (null____800ae3c8 != 0) {
        mem2mem(null____800a85f0,null____800ae3c8 + null____800acbb0 * 0x800,8,0);
        C_011_OBJ_270();
        return;
      }
      dma_execute(3,null____800a85f0,0,8,0x11000000,0,0);
      psVar5 = null____800a85f0;
      uVar4 = *(uint *)PTR_DMA_CDROM_CHCR_8009e31c;
      while ((uVar4 & 0x1000000) != 0) {
        uVar4 = *(uint *)PTR_DMA_CDROM_CHCR_8009e31c;
      }
      uVar4 = (int)null____800a85f0 + 0x1fU & 3;
      puVar3 = (uint *)(((int)null____800a85f0 + 0x1fU) - uVar4);
      *puVar3 = *puVar3 & -1 << (uVar4 + 1) * 8 | local_18 >> (3 - uVar4) * 8;
      uVar4 = (uint)(psVar5 + 0xe) & 3;
      puVar3 = (uint *)((int)(psVar5 + 0xe) - uVar4);
      *puVar3 = *puVar3 & 0xffffffffU >> (4 - uVar4) * 8 | local_18 << uVar4 * 8;
      *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x20843;
      *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
      if ((null____800ae3d0 == 1) && (null____800acb98 != 0)) {
        if (null____800acb98 != (ushort)null____800a85f0[4]) {
          *null____800a85f0 = 0;
          if (null____800ae3c8 == 0) {
            return;
          }
          null____800acbb0 = null____800acbb0 + 1;
          C_011_OBJ_960();
          return;
        }
        null____800ae3d0 = 0;
      }
      if ((*null____800a85f0 != 0x160) ||
         (((ushort)null____800a85f0[1] >> 10 & 0x1f) != null____800acb9c)) {
        if (null____800ae3c8 == 0) {
          null_00000000h_8009e334 = 5;
          *null____800a85f0 = 0;
          C_011_OBJ_960();
          return;
        }
        null____800acbb0 = 0;
        C_011_OBJ_3D0();
        return;
      }
      if (((int)null____800acb64 != (uint)(ushort)null____800a85f0[2]) ||
         ((null____800acb60 != 0 && (null____800acb60 != (ushort)null____800a85f0[4])))) {
        null____800acb60 = 0;
        null____800acb64 = 0;
        init_ring_status(null____800ae3bc,null____800ae3b8 - null____800ae3bc);
        null____800ae3b8 = null____800ae3bc;
        *null____800a85f0 = 0;
        if (null____800ae3c8 != 0) {
          null____800acbb0 = null____800acbb0 + 1;
        }
        null_00000000h_8009e334 = 6;
        C_011_OBJ_960();
        return;
      }
      if (null____800a85f0[2] == 0) {
        null____800acb60 = (uint)(ushort)null____800a85f0[4];
        null____800acb64 = 0;
        if ((null____800ae3cc != 0) && (null____800ae3cc <= null____800acb60)) {
          null____800acb60 = 0;
          null____800acb64 = 0;
          init_ring_status(null____800ae3bc,null____800ae3b8 - null____800ae3bc);
          null____800ae3b8 = null____800ae3bc;
          *null____800a85f0 = 0;
          null____800ae3d0 = 1;
          if (null____800acb74 != (code *)0x0) {
            (*null____800acb74)();
          }
          if (null____800ae3c8 != 0) {
            null____800acbb0 = null____800acbb0 + 1;
          }
          null_00000000h_8009e334 = 7;
          C_011_OBJ_960();
          return;
        }
        if ((null____800ae3dc - null____800ae3b8) - 1U < (uint)(ushort)null____800a85f0[3]) {
          if (null____800ae3cc == 0) {
            *null____800a85f0 = 1;
            null____800ae3d0 = 1;
            if (null____800acb74 != (code *)0x0) {
              (*null____800acb74)();
            }
            if (null____800ae3c8 != 0) {
              null____800acbb0 = null____800acbb0 + 1;
            }
            null_00000000h_8009e334 = 8;
            C_011_OBJ_960();
            return;
          }
          if (*null____800ae3d8 != 0) {
            *null____800a85f0 = 0;
            if (null____800ae3c8 != 0) {
              null____800acbb0 = null____800acbb0 + 1;
            }
            null_00000000h_8009e334 = 9;
            C_011_OBJ_960();
            return;
          }
          *null____800a85f0 = 1;
          uVar4 = 0;
          null____800ae3b8 = 0;
          psVar5 = null____800ae3d8;
          do {
            uVar2 = *(undefined4 *)null____800a85f0;
            null____800a85f0 = null____800a85f0 + 2;
            uVar4 = uVar4 + 1;
            *(undefined4 *)psVar5 = uVar2;
            psVar5 = psVar5 + 2;
          } while (uVar4 < 8);
          null____800a85f0 = null____800ae3d8;
        }
        null____800ae3bc = null____800ae3b8;
      }
      null_00000000h_8009e334 = 10;
      null____800acb64 = null____800acb64 + 1;
      null____800ae3d4 = null____800ae3d8 + null____800ae3dc * 0x10 + null____800ae3b8 * 0x3f0;
      if (null____800acb68 != 0) {
        *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x20943;
        *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1323;
        C_011_OBJ_7BC();
        return;
      }
      *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x21020843;
      if ((ushort)null____800a85f0[3] - 1 == (uint)(ushort)null____800a85f0[2]) {
        null____800acba4 = 1;
        if (null____800ae3c8 == 0) {
          dma_execute(3,null____800ae3d4,0,0x1f8,0x11400100,1,0);
          null____800acb64 = 0;
          null____800acb60 = 0;
          null____800acb9c = null____800acb94;
          C_011_OBJ_900();
          return;
        }
        mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,1);
        null____800acbb0 = null____800acbb0 + 1;
        C_011_OBJ_85C();
        return;
      }
      if (null____800ae3c8 != 0) {
        mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,0);
        null____800acbb0 = null____800acbb0 + 1;
        C_011_OBJ_900();
        return;
      }
      dma_execute(3,null____800ae3d4,0,0x1f8,0x11400100,0,0);
      *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
      *null____800a85f0 = 3;
      null____800ae3b8 = null____800ae3b8 + 1;
      if ((null____800ae3c8 != 0) && (null____800acba4 != 0)) {
        data_ready_callback();
      }
    }
  }
  return;
}



void C_011_OBJ_270(void)

{
  uint *puVar1;
  uint uVar2;
  undefined4 uVar3;
  short *psVar4;
  uint in_stack_00000028;
  
  psVar4 = null____800a85f0;
  uVar2 = *(uint *)PTR_DMA_CDROM_CHCR_8009e31c;
  while ((uVar2 & 0x1000000) != 0) {
    uVar2 = *(uint *)PTR_DMA_CDROM_CHCR_8009e31c;
  }
  uVar2 = (int)null____800a85f0 + 0x1fU & 3;
  puVar1 = (uint *)(((int)null____800a85f0 + 0x1fU) - uVar2);
  *puVar1 = *puVar1 & -1 << (uVar2 + 1) * 8 | in_stack_00000028 >> (3 - uVar2) * 8;
  uVar2 = (uint)(psVar4 + 0xe) & 3;
  puVar1 = (uint *)((int)(psVar4 + 0xe) - uVar2);
  *puVar1 = *puVar1 & 0xffffffffU >> (4 - uVar2) * 8 | in_stack_00000028 << uVar2 * 8;
  *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x20843;
  *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
  if ((null____800ae3d0 == 1) && (null____800acb98 != 0)) {
    if (null____800acb98 != (ushort)null____800a85f0[4]) {
      *null____800a85f0 = 0;
      if (null____800ae3c8 == 0) {
        return;
      }
      null____800acbb0 = null____800acbb0 + 1;
      C_011_OBJ_960();
      return;
    }
    null____800ae3d0 = 0;
  }
  if ((*null____800a85f0 != 0x160) ||
     (((ushort)null____800a85f0[1] >> 10 & 0x1f) != null____800acb9c)) {
    if (null____800ae3c8 == 0) {
      null_00000000h_8009e334 = 5;
      *null____800a85f0 = 0;
      C_011_OBJ_960();
      return;
    }
    null____800acbb0 = 0;
    C_011_OBJ_3D0();
    return;
  }
  if (((int)null____800acb64 != (uint)(ushort)null____800a85f0[2]) ||
     ((null____800acb60 != 0 && (null____800acb60 != (ushort)null____800a85f0[4])))) {
    null____800acb60 = 0;
    null____800acb64 = 0;
    init_ring_status(null____800ae3bc,null____800ae3b8 - null____800ae3bc);
    null____800ae3b8 = null____800ae3bc;
    *null____800a85f0 = 0;
    if (null____800ae3c8 != 0) {
      null____800acbb0 = null____800acbb0 + 1;
    }
    null_00000000h_8009e334 = 6;
    C_011_OBJ_960();
    return;
  }
  if (null____800a85f0[2] == 0) {
    null____800acb60 = (uint)(ushort)null____800a85f0[4];
    null____800acb64 = 0;
    if ((null____800ae3cc != 0) && (null____800ae3cc <= null____800acb60)) {
      null____800acb60 = 0;
      null____800acb64 = 0;
      init_ring_status(null____800ae3bc,null____800ae3b8 - null____800ae3bc);
      null____800ae3b8 = null____800ae3bc;
      *null____800a85f0 = 0;
      null____800ae3d0 = 1;
      if (null____800acb74 != (code *)0x0) {
        (*null____800acb74)();
      }
      if (null____800ae3c8 != 0) {
        null____800acbb0 = null____800acbb0 + 1;
      }
      null_00000000h_8009e334 = 7;
      C_011_OBJ_960();
      return;
    }
    if ((null____800ae3dc - null____800ae3b8) - 1U < (uint)(ushort)null____800a85f0[3]) {
      if (null____800ae3cc == 0) {
        *null____800a85f0 = 1;
        null____800ae3d0 = 1;
        if (null____800acb74 != (code *)0x0) {
          (*null____800acb74)();
        }
        if (null____800ae3c8 != 0) {
          null____800acbb0 = null____800acbb0 + 1;
        }
        null_00000000h_8009e334 = 8;
        C_011_OBJ_960();
        return;
      }
      if (*null____800ae3d8 != 0) {
        *null____800a85f0 = 0;
        if (null____800ae3c8 != 0) {
          null____800acbb0 = null____800acbb0 + 1;
        }
        null_00000000h_8009e334 = 9;
        C_011_OBJ_960();
        return;
      }
      *null____800a85f0 = 1;
      uVar2 = 0;
      null____800ae3b8 = 0;
      psVar4 = null____800ae3d8;
      do {
        uVar3 = *(undefined4 *)null____800a85f0;
        null____800a85f0 = null____800a85f0 + 2;
        uVar2 = uVar2 + 1;
        *(undefined4 *)psVar4 = uVar3;
        psVar4 = psVar4 + 2;
      } while (uVar2 < 8);
      null____800a85f0 = null____800ae3d8;
    }
    null____800ae3bc = null____800ae3b8;
  }
  null_00000000h_8009e334 = 10;
  null____800acb64 = null____800acb64 + 1;
  null____800ae3d4 = null____800ae3d8 + null____800ae3dc * 0x10 + null____800ae3b8 * 0x3f0;
  if (null____800acb68 != 0) {
    *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x20943;
    *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1323;
    C_011_OBJ_7BC();
    return;
  }
  *(undefined4 *)PTR_CDROM_DELAY_8009e2fc = 0x21020843;
  if ((ushort)null____800a85f0[3] - 1 != (uint)(ushort)null____800a85f0[2]) {
    if (null____800ae3c8 == 0) {
      dma_execute(3,null____800ae3d4,0,0x1f8);
      *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
      *null____800a85f0 = 3;
      null____800ae3b8 = null____800ae3b8 + 1;
      if ((null____800ae3c8 != 0) && (null____800acba4 != 0)) {
        data_ready_callback();
      }
      return;
    }
    mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,0);
    null____800acbb0 = null____800acbb0 + 1;
    C_011_OBJ_900();
    return;
  }
  null____800acba4 = 1;
  if (null____800ae3c8 == 0) {
    dma_execute(3,null____800ae3d4,0,0x1f8);
    null____800acb64 = 0;
    null____800acb60 = 0;
    null____800acb9c = null____800acb94;
    C_011_OBJ_900();
    return;
  }
  mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,1);
  null____800acbb0 = null____800acbb0 + 1;
  C_011_OBJ_85C();
  return;
}



void C_011_OBJ_3D0(void)

{
  null_00000000h_8009e334 = 5;
  *null____800a85f0 = 0;
  C_011_OBJ_960();
  return;
}



void C_011_OBJ_7BC(void)

{
  if ((ushort)null____800a85f0[3] - 1 != (uint)(ushort)null____800a85f0[2]) {
    if (null____800ae3c8 != 0) {
      mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,0);
      null____800acbb0 = null____800acbb0 + 1;
      C_011_OBJ_900();
      return;
    }
    dma_execute(3,null____800ae3d4,0,0x1f8);
    *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
    *null____800a85f0 = 3;
    null____800ae3b8 = null____800ae3b8 + 1;
    if ((null____800ae3c8 != 0) && (null____800acba4 != 0)) {
      data_ready_callback();
    }
    return;
  }
  null____800acba4 = 1;
  if (null____800ae3c8 != 0) {
    mem2mem(null____800ae3d4,null____800ae3c8 + null____800acbb0 * 0x800 + 0x20,0x1f8,1);
    null____800acbb0 = null____800acbb0 + 1;
    C_011_OBJ_85C();
    return;
  }
  dma_execute(3,null____800ae3d4,0,0x1f8);
  null____800acb64 = 0;
  null____800acb60 = 0;
  null____800acb9c = null____800acb94;
  C_011_OBJ_900();
  return;
}



void C_011_OBJ_85C(void)

{
  null____800acb64 = 0;
  null____800acb60 = 0;
  null____800acb9c = null____800acb94;
  C_011_OBJ_900();
  return;
}



void C_011_OBJ_900(void)

{
  *(undefined4 *)PTR_COMMON_DELAY_8009e300 = 0x1325;
  *null____800a85f0 = 3;
  null____800ae3b8 = null____800ae3b8 + 1;
  if ((null____800ae3c8 != 0) && (null____800acba4 != 0)) {
    data_ready_callback();
  }
  return;
}



void C_011_OBJ_960(void)

{
  return;
}



void mem2mem(undefined4 *param_1,undefined4 *param_2,uint param_3)

{
  undefined4 uVar1;
  uint uVar2;
  
  uVar2 = 0;
  if (param_3 != 0) {
    do {
      uVar1 = *param_2;
      param_2 = param_2 + 1;
      uVar2 = uVar2 + 1;
      *param_1 = uVar1;
      param_1 = param_1 + 1;
    } while (uVar2 < param_3);
  }
  return;
}



void dma_execute(uint param_1,dword param_2,int param_3,uint param_4,dword param_5,char param_6)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  
  iVar3 = 0;
  uVar2 = (&DMA_MDEC_IN_CHCR)[param_1 * 4];
  while ((uVar2 & 0x1000000) != 0) {
    if (iVar3 == 0x10000) {
      printf("DMA STATUS ERROR %x\n",(&DMA_MDEC_IN_CHCR)[param_1 * 4]);
      C_011_OBJ_A30();
      return;
    }
    iVar3 = iVar3 + 1;
    uVar2 = (&DMA_MDEC_IN_CHCR)[param_1 * 4];
  }
  uVar2 = 1 << (param_1 & 0x1f);
  if (param_6 != '\x01') {
    PTR_DMA_DICR_8009e308[2] = PTR_DMA_DICR_8009e308[2] & ~(byte)uVar2;
    *(uint *)PTR_DMA_DPCR_8009e304 = *(uint *)PTR_DMA_DPCR_8009e304 | 1 << (param_1 * 4 + 3 & 0x1f);
    (&DMA_MDEC_IN_MADR)[param_1 * 4] = param_2;
    (&DMA_MDEC_IN_BCR)[param_1 * 4] = param_3 << 0x10 | param_4;
    bVar1 = *PTR_CDROM_REG0_8009e2ec;
    while ((bVar1 & 0x40) == 0) {
      bVar1 = *PTR_CDROM_REG0_8009e2ec;
    }
    (&DMA_MDEC_IN_CHCR)[param_1 * 4] = param_5;
    return;
  }
  C_011_OBJ_A90((byte)PTR_DMA_DICR_8009e308[2] | uVar2);
  return;
}



void C_011_OBJ_A30(void)

{
  byte bVar1;
  int in_v0;
  uint uVar2;
  uint unaff_s0;
  dword unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  dword unaff_s5;
  
  uVar2 = 1 << (unaff_s0 & 0x1f);
  if (in_v0 != 1) {
    PTR_DMA_DICR_8009e308[2] = PTR_DMA_DICR_8009e308[2] & ~(byte)uVar2;
    *(uint *)PTR_DMA_DPCR_8009e304 = *(uint *)PTR_DMA_DPCR_8009e304 | 1 << (unaff_s0 * 4 + 3 & 0x1f)
    ;
    (&DMA_MDEC_IN_MADR)[unaff_s0 * 4] = unaff_s2;
    (&DMA_MDEC_IN_BCR)[unaff_s0 * 4] = unaff_s3 << 0x10 | unaff_s4;
    bVar1 = *PTR_CDROM_REG0_8009e2ec;
    while ((bVar1 & 0x40) == 0) {
      bVar1 = *PTR_CDROM_REG0_8009e2ec;
    }
    (&DMA_MDEC_IN_CHCR)[unaff_s0 * 4] = unaff_s5;
    return;
  }
  C_011_OBJ_A90((byte)PTR_DMA_DICR_8009e308[2] | uVar2);
  return;
}



void C_011_OBJ_A90(undefined1 param_1)

{
  byte bVar1;
  int in_v1;
  int unaff_s0;
  dword unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  dword unaff_s5;
  
  *(undefined1 *)(in_v1 + 2) = param_1;
  *(uint *)PTR_DMA_DPCR_8009e304 = *(uint *)PTR_DMA_DPCR_8009e304 | 1 << (unaff_s0 * 4 + 3U & 0x1f);
  (&DMA_MDEC_IN_MADR)[unaff_s0 * 4] = unaff_s2;
  (&DMA_MDEC_IN_BCR)[unaff_s0 * 4] = unaff_s3 << 0x10 | unaff_s4;
  bVar1 = *PTR_CDROM_REG0_8009e2ec;
  while ((bVar1 & 0x40) == 0) {
    bVar1 = *PTR_CDROM_REG0_8009e2ec;
  }
  (&DMA_MDEC_IN_CHCR)[unaff_s0 * 4] = unaff_s5;
  return;
}



DslCB DsSyncCallback(DslCB func)

{
  DslCB pDVar1;
  
  pDVar1 = null____800acba8;
  null____800acba8 = func;
  return pDVar1;
}



DslCB DsReadyCallback(DslCB func)

{
  DslCB pDVar1;
  
  pDVar1 = null____800acbac;
  null____800acbac = func;
  return pDVar1;
}



_func_90 * DsDataCallback(func *func)

{
  _func_90 *p_Var1;
  
  p_Var1 = (_func_90 *)DMACallback(3,func);
  return p_Var1;
}



void PadInit(int mode)

{
  null____800a85f8 = 0xffffffff;
  null____800acba0 = mode;
  ResetCallback();
  PAD_init(0x20000001,&null____800a85f8);
  ChangeClearPAD(0);
  return;
}



u_long PadRead(int id)

{
  PAD_dr();
  return ~null____800a85f8;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

void PadStop(void)

{
  StopPAD();
  return;
}



void PAD_dr(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void ChangeClearPAD(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



// Possible GS_101.OBJ/GsSetNearClip
// Possible GS_102.OBJ/GsSetFarClip
// Possible GS_124.OBJ/GsSetWorkBase

void SetInitPadFlag(undefined4 param_1)

{
  null_00000000h_8009e33c = param_1;
  return;
}



// Possible GS_125.OBJ/GsGetWorkBase

undefined4 ReadInitPadFlag(void)

{
  return null_00000000h_8009e33c;
}



void PAD_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  _remove_ChgclrPAD();
  FUN_80086710();
  _patch_pad();
  FUN_80086720();
  ChangeClearPAD(0);
  SetPatchPad();
  PAD_init2(param_1,param_2,param_3,param_4);
  _send_pad();
  null_00000000h_8009e33c = 1;
  return;
}



void InitPAD(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  _remove_ChgclrPAD();
  FUN_80086710();
  _patch_pad();
  FUN_80086720();
  ChangeClearPAD(0);
  SetPatchPad();
  InitPAD2(param_1,param_2,param_3,param_4);
  _send_pad();
  null_00000000h_8009e33c = 1;
  return;
}



void StartPAD(void)

{
  StartPAD2();
  ChangeClearPAD(0);
  EnablePAD();
  return;
}



void StopPAD(void)

{
  DisablePAD();
  StopPAD2();
  RemovePatchPad();
  null_00000000h_8009e33c = 0;
  return;
}



undefined4 SetPatchPad(void)

{
  FUN_80086710();
  null____800a8604 = _Pad1;
  null____800a8608 = _IsVSync;
  null____800a8600 = 0;
  null____800a860c = 0;
  SysDeqIntRP(1,&null____800a8600);
  SysEnqIntRP(1,&null____800a8600);
  FUN_80086720();
  return 1;
}



undefined4 RemovePatchPad(void)

{
  FUN_80086710();
  SysDeqIntRP(1,&null____800a8600);
  FUN_80086720();
  return 1;
}



undefined4 _Pad1(void)

{
  int local_10;
  
  *(undefined2 *)(PTR_JOY_MCD_DATA_8009e340 + 10) = 0;
  local_10 = 9;
  do {
    local_10 = local_10 + -1;
  } while (local_10 != -1);
  return 0;
}



undefined4 _IsVSync(void)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if (((*(uint *)(PTR_I_STAT_8009e344 + 4) & 1) != 0) &&
     (uVar1 = 1, (*(uint *)PTR_I_STAT_8009e344 & 1) == 0)) {
    uVar1 = 0;
  }
  return uVar1;
}



void InitPAD2(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void StartPAD2(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void StopPAD2(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void PAD_init2(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void SysEnqIntRP(void)

{
  (*(code *)&LAB_000000c0)();
  return;
}



void SysDeqIntRP(void)

{
  (*(code *)&LAB_000000c0)();
  return;
}



void EnablePAD(void)

{
                    // WARNING: Could not recover jumptable at 0x80087a70. Too many branches
                    // WARNING: Treating indirect jump as call
  (*null____800a612c)();
  return;
}



void DisablePAD(void)

{
                    // WARNING: Could not recover jumptable at 0x80087a84. Too many branches
                    // WARNING: Treating indirect jump as call
  (*null____800a6130)();
  return;
}



void _patch_pad(void)

{
  int iVar1;
  int iVar2;
  undefined4 unaff_retaddr;
  
  null____800a6124 = unaff_retaddr;
  FUN_80086710();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar1 = *(int *)(iVar1 + 0x16c);
  null____800a612c = iVar1 + 0x884;
  null____800a6130 = iVar1 + 0x894;
  iVar2 = 0xb;
  do {
    iVar2 = iVar2 + -1;
    *(undefined4 *)(iVar1 + 0x594) = 0;
    iVar1 = iVar1 + 4;
  } while (iVar2 != 0);
  FlushCache();
  return;
}



void FlushCache(void)

{
  (*(code *)&LAB_000000a0)();
  return;
}



void _SendPAD(void)

{
  (*null____800a6138)();
  return;
}



int _send_pad(void)

{
  int iVar1;
  undefined4 uVar2;
  code *pcVar3;
  undefined4 unaff_retaddr;
  
  null____800a6134 = unaff_retaddr;
  FUN_80086710();
  iVar1 = (*(code *)&SUB_000000b0)();
  null____800a6138 = *(int *)(iVar1 + 0x16c) + 0x7a0;
  pcVar3 = (code *)&SENDPAD_OBJ_A4;
  iVar1 = *(int *)(iVar1 + 0x16c);
  do {
    uVar2 = *(undefined4 *)pcVar3;
    pcVar3 = pcVar3 + 4;
    *(undefined4 *)(iVar1 + 0x3d8) = uVar2;
    *(undefined4 *)(iVar1 + 0x4e0) = uVar2;
    iVar1 = iVar1 + 4;
  } while (pcVar3 != SENDPAD_OBJ_B4);
  FlushCache();
  FUN_80086720();
  return null____800a6138;
}



void SENDPAD_OBJ_B4(void)

{
  int iVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 unaff_retaddr;
  
  null____800a6144 = unaff_retaddr;
  FUN_80086710();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar3 = 9;
  puVar2 = (undefined4 *)(*(int *)(iVar1 + 0x16c) + 0x62c);
  do {
    iVar3 = iVar3 + -1;
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  } while (iVar3 != 0);
  FlushCache();
  FUN_80086720();
  return;
}



void _remove_ChgclrPAD(void)

{
  int iVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 unaff_retaddr;
  
  null____800a6144 = unaff_retaddr;
  FUN_80086710();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar3 = 9;
  puVar2 = (undefined4 *)(*(int *)(iVar1 + 0x16c) + 0x62c);
  do {
    iVar3 = iVar3 + -1;
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  } while (iVar3 != 0);
  FlushCache();
  FUN_80086720();
  return;
}



int VSync(int mode)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  uVar1 = *(int *)PTR_TMR_HRETRACE_VAL_8009e354 - null_00000000h_8009e358;
  if (mode < 0) {
    iVar2 = VSYNC_OBJ_130();
    return iVar2;
  }
  if (mode != 1) {
    if (0 < mode) {
      iVar2 = VSYNC_OBJ_84();
      return iVar2;
    }
    iVar2 = 0;
    if (0 < mode) {
      iVar2 = mode + -1;
    }
    v_wait(null_00000000h_8009e35c,iVar2);
    uVar3 = *(uint *)PTR_GPU_REG1_8009e350;
    v_wait(null_00000000h_8009f474 + 1,1);
    if (((uVar3 & 0x400000) != 0) && (-1 < (int)(uVar3 ^ *(uint *)PTR_GPU_REG1_8009e350))) {
      do {
      } while (((uVar3 ^ *(uint *)PTR_GPU_REG1_8009e350) & 0x80000000) == 0);
    }
    null_00000000h_8009e35c = null_00000000h_8009f474;
    null_00000000h_8009e358 = *(int *)PTR_TMR_HRETRACE_VAL_8009e354;
  }
  return uVar1 & 0xffff;
}



void VSYNC_OBJ_84(void)

{
  uint uVar1;
  
  v_wait();
  uVar1 = *(uint *)PTR_GPU_REG1_8009e350;
  v_wait(null_00000000h_8009f474 + 1,1);
  if (((uVar1 & 0x400000) != 0) && (-1 < (int)(uVar1 ^ *(uint *)PTR_GPU_REG1_8009e350))) {
    do {
    } while (((uVar1 ^ *(uint *)PTR_GPU_REG1_8009e350) & 0x80000000) == 0);
  }
  null_00000000h_8009e35c = null_00000000h_8009f474;
  null_00000000h_8009e358 = *(undefined4 *)PTR_TMR_HRETRACE_VAL_8009e354;
  return;
}



void VSYNC_OBJ_130(void)

{
  return;
}



void v_wait(int param_1,int param_2)

{
  param_2 = param_2 << 0xf;
  do {
    if (param_1 <= null_00000000h_8009f474) {
      return;
    }
    param_2 = param_2 + -1;
  } while (param_2 != -1);
  FUN_800850cc("VSync: timeout\n");
  ChangeClearPAD(0);
  ChangeClearRCnt(3,0);
  VSYNC_OBJ_1D4();
  return;
}



void VSYNC_OBJ_1D4(void)

{
  return;
}



void ChangeClearRCnt(void)

{
  (*(code *)&LAB_000000c0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int ResetCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_8009f440 + 0xc))();
  return iVar1;
}



void InterruptCallback(void)

{
  (**(code **)(PTR_PTR_8009f440 + 8))();
  return;
}



void DMACallback(void)

{
  (**(code **)(PTR_PTR_8009f440 + 4))();
  return;
}



int VSyncCallback(f *f)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_8009f440 + 0x14))(4,f);
  return iVar1;
}



void VSyncCallbacks(void)

{
  (**(code **)(PTR_PTR_8009f440 + 0x14))();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int StopCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_8009f440 + 0x10))();
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int RestartCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_8009f440 + 0x18))();
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CheckCallback(void)

{
  return (uint)null_0000h_8009e3ba;
}



undefined2 GetIntrMask(void)

{
  return *(undefined2 *)PTR_I_MASK_8009f448;
}



undefined2 SetIntrMask(undefined2 param_1)

{
  undefined2 uVar1;
  
  uVar1 = *(undefined2 *)PTR_I_MASK_8009f448;
  *(undefined2 *)PTR_I_MASK_8009f448 = param_1;
  return uVar1;
}



undefined2 * startIntr(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  int iVar4;
  undefined4 uVar5;
  
  puVar2 = PTR_I_MASK_8009f448;
  puVar1 = PTR_I_STAT_8009f444;
  puVar3 = (undefined2 *)0x0;
  if (null_0000h_8009e3b8 == 0) {
    *(undefined2 *)PTR_I_MASK_8009f448 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(undefined4 *)PTR_DMA_DPCR_8009f44c = 0x33333333;
    memclr(&null_0000h_8009e3b8,0x41a);
    iVar4 = setjmp((__jmp_buf_tag *)&DAT_8009e3f0);
    if (iVar4 != 0) {
      trapIntr();
    }
    null_00000000h_8009e3f4 = &DAT_8009f3d0;
    HookEntryInt(&DAT_8009e3f0);
    null_0000h_8009e3b8 = 1;
    uVar5 = startIntrVSync();
    *(undefined4 *)(PTR_PTR_8009f440 + 0x14) = uVar5;
    uVar5 = startIntrDMA();
    *(undefined4 *)(PTR_PTR_8009f440 + 4) = uVar5;
    FUN_80088540();
    puVar3 = &null_0000h_8009e3b8;
    FUN_80086720();
  }
  return puVar3;
}



void trapIntr(void)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined4 *puVar5;
  
  if (null_0000h_8009e3b8 == 0) {
    printf("unexpected interrupt(%04x)\n",(uint)*(ushort *)PTR_I_STAT_8009f444);
    ReturnFromException();
  }
  null_0000h_8009e3ba = 1;
  uVar2 = (uint)(*(ushort *)PTR_I_MASK_8009f448 &
                null_0000h_8009e3e8 & *(ushort *)PTR_I_STAT_8009f444);
  if (uVar2 != 0) {
    do {
      puVar5 = &null_00000000h_8009e3bc;
      for (uVar4 = 0; (uVar2 != 0 && ((int)uVar4 < 0xb)); uVar4 = uVar4 + 1) {
        if ((uVar2 & 1) != 0) {
          *(ushort *)PTR_I_STAT_8009f444 = ~(ushort)(1 << (uVar4 & 0x1f));
          if ((code *)*puVar5 != (code *)0x0) {
            (*(code *)*puVar5)();
          }
        }
        puVar5 = puVar5 + 1;
        uVar2 = uVar2 >> 1;
      }
      uVar2 = (uint)(*(ushort *)PTR_I_MASK_8009f448 &
                    null_0000h_8009e3e8 & *(ushort *)PTR_I_STAT_8009f444);
    } while (uVar2 != 0);
  }
  if ((*(ushort *)PTR_I_MASK_8009f448 & *(ushort *)PTR_I_STAT_8009f444) == 0) {
    null_00000000h_8009f450 = 0;
  }
  else {
    iVar3 = null_00000000h_8009f450 + 1;
    bVar1 = 0x800 < null_00000000h_8009f450;
    null_00000000h_8009f450 = iVar3;
    if (bVar1) {
      printf("intr timeout(%04x:%04x)\n",(uint)*(ushort *)PTR_I_STAT_8009f444,
             (uint)*(ushort *)PTR_I_MASK_8009f448);
      null_00000000h_8009f450 = 0;
      *(undefined2 *)PTR_I_STAT_8009f444 = 0;
      INTR_OBJ_428();
      return;
    }
  }
  null_0000h_8009e3ba = 0;
  ReturnFromException();
  return;
}



void INTR_OBJ_428(void)

{
  null_0000h_8009e3ba = 0;
  ReturnFromException();
  return;
}



int setIntr(uint param_1,int param_2)

{
  ushort uVar1;
  ushort uVar2;
  int *piVar3;
  int iVar4;
  
  piVar3 = &null_00000000h_8009e3bc + param_1;
  iVar4 = *piVar3;
  if ((param_2 != iVar4) && (null_0000h_8009e3b8 != 0)) {
    uVar1 = *(ushort *)PTR_I_MASK_8009f448;
    *(undefined2 *)PTR_I_MASK_8009f448 = 0;
    if (param_2 != 0) {
      *piVar3 = param_2;
      null_0000h_8009e3e8 = null_0000h_8009e3e8 | (ushort)(1 << (param_1 & 0x1f));
      iVar4 = INTR_OBJ_514();
      return iVar4;
    }
    uVar2 = ~(ushort)(1 << (param_1 & 0x1f));
    *piVar3 = 0;
    null_0000h_8009e3e8 = null_0000h_8009e3e8 & uVar2;
    if (param_1 == 0) {
      ChangeClearPAD(1);
      ChangeClearRCnt(3,1);
    }
    if (param_1 == 4) {
      ChangeClearRCnt(0,1);
    }
    if (param_1 == 5) {
      ChangeClearRCnt(1,1);
    }
    if (param_1 == 6) {
      ChangeClearRCnt(2,1);
    }
    *(ushort *)PTR_I_MASK_8009f448 = uVar1 & uVar2;
  }
  return iVar4;
}



void INTR_OBJ_514(void)

{
  int unaff_s1;
  int unaff_s2;
  undefined2 unaff_s3;
  
  if (unaff_s1 == 0) {
    ChangeClearPAD(unaff_s2 == 0);
    ChangeClearRCnt(3,unaff_s2 == 0);
  }
  if (unaff_s1 == 4) {
    ChangeClearRCnt(0,unaff_s2 == 0);
  }
  if (unaff_s1 == 5) {
    ChangeClearRCnt(1,unaff_s2 == 0);
  }
  if (unaff_s1 == 6) {
    ChangeClearRCnt(2,unaff_s2 == 0);
  }
  *(undefined2 *)PTR_I_MASK_8009f448 = unaff_s3;
  return;
}



undefined2 * stopIntr(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  
  puVar3 = (undefined2 *)0x0;
  if (null_0000h_8009e3b8 != 0) {
    FUN_80086710();
    puVar2 = PTR_I_MASK_8009f448;
    puVar1 = PTR_I_STAT_8009f444;
    null_0000h_8009e3ea = *(undefined2 *)PTR_I_MASK_8009f448;
    null_00000000h_8009e3ec = *(undefined4 *)PTR_DMA_DPCR_8009f44c;
    *(undefined2 *)PTR_I_MASK_8009f448 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(uint *)PTR_DMA_DPCR_8009f44c = *(uint *)PTR_DMA_DPCR_8009f44c & 0x77777777;
    ResetEntryInt();
    null_0000h_8009e3b8 = 0;
    puVar3 = &null_0000h_8009e3b8;
  }
  return puVar3;
}



undefined4 restartIntr(void)

{
  undefined4 uVar1;
  
  if (null_0000h_8009e3b8 == 0) {
    HookEntryInt(&DAT_8009e3f0);
    null_0000h_8009e3b8 = 1;
    *(undefined2 *)PTR_I_MASK_8009f448 = null_0000h_8009e3ea;
    *(undefined4 *)PTR_DMA_DPCR_8009f44c = null_00000000h_8009e3ec;
    FUN_80086720();
    uVar1 = INTR_OBJ_6D0();
    return uVar1;
  }
  return 0;
}



void INTR_OBJ_6D0(void)

{
  return;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



int setjmp(__jmp_buf_tag *__env)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



// Possible C114.OBJ/_96_remove

void FUN_80088540(void)

{
  (*(code *)&LAB_000000a0)();
  return;
}



void ReturnFromException(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void ResetEntryInt(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void HookEntryInt(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



code * startIntrVSync(void)

{
  *(undefined4 *)PTR_TMR_HRETRACE_MODE_8009f478 = 0x107;
  null_00000000h_8009f474 = 0;
  memclr(&null_00000000h_8009f454,8);
  InterruptCallback(0,trapIntrVSync);
  return setIntrVSync;
}



void trapIntrVSync(void)

{
  undefined4 *puVar1;
  int iVar2;
  
  iVar2 = 0;
  puVar1 = &null_00000000h_8009f454;
  null_00000000h_8009f474 = null_00000000h_8009f474 + 1;
  do {
    if ((code *)*puVar1 != (code *)0x0) {
      (*(code *)*puVar1)();
    }
    iVar2 = iVar2 + 1;
    puVar1 = puVar1 + 1;
  } while (iVar2 < 8);
  return;
}



void setIntrVSync(int param_1,int param_2)

{
  if (param_2 != (&null_00000000h_8009f454)[param_1]) {
    (&null_00000000h_8009f454)[param_1] = param_2;
  }
  return;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



code * startIntrDMA(void)

{
  memclr(&null_00000000h_8009f480,8);
  *(undefined4 *)PTR_DMA_DICR_8009f47c = 0;
  InterruptCallback(3,trapIntrDMA);
  return setIntrDMA;
}



void trapIntrDMA(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined4 *puVar4;
  
  uVar3 = *(uint *)PTR_DMA_DICR_8009f47c >> 0x18 & 0x7f;
  if (uVar3 != 0) {
    do {
      puVar4 = &null_00000000h_8009f480;
      for (iVar1 = 0; (uVar3 != 0 && (iVar1 < 7)); iVar1 = iVar1 + 1) {
        if ((uVar3 & 1) != 0) {
          *(uint *)PTR_DMA_DICR_8009f47c =
               *(uint *)PTR_DMA_DICR_8009f47c & (1 << (iVar1 + 0x18U & 0x1f) | 0xffffffU);
          if ((code *)*puVar4 != (code *)0x0) {
            (*(code *)*puVar4)();
          }
        }
        puVar4 = puVar4 + 1;
        uVar3 = uVar3 >> 1;
      }
      uVar3 = *(uint *)PTR_DMA_DICR_8009f47c >> 0x18 & 0x7f;
    } while (uVar3 != 0);
  }
  if (((*(uint *)PTR_DMA_DICR_8009f47c & 0xff000000) == 0x80000000) ||
     ((*(uint *)PTR_DMA_DICR_8009f47c & 0x8000) != 0)) {
    printf("DMA bus error: code=%08x\n",*(undefined4 *)PTR_DMA_DICR_8009f47c);
    iVar1 = 0;
    do {
      iVar2 = iVar1 + 1;
      printf("MADR[%d]=%08x\n",iVar1,*(undefined4 *)(PTR_DMA_MDEC_IN_MADR_8009f4a0 + iVar1 * 0x10));
      iVar1 = iVar2;
    } while (iVar2 < 7);
  }
  return;
}



int setIntrDMA(int param_1,int param_2)

{
  undefined *puVar1;
  int *piVar2;
  int iVar3;
  
  puVar1 = PTR_DMA_DICR_8009f47c;
  piVar2 = &null_00000000h_8009f480 + param_1;
  iVar3 = *piVar2;
  if (param_2 != iVar3) {
    if (param_2 != 0) {
      *piVar2 = param_2;
      *(uint *)puVar1 = *(uint *)puVar1 & 0xffffff | 1 << (param_1 + 0x10U & 0x1f) | 0x800000U;
      iVar3 = INTR_DMA_OBJ_274();
      return iVar3;
    }
    *piVar2 = 0;
    *(uint *)puVar1 = (*(uint *)puVar1 & 0xffffff | 0x800000) & ~(1 << (param_1 + 0x10U & 0x1f));
  }
  return iVar3;
}



undefined4 INTR_DMA_OBJ_274(void)

{
  undefined4 in_a3;
  
  return in_a3;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



// Possible VMODE.OBJ/SetVideoMode

undefined4 FUN_80088958(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = null_00000000h_8009f4a4;
  null_00000000h_8009f4a4 = param_1;
  return uVar1;
}



// Possible VMODE.OBJ/GetVideoMode
// Possible GS_125.OBJ/GsGetWorkBase

undefined4 FUN_80088970(void)

{
  return null_00000000h_8009f4a4;
}



u_short LoadTPage(u_long *pix,int tp,int abr,int x,int y,int w,int h)

{
  u_short uVar1;
  RECT local_20;
  
  local_20.x = (short)x;
  local_20.h = (short)h;
  local_20.y = (short)y;
  if (tp == 1) {
    local_20.w = (short)(w / 2);
    uVar1 = EXT_OBJ_A8();
    return uVar1;
  }
  if (tp < 2) {
    if (tp != 0) {
      uVar1 = EXT_OBJ_AC();
      return uVar1;
    }
    if (w < 0) {
      w = w + 3;
    }
    local_20.w = (short)(w >> 2);
    uVar1 = EXT_OBJ_A8(&local_20);
    return uVar1;
  }
  if (tp != 2) {
    uVar1 = EXT_OBJ_AC(&local_20);
    return uVar1;
  }
  local_20.w = (short)w;
  LoadImage(&local_20,pix);
  uVar1 = GetTPage(2,abr,x,y);
  return uVar1;
}



u_short EXT_OBJ_A8(void)

{
  u_short uVar1;
  u_long *in_t0;
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  LoadImage((RECT *)&stack0x00000010,in_t0);
  uVar1 = GetTPage(unaff_s0,unaff_s2,unaff_s1,unaff_s3);
  return uVar1;
}



u_short EXT_OBJ_AC(RECT *param_1)

{
  u_short uVar1;
  u_long *in_t0;
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  LoadImage(param_1,in_t0);
  uVar1 = GetTPage(unaff_s0,unaff_s2,unaff_s1,unaff_s3);
  return uVar1;
}



u_short LoadClut(u_long *clut,int x,int y)

{
  u_short uVar1;
  RECT local_18;
  
  local_18.w = 0x100;
  local_18.x = (short)x;
  local_18.y = (short)y;
  local_18.h = 1;
  LoadImage(&local_18,clut);
  uVar1 = GetClut(x,y);
  return uVar1;
}



u_short LoadClut2(u_long *clut,int x,int y)

{
  u_short uVar1;
  RECT local_18;
  
  local_18.w = 0x10;
  local_18.x = (short)x;
  local_18.y = (short)y;
  local_18.h = 1;
  LoadImage(&local_18,clut);
  uVar1 = GetClut(x,y);
  return uVar1;
}



DRAWENV * SetDefDrawEnv(DRAWENV *env,int x,int y,int w,int h)

{
  int iVar1;
  DRAWENV *pDVar2;
  
  iVar1 = FUN_80088970();
  (env->clip).x = (short)x;
  (env->clip).y = (short)y;
  (env->clip).w = (short)w;
  (env->tw).x = 0;
  (env->tw).y = 0;
  (env->tw).w = 0;
  (env->tw).h = 0;
  env->r0 = '\0';
  env->g0 = '\0';
  env->b0 = '\0';
  env->dtd = '\x01';
  (env->clip).h = (short)h;
  if (iVar1 != 0) {
    pDVar2 = (DRAWENV *)EXT_OBJ_234();
    return pDVar2;
  }
  env->dfe = h < 0x101;
  env->ofs[0] = (short)x;
  env->ofs[1] = (short)y;
  env->tpage = 10;
  env->isbg = '\0';
  return env;
}



void EXT_OBJ_234(void)

{
  undefined1 in_v0;
  int unaff_s1;
  undefined2 unaff_s3;
  undefined2 unaff_s4;
  
  *(undefined1 *)(unaff_s1 + 0x17) = in_v0;
  *(undefined2 *)(unaff_s1 + 8) = unaff_s3;
  *(undefined2 *)(unaff_s1 + 10) = unaff_s4;
  *(undefined2 *)(unaff_s1 + 0x14) = 10;
  *(undefined1 *)(unaff_s1 + 0x18) = 0;
  return;
}



DISPENV * SetDefDispEnv(DISPENV *env,int x,int y,int w,int h)

{
  (env->disp).x = (short)x;
  (env->disp).y = (short)y;
  (env->disp).w = (short)w;
  (env->screen).x = 0;
  (env->screen).y = 0;
  (env->screen).w = 0;
  (env->screen).h = 0;
  env->isrgb24 = '\0';
  env->isinter = '\0';
  env->pad1 = '\0';
  env->pad0 = '\0';
  (env->disp).h = (short)h;
  return env;
}



void SetDumpFnt(int id)

{
  if ((-1 < id) && (id <= null_00000000h_8009f628)) {
    PTR_printf_800a0084 = FntPrint;
    null_00000000h_8009f62c = id;
  }
  return;
}



void FntLoad(int tx,int ty)

{
  null____800aca14 = LoadClut2((u_long *)&DAT_8009f630,tx,ty + 0x80);
  null____800aca10 = LoadTPage((u_long *)&DAT_8009f830,0,0,tx,ty,0x80,0x20);
  null_00000000h_8009f628 = 0;
  memset(&DAT_8009f4a8,'\0',0x180);
  return;
}



int FntOpen(int x,int y,int w,int h,int isbg,int n)

{
  int iVar1;
  int iVar2;
  SPRT_8 *p;
  RECT local_38 [2];
  
  if (7 < null_00000000h_8009f628) {
    iVar1 = FONT_OBJ_36C();
    return iVar1;
  }
  if (null_00000000h_8009f628 == 0) {
    null_00000000h_800a0030 = 0;
  }
  iVar1 = null_00000000h_800a0030;
  iVar2 = null_00000000h_8009f628 * 0x30;
  *(uint *)(&DAT_8009f4d4 + iVar2) = (uint)(w == 0);
  if (0x400 < iVar1 + n) {
    n = 0x400 - iVar1;
  }
  local_38[0].w = 0x100;
  local_38[0].h = 0x100;
  local_38[0].x = 0;
  local_38[0].y = 0;
  SetDrawMode((DR_MODE *)(iVar2 + -0x7ff60b48),0,0,(uint)null____800aca10,local_38);
  if (isbg != 0) {
    SetTile((TILE *)(&DAT_8009f4a8 + null_00000000h_8009f628 * 0x30));
    (&DAT_8009f4ac)[null_00000000h_8009f628 * 0x30] = 0;
    (&DAT_8009f4ad)[null_00000000h_8009f628 * 0x30] = 0;
    (&DAT_8009f4ae)[null_00000000h_8009f628 * 0x30] = 0;
    SetSemiTrans(&DAT_8009f4a8 + null_00000000h_8009f628 * 0x30,(uint)(isbg == 2));
  }
  iVar1 = null_00000000h_800a0030;
  iVar2 = null_00000000h_8009f628 * 0x30;
  *(short *)(&DAT_8009f4b0 + iVar2) = (short)x;
  *(short *)(&DAT_8009f4b2 + iVar2) = (short)y;
  *(short *)(&DAT_8009f4b4 + iVar2) = (short)w;
  *(short *)(&DAT_8009f4b6 + iVar2) = (short)h;
  *(int *)(&DAT_8009f4c4 + iVar2) = n;
  *(undefined4 *)(&DAT_8009f4d0 + iVar2) = 0;
  *(undefined1 **)(&DAT_8009f4cc + iVar2) = &null____800a8610 + iVar1;
  *(undefined **)(&DAT_8009f4c8 + iVar2) = &DAT_800a8a10 + iVar1 * 0x10;
  **(undefined1 **)(&DAT_8009f4cc + iVar2) = 0;
  p = *(SPRT_8 **)(&DAT_8009f4c8 + null_00000000h_8009f628 * 0x30);
  iVar1 = 0;
  if (0 < n) {
    do {
      SetSprt8(p);
      iVar1 = iVar1 + 1;
      p->clut = null____800aca14;
      p = p + 1;
    } while (iVar1 < n);
  }
  iVar1 = null_00000000h_8009f628;
  null_00000000h_800a0030 = null_00000000h_800a0030 + n;
  null_00000000h_8009f628 = null_00000000h_8009f628 + 1;
  return iVar1;
}



void FONT_OBJ_36C(void)

{
  return;
}



u_long * FntFlush(int id)

{
  byte bVar1;
  bool bVar2;
  int iVar3;
  u_long *puVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  byte *pbVar10;
  int iVar11;
  void *p;
  void *pvVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int local_50;
  
  local_50 = 0;
  if (((id < 0) || (iVar3 = id << 1, null_00000000h_8009f628 <= id)) &&
     (iVar3 = null_00000000h_8009f62c << 1, id = null_00000000h_8009f62c,
     *(int *)(&DAT_8009f4cc + null_00000000h_8009f62c * 0x30) == 0)) {
    puVar4 = (u_long *)FONT_OBJ_680();
    return puVar4;
  }
  iVar5 = (iVar3 + id) * 0x10;
  puVar4 = (u_long *)(iVar5 + -0x7ff60b48);
  pbVar10 = *(byte **)(&DAT_8009f4cc + iVar5);
  iVar3 = *(int *)(&DAT_8009f4c4 + iVar5);
  iVar11 = (int)*(short *)(&DAT_8009f4b0 + iVar5);
  iVar13 = (int)*(short *)(&DAT_8009f4b2 + iVar5);
  iVar7 = iVar13 + *(short *)(&DAT_8009f4b6 + iVar5);
  p = *(void **)(&DAT_8009f4c8 + iVar5);
  iVar14 = *(int *)(&DAT_8009f4d4 + iVar5);
  iVar15 = iVar11 + *(short *)(&DAT_8009f4b4 + iVar5);
  TermPrim(puVar4);
  bVar1 = *pbVar10;
  for (; (bVar1 != 0 && (iVar3 != 0)); iVar3 = iVar3 + -1) {
    bVar2 = false;
    pvVar12 = p;
    if (bVar1 == 0x20) {
FONT_OBJ_5B8:
      iVar11 = iVar11 + 8;
      if ((iVar15 <= iVar11) && (iVar14 == 0)) {
FONT_OBJ_5D0:
        bVar2 = true;
      }
    }
    else {
      if (bVar1 < 0x21) {
        if (bVar1 == 9) {
          puVar4 = (u_long *)FONT_OBJ_5BC();
          return puVar4;
        }
        if (bVar1 != 10) {
          puVar4 = (u_long *)FONT_OBJ_534();
          return puVar4;
        }
        goto FONT_OBJ_5D0;
      }
      if (bVar1 != 0x7e) {
        uVar8 = (uint)*pbVar10;
        if (uVar8 - 0x61 < 0x1a) {
          puVar4 = (u_long *)FONT_OBJ_558();
          return puVar4;
        }
        iVar9 = uVar8 - 0x20;
        iVar6 = iVar9;
        if (iVar9 < 0) {
          iVar6 = uVar8 - 0x11;
        }
        *(char *)((int)p + 0xc) = ((char)iVar9 + (char)(iVar6 >> 4) * -0x10) * '\b';
        *(char *)((int)p + 0xd) = (char)((iVar6 >> 4) << 3);
        *(short *)((int)p + 8) = (short)iVar11;
        *(short *)((int)p + 10) = (short)iVar13;
        *(undefined1 *)((int)p + 4) = 0x80;
        *(undefined1 *)((int)p + 5) = 0x80;
        *(undefined1 *)((int)p + 6) = 0x80;
        pvVar12 = (void *)((int)p + 0x10);
        AddPrim(puVar4,p);
        goto FONT_OBJ_5B8;
      }
      pbVar10 = pbVar10 + 1;
      if (*pbVar10 == 99) {
        puVar4 = (u_long *)FONT_OBJ_5D4();
        return puVar4;
      }
    }
    if (bVar2) {
      if (local_50 < iVar11) {
        local_50 = iVar11;
      }
      iVar13 = iVar13 + 8;
      iVar11 = (int)*(short *)(&DAT_8009f4b0 + iVar5);
      if (iVar7 <= iVar13) break;
    }
    pbVar10 = pbVar10 + 1;
    bVar1 = *pbVar10;
    p = pvVar12;
  }
  if (((&DAT_8009f4af)[iVar5] != '\0') && (AddPrim(puVar4,&DAT_8009f4a8 + iVar5), iVar14 != 0)) {
    *(short *)(&DAT_8009f4b4 + iVar5) = (short)local_50 - *(short *)(&DAT_8009f4b0 + iVar5);
    *(short *)(&DAT_8009f4b6 + iVar5) = (short)iVar13 - (*(short *)(&DAT_8009f4b2 + iVar5) + -8);
  }
  DrawOTag(puVar4);
  *(undefined4 *)(&DAT_8009f4d0 + iVar5) = 0;
  **(undefined1 **)(&DAT_8009f4cc + iVar5) = 0;
  return puVar4;
}



u_long * FONT_OBJ_534(void)

{
  byte bVar1;
  u_long *puVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  byte *pbVar6;
  byte *unaff_s0;
  int unaff_s1;
  void *unaff_s2;
  void *pvVar7;
  void *unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  int unaff_s7;
  int unaff_s8;
  u_long *in_stack_00000010;
  int in_stack_00000018;
  int in_stack_00000020;
  undefined1 in_stack_00000028;
  undefined1 in_stack_00000030;
  undefined1 in_stack_00000038;
  
code_r0x80089164:
  uVar4 = (uint)*unaff_s0;
  if (uVar4 - 0x61 < 0x1a) {
    puVar2 = (u_long *)FONT_OBJ_558();
    return puVar2;
  }
  iVar5 = uVar4 - 0x20;
  iVar3 = iVar5;
  if (iVar5 < 0) {
    iVar3 = uVar4 - 0x11;
  }
  *(char *)((int)unaff_s2 + 0xc) = ((char)iVar5 + (char)(iVar3 >> 4) * -0x10) * '\b';
  *(char *)((int)unaff_s2 + 0xd) = (char)((iVar3 >> 4) << 3);
  *(short *)((int)unaff_s2 + 8) = (short)unaff_s1;
  *(short *)((int)unaff_s2 + 10) = (short)unaff_s5;
  *(undefined1 *)((int)unaff_s2 + 4) = in_stack_00000028;
  *(undefined1 *)((int)unaff_s2 + 5) = in_stack_00000030;
  *(undefined1 *)((int)unaff_s2 + 6) = in_stack_00000038;
  pvVar7 = (void *)((int)unaff_s2 + 0x10);
  AddPrim(in_stack_00000010,unaff_s2);
FONT_OBJ_5B8:
  pbVar6 = unaff_s0;
  unaff_s1 = unaff_s1 + 8;
  if (unaff_s1 < unaff_s7) goto code_r0x80089204;
  if (unaff_s6 != 0) goto code_r0x80089204;
FONT_OBJ_5D0:
  unaff_s4 = 1;
code_r0x80089204:
  do {
    if (unaff_s4 != 0) {
      if (in_stack_00000018 < unaff_s1) {
        in_stack_00000018 = unaff_s1;
      }
      unaff_s5 = unaff_s5 + 8;
      unaff_s1 = (int)*(short *)((int)unaff_s3 + 8);
      if (in_stack_00000020 <= unaff_s5) goto FONT_OBJ_620;
    }
    unaff_s0 = pbVar6 + 1;
    bVar1 = *unaff_s0;
    unaff_s8 = unaff_s8 + -1;
    if ((bVar1 == 0) || (unaff_s8 == 0)) {
FONT_OBJ_620:
      if ((*(char *)((int)unaff_s3 + 7) != '\0') &&
         (AddPrim(in_stack_00000010,unaff_s3), unaff_s6 != 0)) {
        *(short *)((int)unaff_s3 + 0xc) = (short)in_stack_00000018 - *(short *)((int)unaff_s3 + 8);
        *(short *)((int)unaff_s3 + 0xe) = (short)unaff_s5 - (*(short *)((int)unaff_s3 + 10) + -8);
      }
      DrawOTag(in_stack_00000010);
      *(undefined4 *)((int)unaff_s3 + 0x28) = 0;
      **(undefined1 **)((int)unaff_s3 + 0x24) = 0;
      return in_stack_00000010;
    }
    unaff_s4 = 0;
    if (bVar1 == 0x20) goto FONT_OBJ_5B8;
    if (bVar1 < 0x21) break;
    unaff_s2 = pvVar7;
    if (bVar1 != 0x7e) goto code_r0x80089164;
    pbVar6 = pbVar6 + 2;
    if (*pbVar6 == 99) {
      puVar2 = (u_long *)FONT_OBJ_5D4();
      return puVar2;
    }
  } while( true );
  if (bVar1 == 9) {
    puVar2 = (u_long *)FONT_OBJ_5BC();
    return puVar2;
  }
  pbVar6 = unaff_s0;
  if (bVar1 != 10) {
    puVar2 = (u_long *)FONT_OBJ_534();
    return puVar2;
  }
  goto FONT_OBJ_5D0;
}



u_long * FONT_OBJ_558(void)

{
  byte bVar1;
  u_long *puVar2;
  int iVar3;
  int in_v1;
  byte *pbVar4;
  byte *unaff_s0;
  int unaff_s1;
  void *unaff_s2;
  void *unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  int unaff_s7;
  int unaff_s8;
  u_long *in_stack_00000010;
  int in_stack_00000018;
  int in_stack_00000020;
  undefined1 in_stack_00000028;
  undefined1 in_stack_00000030;
  undefined1 in_stack_00000038;
  
code_r0x80089188:
  iVar3 = in_v1;
  if (in_v1 < 0) {
    iVar3 = in_v1 + 0xf;
  }
  *(char *)((int)unaff_s2 + 0xc) = ((char)in_v1 + (char)(iVar3 >> 4) * -0x10) * '\b';
  *(char *)((int)unaff_s2 + 0xd) = (char)((iVar3 >> 4) << 3);
  *(short *)((int)unaff_s2 + 8) = (short)unaff_s1;
  *(short *)((int)unaff_s2 + 10) = (short)unaff_s5;
  *(undefined1 *)((int)unaff_s2 + 4) = in_stack_00000028;
  *(undefined1 *)((int)unaff_s2 + 5) = in_stack_00000030;
  *(undefined1 *)((int)unaff_s2 + 6) = in_stack_00000038;
  AddPrim(in_stack_00000010,unaff_s2);
FONT_OBJ_5B8:
  pbVar4 = unaff_s0;
  unaff_s1 = unaff_s1 + 8;
  if (unaff_s1 < unaff_s7) goto code_r0x80089204;
  if (unaff_s6 != 0) goto code_r0x80089204;
FONT_OBJ_5D0:
  unaff_s4 = 1;
code_r0x80089204:
  do {
    if (unaff_s4 != 0) {
      if (in_stack_00000018 < unaff_s1) {
        in_stack_00000018 = unaff_s1;
      }
      unaff_s5 = unaff_s5 + 8;
      unaff_s1 = (int)*(short *)((int)unaff_s3 + 8);
      if (in_stack_00000020 <= unaff_s5) goto FONT_OBJ_620;
    }
    unaff_s0 = pbVar4 + 1;
    bVar1 = *unaff_s0;
    unaff_s8 = unaff_s8 + -1;
    if ((bVar1 == 0) || (unaff_s8 == 0)) {
FONT_OBJ_620:
      if ((*(char *)((int)unaff_s3 + 7) != '\0') &&
         (AddPrim(in_stack_00000010,unaff_s3), unaff_s6 != 0)) {
        *(short *)((int)unaff_s3 + 0xc) = (short)in_stack_00000018 - *(short *)((int)unaff_s3 + 8);
        *(short *)((int)unaff_s3 + 0xe) = (short)unaff_s5 - (*(short *)((int)unaff_s3 + 10) + -8);
      }
      DrawOTag(in_stack_00000010);
      *(undefined4 *)((int)unaff_s3 + 0x28) = 0;
      **(undefined1 **)((int)unaff_s3 + 0x24) = 0;
      return in_stack_00000010;
    }
    unaff_s4 = 0;
    if (bVar1 == 0x20) goto FONT_OBJ_5B8;
    if (bVar1 < 0x21) break;
    if (bVar1 != 0x7e) {
      if (*unaff_s0 - 0x61 < 0x1a) {
        puVar2 = (u_long *)FONT_OBJ_558();
        return puVar2;
      }
      in_v1 = *unaff_s0 - 0x20;
      unaff_s2 = (void *)((int)unaff_s2 + 0x10);
      goto code_r0x80089188;
    }
    pbVar4 = pbVar4 + 2;
    if (*pbVar4 == 99) {
      puVar2 = (u_long *)FONT_OBJ_5D4();
      return puVar2;
    }
  } while( true );
  if (bVar1 == 9) {
    puVar2 = (u_long *)FONT_OBJ_5BC();
    return puVar2;
  }
  pbVar4 = unaff_s0;
  if (bVar1 != 10) {
    puVar2 = (u_long *)FONT_OBJ_534();
    return puVar2;
  }
  goto FONT_OBJ_5D0;
}



u_long * FONT_OBJ_5BC(void)

{
  byte bVar1;
  u_long *puVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  byte *unaff_s0;
  byte *pbVar6;
  int unaff_s1;
  void *pvVar7;
  void *unaff_s2;
  void *unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  int unaff_s7;
  int unaff_s8;
  u_long *in_stack_00000010;
  int in_stack_00000018;
  int in_stack_00000020;
  undefined1 in_stack_00000028;
  undefined1 in_stack_00000030;
  undefined1 in_stack_00000038;
  
code_r0x800891ec:
  if (unaff_s1 < unaff_s7) goto code_r0x80089204;
  if (unaff_s6 != 0) goto code_r0x80089204;
FONT_OBJ_5D0:
  unaff_s4 = 1;
code_r0x80089204:
  do {
    if (unaff_s4 != 0) {
      if (in_stack_00000018 < unaff_s1) {
        in_stack_00000018 = unaff_s1;
      }
      unaff_s5 = unaff_s5 + 8;
      unaff_s1 = (int)*(short *)((int)unaff_s3 + 8);
      if (in_stack_00000020 <= unaff_s5) goto FONT_OBJ_620;
    }
    pbVar6 = unaff_s0 + 1;
    bVar1 = *pbVar6;
    unaff_s8 = unaff_s8 + -1;
    if ((bVar1 == 0) || (unaff_s8 == 0)) {
FONT_OBJ_620:
      if ((*(char *)((int)unaff_s3 + 7) != '\0') &&
         (AddPrim(in_stack_00000010,unaff_s3), unaff_s6 != 0)) {
        *(short *)((int)unaff_s3 + 0xc) = (short)in_stack_00000018 - *(short *)((int)unaff_s3 + 8);
        *(short *)((int)unaff_s3 + 0xe) = (short)unaff_s5 - (*(short *)((int)unaff_s3 + 10) + -8);
      }
      DrawOTag(in_stack_00000010);
      *(undefined4 *)((int)unaff_s3 + 0x28) = 0;
      **(undefined1 **)((int)unaff_s3 + 0x24) = 0;
      return in_stack_00000010;
    }
    unaff_s4 = 0;
    pvVar7 = unaff_s2;
    if (bVar1 == 0x20) {
FONT_OBJ_5B8:
      unaff_s1 = unaff_s1 + 8;
      unaff_s0 = pbVar6;
      unaff_s2 = pvVar7;
      goto code_r0x800891ec;
    }
    if (bVar1 < 0x21) break;
    if (bVar1 != 0x7e) {
      uVar4 = (uint)*pbVar6;
      if (uVar4 - 0x61 < 0x1a) {
        puVar2 = (u_long *)FONT_OBJ_558();
        return puVar2;
      }
      iVar5 = uVar4 - 0x20;
      iVar3 = iVar5;
      if (iVar5 < 0) {
        iVar3 = uVar4 - 0x11;
      }
      *(char *)((int)unaff_s2 + 0xc) = ((char)iVar5 + (char)(iVar3 >> 4) * -0x10) * '\b';
      *(char *)((int)unaff_s2 + 0xd) = (char)((iVar3 >> 4) << 3);
      *(short *)((int)unaff_s2 + 8) = (short)unaff_s1;
      *(short *)((int)unaff_s2 + 10) = (short)unaff_s5;
      *(undefined1 *)((int)unaff_s2 + 4) = in_stack_00000028;
      *(undefined1 *)((int)unaff_s2 + 5) = in_stack_00000030;
      *(undefined1 *)((int)unaff_s2 + 6) = in_stack_00000038;
      pvVar7 = (void *)((int)unaff_s2 + 0x10);
      AddPrim(in_stack_00000010,unaff_s2);
      goto FONT_OBJ_5B8;
    }
    unaff_s0 = unaff_s0 + 2;
    if (*unaff_s0 == 99) {
      puVar2 = (u_long *)FONT_OBJ_5D4();
      return puVar2;
    }
  } while( true );
  if (bVar1 == 9) {
    puVar2 = (u_long *)FONT_OBJ_5BC();
    return puVar2;
  }
  unaff_s0 = pbVar6;
  if (bVar1 != 10) {
    puVar2 = (u_long *)FONT_OBJ_534();
    return puVar2;
  }
  goto FONT_OBJ_5D0;
}



u_long * FONT_OBJ_5D4(void)

{
  byte bVar1;
  u_long *puVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  byte *unaff_s0;
  byte *pbVar6;
  int unaff_s1;
  void *pvVar7;
  void *unaff_s2;
  void *unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  int unaff_s7;
  int unaff_s8;
  u_long *in_stack_00000010;
  int in_stack_00000018;
  int in_stack_00000020;
  undefined1 in_stack_00000028;
  undefined1 in_stack_00000030;
  undefined1 in_stack_00000038;
  
code_r0x80089204:
  do {
    if (unaff_s4 != 0) {
      if (in_stack_00000018 < unaff_s1) {
        in_stack_00000018 = unaff_s1;
      }
      unaff_s5 = unaff_s5 + 8;
      unaff_s1 = (int)*(short *)((int)unaff_s3 + 8);
      if (in_stack_00000020 <= unaff_s5) goto FONT_OBJ_620;
    }
    pbVar6 = unaff_s0 + 1;
    bVar1 = *pbVar6;
    unaff_s8 = unaff_s8 + -1;
    if ((bVar1 == 0) || (unaff_s8 == 0)) {
FONT_OBJ_620:
      if ((*(char *)((int)unaff_s3 + 7) != '\0') &&
         (AddPrim(in_stack_00000010,unaff_s3), unaff_s6 != 0)) {
        *(short *)((int)unaff_s3 + 0xc) = (short)in_stack_00000018 - *(short *)((int)unaff_s3 + 8);
        *(short *)((int)unaff_s3 + 0xe) = (short)unaff_s5 - (*(short *)((int)unaff_s3 + 10) + -8);
      }
      DrawOTag(in_stack_00000010);
      *(undefined4 *)((int)unaff_s3 + 0x28) = 0;
      **(undefined1 **)((int)unaff_s3 + 0x24) = 0;
      return in_stack_00000010;
    }
    unaff_s4 = 0;
    pvVar7 = unaff_s2;
    if (bVar1 == 0x20) {
FONT_OBJ_5B8:
      unaff_s1 = unaff_s1 + 8;
      unaff_s0 = pbVar6;
      unaff_s2 = pvVar7;
      if ((unaff_s7 <= unaff_s1) && (unaff_s6 == 0)) {
FONT_OBJ_5D0:
        unaff_s4 = 1;
        unaff_s0 = pbVar6;
        unaff_s2 = pvVar7;
      }
      goto code_r0x80089204;
    }
    if (bVar1 < 0x21) {
      if (bVar1 == 9) {
        puVar2 = (u_long *)FONT_OBJ_5BC();
        return puVar2;
      }
      if (bVar1 != 10) {
        puVar2 = (u_long *)FONT_OBJ_534();
        return puVar2;
      }
      goto FONT_OBJ_5D0;
    }
    if (bVar1 != 0x7e) {
      uVar4 = (uint)*pbVar6;
      if (uVar4 - 0x61 < 0x1a) {
        puVar2 = (u_long *)FONT_OBJ_558();
        return puVar2;
      }
      iVar5 = uVar4 - 0x20;
      iVar3 = iVar5;
      if (iVar5 < 0) {
        iVar3 = uVar4 - 0x11;
      }
      *(char *)((int)unaff_s2 + 0xc) = ((char)iVar5 + (char)(iVar3 >> 4) * -0x10) * '\b';
      *(char *)((int)unaff_s2 + 0xd) = (char)((iVar3 >> 4) << 3);
      *(short *)((int)unaff_s2 + 8) = (short)unaff_s1;
      *(short *)((int)unaff_s2 + 10) = (short)unaff_s5;
      *(undefined1 *)((int)unaff_s2 + 4) = in_stack_00000028;
      *(undefined1 *)((int)unaff_s2 + 5) = in_stack_00000030;
      *(undefined1 *)((int)unaff_s2 + 6) = in_stack_00000038;
      pvVar7 = (void *)((int)unaff_s2 + 0x10);
      AddPrim(in_stack_00000010,unaff_s2);
      goto FONT_OBJ_5B8;
    }
    unaff_s0 = unaff_s0 + 2;
    if (*unaff_s0 == 99) {
      puVar2 = (u_long *)FONT_OBJ_5D4();
      return puVar2;
    }
  } while( true );
}



void FONT_OBJ_680(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int FntPrint(void)

{
  int iVar1;
  char *in_a0;
  int iVar2;
  char cVar3;
  char *in_a1;
  char *local_res0;
  
  if ((((-1 < (int)in_a0) && (local_res0 = in_a0, (int)in_a0 < null_00000000h_8009f628)) ||
      (local_res0 = null_00000000h_8009f62c, in_a1 = in_a0,
      *(int *)(&DAT_8009f4cc + (int)null_00000000h_8009f62c * 0x30) != 0)) &&
     (iVar1 = (int)local_res0 * 0x30,
     *(int *)(&DAT_8009f4d0 + iVar1) <= *(int *)(&DAT_8009f4c4 + iVar1))) {
    cVar3 = *in_a1;
    while( true ) {
      if (cVar3 == '\0') {
        *(undefined1 *)(*(int *)(&DAT_8009f4cc + iVar1) + *(int *)(&DAT_8009f4d0 + iVar1)) = 0;
        return *(int *)(&DAT_8009f4d0 + iVar1);
      }
      if (cVar3 == '%') {
        in_a1 = in_a1 + 1;
        cVar3 = *in_a1;
        if (cVar3 != '%') {
          iVar1 = FONT_OBJ_820();
          return iVar1;
        }
      }
      iVar2 = *(int *)(&DAT_8009f4d0 + iVar1);
      *(int *)(&DAT_8009f4d0 + iVar1) = iVar2 + 1;
      *(char *)(*(int *)(&DAT_8009f4cc + iVar1) + iVar2) = cVar3;
      in_a1 = in_a1 + 1;
      if (*(int *)(&DAT_8009f4c4 + iVar1) < *(int *)(&DAT_8009f4d0 + iVar1)) break;
      cVar3 = *in_a1;
    }
    iVar1 = FONT_OBJ_A6C();
    return iVar1;
  }
  iVar1 = FONT_OBJ_A6C();
  return iVar1;
}



undefined4 FONT_OBJ_820(undefined4 param_1,uint param_2,int param_3,char param_4)

{
  undefined4 uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  byte bVar5;
  char cVar6;
  char *pcVar7;
  char *pcVar8;
  int unaff_s1;
  int unaff_s2;
  byte *unaff_s3;
  byte *pbVar9;
  uint unaff_s4;
  uint unaff_s5;
  uint *in_stack_00000210;
  
  while (param_2 - 0x30 < 10) {
    unaff_s2 = unaff_s2 * 10 + -0x30 + param_2;
    unaff_s3 = unaff_s3 + 1;
    param_2 = (uint)*unaff_s3;
  }
  if (unaff_s2 < 1) {
    unaff_s2 = 1;
  }
  pcVar8 = &stack0x00000210;
  switch(param_2) {
  case 0x58:
  case 0x78:
    param_3 = 0;
    uVar3 = *in_stack_00000210;
    do {
      do {
        pcVar8 = pcVar8 + -1;
        uVar2 = uVar3 & 0xf;
        uVar3 = uVar3 >> 4;
        param_3 = param_3 + 1;
        *pcVar8 = PTR_s_0123456789ABCDEF_800a0034[uVar2];
      } while (param_3 == 0);
    } while (uVar3 != 0);
    if (param_4 != '\0') {
      if (param_3 < unaff_s2) {
        do {
          pcVar8 = pcVar8 + -1;
          param_3 = param_3 + 1;
          *pcVar8 = '0';
        } while (param_3 < unaff_s2);
        uVar1 = FONT_OBJ_9A4();
        return uVar1;
      }
joined_r0x80089624:
      do {
        param_3 = param_3 + -1;
        if (param_3 == -1) {
          do {
            pbVar9 = unaff_s3 + 1;
            bVar5 = *pbVar9;
            if (bVar5 == 0) {
              *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
              return *(undefined4 *)(unaff_s1 + 0x28);
            }
            if (bVar5 == unaff_s4) {
              pbVar9 = unaff_s3 + 2;
              bVar5 = *pbVar9;
              if (bVar5 != unaff_s4) {
                uVar1 = FONT_OBJ_820();
                return uVar1;
              }
            }
            iVar4 = *(int *)(unaff_s1 + 0x28);
            *(int *)(unaff_s1 + 0x28) = iVar4 + 1;
            *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar4) = bVar5;
            unaff_s3 = pbVar9;
          } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
          uVar1 = FONT_OBJ_A6C();
          return uVar1;
        }
        iVar4 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar4 + 1;
        *(char *)(*(int *)(unaff_s1 + 0x24) + iVar4) = *pcVar8;
        pcVar8 = pcVar8 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      goto FONT_OBJ_73C;
    }
    break;
  case 99:
    uVar1 = FONT_OBJ_9A0(param_1,param_2,1);
    return uVar1;
  case 100:
    uVar3 = *in_stack_00000210;
    cVar6 = '\0';
    if ((int)uVar3 < 0) {
      uVar3 = -uVar3;
      cVar6 = '-';
    }
    param_3 = 0;
    do {
      do {
        pcVar7 = pcVar8;
        iVar4 = param_3;
        pcVar8 = pcVar7 + -1;
        param_3 = iVar4 + 1;
        uVar2 = (uint)((ulonglong)uVar3 * (ulonglong)unaff_s5 >> 0x23);
        *pcVar8 = (char)uVar3 + (char)uVar2 * -10 + '0';
        uVar3 = uVar2;
      } while (param_3 == 0);
    } while (uVar2 != 0);
    if (cVar6 != '\0') {
      pcVar7[-2] = cVar6;
      uVar1 = FONT_OBJ_9A0(0,cVar6,iVar4 + 2);
      return uVar1;
    }
    goto joined_r0x800895d4;
  case 0x73:
    pcVar8 = (char *)*in_stack_00000210;
    param_3 = strlen(pcVar8);
  }
joined_r0x800895d4:
  do {
    if (unaff_s2 <= param_3) goto joined_r0x80089624;
    iVar4 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar4 + 1;
    *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar4) = 0x20;
    unaff_s2 = unaff_s2 + -1;
  } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
FONT_OBJ_73C:
  uVar1 = FONT_OBJ_A6C();
  return uVar1;
}



undefined4 FONT_OBJ_868(void)

{
  undefined4 uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  byte bVar5;
  char cVar6;
  int iVar7;
  int iVar8;
  char *unaff_s0;
  char *pcVar9;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  byte *pbVar10;
  uint unaff_s4;
  uint unaff_s5;
  uint *in_stack_00000210;
  
  uVar3 = *in_stack_00000210;
  cVar6 = '\0';
  if ((int)uVar3 < 0) {
    uVar3 = -uVar3;
    cVar6 = '-';
  }
  iVar7 = 0;
  do {
    do {
      pcVar9 = unaff_s0;
      iVar8 = iVar7;
      unaff_s0 = pcVar9 + -1;
      iVar7 = iVar8 + 1;
      uVar2 = (uint)((ulonglong)uVar3 * (ulonglong)unaff_s5 >> 0x23);
      *unaff_s0 = (char)uVar3 + (char)uVar2 * -10 + '0';
      uVar3 = uVar2;
    } while (iVar7 == 0);
  } while (uVar2 != 0);
  if (cVar6 != '\0') {
    pcVar9[-2] = cVar6;
    uVar1 = FONT_OBJ_9A0(0,cVar6,iVar8 + 2);
    return uVar1;
  }
  if (iVar7 < unaff_s2) {
    do {
      iVar4 = *(int *)(unaff_s1 + 0x28);
      *(int *)(unaff_s1 + 0x28) = iVar4 + 1;
      *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar4) = 0x20;
      unaff_s2 = unaff_s2 + -1;
      if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) goto FONT_OBJ_73C;
    } while (iVar7 < unaff_s2);
  }
  while( true ) {
    if (iVar8 == -1) {
      pbVar10 = (byte *)(unaff_s3 + 1);
      do {
        bVar5 = *pbVar10;
        if (bVar5 == 0) {
          *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
          return *(undefined4 *)(unaff_s1 + 0x28);
        }
        if (bVar5 == unaff_s4) {
          pbVar10 = pbVar10 + 1;
          bVar5 = *pbVar10;
          if (bVar5 != unaff_s4) {
            uVar1 = FONT_OBJ_820();
            return uVar1;
          }
        }
        iVar7 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar7 + 1;
        *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar7) = bVar5;
        pbVar10 = pbVar10 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      uVar1 = FONT_OBJ_A6C();
      return uVar1;
    }
    iVar7 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar7 + 1;
    *(char *)(*(int *)(unaff_s1 + 0x24) + iVar7) = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) break;
    iVar8 = iVar8 + -1;
  }
FONT_OBJ_73C:
  uVar1 = FONT_OBJ_A6C();
  return uVar1;
}



undefined4 FONT_OBJ_8E8(void)

{
  uint uVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  byte bVar5;
  int iVar6;
  int iVar7;
  char in_a3;
  undefined1 *unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  byte *pbVar8;
  uint unaff_s4;
  uint *in_stack_00000210;
  
  uVar3 = *in_stack_00000210;
  iVar6 = 0;
  do {
    do {
      iVar7 = iVar6;
      unaff_s0 = unaff_s0 + -1;
      uVar1 = uVar3 & 0xf;
      uVar3 = uVar3 >> 4;
      iVar6 = iVar7 + 1;
      *unaff_s0 = PTR_s_0123456789ABCDEF_800a0034[uVar1];
    } while (iVar6 == 0);
  } while (uVar3 != 0);
  if (in_a3 == '\0') {
    if (iVar6 < unaff_s2) {
      do {
        iVar4 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar4 + 1;
        *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar4) = 0x20;
        unaff_s2 = unaff_s2 + -1;
        if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) goto FONT_OBJ_73C;
      } while (iVar6 < unaff_s2);
    }
  }
  else if (iVar6 < unaff_s2) {
    do {
      unaff_s0 = unaff_s0 + -1;
      iVar6 = iVar6 + 1;
                    // Possible PsyQ macro: setPolyG3()
      *unaff_s0 = 0x30;
    } while (iVar6 < unaff_s2);
    uVar2 = FONT_OBJ_9A4();
    return uVar2;
  }
  while( true ) {
    if (iVar7 == -1) {
      pbVar8 = (byte *)(unaff_s3 + 1);
      do {
        bVar5 = *pbVar8;
        if (bVar5 == 0) {
          *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
          return *(undefined4 *)(unaff_s1 + 0x28);
        }
        if (bVar5 == unaff_s4) {
          pbVar8 = pbVar8 + 1;
          bVar5 = *pbVar8;
          if (bVar5 != unaff_s4) {
            uVar2 = FONT_OBJ_820();
            return uVar2;
          }
        }
        iVar6 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar6 + 1;
        *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar6) = bVar5;
        pbVar8 = pbVar8 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      uVar2 = FONT_OBJ_A6C();
      return uVar2;
    }
    iVar6 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar6 + 1;
    *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar6) = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) break;
    iVar7 = iVar7 + -1;
  }
FONT_OBJ_73C:
  uVar2 = FONT_OBJ_A6C();
  return uVar2;
}



void FONT_OBJ_960(undefined4 param_1,undefined4 param_2)

{
  int unaff_s0;
  undefined4 *in_stack_00000210;
  
  *(char *)(unaff_s0 + -1) = (char)*in_stack_00000210;
  FONT_OBJ_9A0(param_1,param_2,1);
  return;
}



undefined4 FONT_OBJ_980(void)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  byte bVar4;
  char *pcVar5;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  byte *pbVar6;
  uint unaff_s4;
  undefined4 *in_stack_00000210;
  
  pcVar5 = (char *)*in_stack_00000210;
  iVar2 = strlen(pcVar5);
  if (iVar2 < unaff_s2) {
    do {
      iVar3 = *(int *)(unaff_s1 + 0x28);
      *(int *)(unaff_s1 + 0x28) = iVar3 + 1;
      *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar3) = 0x20;
      unaff_s2 = unaff_s2 + -1;
      if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) goto FONT_OBJ_73C;
    } while (iVar2 < unaff_s2);
  }
  do {
    iVar2 = iVar2 + -1;
    if (iVar2 == -1) {
      pbVar6 = (byte *)(unaff_s3 + 1);
      do {
        bVar4 = *pbVar6;
        if (bVar4 == 0) {
          *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
          return *(undefined4 *)(unaff_s1 + 0x28);
        }
        if (bVar4 == unaff_s4) {
          pbVar6 = pbVar6 + 1;
          bVar4 = *pbVar6;
          if (bVar4 != unaff_s4) {
            uVar1 = FONT_OBJ_820();
            return uVar1;
          }
        }
        iVar2 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
        *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar2) = bVar4;
        pbVar6 = pbVar6 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      uVar1 = FONT_OBJ_A6C();
      return uVar1;
    }
    iVar3 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar3 + 1;
    *(char *)(*(int *)(unaff_s1 + 0x24) + iVar3) = *pcVar5;
    pcVar5 = pcVar5 + 1;
  } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
FONT_OBJ_73C:
  uVar1 = FONT_OBJ_A6C();
  return uVar1;
}



undefined4 FONT_OBJ_9A0(undefined4 param_1,undefined4 param_2,int param_3)

{
  undefined4 uVar1;
  int iVar2;
  byte bVar3;
  undefined1 *unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  byte *pbVar4;
  uint unaff_s4;
  
  if (param_3 < unaff_s2) {
    do {
      iVar2 = *(int *)(unaff_s1 + 0x28);
      *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
      *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar2) = 0x20;
      unaff_s2 = unaff_s2 + -1;
      if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) goto FONT_OBJ_73C;
    } while (param_3 < unaff_s2);
  }
  param_3 = param_3 + -1;
  while( true ) {
    if (param_3 == -1) {
      pbVar4 = (byte *)(unaff_s3 + 1);
      do {
        bVar3 = *pbVar4;
        if (bVar3 == 0) {
          *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
          return *(undefined4 *)(unaff_s1 + 0x28);
        }
        if (bVar3 == unaff_s4) {
          pbVar4 = pbVar4 + 1;
          bVar3 = *pbVar4;
          if (bVar3 != unaff_s4) {
            uVar1 = FONT_OBJ_820();
            return uVar1;
          }
        }
        iVar2 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
        *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar2) = bVar3;
        pbVar4 = pbVar4 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      uVar1 = FONT_OBJ_A6C();
      return uVar1;
    }
    iVar2 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
    *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar2) = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) break;
    param_3 = param_3 + -1;
  }
FONT_OBJ_73C:
  uVar1 = FONT_OBJ_A6C();
  return uVar1;
}



undefined4 FONT_OBJ_9A4(undefined4 param_1,undefined4 param_2,int param_3)

{
  undefined4 uVar1;
  int in_v0;
  int iVar2;
  byte bVar3;
  undefined1 *unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  byte *pbVar4;
  uint unaff_s4;
  
  if (in_v0 != 0) {
    do {
      iVar2 = *(int *)(unaff_s1 + 0x28);
      *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
                    // Possible PsyQ macro: setPolyF3()
      *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar2) = 0x20;
      unaff_s2 = unaff_s2 + -1;
      if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) goto FONT_OBJ_73C;
    } while (param_3 < unaff_s2);
  }
  param_3 = param_3 + -1;
  while( true ) {
    if (param_3 == -1) {
      pbVar4 = (byte *)(unaff_s3 + 1);
      do {
        bVar3 = *pbVar4;
        if (bVar3 == 0) {
          *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + *(int *)(unaff_s1 + 0x28)) = 0;
          return *(undefined4 *)(unaff_s1 + 0x28);
        }
        if (bVar3 == unaff_s4) {
          pbVar4 = pbVar4 + 1;
          bVar3 = *pbVar4;
          if (bVar3 != unaff_s4) {
            uVar1 = FONT_OBJ_820();
            return uVar1;
          }
        }
        iVar2 = *(int *)(unaff_s1 + 0x28);
        *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
        *(byte *)(*(int *)(unaff_s1 + 0x24) + iVar2) = bVar3;
        pbVar4 = pbVar4 + 1;
      } while (*(int *)(unaff_s1 + 0x28) <= *(int *)(unaff_s1 + 0x1c));
      uVar1 = FONT_OBJ_A6C();
      return uVar1;
    }
    iVar2 = *(int *)(unaff_s1 + 0x28);
    *(int *)(unaff_s1 + 0x28) = iVar2 + 1;
    *(undefined1 *)(*(int *)(unaff_s1 + 0x24) + iVar2) = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (*(int *)(unaff_s1 + 0x1c) < *(int *)(unaff_s1 + 0x28)) break;
    param_3 = param_3 + -1;
  }
FONT_OBJ_73C:
  uVar1 = FONT_OBJ_A6C();
  return uVar1;
}



void FONT_OBJ_A6C(void)

{
  return;
}



int strlen(char *param_1)

{
  int iVar1;
  
  iVar1 = (*(code *)&LAB_000000a0)();
  return iVar1;
}



void * memset(uchar *param_1,uchar param_2,int param_3)

{
  void *pvVar1;
  
  pvVar1 = (void *)(*(code *)&LAB_000000a0)();
  return pvVar1;
}



u_short GetTPage(int tp,int abr,int x,int y)

{
  return (ushort)((tp & 3U) << 7) | (ushort)((abr & 3U) << 5) | (ushort)((int)(y & 0x100U) >> 4) |
         (ushort)((int)(x & 0x3ffU) >> 6) | (ushort)((y & 0x200U) << 2);
}



u_short GetClut(int x,int y)

{
  return (ushort)(y << 6) | (ushort)(x >> 4) & 0x3f;
}



void DumpTPage(u_short tpage)

{
  (*(code *)PTR_printf_800a0084)
            ("tpage: (%d,%d,%d,%d)\n",tpage >> 7 & 3,tpage >> 5 & 3,(tpage & 0x1f) << 6,
             (tpage & 0x10) * 0x10 + (tpage >> 2 & 0x200));
  return;
}



void DumpClut(u_short clut)

{
  (*(code *)PTR_printf_800a0084)("clut: (%d,%d)\n",(clut & 0x3f) << 4,clut >> 6);
  return;
}



void * NextPrim(void *p)

{
                    // WARNING: Load size is inaccurate
                    // Probable PsyQ macro: nextPrim(), with pattern: *pPrim & 0xffffff |
                    // 0x80000000.
  return (void *)(*p & 0xffffff | 0x80000000);
}



int IsEndPrim(void *p)

{
                    // WARNING: Load size is inaccurate
  return (uint)((*p & 0xffffff) == 0xffffff);
}



void AddPrim(void *ot,void *p)

{
                    // WARNING: Load size is inaccurate
                    // WARNING: Load size is inaccurate
                    // Probable PsyQ macro: addPrim().
  *(uint *)p = *p & 0xff000000 | *ot & 0xffffff;
                    // WARNING: Load size is inaccurate
  *(uint *)ot = *ot & 0xff000000 | (uint)p & 0xffffff;
  return;
}



void AddPrims(void *ot,void *p0,void *p1)

{
                    // WARNING: Load size is inaccurate
                    // WARNING: Load size is inaccurate
                    // Probable PsyQ macro: addPrim().
  *(uint *)p1 = *p1 & 0xff000000 | *ot & 0xffffff;
                    // WARNING: Load size is inaccurate
  *(uint *)ot = *ot & 0xff000000 | (uint)p0 & 0xffffff;
  return;
}



void CatPrim(void *p0,void *p1)

{
                    // WARNING: Load size is inaccurate
  *(uint *)p0 = *p0 & 0xff000000 | (uint)p1 & 0xffffff;
  return;
}



void TermPrim(void *p)

{
                    // WARNING: Load size is inaccurate
  *(uint *)p = *p | 0xffffff;
  return;
}



void SetSemiTrans(void *p,int abe)

{
  if (abe != 0) {
    PRIM_OBJ_200();
    return;
  }
  *(byte *)((int)p + 7) = *(byte *)((int)p + 7) & 0xfd;
  return;
}



void PRIM_OBJ_200(int param_1)

{
  undefined1 in_v0;
  
  *(undefined1 *)(param_1 + 7) = in_v0;
  return;
}



void SetShadeTex(void *p,int tge)

{
  if (tge != 0) {
    PRIM_OBJ_228();
    return;
  }
  *(byte *)((int)p + 7) = *(byte *)((int)p + 7) & 0xfe;
  return;
}



void PRIM_OBJ_228(int param_1)

{
  undefined1 in_v0;
  
  *(undefined1 *)(param_1 + 7) = in_v0;
  return;
}



void SetPolyF3(POLY_F3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 4;
                    // Possible PsyQ macro: setPolyF3()
  p->code = ' ';
  return;
}



void SetPolyFT3(POLY_FT3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 7;
                    // Possible PsyQ macro: setPolyFT3()
  p->code = '$';
  return;
}



void SetPolyG3(POLY_G3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 6;
                    // Possible PsyQ macro: setPolyG3()
  p->code = '0';
  return;
}



void SetPolyGT3(POLY_GT3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 9;
                    // Possible PsyQ macro: setPolyGT3()
  p->code = '4';
  return;
}



void SetPolyF4(POLY_F4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 5;
                    // Possible PsyQ macro: setPolyF4()
  p->code = '(';
  return;
}



void SetPolyFT4(POLY_FT4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 9;
                    // Possible PsyQ macro: setPolyFT4()
  p->code = ',';
  return;
}



void SetPolyG4(POLY_G4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 8;
                    // Possible PsyQ macro: setPolyG4()
  p->code = '8';
  return;
}



void SetPolyGT4(POLY_GT4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 0xc;
                    // Possible PsyQ macro: setPolyGT4()
  p->code = '<';
  return;
}



void SetSprt8(SPRT_8 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 3;
                    // Possible PsyQ macro: setSprt8()
  p->code = 't';
  return;
}



void SetSprt16(SPRT_16 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 3;
                    // Possible PsyQ macro: setSprt16()
  p->code = '|';
  return;
}



void SetSprt(SPRT *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 4;
                    // Possible PsyQ macro: setSprt()
  p->code = 'd';
  return;
}



void SetTile1(TILE_1 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 2;
                    // Possible PsyQ macro: setTile1()
  p->code = 'h';
  return;
}



void SetTile8(TILE_8 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 2;
                    // Possible PsyQ macro: setTile16()
  p->code = 'p';
  return;
}



void SetTile16(TILE_16 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 2;
                    // Possible PsyQ macro: setTile8()
  p->code = 'x';
  return;
}



void SetTile(TILE *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 3;
                    // Possible PsyQ macro: setTile()
  p->code = '`';
  return;
}



void SetLineF2(LINE_F2 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 3;
                    // Possible PsyQ macro: setLineF2()
  p->code = '@';
  return;
}



void SetLineG2(LINE_G2 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 4;
                    // Possible PsyQ macro: setLineG2()
  p->code = 'P';
  return;
}



void SetLineF3(LINE_F3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 5;
                    // Possible PsyQ macro: setLineF3()
  p->code = 'H';
  p->pad = 0x55555555;
  return;
}



void SetLineG3(LINE_G3 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 7;
                    // Possible PsyQ macro: setLineG3()
  p->code = 'X';
  p->pad = 0x55555555;
  return;
}



void SetLineF4(LINE_F4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 6;
                    // Possible PsyQ macro: setLineF4()
  p->code = 'L';
  p->pad = 0x55555555;
  return;
}



void SetLineG4(LINE_G4 *p)

{
  *(undefined1 *)((int)&p->tag + 3) = 9;
                    // Possible PsyQ macro: setLineG4()
  p->code = '\\';
  p->pad = 0x55555555;
  return;
}



void SetDrawTPage(DR_TPAGE *p,int dfe,int dtd,int tpage)

{
  uint uVar1;
  uint uVar2;
  
  *(undefined1 *)((int)&p->tag + 3) = 1;
  uVar2 = 0xe1000000;
  if (dtd != 0) {
    uVar2 = 0xe1000200;
  }
  uVar1 = tpage & 0x9ff;
  if (dfe != 0) {
    uVar1 = uVar1 | 0x400;
  }
  p->code[0] = uVar2 | uVar1;
  return;
}



void SetDrawMove(DR_MOVE *p,RECT *rect,int x,int y)

{
  undefined1 uVar1;
  u_long uVar2;
  
  uVar1 = 5;
  if ((rect->w == 0) || (rect->h == 0)) {
    uVar1 = 0;
  }
  p->code[0] = 0x1000000;
  p->code[1] = 0x80000000;
  *(undefined1 *)((int)&p->tag + 3) = uVar1;
  uVar2 = *(u_long *)rect;
  p->code[3] = y << 0x10 | x & 0xffffU;
  p->code[2] = uVar2;
  p->code[4] = *(u_long *)&rect->w;
  return;
}



void SetDrawLoad(DR_LOAD *p,RECT *rect)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = ((int)rect->w * (int)rect->h + 1) / 2;
  iVar2 = uVar1 + 4;
  if (0xc < uVar1) {
    iVar2 = 0;
  }
  *(char *)((int)&p->tag + 3) = (char)iVar2;
  p->code[0] = 0xa0000000;
  p->code[1] = *(u_long *)rect;
  p->code[2] = *(u_long *)&rect->w;
  p->code[iVar2 + -1] = 0x1000000;
  return;
}



int MargePrim(void *p0,void *p1)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = (uint)*(byte *)((int)p0 + 3) + (uint)*(byte *)((int)p1 + 3) + 1;
  if (uVar2 < 0x11) {
    *(char *)((int)p0 + 3) = (char)uVar2;
    *(undefined4 *)p1 = 0;
    iVar1 = PRIM_OBJ_52C();
    return iVar1;
  }
  return -1;
}



void PRIM_OBJ_52C(void)

{
  return;
}



void DumpDrawEnv(DRAWENV *env)

{
  ushort uVar1;
  
  (*(code *)PTR_printf_800a0084)
            ("clip (%3d,%3d)-(%d,%d)\n",(int)(env->clip).x,(int)(env->clip).y,(int)(env->clip).w,
             (int)(env->clip).h);
  (*(code *)PTR_printf_800a0084)("ofs  (%3d,%3d)\n",(int)env->ofs[0],(int)env->ofs[1]);
  (*(code *)PTR_printf_800a0084)
            ("tw   (%d,%d)-(%d,%d)\n",(int)(env->tw).x,(int)(env->tw).y,(int)(env->tw).w,
             (int)(env->tw).h);
  (*(code *)PTR_printf_800a0084)("dtd   %d\n",env->dtd);
  (*(code *)PTR_printf_800a0084)("dfe   %d\n",env->dfe);
  uVar1 = env->tpage;
  (*(code *)PTR_printf_800a0084)
            ("tpage: (%d,%d,%d,%d)\n",uVar1 >> 7 & 3,uVar1 >> 5 & 3,(uVar1 & 0x1f) << 6,
             (uVar1 & 0x10) * 0x10 + (uVar1 >> 2 & 0x200));
  return;
}



void DumpDispEnv(DISPENV *env)

{
  (*(code *)PTR_printf_800a0084)
            ("disp   (%3d,%3d)-(%d,%d)\n",(int)(env->disp).x,(int)(env->disp).y,(int)(env->disp).w,
             (int)(env->disp).h);
  (*(code *)PTR_printf_800a0084)
            ("screen (%3d,%3d)-(%d,%d)\n",(int)(env->screen).x,(int)(env->screen).y,
             (int)(env->screen).w,(int)(env->screen).h);
  (*(code *)PTR_printf_800a0084)("isinter %d\n",env->isinter);
  (*(code *)PTR_printf_800a0084)("isrgb24 %d\n",env->isrgb24);
  return;
}



int ResetGraph(int mode)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = mode & 7;
  if (uVar2 != 3) {
    if (3 < uVar2) {
      if (uVar2 != 5) {
        iVar1 = SYS_OBJ_11C();
        return iVar1;
      }
      goto SYS_OBJ_70;
    }
    if (uVar2 != 0) {
      iVar1 = SYS_OBJ_11C();
      return iVar1;
    }
  }
  printf("ResetGraph:jtb=%08x,env=%08x\n",&PTR_s__Id__sys_c_v_1_129_1996_12_25_03_800a0040,
         &null_00h_800a0088);
SYS_OBJ_70:
  memset(&null_00h_800a0088,'\0',0x80);
  ResetCallback();
  GPU_cw((uint)PTR_PTR_800a0080 & 0xffffff);
  null_00h_800a0088 = _reset(mode);
  null_00h_800a0089 = 1;
  null_0000h_800a008c = (undefined2)*(undefined4 *)(&DAT_800a0108 + (uint)null_00h_800a0088 * 4);
  null_0000h_800a008e = (undefined2)*(undefined4 *)(&DAT_800a011c + (uint)null_00h_800a0088 * 4);
  memset((uchar *)&null_00000000h_800a0098,0xff,0x5c);
  memset((uchar *)&null_0000h_800a00f4,0xff,0x14);
  iVar1 = SYS_OBJ_16C();
  return iVar1;
}



void SYS_OBJ_11C(void)

{
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("ResetGraph(%d)...\n");
  }
  (**(code **)(PTR_PTR_800a0080 + 0x34))(1);
  return;
}



void SYS_OBJ_16C(void)

{
  return;
}



uint SetGraphReverse(undefined4 param_1)

{
  uint uVar1;
  undefined4 uVar2;
  uint uVar3;
  
  uVar3 = (uint)null_00h_800a008b;
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("SetGraphReverse(%d)...\n",param_1);
  }
  null_00h_800a008b = (byte)param_1;
  uVar1 = (**(code **)(PTR_PTR_800a0080 + 0x28))(8);
  if (null_00h_800a008b != '\0') {
    uVar3 = SYS_OBJ_210();
    return uVar3;
  }
  (**(code **)(PTR_PTR_800a0080 + 0x10))(uVar1 | 0x8000000);
  if (null_00h_800a0088 == '\x02') {
    uVar2 = 0x20000504;
    if (null_00h_800a008b != '\0') {
      uVar2 = 0x20000501;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(uVar2);
  }
  return uVar3;
}



void SYS_OBJ_210(uint param_1)

{
  uint in_v0;
  undefined4 uVar1;
  
  (**(code **)(PTR_PTR_800a0080 + 0x10))(param_1 | in_v0);
  if (null_00h_800a0088 == '\x02') {
    uVar1 = 0x20000504;
    if (null_00h_800a008b != '\0') {
      uVar1 = 0x20000501;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(uVar1);
  }
  return;
}



int SetGraphDebug(int level)

{
  uint uVar1;
  
  uVar1 = (uint)null_00h_800a008a;
  null_00h_800a008a = (byte)level;
  if ((level & 0xffU) != 0) {
    (*(code *)PTR_printf_800a0084)
              ("SetGraphDebug:level:%d,type:%d reverse:%d\n",level & 0xffU,null_00h_800a0088,
               null_00h_800a008b);
  }
  return uVar1;
}



byte SetGraphQueue(uint param_1)

{
  byte bVar1;
  
  bVar1 = null_00h_800a0089;
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("SetGrapQue(%d)...\n",param_1);
  }
  if (param_1 != null_00h_800a0089) {
    (**(code **)(PTR_PTR_800a0080 + 0x34))(1);
    null_00h_800a0089 = (byte)param_1;
    DMACallback(2,0);
  }
  return bVar1;
}



undefined1 GetGraphType(void)

{
  return null_00h_800a0088;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int GetGraphDebug(void)

{
  return (uint)null_00h_800a008a;
}



u_long DrawSyncCallback(func *func)

{
  u_long uVar1;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("DrawSyncCallback(%08x)...\n",func);
  }
  uVar1 = (u_long)null_00000000h_800a0094;
  null_00000000h_800a0094 = func;
  return uVar1;
}



void SetDispMask(int mask)

{
  undefined4 uVar1;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("SetDispMask(%d)...\n",mask);
  }
  if (mask == 0) {
    memset((uchar *)&null_0000h_800a00f4,0xff,0x14);
  }
  uVar1 = 0x3000001;
  if (mask != 0) {
    uVar1 = 0x3000000;
  }
  (**(code **)(PTR_PTR_800a0080 + 0x10))(uVar1);
  return;
}



int DrawSync(int mode)

{
  int iVar1;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("DrawSync(%d)...\n",mode);
  }
  iVar1 = (**(code **)(PTR_PTR_800a0080 + 0x3c))(mode);
  return iVar1;
}



void checkRECT(undefined4 param_1,short *param_2)

{
  int iVar1;
  int iVar2;
  
  if (null_00h_800a008a != '\x01') {
    if (null_00h_800a008a == '\x02') {
      (*(code *)PTR_printf_800a0084)(&DAT_80012f6c,param_1);
      (*(code *)PTR_printf_800a0084)
                ("(%d,%d)-(%d,%d)\n",(int)*param_2,(int)param_2[1],(int)param_2[2],(int)param_2[3]);
      return;
    }
    SYS_OBJ_640();
    return;
  }
  iVar2 = (int)param_2[2];
  if ((iVar2 <= null_0000h_800a008c) && (iVar2 + *param_2 <= (int)null_0000h_800a008c)) {
    iVar1 = (int)param_2[1];
    if (((iVar1 <= null_0000h_800a008e) &&
        (((iVar1 + param_2[3] <= (int)null_0000h_800a008e && (0 < iVar2)) && (-1 < *param_2)))) &&
       ((-1 < iVar1 && (0 < param_2[3])))) {
      return;
    }
  }
  SYS_OBJ_604("%s:bad RECT");
  return;
}



void SYS_OBJ_604(void)

{
  short *unaff_s0;
  
  (*(code *)PTR_printf_800a0084)();
  (*(code *)PTR_printf_800a0084)
            ("(%d,%d)-(%d,%d)\n",(int)*unaff_s0,(int)unaff_s0[1],(int)unaff_s0[2]);
  return;
}



void SYS_OBJ_640(void)

{
  return;
}



int ClearImage(RECT *rect,u_char r,u_char g,u_char b)

{
  int iVar1;
  
  checkRECT("ClearImage",rect);
  iVar1 = (**(code **)(PTR_PTR_800a0080 + 8))
                    (*(undefined4 *)(PTR_PTR_800a0080 + 0xc),rect,8,
                     (uint)b << 0x10 | (uint)g << 8 | (uint)r);
  return iVar1;
}



int ClearImage2(RECT *rect,u_char r,u_char g,u_char b)

{
  int iVar1;
  
  checkRECT("ClearImage",rect);
  iVar1 = (**(code **)(PTR_PTR_800a0080 + 8))
                    (*(undefined4 *)(PTR_PTR_800a0080 + 0xc),rect,8,
                     (uint)b << 0x10 | (uint)g << 8 | 0x80000000 | (uint)r);
  return iVar1;
}



int LoadImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  checkRECT("LoadImage",rect);
  iVar1 = (**(code **)(PTR_PTR_800a0080 + 8))(*(undefined4 *)(PTR_PTR_800a0080 + 0x20),rect,8,p);
  return iVar1;
}



int StoreImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  checkRECT("StoreImage",rect);
  iVar1 = (**(code **)(PTR_PTR_800a0080 + 8))(*(undefined4 *)(PTR_PTR_800a0080 + 0x1c),rect,8,p);
  return iVar1;
}



int MoveImage(RECT *rect,int x,int y)

{
  int iVar1;
  
  checkRECT("MoveImage",rect);
  iVar1 = -1;
  if (rect->w != 0) {
    if (rect->h == 0) {
      iVar1 = SYS_OBJ_8F4();
      return iVar1;
    }
    null_00000000h_800a013c = y << 0x10 | x & 0xffffU;
    null_00000000h_800a0138._0_2_ = rect->x;
    null_00000000h_800a0138._2_2_ = rect->y;
    null_00000000h_800a0140._0_2_ = rect->w;
    null_00000000h_800a0140._2_2_ = rect->h;
    iVar1 = (**(code **)(PTR_PTR_800a0080 + 8))
                      (*(undefined4 *)(PTR_PTR_800a0080 + 0x18),&DAT_800a0130,0x14,0);
  }
  return iVar1;
}



void SYS_OBJ_8F4(void)

{
  return;
}



u_long * ClearOTag(u_long *ot,int n)

{
  int iVar1;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("ClearOTag(%08x,%d)...\n",ot,n);
  }
  for (iVar1 = n + -1; iVar1 != 0; iVar1 = iVar1 + -1) {
    *(undefined1 *)((int)ot + 3) = 0;
    *ot = *ot & 0xff000000 | (uint)(ot + 1) & 0xffffff;
    ot = ot + 1;
  }
  *ot = 0xa0144;
  return ot;
}



u_long * ClearOTagR(u_long *ot,int n)

{
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("ClearOTagR(%08x,%d)...\n",ot,n);
  }
  (**(code **)(PTR_PTR_800a0080 + 0x2c))(ot,n);
  *ot = 0xa0144;
  return ot;
}



void DrawPrim(void *p)

{
  undefined1 uVar1;
  
  uVar1 = *(undefined1 *)((int)p + 3);
  (**(code **)(PTR_PTR_800a0080 + 0x3c))(0);
  (**(code **)(PTR_PTR_800a0080 + 0x14))((int)p + 4,uVar1);
  return;
}



void DrawOTag(u_long *p)

{
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("DrawOTag(%08x)...\n",p);
  }
  (**(code **)(PTR_PTR_800a0080 + 8))(*(undefined4 *)(PTR_PTR_800a0080 + 0x18),p,0,0);
  return;
}



DRAWENV * PutDrawEnv(DRAWENV *env)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  DRAWENV *pDVar6;
  DRAWENV *pDVar7;
  undefined4 *puVar8;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("PutDrawEnv(%08x)...\n",env);
  }
  SetDrawEnv2(&env->dr_env,env);
  puVar1 = PTR_PTR_800a0080;
  (env->dr_env).tag = (env->dr_env).tag | 0xffffff;
  (**(code **)(puVar1 + 8))(*(undefined4 *)(puVar1 + 0x18),&env->dr_env,0x40,0);
  pDVar7 = env;
  puVar2 = &null_00000000h_800a0098;
  do {
    puVar8 = puVar2;
    pDVar6 = pDVar7;
    uVar3 = *(undefined4 *)&(pDVar6->clip).w;
    uVar4 = *(undefined4 *)pDVar6->ofs;
    uVar5 = *(undefined4 *)&pDVar6->tw;
    *puVar8 = *(undefined4 *)&pDVar6->clip;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar5;
    pDVar7 = (DRAWENV *)&(pDVar6->tw).w;
    puVar2 = puVar8 + 4;
  } while (pDVar7 != (DRAWENV *)((env->dr_env).code + 0xc));
  uVar3 = *(undefined4 *)&pDVar6->tpage;
  uVar4 = *(undefined4 *)&pDVar6->isbg;
  puVar8[4] = *(undefined4 *)pDVar7;
  puVar8[5] = uVar3;
  puVar8[6] = uVar4;
  return env;
}



void DrawOTagEnv(u_long *p,DRAWENV *env)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  DRAWENV *pDVar6;
  DRAWENV *pDVar7;
  undefined4 *puVar8;
  
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("DrawOTagEnv(%08x,&08x)...\n",p,env);
  }
  SetDrawEnv2(&env->dr_env,env);
  puVar1 = PTR_PTR_800a0080;
  (env->dr_env).tag = (env->dr_env).tag & 0xff000000 | (uint)p & 0xffffff;
  (**(code **)(puVar1 + 8))(*(undefined4 *)(puVar1 + 0x18),&env->dr_env,0x40,0);
  pDVar7 = env;
  puVar2 = &null_00000000h_800a0098;
  do {
    puVar8 = puVar2;
    pDVar6 = pDVar7;
    uVar3 = *(undefined4 *)&(pDVar6->clip).w;
    uVar4 = *(undefined4 *)pDVar6->ofs;
    uVar5 = *(undefined4 *)&pDVar6->tw;
    *puVar8 = *(undefined4 *)&pDVar6->clip;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar5;
    pDVar7 = (DRAWENV *)&(pDVar6->tw).w;
    puVar2 = puVar8 + 4;
  } while (pDVar7 != (DRAWENV *)((env->dr_env).code + 0xc));
  uVar3 = *(undefined4 *)&pDVar6->tpage;
  uVar4 = *(undefined4 *)&pDVar6->isbg;
  puVar8[4] = *(undefined4 *)pDVar7;
  puVar8[5] = uVar3;
  puVar8[6] = uVar4;
  return;
}



DRAWENV * GetDrawEnv(DRAWENV *env)

{
  memcpy((uchar *)env,(uchar *)&null_00000000h_800a0098,0x5c);
  return env;
}



DISPENV * PutDispEnv(DISPENV *env)

{
  short sVar1;
  bool bVar2;
  u_char uVar3;
  DISPENV *pDVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  uint uVar14;
  uint uVar15;
  
  uVar15 = 0x8000000;
  if (1 < null_00h_800a008a) {
    (*(code *)PTR_printf_800a0084)("PutDispEnv(%08x)...\n",env);
  }
  if (null_00h_800a0088 - 1 < 2) {
    get_dx(env);
    pDVar4 = (DISPENV *)SYS_OBJ_E34();
    return pDVar4;
  }
  (**(code **)(PTR_PTR_800a0080 + 0x10))
            (((ushort)(env->disp).y & 0x3ff) << 10 | (ushort)(env->disp).x & 0x3ff | 0x5000000);
  if ((((null_0000h_800a00fc == (env->screen).x) && (null_0000h_800a00fe == (env->screen).y)) &&
      (null_0000h_800a0100 == (env->screen).w)) && (null_0000h_800a0102 == (env->screen).h))
  goto SYS_OBJ_1090;
  uVar3 = FUN_80088970();
  sVar1 = (env->screen).x;
  env->pad0 = uVar3;
  iVar5 = sVar1 * 10;
  iVar7 = (int)(env->screen).y;
  iVar6 = iVar5 + 0x260;
  if (uVar3 != '\0') {
    pDVar4 = (DISPENV *)SYS_OBJ_F00();
    return pDVar4;
  }
  iVar13 = iVar7 + 0x10;
  iVar8 = (int)(env->screen).w;
  if (iVar8 != 0) {
    pDVar4 = (DISPENV *)SYS_OBJ_F24(iVar7,iVar8,iVar6 + iVar8 * 10);
    return pDVar4;
  }
  uVar12 = iVar5 + 0xc60;
  iVar5 = (int)(env->screen).h;
  uVar14 = iVar13 + iVar5;
  if (iVar5 == 0) {
    uVar14 = iVar7 + 0x100;
  }
  if (iVar6 < 500) {
    uVar9 = 500;
  }
  else {
    uVar9 = 0xcda;
    if (iVar6 < 0xcdb) {
      pDVar4 = (DISPENV *)SYS_OBJ_F58(iVar7,iVar6);
      return pDVar4;
    }
  }
  uVar10 = uVar9 + 0x50;
  if (((int)(uVar9 + 0x50) <= (int)uVar12) && (uVar10 = 0xcda, (int)uVar12 < 0xcdb)) {
    uVar10 = uVar12;
  }
  if (iVar13 < 0x10) {
    uVar12 = 0x10;
  }
  else {
    if (env->pad0 == '\0') {
      if (iVar13 < 0x101) {
        pDVar4 = (DISPENV *)SYS_OBJ_FD8(iVar13);
        return pDVar4;
      }
    }
    else if (iVar13 < 0x137) {
      pDVar4 = (DISPENV *)SYS_OBJ_FD8(iVar13);
      return pDVar4;
    }
    uVar12 = 0x100;
    if (env->pad0 != '\0') {
      pDVar4 = (DISPENV *)SYS_OBJ_FD8(0x136);
      return pDVar4;
    }
  }
  uVar11 = uVar12 + 2;
  if ((int)(uVar12 + 2) <= (int)uVar14) {
    if (env->pad0 == '\0') {
      uVar11 = uVar14;
      if ((int)uVar14 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)uVar14 < 0x139) {
      pDVar4 = (DISPENV *)SYS_OBJ_1034(uVar12,uVar14);
      return pDVar4;
    }
    uVar11 = 0x102;
    if (env->pad0 != '\0') {
      pDVar4 = (DISPENV *)SYS_OBJ_1034(uVar12,0x138);
      return pDVar4;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar10 & 0xfff) << 0xc | uVar9 | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar11 & 0x3ff) << 10 | uVar12 | 0x7000000);
SYS_OBJ_1090:
  iVar5._0_1_ = env->isinter;
  iVar5._1_1_ = env->isrgb24;
  iVar5._2_1_ = env->pad0;
  iVar5._3_1_ = env->pad1;
  if (((null_00000000h_800a0104 != iVar5) || (null_0000h_800a00f4 != (env->disp).x)) ||
     ((null_0000h_800a00f6 != (env->disp).y ||
      ((null_0000h_800a00f8 != (env->disp).w || (null_0000h_800a00fa != (env->disp).h)))))) {
    uVar3 = FUN_80088970();
    env->pad0 = uVar3;
    if (uVar3 == '\x01') {
      uVar15 = 0x8000008;
    }
    if (env->isrgb24 != '\0') {
      uVar15 = uVar15 | 0x10;
    }
    if (env->isinter != '\0') {
      uVar15 = uVar15 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      uVar15 = uVar15 | 0x80;
    }
    sVar1 = (env->disp).w;
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        pDVar4 = (DISPENV *)SYS_OBJ_11C0();
        return pDVar4;
      }
      if (sVar1 < 0x191) {
        pDVar4 = (DISPENV *)SYS_OBJ_11C0();
        return pDVar4;
      }
      if (sVar1 < 0x231) {
        pDVar4 = (DISPENV *)SYS_OBJ_11C0();
        return pDVar4;
      }
      uVar15 = uVar15 | 3;
    }
    sVar1 = (env->disp).h;
    bVar2 = sVar1 < 0x121;
    if (env->pad0 == '\0') {
      bVar2 = sVar1 < 0x101;
    }
    if (!bVar2) {
      uVar15 = uVar15 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(uVar15);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)env,0x14);
  return env;
}



void SYS_OBJ_E34(void)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  uint in_v0;
  uint in_v1;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  short *unaff_s0;
  int iVar11;
  uint uVar12;
  uint unaff_s3;
  
  (**(code **)(PTR_PTR_800a0080 + 0x10))(in_v0 | in_v1);
  if ((((null_0000h_800a00fc == unaff_s0[4]) && (null_0000h_800a00fe == unaff_s0[5])) &&
      (null_0000h_800a0100 == unaff_s0[6])) && (null_0000h_800a0102 == unaff_s0[7]))
  goto SYS_OBJ_1090;
  cVar3 = FUN_80088970();
  *(char *)(unaff_s0 + 9) = cVar3;
  iVar5 = (int)unaff_s0[5];
  iVar4 = unaff_s0[4] * 10 + 0x260;
  if (cVar3 != '\0') {
    SYS_OBJ_F00();
    return;
  }
  iVar11 = iVar5 + 0x10;
  iVar6 = (int)unaff_s0[6];
  if (iVar6 != 0) {
    SYS_OBJ_F24(iVar5,iVar6,iVar4 + iVar6 * 10);
    return;
  }
  uVar10 = unaff_s0[4] * 10 + 0xc60;
  uVar12 = iVar11 + unaff_s0[7];
  if (unaff_s0[7] == 0) {
    uVar12 = iVar5 + 0x100;
  }
  if (iVar4 < 500) {
    uVar7 = 500;
  }
  else {
    uVar7 = 0xcda;
    if (iVar4 < 0xcdb) {
      SYS_OBJ_F58(iVar5,iVar4);
      return;
    }
  }
  uVar8 = uVar7 + 0x50;
  if (((int)(uVar7 + 0x50) <= (int)uVar10) && (uVar8 = 0xcda, (int)uVar10 < 0xcdb)) {
    uVar8 = uVar10;
  }
  if (iVar11 < 0x10) {
    uVar10 = 0x10;
  }
  else {
    if ((char)unaff_s0[9] == '\0') {
      if (iVar11 < 0x101) {
        SYS_OBJ_FD8(iVar11);
        return;
      }
    }
    else if (iVar11 < 0x137) {
      SYS_OBJ_FD8(iVar11);
      return;
    }
    uVar10 = 0x100;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_FD8(0x136);
      return;
    }
  }
  uVar9 = uVar10 + 2;
  if ((int)(uVar10 + 2) <= (int)uVar12) {
    if ((char)unaff_s0[9] == '\0') {
      uVar9 = uVar12;
      if ((int)uVar12 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)uVar12 < 0x139) {
      SYS_OBJ_1034(uVar10,uVar12);
      return;
    }
    uVar9 = 0x102;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_1034(uVar10,0x138);
      return;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar8 & 0xfff) << 0xc | uVar7 | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar9 & 0x3ff) << 10 | uVar10 | 0x7000000);
SYS_OBJ_1090:
  if (((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0)) ||
     ((null_0000h_800a00f6 != unaff_s0[1] ||
      ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_F00(undefined4 param_1)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  int in_v1;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  short *unaff_s0;
  int unaff_s1;
  uint uVar9;
  uint unaff_s3;
  
  iVar4 = (int)unaff_s0[6];
  if (iVar4 != 0) {
    SYS_OBJ_F24(param_1,iVar4,in_v1 + iVar4 * 10);
    return;
  }
  uVar8 = in_v1 + 0xa00;
  uVar9 = unaff_s1 + unaff_s0[7];
  if (unaff_s0[7] == 0) {
    uVar9 = unaff_s1 + 0xf0;
  }
  if (in_v1 < 500) {
    uVar5 = 500;
  }
  else {
    uVar5 = 0xcda;
    if (in_v1 < 0xcdb) {
      SYS_OBJ_F58();
      return;
    }
  }
  uVar6 = uVar5 + 0x50;
  if (((int)(uVar5 + 0x50) <= (int)uVar8) && (uVar6 = 0xcda, (int)uVar8 < 0xcdb)) {
    uVar6 = uVar8;
  }
  if (unaff_s1 < 0x10) {
    uVar8 = 0x10;
  }
  else {
    if ((char)unaff_s0[9] == '\0') {
      if (unaff_s1 < 0x101) {
        SYS_OBJ_FD8();
        return;
      }
    }
    else if (unaff_s1 < 0x137) {
      SYS_OBJ_FD8();
      return;
    }
    uVar8 = 0x100;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_FD8(0x136);
      return;
    }
  }
  uVar7 = uVar8 + 2;
  if ((int)(uVar8 + 2) <= (int)uVar9) {
    if ((char)unaff_s0[9] == '\0') {
      uVar7 = uVar9;
      if ((int)uVar9 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)uVar9 < 0x139) {
      SYS_OBJ_1034(uVar8,uVar9);
      return;
    }
    uVar7 = 0x102;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_1034(uVar8,0x138);
      return;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar6 & 0xfff) << 0xc | uVar5 | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar7 & 0x3ff) << 10 | uVar8 | 0x7000000);
  if ((((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0))
      || (null_0000h_800a00f6 != unaff_s0[1])) ||
     ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_F24(undefined4 param_1,undefined4 param_2,uint param_3)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  int in_v1;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  short *unaff_s0;
  int unaff_s1;
  uint uVar8;
  uint unaff_s3;
  
  uVar8 = unaff_s1 + unaff_s0[7];
  if (unaff_s0[7] == 0) {
    uVar8 = unaff_s1 + 0xf0;
  }
  if (in_v1 < 500) {
    uVar5 = 500;
  }
  else {
    uVar5 = 0xcda;
    if (in_v1 < 0xcdb) {
      SYS_OBJ_F58();
      return;
    }
  }
  uVar6 = uVar5 + 0x50;
  if (((int)(uVar5 + 0x50) <= (int)param_3) && (uVar6 = 0xcda, (int)param_3 < 0xcdb)) {
    uVar6 = param_3;
  }
  if (unaff_s1 < 0x10) {
    uVar4 = 0x10;
  }
  else {
    if ((char)unaff_s0[9] == '\0') {
      if (unaff_s1 < 0x101) {
        SYS_OBJ_FD8();
        return;
      }
    }
    else if (unaff_s1 < 0x137) {
      SYS_OBJ_FD8();
      return;
    }
    uVar4 = 0x100;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_FD8(0x136);
      return;
    }
  }
  uVar7 = uVar4 + 2;
  if ((int)(uVar4 + 2) <= (int)uVar8) {
    if ((char)unaff_s0[9] == '\0') {
      uVar7 = uVar8;
      if ((int)uVar8 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)uVar8 < 0x139) {
      SYS_OBJ_1034(uVar4,uVar8);
      return;
    }
    uVar7 = 0x102;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_1034(uVar4,0x138);
      return;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar6 & 0xfff) << 0xc | uVar5 | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar7 & 0x3ff) << 10 | uVar4 | 0x7000000);
  if ((((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0))
      || (null_0000h_800a00f6 != unaff_s0[1])) ||
     ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_F58(undefined4 param_1,uint param_2,uint param_3)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  short *unaff_s0;
  int unaff_s1;
  uint unaff_s2;
  uint unaff_s3;
  
  uVar5 = param_2 + 0x50;
  if (((int)(param_2 + 0x50) <= (int)param_3) && (uVar5 = 0xcda, (int)param_3 < 0xcdb)) {
    uVar5 = param_3;
  }
  if (unaff_s1 < 0x10) {
    uVar4 = 0x10;
  }
  else {
    if ((char)unaff_s0[9] == '\0') {
      if (unaff_s1 < 0x101) {
        SYS_OBJ_FD8();
        return;
      }
    }
    else if (unaff_s1 < 0x137) {
      SYS_OBJ_FD8();
      return;
    }
    uVar4 = 0x100;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_FD8(0x136);
      return;
    }
  }
  uVar6 = uVar4 + 2;
  if ((int)(uVar4 + 2) <= (int)unaff_s2) {
    if ((char)unaff_s0[9] == '\0') {
      uVar6 = unaff_s2;
      if ((int)unaff_s2 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)unaff_s2 < 0x139) {
      SYS_OBJ_1034();
      return;
    }
    uVar6 = 0x102;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_1034(uVar4,0x138);
      return;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar5 & 0xfff) << 0xc | param_2 & 0xfff | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar6 & 0x3ff) << 10 | uVar4 | 0x7000000);
  if ((((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0))
      || (null_0000h_800a00f6 != unaff_s0[1])) ||
     ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_FD8(uint param_1,undefined4 param_2,uint param_3)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  uint in_v1;
  uint uVar4;
  short *unaff_s0;
  uint unaff_s2;
  uint unaff_s3;
  
  uVar4 = param_1 + 2;
  if ((int)(param_1 + 2) <= (int)unaff_s2) {
    if ((char)unaff_s0[9] == '\0') {
      uVar4 = unaff_s2;
      if ((int)unaff_s2 < 0x103) goto code_r0x8008ae0c;
    }
    else if ((int)unaff_s2 < 0x139) {
      SYS_OBJ_1034();
      return;
    }
    uVar4 = 0x102;
    if ((char)unaff_s0[9] != '\0') {
      SYS_OBJ_1034(param_1,0x138);
      return;
    }
  }
code_r0x8008ae0c:
  (**(code **)(PTR_PTR_800a0080 + 0x10))((param_3 & 0xfff) << 0xc | in_v1 & 0xfff | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((uVar4 & 0x3ff) << 10 | param_1 & 0x3ff | 0x7000000);
  if ((((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0))
      || (null_0000h_800a00f6 != unaff_s0[1])) ||
     ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_1034(undefined4 param_1,uint param_2,uint param_3)

{
  short sVar1;
  bool bVar2;
  char cVar3;
  uint in_v1;
  short *unaff_s0;
  uint unaff_s1;
  uint unaff_s3;
  
  (**(code **)(PTR_PTR_800a0080 + 0x10))((param_3 & 0xfff) << 0xc | in_v1 & 0xfff | 0x6000000);
  (**(code **)(PTR_PTR_800a0080 + 0x10))((param_2 & 0x3ff) << 10 | unaff_s1 & 0x3ff | 0x7000000);
  if ((((null_00000000h_800a0104 != *(int *)(unaff_s0 + 8)) || (null_0000h_800a00f4 != *unaff_s0))
      || (null_0000h_800a00f6 != unaff_s0[1])) ||
     ((null_0000h_800a00f8 != unaff_s0[2] || (null_0000h_800a00fa != unaff_s0[3])))) {
    cVar3 = FUN_80088970();
    *(char *)(unaff_s0 + 9) = cVar3;
    if (cVar3 == '\x01') {
      unaff_s3 = unaff_s3 | 8;
    }
    if (*(char *)((int)unaff_s0 + 0x11) != '\0') {
      unaff_s3 = unaff_s3 | 0x10;
    }
    if ((char)unaff_s0[8] != '\0') {
      unaff_s3 = unaff_s3 | 0x20;
    }
    if (null_00h_800a008b != '\0') {
      unaff_s3 = unaff_s3 | 0x80;
    }
    sVar1 = unaff_s0[2];
    if (0x118 < sVar1) {
      if (sVar1 < 0x161) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x191) {
        SYS_OBJ_11C0();
        return;
      }
      if (sVar1 < 0x231) {
        SYS_OBJ_11C0();
        return;
      }
      unaff_s3 = unaff_s3 | 3;
    }
    bVar2 = unaff_s0[3] < 0x121;
    if ((char)unaff_s0[9] == '\0') {
      bVar2 = unaff_s0[3] < 0x101;
    }
    if (!bVar2) {
      unaff_s3 = unaff_s3 | 0x24;
    }
    (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  }
  memcpy((uchar *)&null_0000h_800a00f4,(uchar *)unaff_s0,0x14);
  return;
}



void SYS_OBJ_11C0(void)

{
  bool bVar1;
  uchar *unaff_s0;
  uint unaff_s3;
  
  bVar1 = *(short *)(unaff_s0 + 6) < 0x121;
  if (unaff_s0[0x12] == '\0') {
    bVar1 = *(short *)(unaff_s0 + 6) < 0x101;
  }
  if (!bVar1) {
    unaff_s3 = unaff_s3 | 0x24;
  }
  (**(code **)(PTR_PTR_800a0080 + 0x10))(unaff_s3);
  memcpy((uchar *)&null_0000h_800a00f4,unaff_s0,0x14);
  return;
}



DISPENV * GetDispEnv(DISPENV *env)

{
  memcpy((uchar *)env,(uchar *)&null_0000h_800a00f4,0x14);
  return env;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int GetODE(void)

{
  uint uVar1;
  
  uVar1 = (**(code **)(PTR_PTR_800a0080 + 0x38))();
  return uVar1 >> 0x1f;
}



void SetTexWindow(DR_TWIN *p,RECT *tw)

{
  u_long uVar1;
  
  *(undefined1 *)((int)&p->tag + 3) = 2;
  uVar1 = get_tw(tw);
  p->code[0] = uVar1;
  p->code[1] = 0;
  return;
}



void SetDrawArea(DR_AREA *p,RECT *r)

{
  u_long uVar1;
  
  *(undefined1 *)((int)&p->tag + 3) = 2;
  uVar1 = get_cs((int)r->x,(int)r->y);
  p->code[0] = uVar1;
  uVar1 = get_ce((int)(((uint)(ushort)r->x + (uint)(ushort)r->w + -1) * 0x10000) >> 0x10,
                 (int)(((uint)(ushort)r->y + (uint)(ushort)r->h + -1) * 0x10000) >> 0x10);
  p->code[1] = uVar1;
  return;
}



void SetDrawOffset(DR_OFFSET *p,u_short *ofs)

{
  u_long uVar1;
  
  *(undefined1 *)((int)&p->tag + 3) = 2;
  uVar1 = get_ofs((int)(short)*ofs,(int)(short)ofs[1]);
  p->code[0] = uVar1;
  p->code[1] = 0;
  return;
}



void SetPriority(int param_1,int param_2,int param_3)

{
  uint uVar1;
  
  *(undefined1 *)(param_1 + 3) = 2;
  uVar1 = 0xe6000000;
  if (param_2 != 0) {
    uVar1 = 0xe6000002;
  }
  if (param_3 != 0) {
    uVar1 = uVar1 | 1;
  }
  *(uint *)(param_1 + 4) = uVar1;
  *(undefined4 *)(param_1 + 8) = 0;
  return;
}



void SetDrawMode(DR_MODE *p,int dfe,int dtd,int tpage,RECT *tw)

{
  u_long uVar1;
  
  *(undefined1 *)((int)&p->tag + 3) = 2;
  uVar1 = get_mode(dfe,dtd,tpage & 0xffff);
  p->code[0] = uVar1;
  uVar1 = get_tw(tw);
  p->code[1] = uVar1;
  return;
}



void SetDrawEnv(DR_ENV *dr_env,DRAWENV *env)

{
  short sVar1;
  short sVar2;
  u_long uVar3;
  int iVar4;
  char cVar5;
  undefined4 local_30;
  undefined4 local_2c;
  
  uVar3 = get_cs((int)(env->clip).x,(int)(env->clip).y);
  dr_env->code[0] = uVar3;
  uVar3 = get_ce((int)(((uint)(ushort)(env->clip).w + (uint)(ushort)(env->clip).x + -1) * 0x10000)
                 >> 0x10,(int)(((uint)(ushort)(env->clip).y + (uint)(ushort)(env->clip).h + -1) *
                              0x10000) >> 0x10);
  dr_env->code[1] = uVar3;
  uVar3 = get_ofs((int)env->ofs[0],(int)env->ofs[1]);
  dr_env->code[2] = uVar3;
  uVar3 = get_mode(env->dfe,env->dtd,env->tpage);
  dr_env->code[3] = uVar3;
  uVar3 = get_tw(&env->tw);
  dr_env->code[4] = uVar3;
  dr_env->code[5] = 0xe6000000;
  cVar5 = '\a';
  if (env->isbg != '\0') {
    sVar2 = (env->clip).w;
    sVar1 = 0;
    if ((-1 < sVar2) && (sVar1 = null_0000h_800a008c + -1, (int)sVar2 <= null_0000h_800a008c + -1))
    {
      sVar1 = sVar2;
    }
    iVar4 = (int)(env->clip).h;
    if (iVar4 < 0) {
      sVar2 = 0;
    }
    else {
      sVar2 = null_0000h_800a008e + -1;
      if (iVar4 <= null_0000h_800a008e + -1) {
        SYS_OBJ_1578(iVar4);
        return;
      }
    }
    local_2c = CONCAT22(sVar2,sVar1);
    local_30 = CONCAT22((env->clip).y - env->ofs[1],(env->clip).x - env->ofs[0]);
    dr_env->code[6] = (uint)env->b0 << 0x10 | (uint)env->g0 << 8 | 0x60000000 | (uint)env->r0;
    dr_env->code[7] = local_30;
    dr_env->code[8] = local_2c;
    cVar5 = '\n';
  }
  *(char *)((int)&dr_env->tag + 3) = cVar5 + -1;
  return;
}



void SYS_OBJ_1578(void)

{
  undefined2 in_v0;
  int in_a3;
  int unaff_s0;
  int unaff_s1;
  short sStack00000010;
  short sStack00000012;
  undefined2 in_stack_00000014;
  
  _in_stack_00000014 = CONCAT22(in_v0,in_stack_00000014);
  _sStack00000010 =
       CONCAT22(sStack00000012 - *(short *)(unaff_s0 + 10),sStack00000010 - *(short *)(unaff_s0 + 8)
               );
  *(uint *)(in_a3 * 4 + unaff_s1) =
       (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 | (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x60000000
       | (uint)*(byte *)(unaff_s0 + 0x19);
  *(undefined4 *)((in_a3 + 1) * 4 + unaff_s1) = _sStack00000010;
  *(undefined4 *)((in_a3 + 2) * 4 + unaff_s1) = _in_stack_00000014;
  *(char *)(unaff_s1 + 3) = (char)in_a3 + '\x02';
  return;
}



void SetDrawEnv2(int param_1,ushort *param_2)

{
  ushort uVar1;
  ushort uVar2;
  short sVar3;
  undefined4 uVar4;
  int iVar5;
  char cVar6;
  undefined4 local_30;
  undefined4 local_2c;
  
  uVar4 = get_cs((int)(short)*param_2,(int)(short)param_2[1]);
  *(undefined4 *)(param_1 + 4) = uVar4;
  uVar4 = get_ce((int)(((uint)param_2[2] + (uint)*param_2 + -1) * 0x10000) >> 0x10,
                 (int)(((uint)param_2[1] + (uint)param_2[3] + -1) * 0x10000) >> 0x10);
  *(undefined4 *)(param_1 + 8) = uVar4;
  uVar4 = get_ofs((int)(short)param_2[4],(int)(short)param_2[5]);
  *(undefined4 *)(param_1 + 0xc) = uVar4;
  uVar4 = get_mode(*(undefined1 *)((int)param_2 + 0x17),(char)param_2[0xb],param_2[10]);
  *(undefined4 *)(param_1 + 0x10) = uVar4;
  uVar4 = get_tw(param_2 + 6);
  *(undefined4 *)(param_1 + 0x14) = uVar4;
  *(undefined4 *)(param_1 + 0x18) = 0xe6000000;
  cVar6 = '\a';
  if ((char)param_2[0xc] != '\0') {
    uVar4 = *(undefined4 *)param_2;
    uVar1 = param_2[2];
    uVar2 = 0;
    if ((-1 < (short)uVar1) &&
       (uVar2 = null_0000h_800a008c - 1, (int)(short)uVar1 <= null_0000h_800a008c + -1)) {
      uVar2 = uVar1;
    }
    iVar5 = (int)(short)param_2[3];
    if (iVar5 < 0) {
      sVar3 = 0;
    }
    else {
      sVar3 = null_0000h_800a008e + -1;
      if (iVar5 <= null_0000h_800a008e + -1) {
        SYS_OBJ_1790(iVar5);
        return;
      }
    }
    local_2c = CONCAT22(sVar3,uVar2);
    if (((*param_2 & 0x3f) != 0) || ((uVar2 & 0x3f) != 0)) {
      local_30 = CONCAT22(param_2[1] - param_2[5],*param_2 - param_2[4]);
      *(uint *)(param_1 + 0x1c) =
           (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 | (uint)(byte)param_2[0xd] << 8 | 0x60000000
           | (uint)*(byte *)((int)param_2 + 0x19);
      *(undefined4 *)(param_1 + 0x20) = local_30;
      *(undefined4 *)(param_1 + 0x24) = local_2c;
      SYS_OBJ_18AC();
      return;
    }
    cVar6 = '\n';
    *(uint *)(param_1 + 0x1c) =
         (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 | (uint)(byte)param_2[0xd] << 8 | 0x2000000 |
         (uint)*(byte *)((int)param_2 + 0x19);
    *(undefined4 *)(param_1 + 0x20) = uVar4;
    *(undefined4 *)(param_1 + 0x24) = local_2c;
  }
  *(char *)(param_1 + 3) = cVar6 + -1;
  return;
}



void SYS_OBJ_1790(void)

{
  undefined2 in_v0;
  int in_t0;
  int unaff_s0;
  int unaff_s1;
  short sStack00000010;
  short sStack00000012;
  ushort in_stack_00000014;
  
  _in_stack_00000014 = CONCAT22(in_v0,in_stack_00000014);
  if (((_sStack00000010 & 0x3f) == 0) && ((in_stack_00000014 & 0x3f) == 0)) {
    *(uint *)(in_t0 * 4 + unaff_s1) =
         (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 |
         (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x2000000 | (uint)*(byte *)(unaff_s0 + 0x19);
    *(uint *)((in_t0 + 1) * 4 + unaff_s1) = _sStack00000010;
    *(undefined4 *)((in_t0 + 2) * 4 + unaff_s1) = _in_stack_00000014;
    *(char *)(unaff_s1 + 3) = (char)in_t0 + '\x02';
    return;
  }
  _sStack00000010 =
       CONCAT22(sStack00000012 - *(short *)(unaff_s0 + 10),sStack00000010 - *(short *)(unaff_s0 + 8)
               );
  *(uint *)(in_t0 * 4 + unaff_s1) =
       (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 | (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x60000000
       | (uint)*(byte *)(unaff_s0 + 0x19);
  *(uint *)((in_t0 + 1) * 4 + unaff_s1) = _sStack00000010;
  *(undefined4 *)((in_t0 + 2) * 4 + unaff_s1) = _in_stack_00000014;
  SYS_OBJ_18AC();
  return;
}



void SYS_OBJ_18AC(void)

{
  char in_t0;
  int unaff_s1;
  
  *(char *)(unaff_s1 + 3) = in_t0 + -1;
  return;
}



uint get_mode(int param_1,int param_2,uint param_3)

{
  uint uVar1;
  
  if (null_00h_800a0088 - 1 < 2) {
    uVar1 = 0xe1000000;
    if (param_2 != 0) {
      uVar1 = 0xe1000800;
    }
    param_3 = param_3 & 0x27ff;
    if (param_1 != 0) {
      uVar1 = SYS_OBJ_191C();
      return uVar1;
    }
  }
  else {
    uVar1 = 0xe1000000;
    if (param_2 != 0) {
      uVar1 = 0xe1000200;
    }
    param_3 = param_3 & 0x9ff;
    if (param_1 != 0) {
      param_3 = param_3 | 0x400;
    }
  }
  return uVar1 | param_3;
}



uint SYS_OBJ_191C(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0;
}



uint get_cs(short param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  
  if (param_1 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = (int)null_0000h_800a008c - 1;
    if ((int)param_1 <= null_0000h_800a008c + -1) {
      uVar1 = SYS_OBJ_1964();
      return uVar1;
    }
  }
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar2 = (int)null_0000h_800a008e;
    if (iVar2 + -1 < (int)(short)param_2) {
      uVar1 = SYS_OBJ_19A4(iVar2,iVar2 + -1);
      return uVar1;
    }
  }
  if (1 < null_00h_800a0088 - 1) {
    uVar1 = SYS_OBJ_19D8();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | uVar1 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_1964(undefined4 param_1,uint param_2)

{
  uint in_v0;
  int iVar1;
  uint uVar2;
  
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar1 = (int)null_0000h_800a008e;
    if (iVar1 + -1 < (int)(short)param_2) {
      uVar2 = SYS_OBJ_19A4(iVar1,iVar1 + -1);
      return uVar2;
    }
  }
  if (1 < null_00h_800a0088 - 1) {
    uVar2 = SYS_OBJ_19D8();
    return uVar2;
  }
  return (param_2 & 0xfff) << 0xc | in_v0 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_19A4(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  
  if (1 < null_00h_800a0088 - 1) {
    uVar1 = SYS_OBJ_19D8();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_4 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_19D8(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe3000000;
}



uint get_ce(short param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  
  if (param_1 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = (int)null_0000h_800a008c - 1;
    if ((int)param_1 <= null_0000h_800a008c + -1) {
      uVar1 = SYS_OBJ_1A30();
      return uVar1;
    }
  }
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar2 = (int)null_0000h_800a008e;
    if (iVar2 + -1 < (int)(short)param_2) {
      uVar1 = SYS_OBJ_1A70(iVar2,iVar2 + -1);
      return uVar1;
    }
  }
  if (1 < null_00h_800a0088 - 1) {
    uVar1 = SYS_OBJ_1AA4();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | uVar1 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1A30(undefined4 param_1,uint param_2)

{
  uint in_v0;
  int iVar1;
  uint uVar2;
  
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar1 = (int)null_0000h_800a008e;
    if (iVar1 + -1 < (int)(short)param_2) {
      uVar2 = SYS_OBJ_1A70(iVar1,iVar1 + -1);
      return uVar2;
    }
  }
  if (1 < null_00h_800a0088 - 1) {
    uVar2 = SYS_OBJ_1AA4();
    return uVar2;
  }
  return (param_2 & 0xfff) << 0xc | in_v0 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1A70(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  
  if (1 < null_00h_800a0088 - 1) {
    uVar1 = SYS_OBJ_1AA4();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_4 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1AA4(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe4000000;
}



uint get_ofs(uint param_1,uint param_2)

{
  uint uVar1;
  
  if (1 < null_00h_800a0088 - 1) {
    uVar1 = SYS_OBJ_1AF0();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_1 & 0xfff | 0xe5000000;
}



uint SYS_OBJ_1AF0(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe5000000;
}



uint get_tw(byte *param_1)

{
  uint uVar1;
  
  if (param_1 == (byte *)0x0) {
    uVar1 = SYS_OBJ_1B78();
    return uVar1;
  }
  return (uint)(param_1[2] >> 3) << 0xf | (uint)(*param_1 >> 3) << 10 | 0xe2000000 |
         ((int)(-(int)*(short *)(param_1 + 6) & 0xffU) >> 3) << 5 |
         (int)(-(int)*(short *)(param_1 + 4) & 0xffU) >> 3;
}



void SYS_OBJ_1B78(void)

{
  return;
}



int get_dx(short *param_1)

{
  int iVar1;
  
  if (null_00h_800a0088 == '\x01') {
    if (null_00h_800a008b != '\0') {
      iVar1 = SYS_OBJ_1C2C((int)*param_1);
      return iVar1;
    }
    return (int)*param_1;
  }
  if (null_00h_800a0088 != '\x02') {
    iVar1 = SYS_OBJ_1C28();
    return iVar1;
  }
  if (null_00h_800a008b != '\0') {
    iVar1 = SYS_OBJ_1BC4((int)*param_1);
    return iVar1;
  }
  iVar1 = SYS_OBJ_1C2C();
  return iVar1;
}



void SYS_OBJ_1BC4(void)

{
  SYS_OBJ_1C2C();
  return;
}



int SYS_OBJ_1C28(short *param_1)

{
  return (int)*param_1;
}



void SYS_OBJ_1C2C(void)

{
  return;
}



undefined4 _status(void)

{
  return *(undefined4 *)PTR_GPU_REG1_800a015c;
}



int _otc(int param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  *(uint *)PTR_DMA_DPCR_800a0178 = *(uint *)PTR_DMA_DPCR_800a0178 | 0x8000000;
  *(undefined4 *)PTR_DMA_OTC_CHCR_800a0174 = 0;
  *(int *)PTR_DMA_OTC_MADR_800a016c = param_1 + param_2 * 4 + -4;
  *(int *)PTR_DMA_OTC_BCR_800a0170 = param_2;
  *(undefined4 *)PTR_DMA_OTC_CHCR_800a0174 = 0x11000002;
  set_alarm();
  uVar1 = *(uint *)PTR_DMA_OTC_CHCR_800a0174;
  while( true ) {
    if ((uVar1 & 0x1000000) == 0) {
      return param_2;
    }
    iVar2 = get_alarm();
    if (iVar2 != 0) break;
    uVar1 = *(uint *)PTR_DMA_OTC_CHCR_800a0174;
  }
  return -1;
}



undefined4 _clr(ushort *param_1,uint param_2)

{
  ushort uVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  
  iVar4 = (int)(short)param_1[2];
  if (iVar4 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = null_0000h_800a008c - 1;
    if (iVar4 <= null_0000h_800a008c + -1) {
      uVar2 = SYS_OBJ_1D84(iVar4,iVar4);
      return uVar2;
    }
  }
  iVar4 = (int)(short)param_1[3];
  param_1[2] = uVar1;
  if (iVar4 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = null_0000h_800a008e - 1;
    if (iVar4 <= null_0000h_800a008e + -1) {
      uVar2 = SYS_OBJ_1DC0(iVar4);
      return uVar2;
    }
  }
  param_1[3] = uVar1;
  if (((*param_1 & 0x3f) == 0) && ((param_1[2] & 0x3f) == 0)) {
    null____800aca18 = 0x5ffffff;
    null____800aca1c = 0xe6000000;
    null____800aca24 = param_2 & 0xffffff | 0x2000000;
    null____800aca20 = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000
    ;
    null____800aca28 = *(undefined4 *)param_1;
    null____800aca2c = *(uint *)(param_1 + 2);
    _cwc(&null____800aca18);
    return 0;
  }
  null____800aca18 = 0x80aca3c;
  null____800aca30 = param_2 & 0xffffff | 0x60000000;
  null____800aca28 = 0xe6000000;
  null____800aca1c = 0xe3000000;
  null____800aca20 = 0xe4ffffff;
  null____800aca24 = 0xe5000000;
  null____800aca2c = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000;
  null____800aca34 = *(undefined4 *)param_1;
  null____800aca38 = *(undefined4 *)(param_1 + 2);
  null____800aca3c = 0x3ffffff;
  uVar3 = _param(3);
  null____800aca40 = uVar3 | 0xe3000000;
  uVar3 = _param(4);
  null____800aca44 = uVar3 | 0xe4000000;
  uVar3 = _param(5);
  null____800aca48 = uVar3 | 0xe5000000;
  uVar2 = SYS_OBJ_1F64();
  return uVar2;
}



undefined4 SYS_OBJ_1D84(void)

{
  ushort in_v0;
  undefined4 uVar1;
  uint uVar2;
  ushort uVar3;
  int iVar4;
  ushort *in_t0;
  uint in_t1;
  
  iVar4 = (int)(short)in_t0[3];
  in_t0[2] = in_v0;
  if (iVar4 < 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = null_0000h_800a008e - 1;
    if (iVar4 <= null_0000h_800a008e + -1) {
      uVar1 = SYS_OBJ_1DC0(iVar4);
      return uVar1;
    }
  }
  in_t0[3] = uVar3;
  if (((*in_t0 & 0x3f) == 0) && ((in_t0[2] & 0x3f) == 0)) {
    null____800aca18 = 0x5ffffff;
    null____800aca1c = 0xe6000000;
    null____800aca24 = in_t1 & 0xffffff | 0x2000000;
    null____800aca20 = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
    null____800aca28 = *(undefined4 *)in_t0;
    null____800aca2c = *(uint *)(in_t0 + 2);
    _cwc(&null____800aca18);
    return 0;
  }
  null____800aca18 = 0x80aca3c;
  null____800aca30 = in_t1 & 0xffffff | 0x60000000;
  null____800aca28 = 0xe6000000;
  null____800aca1c = 0xe3000000;
  null____800aca20 = 0xe4ffffff;
  null____800aca24 = 0xe5000000;
  null____800aca2c = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
  null____800aca34 = *(undefined4 *)in_t0;
  null____800aca38 = *(undefined4 *)(in_t0 + 2);
  null____800aca3c = 0x3ffffff;
  uVar2 = _param(3);
  null____800aca40 = uVar2 | 0xe3000000;
  uVar2 = _param(4);
  null____800aca44 = uVar2 | 0xe4000000;
  uVar2 = _param(5);
  null____800aca48 = uVar2 | 0xe5000000;
  uVar1 = SYS_OBJ_1F64();
  return uVar1;
}



undefined4 SYS_OBJ_1DC0(void)

{
  uint uVar1;
  undefined4 uVar2;
  ushort in_v1;
  ushort *in_t0;
  uint in_t1;
  
  in_t0[3] = in_v1;
  if (((*in_t0 & 0x3f) == 0) && ((in_t0[2] & 0x3f) == 0)) {
    null____800aca18 = 0x5ffffff;
    null____800aca1c = 0xe6000000;
    null____800aca24 = in_t1 & 0xffffff | 0x2000000;
                    // Probable PsyQ macro: setDrawTPage() if setlen(p, 1), setDrawMode() if
                    // setlen(p, 2).
    null____800aca20 = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
    null____800aca28 = *(undefined4 *)in_t0;
    null____800aca2c = *(uint *)(in_t0 + 2);
    _cwc(&null____800aca18);
    return 0;
  }
  null____800aca18 = 0x80aca3c;
  null____800aca30 = in_t1 & 0xffffff | 0x60000000;
  null____800aca28 = 0xe6000000;
  null____800aca1c = 0xe3000000;
  null____800aca20 = 0xe4ffffff;
  null____800aca24 = 0xe5000000;
                    // Probable PsyQ macro: setDrawTPage() if setlen(p, 1), setDrawMode() if
                    // setlen(p, 2).
  null____800aca2c = *(uint *)PTR_GPU_REG1_800a015c & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
  null____800aca34 = *(undefined4 *)in_t0;
  null____800aca38 = *(undefined4 *)(in_t0 + 2);
  null____800aca3c = 0x3ffffff;
  uVar1 = _param(3);
  null____800aca40 = uVar1 | 0xe3000000;
  uVar1 = _param(4);
  null____800aca44 = uVar1 | 0xe4000000;
  uVar1 = _param(5);
  null____800aca48 = uVar1 | 0xe5000000;
  uVar2 = SYS_OBJ_1F64();
  return uVar2;
}



undefined4 SYS_OBJ_1F64(void)

{
  _cwc(&null____800aca18);
  return 0;
}



// WARNING: Removing unreachable block (ram,0x8008becc)

undefined4 _dws(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  
  set_alarm();
  sVar5 = *(short *)(param_1 + 1);
  if (sVar5 < 0) {
    sVar5 = 0;
  }
  else if ((int)null_0000h_800a008c < (int)sVar5) {
    uVar1 = SYS_OBJ_1FF4((int)null_0000h_800a008c);
    return uVar1;
  }
  sVar6 = *(short *)((int)param_1 + 6);
  iVar7 = (int)sVar6;
  *(short *)(param_1 + 1) = sVar5;
  if (iVar7 < 0) {
    sVar6 = 0;
    iVar2 = 0;
  }
  else {
    iVar2 = iVar7 << 0x10;
    if (null_0000h_800a008e < iVar7) {
      uVar1 = SYS_OBJ_202C((int)null_0000h_800a008e);
      return uVar1;
    }
  }
  *(short *)((int)param_1 + 6) = sVar6;
  iVar7 = (int)*(short *)(param_1 + 1) * (iVar2 >> 0x10) + 1;
  iVar2 = iVar7 - (iVar7 >> 0x1f) >> 5;
  if (0 < iVar7 / 2) {
    iVar7 = iVar7 / 2 + iVar2 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while( true ) {
      if ((uVar3 & 0x4000000) != 0) {
        *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = 0xa0000000;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = *param_1;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = param_1[1];
        while (iVar7 = iVar7 + -1, iVar7 != -1) {
          uVar1 = *param_2;
          param_2 = param_2 + 1;
          *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar1;
        }
        if (iVar2 != 0) {
          *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000002;
          *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = param_2;
          *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar2 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000201;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    return 0xffffffff;
  }
  uVar1 = SYS_OBJ_21A4();
  return uVar1;
}



undefined4 SYS_OBJ_1FF4(void)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  undefined2 in_v1;
  short sVar5;
  int iVar6;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  int unaff_s5;
  
  sVar5 = *(short *)((int)unaff_s1 + 6);
  iVar6 = (int)sVar5;
  *(undefined2 *)(unaff_s1 + 1) = in_v1;
  if (iVar6 < 0) {
    sVar5 = 0;
    iVar1 = 0;
  }
  else {
    iVar1 = iVar6 << 0x10;
    if (null_0000h_800a008e < iVar6) {
      uVar2 = SYS_OBJ_202C((int)null_0000h_800a008e);
      return uVar2;
    }
  }
  *(short *)((int)unaff_s1 + 6) = sVar5;
  iVar6 = (int)*(short *)(unaff_s1 + 1) * (iVar1 >> 0x10) + 1;
  iVar1 = iVar6 - (iVar6 >> 0x1f) >> 5;
  if (0 < iVar6 / 2) {
    iVar6 = iVar6 / 2 + iVar1 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while( true ) {
      if ((uVar3 & 0x4000000) != 0) {
        uVar2 = 0xa0000000;
        *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
        if (unaff_s5 != 0) {
          uVar2 = 0xb0000000;
        }
        *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar2;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = *unaff_s1;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = unaff_s1[1];
        while (iVar6 = iVar6 + -1, iVar6 != -1) {
          uVar2 = *unaff_s2;
          unaff_s2 = unaff_s2 + 1;
          *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar2;
        }
        if (iVar1 != 0) {
          *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000002;
          *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = unaff_s2;
          *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar1 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000201;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    return 0xffffffff;
  }
  uVar2 = SYS_OBJ_21A4();
  return uVar2;
}



undefined4 SYS_OBJ_202C(short param_1)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  int unaff_s5;
  
  *(short *)((int)unaff_s1 + 6) = param_1;
  iVar4 = (int)*(short *)(unaff_s1 + 1) * (int)param_1 + 1;
  iVar5 = iVar4 - (iVar4 >> 0x1f) >> 5;
  if (iVar4 / 2 < 1) {
    uVar1 = SYS_OBJ_21A4();
    return uVar1;
  }
  iVar4 = iVar4 / 2 + iVar5 * -0x10;
  uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  while( true ) {
    if ((uVar2 & 0x4000000) != 0) {
      uVar1 = 0xa0000000;
      *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
      *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
      if (unaff_s5 != 0) {
        uVar1 = 0xb0000000;
      }
      *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar1;
      *(undefined4 *)PTR_GPU_REG0_800a0158 = *unaff_s1;
      *(undefined4 *)PTR_GPU_REG0_800a0158 = unaff_s1[1];
      while (iVar4 = iVar4 + -1, iVar4 != -1) {
        uVar1 = *unaff_s2;
        unaff_s2 = unaff_s2 + 1;
        *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar1;
      }
      if (iVar5 != 0) {
        *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000002;
        *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = unaff_s2;
        *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar5 << 0x10 | 0x10;
        *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000201;
      }
      return 0;
    }
    iVar3 = get_alarm();
    if (iVar3 != 0) break;
    uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  }
  return 0xffffffff;
}



void SYS_OBJ_21A4(void)

{
  return;
}



undefined4 _drs(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  
  set_alarm();
  sVar5 = *(short *)(param_1 + 1);
  if (sVar5 < 0) {
    sVar5 = 0;
  }
  else if ((int)null_0000h_800a008c < (int)sVar5) {
    uVar1 = SYS_OBJ_222C((int)null_0000h_800a008c);
    return uVar1;
  }
  sVar6 = *(short *)((int)param_1 + 6);
  iVar7 = (int)sVar6;
  *(short *)(param_1 + 1) = sVar5;
  if (iVar7 < 0) {
    sVar6 = 0;
    iVar2 = 0;
  }
  else {
    iVar2 = iVar7 << 0x10;
    if (null_0000h_800a008e < iVar7) {
      uVar1 = SYS_OBJ_2264((int)null_0000h_800a008e);
      return uVar1;
    }
  }
  *(short *)((int)param_1 + 6) = sVar6;
  iVar7 = (int)*(short *)(param_1 + 1) * (iVar2 >> 0x10) + 1;
  iVar2 = iVar7 - (iVar7 >> 0x1f) >> 5;
  if (0 < iVar7 / 2) {
    iVar7 = iVar7 / 2 + iVar2 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while ((uVar3 & 0x4000000) == 0) {
      iVar4 = get_alarm();
      if (iVar4 != 0) {
        return 0xffffffff;
      }
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = 0xc0000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = *param_1;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = param_1[1];
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while( true ) {
      if ((uVar3 & 0x8000000) != 0) {
        while (iVar7 = iVar7 + -1, iVar7 != -1) {
          *param_2 = *(undefined4 *)PTR_GPU_REG0_800a0158;
          param_2 = param_2 + 1;
        }
        if (iVar2 != 0) {
          *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000003;
          *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = param_2;
          *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar2 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000200;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    return 0xffffffff;
  }
  uVar1 = SYS_OBJ_242C();
  return uVar1;
}



undefined4 SYS_OBJ_222C(void)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  undefined2 in_v1;
  short sVar5;
  int iVar6;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  
  sVar5 = *(short *)((int)unaff_s1 + 6);
  iVar6 = (int)sVar5;
  *(undefined2 *)(unaff_s1 + 1) = in_v1;
  if (iVar6 < 0) {
    sVar5 = 0;
    iVar1 = 0;
  }
  else {
    iVar1 = iVar6 << 0x10;
    if (null_0000h_800a008e < iVar6) {
      uVar2 = SYS_OBJ_2264((int)null_0000h_800a008e);
      return uVar2;
    }
  }
  *(short *)((int)unaff_s1 + 6) = sVar5;
  iVar6 = (int)*(short *)(unaff_s1 + 1) * (iVar1 >> 0x10) + 1;
  iVar1 = iVar6 - (iVar6 >> 0x1f) >> 5;
  if (0 < iVar6 / 2) {
    iVar6 = iVar6 / 2 + iVar1 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while ((uVar3 & 0x4000000) == 0) {
      iVar4 = get_alarm();
      if (iVar4 != 0) {
        return 0xffffffff;
      }
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = 0xc0000000;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = *unaff_s1;
    *(undefined4 *)PTR_GPU_REG0_800a0158 = unaff_s1[1];
    uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    while( true ) {
      if ((uVar3 & 0x8000000) != 0) {
        while (iVar6 = iVar6 + -1, iVar6 != -1) {
          *unaff_s2 = *(undefined4 *)PTR_GPU_REG0_800a0158;
          unaff_s2 = unaff_s2 + 1;
        }
        if (iVar1 != 0) {
          *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000003;
          *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = unaff_s2;
          *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar1 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000200;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_800a015c;
    }
    return 0xffffffff;
  }
  uVar2 = SYS_OBJ_242C();
  return uVar2;
}



undefined4 SYS_OBJ_2264(short param_1)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  
  *(short *)((int)unaff_s1 + 6) = param_1;
  iVar4 = (int)*(short *)(unaff_s1 + 1) * (int)param_1 + 1;
  iVar5 = iVar4 - (iVar4 >> 0x1f) >> 5;
  if (iVar4 / 2 < 1) {
    uVar1 = SYS_OBJ_242C();
    return uVar1;
  }
  iVar4 = iVar4 / 2 + iVar5 * -0x10;
  uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  while ((uVar2 & 0x4000000) == 0) {
    iVar3 = get_alarm();
    if (iVar3 != 0) {
      return 0xffffffff;
    }
    uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  }
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
  *(undefined4 *)PTR_GPU_REG0_800a0158 = 0x1000000;
  *(undefined4 *)PTR_GPU_REG0_800a0158 = 0xc0000000;
  *(undefined4 *)PTR_GPU_REG0_800a0158 = *unaff_s1;
  *(undefined4 *)PTR_GPU_REG0_800a0158 = unaff_s1[1];
  uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  while( true ) {
    if ((uVar2 & 0x8000000) != 0) {
      while (iVar4 = iVar4 + -1, iVar4 != -1) {
        *unaff_s2 = *(undefined4 *)PTR_GPU_REG0_800a0158;
        unaff_s2 = unaff_s2 + 1;
      }
      if (iVar5 != 0) {
        *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000003;
        *(undefined4 **)PTR_DMA_GPU_MADR_800a0160 = unaff_s2;
        *(uint *)PTR_DMA_GPU_BCR_800a0164 = iVar5 << 0x10 | 0x10;
        *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000200;
      }
      return 0;
    }
    iVar3 = get_alarm();
    if (iVar3 != 0) break;
    uVar2 = *(uint *)PTR_GPU_REG1_800a015c;
  }
  return 0xffffffff;
}



void SYS_OBJ_242C(void)

{
  return;
}



void _ctl(uint param_1)

{
  *(uint *)PTR_GPU_REG1_800a015c = param_1;
  (&DAT_800aca5c)[param_1 >> 0x18] = (char)param_1;
  return;
}



undefined1 _getctl(int param_1)

{
  return (&DAT_800aca5c)[param_1];
}



undefined4 _cwb(undefined4 *param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = param_2 + -1;
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000000;
  if (param_2 != 0) {
    do {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      iVar2 = iVar2 + -1;
      *(undefined4 *)PTR_GPU_REG0_800a0158 = uVar1;
    } while (iVar2 != -1);
  }
  return 0;
}



void _cwc(undefined4 param_1)

{
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x4000002;
  *(undefined4 *)PTR_DMA_GPU_MADR_800a0160 = param_1;
  *(undefined4 *)PTR_DMA_GPU_BCR_800a0164 = 0;
  *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x1000401;
  return;
}



uint _param(uint param_1)

{
  *(uint *)PTR_GPU_REG1_800a015c = param_1 | 0x10000000;
  return *(uint *)PTR_GPU_REG0_800a0158 & 0xffffff;
}



void _addque(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  _addque2(param_1,param_2,0,param_3);
  return;
}



void _addque2(void)

{
  set_alarm();
  SYS_OBJ_25C8();
  return;
}



uint SYS_OBJ_25C8(void)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  undefined4 *unaff_s0;
  int unaff_s1;
  undefined4 unaff_s2;
  code *unaff_s3;
  
  while ((null_00000000h_800a018c + 1 & 0x3f) == null_00000000h_800a0190) {
    iVar5 = get_alarm();
    if (iVar5 != 0) {
      return 0xffffffff;
    }
    _exeque();
  }
  null_00000000h_800a0194 = SetIntrMask(0);
  null_00000000h_800a0090 = 1;
  if ((null_00h_800a0089 != '\0') &&
     (((null_00000000h_800a018c != null_00000000h_800a0190 ||
       ((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) != 0)) || (null_00000000h_800a0094 != 0))))
  {
    DMACallback(2,_exeque);
    iVar5 = 0;
    if (unaff_s1 == 0) {
      *(undefined4 **)(&DAT_800acbbc + null_00000000h_800a018c * 0x60) = unaff_s0;
      *(undefined4 *)(&DAT_800acbc0 + null_00000000h_800a018c * 0x60) = unaff_s2;
      *(code **)(&DAT_800acbb8 + null_00000000h_800a018c * 0x60) = unaff_s3;
      null_00000000h_800a018c = null_00000000h_800a018c + 1 & 0x3f;
      SetIntrMask(null_00000000h_800a0194);
      _exeque();
      return null_00000000h_800a018c - null_00000000h_800a0190 & 0x3f;
    }
    while( true ) {
      iVar2 = unaff_s1;
      if (unaff_s1 < 0) {
        iVar2 = unaff_s1 + 3;
      }
      iVar3 = iVar5 * 4;
      if (iVar2 >> 2 <= iVar5) break;
      uVar4 = *unaff_s0;
      unaff_s0 = unaff_s0 + 1;
      iVar5 = iVar5 + 1;
      *(undefined4 *)(&DAT_800acbc4 + iVar3 + null_00000000h_800a018c * 0x60) = uVar4;
    }
    *(undefined **)(&DAT_800acbbc + null_00000000h_800a018c * 0x60) =
         &DAT_800acbc4 + null_00000000h_800a018c * 0x60;
    uVar1 = SYS_OBJ_27A8();
    return uVar1;
  }
  do {
  } while ((*(uint *)PTR_GPU_REG1_800a015c & 0x4000000) == 0);
  (*unaff_s3)();
  null_00000000h_800a017c = unaff_s3;
  null_00000000h_800a0180 = unaff_s0;
  null_00000000h_800a0184 = unaff_s2;
  SetIntrMask(null_00000000h_800a0194);
  uVar1 = SYS_OBJ_283C();
  return uVar1;
}



void SYS_OBJ_26EC(undefined4 param_1,undefined4 param_2,int param_3,undefined4 *param_4)

{
  int in_v0;
  int iVar1;
  undefined4 uVar2;
  int in_t0;
  int unaff_s1;
  
  while( true ) {
    if (in_v0 < 0) {
      in_v0 = in_v0 + 3;
    }
    iVar1 = param_3 * 4;
    if (in_v0 >> 2 <= param_3) break;
    uVar2 = *param_4;
    param_4 = param_4 + 1;
    param_3 = param_3 + 1;
    *(undefined4 *)(iVar1 + null_00000000h_800a018c * 0x60 + in_t0) = uVar2;
    in_v0 = unaff_s1;
  }
  *(undefined **)(&DAT_800acbbc + null_00000000h_800a018c * 0x60) =
       &DAT_800acbc4 + null_00000000h_800a018c * 0x60;
  SYS_OBJ_27A8();
  return;
}



uint SYS_OBJ_27A8(void)

{
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  
  *(undefined4 *)(&DAT_800acbc0 + null_00000000h_800a018c * 0x60) = unaff_s2;
  *(undefined4 *)(&DAT_800acbb8 + null_00000000h_800a018c * 0x60) = unaff_s3;
  null_00000000h_800a018c = null_00000000h_800a018c + 1 & 0x3f;
  SetIntrMask(null_00000000h_800a0194);
  _exeque();
  return null_00000000h_800a018c - null_00000000h_800a0190 & 0x3f;
}



void SYS_OBJ_283C(void)

{
  return;
}



uint _exeque(void)

{
  uint uVar1;
  
  uVar1 = 1;
  if ((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) == 0) {
    null_00000000h_800a0198 = SetIntrMask(0);
    if (null_00000000h_800a018c != null_00000000h_800a0190) {
      uVar1 = *(uint *)PTR_DMA_GPU_CHCR_800a0168;
      while ((uVar1 & 0x1000000) == 0) {
        if (((null_00000000h_800a0190 + 1 & 0x3f) == null_00000000h_800a018c) &&
           (null_00000000h_800a0094 == (code *)0x0)) {
          DMACallback(2,0);
        }
        uVar1 = *(uint *)PTR_GPU_REG1_800a015c;
        while ((uVar1 & 0x4000000) == 0) {
          uVar1 = *(uint *)PTR_GPU_REG1_800a015c;
        }
        (**(code **)(&DAT_800acbb8 + null_00000000h_800a0190 * 0x60))
                  (*(undefined4 *)(&DAT_800acbbc + null_00000000h_800a0190 * 0x60),
                   *(undefined4 *)(&DAT_800acbc0 + null_00000000h_800a0190 * 0x60));
        null_00000000h_800a017c = *(undefined4 *)(&DAT_800acbb8 + null_00000000h_800a0190 * 0x60);
        null_00000000h_800a0180 = *(undefined4 *)(&DAT_800acbbc + null_00000000h_800a0190 * 0x60);
        null_00000000h_800a0184 = *(undefined4 *)(&DAT_800acbc0 + null_00000000h_800a0190 * 0x60);
        null_00000000h_800a0190 = null_00000000h_800a0190 + 1 & 0x3f;
        if (null_00000000h_800a018c == null_00000000h_800a0190) break;
        uVar1 = *(uint *)PTR_DMA_GPU_CHCR_800a0168;
      }
    }
    SetIntrMask(null_00000000h_800a0198);
    if ((((null_00000000h_800a018c == null_00000000h_800a0190) &&
         ((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) == 0)) && (null_00000000h_800a0090 != 0))
       && (null_00000000h_800a0094 != (code *)0x0)) {
      null_00000000h_800a0090 = 0;
      (*null_00000000h_800a0094)();
    }
    uVar1 = null_00000000h_800a018c - null_00000000h_800a0190 & 0x3f;
  }
  return uVar1;
}



undefined4 _reset(uint param_1)

{
  undefined4 uVar1;
  uint uVar2;
  
  null_00000000h_800a019c = SetIntrMask(0);
  null_00000000h_800a0190 = 0;
  null_00000000h_800a018c = 0;
  uVar2 = param_1 & 7;
  if (uVar2 != 1) {
    if (uVar2 < 2) {
      if (uVar2 != 0) {
        uVar1 = SYS_OBJ_2C6C();
        return uVar1;
      }
SYS_OBJ_2BBC:
      *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x401;
      *(uint *)PTR_DMA_DPCR_800a0178 = *(uint *)PTR_DMA_DPCR_800a0178 | 0x800;
      *(undefined4 *)PTR_GPU_REG1_800a015c = 0;
      memset(&DAT_800aca5c,'\0',0x100);
      memset(&DAT_800acbb8,'\0',0x1800);
      uVar1 = SYS_OBJ_2C6C();
      return uVar1;
    }
    if (uVar2 != 3) {
      if (uVar2 == 5) goto SYS_OBJ_2BBC;
      goto code_r0x8008ca44;
    }
  }
  *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x401;
  *(uint *)PTR_DMA_DPCR_800a0178 = *(uint *)PTR_DMA_DPCR_800a0178 | 0x800;
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x2000000;
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x1000000;
code_r0x8008ca44:
  SetIntrMask(null_00000000h_800a019c);
  uVar1 = 0;
  if ((param_1 & 7) == 0) {
    uVar1 = _version(param_1);
  }
  return uVar1;
}



undefined4 SYS_OBJ_2C6C(void)

{
  undefined4 uVar1;
  uint unaff_s0;
  
  SetIntrMask(null_00000000h_800a019c);
  uVar1 = 0;
  if ((unaff_s0 & 7) == 0) {
    uVar1 = _version();
  }
  return uVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _sync(void)

{
  int in_a0;
  uint uVar1;
  
  if (in_a0 == 0) {
    set_alarm();
    SYS_OBJ_2CDC();
    return;
  }
  uVar1 = null_00000000h_800a018c - null_00000000h_800a0190 & 0x3f;
  if (uVar1 != 0) {
    _exeque();
  }
  if ((((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) != 0) ||
      ((*(uint *)PTR_GPU_REG1_800a015c & 0x4000000) == 0)) && (uVar1 == 0)) {
    SYS_OBJ_2DD8();
    return;
  }
  return;
}



undefined4 SYS_OBJ_2CC4(void)

{
  int iVar1;
  undefined4 uVar2;
  
  _exeque();
  iVar1 = get_alarm();
  if (iVar1 == 0) {
    if (null_00000000h_800a018c != null_00000000h_800a0190) {
      uVar2 = SYS_OBJ_2CC4();
      return uVar2;
    }
    do {
      if (((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) == 0) &&
         ((*(uint *)PTR_GPU_REG1_800a015c & 0x4000000) != 0)) {
        uVar2 = SYS_OBJ_2DD8();
        return uVar2;
      }
      iVar1 = get_alarm();
    } while (iVar1 == 0);
  }
  return 0xffffffff;
}



undefined4 SYS_OBJ_2CDC(void)

{
  undefined4 uVar1;
  int iVar2;
  
  if (null_00000000h_800a018c != null_00000000h_800a0190) {
    uVar1 = SYS_OBJ_2CC4();
    return uVar1;
  }
  while (((*(uint *)PTR_DMA_GPU_CHCR_800a0168 & 0x1000000) != 0 ||
         ((*(uint *)PTR_GPU_REG1_800a015c & 0x4000000) == 0))) {
    iVar2 = get_alarm();
    if (iVar2 != 0) {
      return 0xffffffff;
    }
  }
  uVar1 = SYS_OBJ_2DD8();
  return uVar1;
}



void SYS_OBJ_2DD8(void)

{
  return;
}



void set_alarm(void)

{
  int iVar1;
  
  iVar1 = VSync(-1);
  null_00000000h_800a01a0 = iVar1 + 0xf0;
  null_00000000h_800a01a4 = 0;
  return;
}



undefined4 get_alarm(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar2 = VSync(-1);
  iVar1 = null_00000000h_800a01a4;
  if ((iVar2 <= null_00000000h_800a01a0) &&
     (null_00000000h_800a01a4 = null_00000000h_800a01a4 + 1, iVar1 < 0xf0001)) {
    return 0;
  }
  printf("GPU timeout:que=%d,stat=%08x,chcr=%08x,madr=%08x,",
         null_00000000h_800a018c - null_00000000h_800a0190 & 0x3f,
         *(undefined4 *)PTR_GPU_REG1_800a015c,*(undefined4 *)PTR_DMA_GPU_CHCR_800a0168,
         *(undefined4 *)PTR_DMA_GPU_MADR_800a0160);
  printf("func=(%08x)(%08x,%08x)\n",null_00000000h_800a017c,null_00000000h_800a0180,
         null_00000000h_800a0184);
  null_00000000h_800a019c = SetIntrMask(0);
  null_00000000h_800a0190 = 0;
  null_00000000h_800a018c = 0;
  *(undefined4 *)PTR_DMA_GPU_CHCR_800a0168 = 0x401;
  *(uint *)PTR_DMA_DPCR_800a0178 = *(uint *)PTR_DMA_DPCR_800a0178 | 0x800;
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x2000000;
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x1000000;
  SetIntrMask(null_00000000h_800a019c);
  uVar3 = SYS_OBJ_2F7C();
  return uVar3;
}



void SYS_OBJ_2F7C(void)

{
  return;
}



undefined4 _version(uint param_1)

{
  undefined4 uVar1;
  
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x10000007;
  if ((*(uint *)PTR_GPU_REG0_800a0158 & 0xffffff) == 2) {
    if ((param_1 & 8) != 0) {
      *(undefined4 *)PTR_GPU_REG1_800a015c = 0x9000001;
      uVar1 = SYS_OBJ_3060();
      return uVar1;
    }
    return 3;
  }
  *(uint *)PTR_GPU_REG0_800a0158 = *(uint *)PTR_GPU_REG1_800a015c & 0x3fff | 0xe1001000;
  if ((*(uint *)PTR_GPU_REG1_800a015c & 0x1000) == 0) {
    uVar1 = SYS_OBJ_3060();
    return uVar1;
  }
  if ((param_1 & 8) == 0) {
    uVar1 = SYS_OBJ_3060();
    return uVar1;
  }
  *(undefined4 *)PTR_GPU_REG1_800a015c = 0x20000504;
  uVar1 = SYS_OBJ_3060();
  return uVar1;
}



void SYS_OBJ_3060(void)

{
  return;
}



void * memset(uchar *param_1,uchar param_2,int param_3)

{
  void *pvVar1;
  
  pvVar1 = (void *)(param_3 + -1);
  if (param_3 != 0) {
    do {
      *param_1 = param_2;
      pvVar1 = (void *)((int)pvVar1 + -1);
      param_1 = param_1 + 1;
    } while (pvVar1 != (void *)0xffffffff);
  }
  return pvVar1;
}



void GPU_cw(void)

{
  (*(code *)&LAB_000000a0)();
  return;
}



int ccos(int a)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  undefined1 auStack_10 [4];
  uint local_c;
  
  if (a < 0) {
    a = -a;
  }
  iVar1 = a;
  if (a < 0) {
    iVar1 = a + 0xfff;
  }
  uVar3 = a + (iVar1 >> 0xc) * -0x1000;
  if (uVar3 < 0x400) {
    csincos(uVar3,auStack_10,&local_c);
    iVar1 = COR_02_OBJ_B4();
    return iVar1;
  }
  if (uVar3 - 0x400 < 0x400) {
    iVar1 = COR_02_OBJ_78(0x7ff - uVar3);
    return iVar1;
  }
  if (uVar3 - 0x800 < 0x400) {
    csincos(uVar3 - 0x800,auStack_10,&local_c);
    iVar1 = COR_02_OBJ_B4();
    return iVar1;
  }
  uVar2 = (uint)(uVar3 - 0xc00 < 0x400);
  if (uVar2 != 0) {
    csincos(0xfff - uVar3,auStack_10,&local_c);
    uVar2 = local_c;
  }
  return uVar2;
}



void COR_02_OBJ_78(undefined4 param_1)

{
  csincos(param_1,&stack0x00000010,&stack0x00000014);
  COR_02_OBJ_B4();
  return;
}



void COR_02_OBJ_B4(void)

{
  return;
}



void csincos(int param_1,int *param_2,int *param_3)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  int *piVar4;
  int *piVar5;
  int local_60 [6];
  int local_48;
  int local_40 [6];
  int local_28;
  int local_20 [6];
  int local_8;
  
  piVar1 = local_60;
  uVar2 = 0;
  piVar5 = local_20;
  piVar4 = &null_000001FFh_800a01a8;
  piVar3 = local_40;
  local_60[0] = 0x9b7;
  local_40[0] = 0;
  local_20[0] = param_1;
  do {
    piVar5 = piVar5 + 1;
    piVar3 = piVar3 + 1;
    if (-1 < piVar1[0x10]) {
      piVar1[1] = *piVar1 - (piVar1[8] >> (uVar2 & 0x1f));
      *piVar3 = piVar1[8] + (*piVar1 >> (uVar2 & 0x1f));
      COR_01_OBJ_AC();
      return;
    }
    piVar1[1] = *piVar1 + (piVar1[8] >> (uVar2 & 0x1f));
    *piVar3 = piVar1[8] - (*piVar1 >> (uVar2 & 0x1f));
    *piVar5 = piVar1[0x10] + *piVar4;
    piVar4 = piVar4 + 1;
    uVar2 = uVar2 + 1;
    piVar1 = piVar1 + 1;
  } while ((int)uVar2 < 6);
  *param_3 = local_48 - (local_8 * local_28 >> 0xc);
  *param_2 = local_28 + (local_8 * local_48 >> 0xc);
  return;
}



void COR_01_OBJ_AC(undefined4 param_1,int *param_2,int *param_3,int *param_4,undefined4 param_5,
                  undefined4 param_6,int param_7)

{
  int in_v0;
  int *piVar1;
  uint in_t0;
  int *in_t1;
  int *in_t2;
  int *in_t3;
  int in_stack_00000038;
  int in_stack_00000058;
  
  while( true ) {
    *in_t3 = in_v0;
    in_t3 = in_t3 + 1;
    in_t2 = in_t2 + 1;
    in_t1 = in_t1 + 1;
    in_t0 = in_t0 + 1;
    piVar1 = param_4 + 1;
    if (5 < (int)in_t0) {
      *param_3 = param_7 - (in_stack_00000058 * in_stack_00000038 >> 0xc);
      *param_2 = in_stack_00000038 + (in_stack_00000058 * param_7 >> 0xc);
      return;
    }
    if (-1 < param_4[0x11]) break;
    param_4[2] = *piVar1 + (param_4[9] >> (in_t0 & 0x1f));
    *in_t1 = param_4[9] - (*piVar1 >> (in_t0 & 0x1f));
    in_v0 = param_4[0x11] + *in_t2;
    param_4 = piVar1;
  }
  param_4[2] = *piVar1 - (param_4[9] >> (in_t0 & 0x1f));
  *in_t1 = param_4[9] + (*piVar1 >> (in_t0 & 0x1f));
  COR_01_OBJ_AC();
  return;
}



uint csin_1(uint param_1)

{
  uint uVar1;
  int local_10;
  undefined1 auStack_c [4];
  
  if (0x3ff < param_1) {
    if (0x3ff < param_1 - 0x400) {
      if (param_1 - 0x800 < 0x400) {
        csincos(param_1 - 0x800,&local_10,auStack_c);
        uVar1 = COR_03_OBJ_90();
        return uVar1;
      }
      uVar1 = (uint)(param_1 - 0xc00 < 0x400);
      if (uVar1 != 0) {
        csincos(0xfff - param_1,&local_10,auStack_c);
        uVar1 = -local_10;
      }
      return uVar1;
    }
    param_1 = 0x7ff - param_1;
  }
  csincos(param_1,&local_10,auStack_c);
  uVar1 = COR_03_OBJ_90();
  return uVar1;
}



void COR_03_OBJ_90(void)

{
  return;
}



int csin(int a)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int in_a1;
  int local_10;
  undefined1 auStack_c [4];
  
  if (-1 < a) {
    uVar3 = a + (a >> 0xc) * -0x1000;
    if (0x3ff < uVar3) {
      if (0x3ff < uVar3 - 0x400) {
        uVar4 = uVar3 - 0x800;
        if (0x3ff < uVar4) {
          if (0x3ff < uVar3 - 0xc00) {
            return in_a1;
          }
          uVar4 = 0xfff - uVar3;
        }
        csincos(uVar4,&local_10,auStack_c);
        return -local_10;
      }
      uVar3 = 0x7ff - uVar3;
    }
    csincos(uVar3,&local_10,auStack_c);
    iVar2 = COR_03_OBJ_1C8();
    return iVar2;
  }
  iVar2 = -a;
  iVar1 = iVar2;
  if (0 < a) {
    iVar1 = iVar2 + 0xfff;
  }
  uVar3 = iVar2 + (iVar1 >> 0xc) * -0x1000;
  if (uVar3 < 0x400) {
COR_03_OBJ_EC:
    csincos(uVar3,&local_10,auStack_c);
    iVar2 = COR_03_OBJ_1C8();
    return iVar2;
  }
  if (uVar3 - 0x400 < 0x400) {
    uVar3 = 0x7ff - uVar3;
    goto COR_03_OBJ_EC;
  }
  uVar4 = uVar3 - 0x800;
  if (0x3ff < uVar4) {
    if (0x3ff < uVar3 - 0xc00) goto COR_03_OBJ_140;
    uVar4 = 0xfff - uVar3;
  }
  csincos(uVar4,&local_10,auStack_c);
COR_03_OBJ_140:
  iVar2 = COR_03_OBJ_1C8();
  return iVar2;
}



void COR_03_OBJ_1C8(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x8008d37c)

undefined4 csqrt_1(int param_1)

{
  undefined4 uVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  int local_3c [8];
  int local_1c [4];
  int local_c;
  
  iVar4 = 1;
  piVar3 = local_3c;
  local_3c[0] = param_1 + 0x5d50ad;
  local_1c[0] = param_1 + -0x5d50ad;
  do {
    if (iVar4 != 4) {
      iVar2 = piVar3[8] >> iVar4;
      if (piVar3[8] < 0) {
        piVar3[1] = *piVar3 + iVar2;
        local_1c[iVar4] = piVar3[8] + (*piVar3 >> iVar4);
        uVar1 = COR_05_OBJ_134();
        return uVar1;
      }
      piVar3[1] = *piVar3 - iVar2;
      local_1c[iVar4] = piVar3[8] - (*piVar3 >> iVar4);
      uVar1 = COR_05_OBJ_134();
      return uVar1;
    }
    iVar4 = local_3c[3] >> 4;
    if (local_1c[3] < 0) {
      local_3c[3] = local_3c[3] + (local_1c[3] >> 4);
      local_1c[3] = local_1c[3] + iVar4;
      if (-1 < local_1c[3]) {
        local_3c[4] = local_3c[3] - (local_1c[3] >> 4);
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    else {
      local_3c[3] = local_3c[3] - (local_1c[3] >> 4);
      local_1c[3] = local_1c[3] - iVar4;
      if (-1 < local_1c[3]) {
        local_3c[4] = local_3c[3] - (local_1c[3] >> 4);
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    local_3c[4] = local_3c[3] + (local_1c[3] >> 4);
    local_c = local_1c[3] + (local_3c[3] >> 4);
    iVar4 = 5;
    piVar3 = piVar3 + 1;
  } while( true );
}



undefined4
COR_05_OBJ_130(undefined4 param_1,undefined4 param_2,int *param_3,int param_4,int param_5,
              undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  undefined4 uVar1;
  int in_v0;
  int iVar2;
  int *piVar3;
  uint uVar4;
  int in_t0;
  int in_stack_00000030;
  int iStack00000034;
  
  while( true ) {
    uVar4 = param_4 + 1;
    piVar3 = param_3 + 1;
    if (6 < (int)uVar4) {
      return param_8;
    }
    iStack00000034 = in_v0;
    if (uVar4 != 4) break;
    iVar2 = in_stack_00000030 >> 4;
    if (in_stack_00000030 < 0) {
      in_stack_00000030 = in_stack_00000030 + (param_5 >> 4);
      if (-1 < in_stack_00000030) {
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    else {
      iVar2 = -iVar2;
      in_stack_00000030 = in_stack_00000030 - (param_5 >> 4);
      if (-1 < in_stack_00000030) {
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    param_5 = param_5 + iVar2;
    in_v0 = in_stack_00000030 + (param_5 >> 4);
    param_4 = 4;
    param_3 = piVar3;
  }
  iVar2 = param_3[9];
  if (-1 < iVar2) {
    param_3[2] = *piVar3 - (iVar2 >> (uVar4 & 0x1f));
    *(int *)(in_t0 + uVar4 * 4) = param_3[9] - (*piVar3 >> (uVar4 & 0x1f));
    uVar1 = COR_05_OBJ_134();
    return uVar1;
  }
  param_3[2] = *piVar3 + (iVar2 >> (uVar4 & 0x1f));
  *(int *)(in_t0 + uVar4 * 4) = param_3[9] + (*piVar3 >> (uVar4 & 0x1f));
  uVar1 = COR_05_OBJ_134();
  return uVar1;
}



undefined4
COR_05_OBJ_134(undefined4 param_1,undefined4 param_2,int *param_3,int param_4,int param_5,
              undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  undefined4 uVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  int in_t0;
  int in_stack_00000030;
  
  while( true ) {
    uVar4 = param_4 + 1;
    piVar3 = param_3 + 1;
    if (6 < (int)uVar4) {
      return param_8;
    }
    if (uVar4 != 4) break;
    iVar2 = in_stack_00000030 >> 4;
    if (in_stack_00000030 < 0) {
      in_stack_00000030 = in_stack_00000030 + (param_5 >> 4);
      if (-1 < in_stack_00000030) {
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    else {
      iVar2 = -iVar2;
      in_stack_00000030 = in_stack_00000030 - (param_5 >> 4);
      if (-1 < in_stack_00000030) {
        uVar1 = COR_05_OBJ_130();
        return uVar1;
      }
    }
    param_5 = param_5 + iVar2;
    param_4 = 4;
    param_3 = piVar3;
  }
  iVar2 = param_3[9];
  if (-1 < iVar2) {
    param_3[2] = *piVar3 - (iVar2 >> (uVar4 & 0x1f));
    *(int *)(in_t0 + uVar4 * 4) = param_3[9] - (*piVar3 >> (uVar4 & 0x1f));
    uVar1 = COR_05_OBJ_134();
    return uVar1;
  }
  param_3[2] = *piVar3 + (iVar2 >> (uVar4 & 0x1f));
  *(int *)(in_t0 + uVar4 * 4) = param_3[9] + (*piVar3 >> (uVar4 & 0x1f));
  uVar1 = COR_05_OBJ_134();
  return uVar1;
}



int csqrt(int a)

{
  int iVar1;
  long lVar2;
  uint uVar3;
  
  if (a == 0) {
    iVar1 = COR_05_OBJ_1D8();
    return iVar1;
  }
  lVar2 = Lzc(a);
  uVar3 = 8 - lVar2 >> 1;
  if (-1 < 8 - lVar2) {
    iVar1 = COR_05_OBJ_1AC(a >> ((uVar3 & 0xf) << 1));
    return iVar1;
  }
  iVar1 = a << ((uVar3 + 1) * -2 & 0x1f);
  if ((int)(uVar3 - 5) < 0) {
    csqrt_1(iVar1);
    iVar1 = COR_05_OBJ_1D8();
    return iVar1;
  }
  iVar1 = csqrt_1(iVar1);
  return iVar1 << (uVar3 - 5 & 0x1f);
}



int COR_05_OBJ_1AC(void)

{
  int iVar1;
  int unaff_s0;
  
  if ((int)(unaff_s0 - 6U) < 0) {
    csqrt_1();
    iVar1 = COR_05_OBJ_1D8();
    return iVar1;
  }
  iVar1 = csqrt_1();
  return iVar1 << (unaff_s0 - 6U & 0x1f);
}



void COR_05_OBJ_1D8(void)

{
  return;
}



int catan(int a)

{
  int iVar1;
  int *piVar2;
  uint uVar3;
  int *piVar4;
  int *piVar5;
  int *piVar6;
  int local_a8 [14];
  int local_70 [14];
  int local_38 [12];
  int iStack_8;
  
  piVar2 = local_a8;
  uVar3 = 0;
  piVar6 = local_38;
  piVar5 = &null_000001FFh_800a01c0;
  piVar4 = local_70;
  local_a8[0] = 0x1000;
  local_70[0] = a;
  local_38[0] = 0;
  do {
    piVar6 = piVar6 + 1;
    piVar4 = piVar4 + 1;
    iVar1 = piVar2[0xe];
    if (iVar1 < 0) {
      piVar2[1] = *piVar2 - (iVar1 >> (uVar3 & 0x1f));
      *piVar4 = piVar2[0xe] + (*piVar2 >> (uVar3 & 0x1f));
      iVar1 = COR_06_OBJ_A4();
      return iVar1;
    }
    piVar2[1] = *piVar2 + (iVar1 >> (uVar3 & 0x1f));
    *piVar4 = piVar2[0xe] - (*piVar2 >> (uVar3 & 0x1f));
    *piVar6 = piVar2[0x1c] + *piVar5;
    piVar5 = piVar5 + 1;
    uVar3 = uVar3 + 1;
    piVar2 = piVar2 + 1;
  } while ((int)uVar3 < 0xc);
  return iStack_8;
}



undefined4 COR_06_OBJ_A4(undefined4 param_1,int *param_2,uint param_3,int *param_4)

{
  undefined4 uVar1;
  int in_v0;
  int iVar2;
  int *piVar3;
  int *in_t0;
  int *in_t1;
  undefined4 in_stack_000000a0;
  
  while( true ) {
    *in_t1 = in_v0;
    in_t1 = in_t1 + 1;
    in_t0 = in_t0 + 1;
    param_4 = param_4 + 1;
    param_3 = param_3 + 1;
    piVar3 = param_2 + 1;
    if (0xb < (int)param_3) {
      return in_stack_000000a0;
    }
    iVar2 = param_2[0xf];
    if (iVar2 < 0) break;
    param_2[2] = *piVar3 + (iVar2 >> (param_3 & 0x1f));
    *param_4 = param_2[0xf] - (*piVar3 >> (param_3 & 0x1f));
    in_v0 = param_2[0x1d] + *in_t0;
    param_2 = piVar3;
  }
  param_2[2] = *piVar3 - (iVar2 >> (param_3 & 0x1f));
  *param_4 = param_2[0xf] + (*piVar3 >> (param_3 & 0x1f));
  uVar1 = COR_06_OBJ_A4();
  return uVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void InitGeom(void)

{
  undefined4 unaff_retaddr;
  
  null_00000000h_800a01f0 = unaff_retaddr;
  _patch_gte();
  setCopReg(0,Status,Status | 0x40000000,0);
  gte_ldZSF3(0x155);
  gte_ldZSF4(0x100);
  gte_ldH(1000);
  gte_ldDQA(0xffffef9e);
  gte_ldDQB(0x1400000);
  gte_ldOFX(0);
  gte_ldOFY(0);
  return;
}



void SetRotMatrix(MATRIX *m)

{
  gte_ldR11R12(*(undefined4 *)m->m[0]);
  gte_ldR13R21(*(undefined4 *)(m->m[0] + 2));
  gte_ldR22R23(*(undefined4 *)(m->m[1] + 1));
  gte_ldR31R32(*(undefined4 *)m->m[2]);
  gte_ldR33(*(undefined4 *)(m->m[2] + 2));
  return;
}



void SetTransMatrix(MATRIX *m)

{
  gte_ldtr(m->t[0],m->t[1],m->t[2]);
  return;
}



void LightColor(VECTOR *_2,VECTOR *_3)

{
  gte_ldlvl(_2);
  gte_lc_b();
  gte_stlvl(_3);
  return;
}



void DpqColorLight(VECTOR *_2,CVECTOR *_3,long p,CVECTOR *v2)

{
  gte_ldlvl(_2);
  gte_ldrgb(_3);
  gte_ldIR0(p);
  gte_dpcl_b();
  gte_strgb(v2);
  return;
}



void DpqColor3(CVECTOR *_2,CVECTOR *_3,CVECTOR *v2,long p,CVECTOR *v3,CVECTOR *v4,CVECTOR *v5)

{
  undefined1 auStackX_0 [16];
  
  gte_ldrgb3(_2,_3,v2);
  gte_ldIR0(p);
  gte_dpct_b();
  gte_strgb3(*(CVECTOR **)((int)register0x00000074 + 0x10),
             *(CVECTOR **)((int)register0x00000074 + 0x14),
             *(CVECTOR **)((int)register0x00000074 + 0x18));
  return;
}



void Intpl(VECTOR *_2,long p,CVECTOR *_3)

{
  gte_ldlvl(_2);
  gte_ldIR0(p);
  gte_intpl_b();
  gte_strgb(_3);
  return;
}



VECTOR * Square12(VECTOR *_2,VECTOR *_3)

{
  gte_ldlvl(_2);
  gte_sqr12_b();
  gte_stlvnl(_3);
  return _3;
}



VECTOR * Square0(VECTOR *_2,VECTOR *_3)

{
  gte_ldlvl(_2);
  gte_sqr0_b(0);
  gte_stlvnl(_3);
  return _3;
}



long AverageZ3(long sz0,long sz1,long sz2)

{
  long lVar1;
  
  gte_ldsz3(sz0,sz1,sz2);
  gte_avsz3_b();
  lVar1 = gte_stOTZ();
  return lVar1;
}



long AverageZ4(long sz0,long sz1,long sz2,long sz3)

{
  long lVar1;
  
  gte_ldsz4(sz0,sz1,sz2,sz3);
  gte_avsz4_b();
  lVar1 = gte_stOTZ();
  return lVar1;
}



void OuterProduct12(VECTOR *_2,VECTOR *_3,VECTOR *v2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  
  uVar1 = gte_stR11R12();
  uVar2 = gte_stR22R23();
  uVar3 = gte_stR33();
  gte_ldR11R12(_2->vx);
  gte_ldR22R23(_2->vy);
  gte_ldR33(_2->vz);
  gte_ldopv2(_3);
  gte_op12_b();
  gte_stlvnl(v2);
  gte_ldR11R12(uVar1);
  gte_ldR22R23(uVar2);
  gte_ldR33(uVar3);
  return;
}



void OuterProduct0(VECTOR *_2,VECTOR *_3,VECTOR *v2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  
  uVar1 = gte_stR11R12();
  uVar2 = gte_stR22R23();
  uVar3 = gte_stR33();
  gte_ldR11R12(_2->vx);
  gte_ldR22R23(_2->vy);
  gte_ldR33(_2->vz);
  gte_ldopv2(_3);
  gte_op0_b(0);
  gte_stlvnl(v2);
  gte_ldR11R12(uVar1);
  gte_ldR22R23(uVar2);
  gte_ldR33(uVar3);
  return;
}



long Lzc(long data)

{
  long lVar1;
  
  gte_ldLZCS(data);
  lVar1 = gte_stLZCR();
  return lVar1;
}



void RotTrans(SVECTOR *_2,VECTOR *_3,long *flag)

{
  long lVar1;
  
  gte_ldv0(_2);
  copFunction(2,0x480012);
  gte_stlvnl(_3);
  lVar1 = gte_stFLAG();
  *flag = lVar1;
  return;
}



MATRIX * RotMatrixZ(long r,MATRIX *m)

{
  MATRIX *pMVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  
  if (-1 < r) {
    iVar3 = (int)(short)*(int *)(&DAT_800a0200 + (r & 0xfffU) * 4);
    iVar2 = *(int *)(&DAT_800a0200 + (r & 0xfffU) * 4) >> 0x10;
    iVar4 = (int)m->m[0][0];
    iVar7 = (int)m->m[1][0];
    iVar5 = (int)m->m[0][1];
    iVar8 = (int)m->m[1][1];
    iVar6 = (int)m->m[0][2];
    iVar9 = (int)m->m[1][2];
    m->m[0][0] = (short)(iVar2 * iVar4 - iVar3 * iVar7 >> 0xc);
    m->m[0][1] = (short)(iVar2 * iVar5 - iVar3 * iVar8 >> 0xc);
    m->m[0][2] = (short)(iVar2 * iVar6 - iVar3 * iVar9 >> 0xc);
    m->m[1][0] = (short)(iVar3 * iVar4 + iVar2 * iVar7 >> 0xc);
    m->m[1][1] = (short)(iVar3 * iVar5 + iVar2 * iVar8 >> 0xc);
    m->m[1][2] = (short)(iVar3 * iVar6 + iVar2 * iVar9 >> 0xc);
    return m;
  }
  pMVar1 = (MATRIX *)FGO_06_OBJ_64();
  return pMVar1;
}



void FGO_06_OBJ_64(undefined4 param_1,short *param_2)

{
  short sVar1;
  short sVar2;
  short sVar3;
  int in_t0;
  int in_t1;
  
  sVar1 = *param_2;
  sVar2 = param_2[1];
  sVar3 = param_2[2];
  *param_2 = (short)(in_t0 * sVar1 - in_t1 * param_2[3] >> 0xc);
  param_2[1] = (short)(in_t0 * sVar2 - in_t1 * param_2[4] >> 0xc);
  param_2[2] = (short)(in_t0 * sVar3 - in_t1 * param_2[5] >> 0xc);
  param_2[3] = (short)(in_t1 * sVar1 + in_t0 * param_2[3] >> 0xc);
  param_2[4] = (short)(in_t1 * sVar2 + in_t0 * param_2[4] >> 0xc);
  param_2[5] = (short)(in_t1 * sVar3 + in_t0 * param_2[5] >> 0xc);
  return;
}



void _patch_gte(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  code *pcVar4;
  undefined4 unaff_retaddr;
  
  null____800a6154 = unaff_retaddr;
  FUN_80086710();
  iVar1 = (*(code *)&SUB_000000b0)();
  pcVar4 = (code *)&PATCHGTE_OBJ_68;
  puVar2 = *(undefined4 **)(iVar1 + 0x18);
  do {
    uVar3 = *(undefined4 *)pcVar4;
    pcVar4 = pcVar4 + 4;
    *puVar2 = uVar3;
    puVar2 = puVar2 + 1;
  } while (pcVar4 != DecDCTReset);
  FlushCache();
  FUN_80086720();
  return;
}



void DecDCTReset(int mode)

{
  if (mode == 0) {
    ResetCallback();
  }
  MDEC_reset(mode);
  return;
}



DECDCTENV * DecDCTGetEnv(DECDCTENV *env)

{
  undefined4 uVar1;
  int iVar2;
  undefined4 *puVar3;
  DECDCTENV *pDVar4;
  u_char *puVar5;
  short *psVar6;
  
  puVar3 = &null_13101002h_800a4204;
  iVar2 = 0xf;
  pDVar4 = env;
  do {
    uVar1 = *puVar3;
    puVar3 = puVar3 + 1;
    iVar2 = iVar2 + -1;
    *(undefined4 *)pDVar4->iq_y = uVar1;
    pDVar4 = (DECDCTENV *)(pDVar4->iq_y + 4);
  } while (iVar2 != -1);
  puVar5 = env->iq_c;
  puVar3 = &null_13101002h_800a4244;
  iVar2 = 0xf;
  do {
    uVar1 = *puVar3;
    puVar3 = puVar3 + 1;
    iVar2 = iVar2 + -1;
    *(undefined4 *)puVar5 = uVar1;
    puVar5 = puVar5 + 4;
  } while (iVar2 != -1);
  psVar6 = env->dct;
  puVar3 = &null_5A825A82h_800a4288;
  iVar2 = 0x1f;
  do {
    uVar1 = *puVar3;
    puVar3 = puVar3 + 1;
    iVar2 = iVar2 + -1;
    *(undefined4 *)psVar6 = uVar1;
    psVar6 = psVar6 + 2;
  } while (iVar2 != -1);
  return env;
}



DECDCTENV * DecDCTPutEnv(DECDCTENV *env)

{
  undefined4 uVar1;
  int iVar2;
  DECDCTENV *pDVar3;
  u_char *puVar4;
  undefined4 *puVar5;
  
  puVar5 = &null_13101002h_800a4204;
  iVar2 = 0xf;
  pDVar3 = env;
  do {
    puVar4 = pDVar3->iq_y;
    pDVar3 = (DECDCTENV *)(pDVar3->iq_y + 4);
    iVar2 = iVar2 + -1;
    *puVar5 = *(undefined4 *)puVar4;
    puVar5 = puVar5 + 1;
  } while (iVar2 != -1);
  puVar5 = &null_13101002h_800a4244;
  puVar4 = env->iq_c;
  iVar2 = 0xf;
  do {
    uVar1 = *(undefined4 *)puVar4;
    puVar4 = puVar4 + 4;
    iVar2 = iVar2 + -1;
    *puVar5 = uVar1;
    puVar5 = puVar5 + 1;
  } while (iVar2 != -1);
  MDEC_in(&DAT_800a4200,0x20);
  MDEC_in(&DAT_800a4284,0x20);
  return env;
}



int DecDCTBufSize(u_long *bs)

{
  return (uint)(ushort)*bs;
}



void DecDCTin(u_long *buf,int mode)

{
  if ((mode & 1U) != 0) {
    LIBPRESS_OBJ_19C();
    return;
  }
  *buf = *buf | 0x8000000;
  if ((mode & 2U) != 0) {
    LIBPRESS_OBJ_1C8();
    return;
  }
  *buf = *buf & 0xfdffffff;
  MDEC_in(buf,(short)*buf);
  return;
}



void LIBPRESS_OBJ_19C(uint *param_1,uint param_2)

{
  uint in_v0;
  
  *param_1 = in_v0;
  if ((param_2 & 2) != 0) {
    LIBPRESS_OBJ_1C8();
    return;
  }
  *param_1 = *param_1 & 0xfdffffff;
  MDEC_in(param_1,(short)*param_1);
  return;
}



void LIBPRESS_OBJ_1C8(undefined4 *param_1)

{
  undefined4 in_v0;
  
  *param_1 = in_v0;
  MDEC_in(param_1,*(undefined2 *)param_1);
  return;
}



// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SEND.OBJ/SendPAD

void DecDCTout(u_long *buf,int size)

{
  MDEC_out();
  return;
}



int DecDCTinSync(int mode)

{
  int iVar1;
  uint uVar2;
  
  if (mode == 0) {
    MDEC_in_sync();
    iVar1 = LIBPRESS_OBJ_234();
    return iVar1;
  }
  uVar2 = MDEC_status();
  return uVar2 >> 0x1d & 1;
}



void LIBPRESS_OBJ_234(void)

{
  return;
}



int DecDCToutSync(int mode)

{
  int iVar1;
  uint uVar2;
  
  if (mode == 0) {
    MDEC_out_sync();
    iVar1 = LIBPRESS_OBJ_270();
    return iVar1;
  }
  uVar2 = MDEC_status();
  return uVar2 >> 0x18 & 1;
}



void LIBPRESS_OBJ_270(void)

{
  return;
}



int DecDCTinCallback(func *func)

{
  int iVar1;
  
  iVar1 = DMACallback(0,func);
  return iVar1;
}



int DecDCToutCallback(func *func)

{
  int iVar1;
  
  iVar1 = DMACallback(1,func);
  return iVar1;
}



void MDEC_reset(int param_1)

{
  if (param_1 == 0) {
    *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x80000000;
    *(undefined4 *)PTR_DMA_MDEC_IN_CHCR_800a4318 = 0;
    *(undefined4 *)PTR_DMA_MDEC_OUT_CHCR_800a4324 = 0;
    *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x60000000;
    MDEC_in(&DAT_800a4200,0x20);
    MDEC_in(&DAT_800a4284,0x20);
    LIBPRESS_OBJ_3B4();
    return;
  }
  if (param_1 != 1) {
    LIBPRESS_OBJ_3A4();
    return;
  }
  *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x80000000;
  *(undefined4 *)PTR_DMA_MDEC_IN_CHCR_800a4318 = 0;
  *(undefined4 *)PTR_DMA_MDEC_OUT_CHCR_800a4324 = 0;
  *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x60000000;
  LIBPRESS_OBJ_3B4();
  return;
}



void LIBPRESS_OBJ_3A4(void)

{
  printf("MDEC_rest:bad option(%d)\n");
  return;
}



void LIBPRESS_OBJ_3B4(void)

{
  return;
}



void MDEC_in(undefined4 *param_1,uint param_2)

{
  MDEC_in_sync();
  *(uint *)PTR_DMA_DPCR_800a4348 = *(uint *)PTR_DMA_DPCR_800a4348 | 0x88;
  *(undefined4 **)PTR_DMA_MDEC_IN_MADR_800a4310 = param_1 + 1;
  *(uint *)PTR_DMA_MDEC_IN_BCR_800a4314 = (param_2 >> 5) << 0x10 | 0x20;
  *(undefined4 *)PTR_MDEC_REG0_800a4340 = *param_1;
  *(undefined4 *)PTR_DMA_MDEC_IN_CHCR_800a4318 = 0x1000201;
  return;
}



void MDEC_out(undefined4 param_1,uint param_2)

{
  MDEC_out_sync();
  *(uint *)PTR_DMA_DPCR_800a4348 = *(uint *)PTR_DMA_DPCR_800a4348 | 0x88;
  *(undefined4 *)PTR_DMA_MDEC_OUT_CHCR_800a4324 = 0;
  *(undefined4 *)PTR_DMA_MDEC_OUT_MADR_800a431c = param_1;
  *(uint *)PTR_DMA_MDEC_OUT_BCR_800a4320 = (param_2 >> 5) << 0x10 | 0x20;
  *(undefined4 *)PTR_DMA_MDEC_OUT_CHCR_800a4324 = 0x1000200;
  return;
}



undefined4 MDEC_in_sync(void)

{
  uint uVar1;
  undefined4 uVar2;
  int local_10;
  
  local_10 = 0x100000;
  uVar1 = *(uint *)PTR_MDEC_REG1_800a4344;
  while( true ) {
    if ((uVar1 & 0x20000000) == 0) {
      return 0;
    }
    local_10 = local_10 + -1;
    if (local_10 == -1) break;
    uVar1 = *(uint *)PTR_MDEC_REG1_800a4344;
  }
  timeout("MDEC_in_sync");
  uVar2 = LIBPRESS_OBJ_570();
  return uVar2;
}



void LIBPRESS_OBJ_570(void)

{
  return;
}



undefined4 MDEC_out_sync(void)

{
  uint uVar1;
  undefined4 uVar2;
  int local_10;
  
  local_10 = 0x100000;
  uVar1 = *(uint *)PTR_DMA_MDEC_OUT_CHCR_800a4324;
  while( true ) {
    if ((uVar1 & 0x1000000) == 0) {
      return 0;
    }
    local_10 = local_10 + -1;
    if (local_10 == -1) break;
    uVar1 = *(uint *)PTR_DMA_MDEC_OUT_CHCR_800a4324;
  }
  timeout("MDEC_out_sync");
  uVar2 = LIBPRESS_OBJ_608();
  return uVar2;
}



void LIBPRESS_OBJ_608(void)

{
  return;
}



undefined4 MDEC_status(void)

{
  return *(undefined4 *)PTR_MDEC_REG1_800a4344;
}



undefined4 timeout(undefined4 param_1)

{
  uint uVar1;
  
  printf("%s timeout:\n",param_1);
  uVar1 = *(uint *)PTR_MDEC_REG1_800a4344;
  printf("\t DMA=(%d,%d), ADDR=(0x%08x->0x%08x)\n",
         *(uint *)PTR_DMA_MDEC_IN_CHCR_800a4318 >> 0x18 & 1,
         *(uint *)PTR_DMA_MDEC_OUT_CHCR_800a4324 >> 0x18 & 1,
         *(undefined4 *)PTR_DMA_MDEC_IN_MADR_800a4310,*(undefined4 *)PTR_DMA_MDEC_OUT_MADR_800a431c)
  ;
  printf("\t FIFO=(%d,%d),BUSY=%d,DREQ=(%d,%d),RGB24=%d,STP=%d\n",~uVar1 >> 0x1f,uVar1 >> 0x1e & 1,
         uVar1 >> 0x1d & 1,uVar1 >> 0x1c & 1,uVar1 >> 0x1b & 1,uVar1 >> 0x19 & 1,uVar1 >> 0x17 & 1);
  *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x80000000;
  *(undefined4 *)PTR_DMA_MDEC_IN_CHCR_800a4318 = 0;
  *(undefined4 *)PTR_DMA_MDEC_OUT_CHCR_800a4324 = 0;
  *(undefined4 *)PTR_MDEC_REG1_800a4344 = 0x60000000;
  return 0;
}



int DecDCTvlcSize2(int size)

{
  int iVar1;
  
  iVar1 = VLC_C_OBJ_0;
  if (0 < size + -1) {
    VLC_C_OBJ_0 = size << 1;
    return iVar1;
  }
  VLC_C_OBJ_0 = 0xffffff;
  return iVar1;
}



int DecDCTvlc2(u_long *bs,u_long *buf,u_short *table)

{
  bool bVar1;
  undefined2 uVar2;
  undefined2 uVar3;
  u_long uVar4;
  undefined2 *puVar5;
  u_short *puVar6;
  uint uVar7;
  uint uVar8;
  u_long *puVar9;
  undefined2 *puVar10;
  undefined2 *puVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  int iVar16;
  uint uVar17;
  undefined2 *puVar18;
  int iVar19;
  int iVar20;
  int iVar21;
  
  if (bs == (u_long *)0x0) {
    puVar18 = null_00000000h_8008e530 + VLC_C_OBJ_0;
    uVar7 = null_00000000h_8008e534;
    uVar8 = null_00000000h_8008e538;
    puVar9 = VLC_C_OBJ_370;
    puVar5 = null_00000000h_8008e530;
    iVar16 = null_00000000h_8008e53c;
    uVar17 = null_00000000h_8008e540;
    iVar19 = null_00000000h_8008e544;
    iVar20 = null_00000000h_8008e548;
    iVar21 = null_00000000h_8008e54c;
    goto VLC_C_OBJ_200;
  }
  iVar19 = 0;
  iVar20 = 0;
  iVar21 = 0;
  puVar18 = (undefined2 *)((int)buf + VLC_C_OBJ_0 * 2);
  uVar2 = *(undefined2 *)((int)bs + 2);
  uVar4 = bs[2];
  uVar3 = *(undefined2 *)((int)bs + 10);
  iVar16 = (uint)(ushort)bs[1] << 10;
  uVar17 = (uint)(-1 < (int)(*(ushort *)((int)bs + 6) - 3));
  puVar9 = bs + 3;
  uVar8 = 0;
  *(short *)buf = (short)*bs;
  *(undefined2 *)((int)buf + 2) = uVar2;
  uVar14 = CONCAT22((short)uVar4,uVar3);
  puVar11 = (undefined2 *)((int)buf + 2);
VLC_C_OBJ_E4:
  if (uVar17 == 0) {
    if (uVar14 >> 0x16 == 0x1ff) goto VLC_C_OBJ_308;
    uVar7 = uVar14 << 10;
    uVar13 = uVar8 + 10;
    uVar8 = uVar13 & 0xf;
    if ((uVar13 & 0x10) != 0) {
      uVar4 = *puVar9;
      puVar9 = (u_long *)((int)puVar9 + 2);
      uVar7 = uVar7 | (uint)(ushort)uVar4 << uVar8;
    }
    puVar11[1] = (ushort)iVar16 | (ushort)(uVar14 >> 0x16);
  }
  else {
    if (uVar14 >> 0x16 == 0x3ff) {
VLC_C_OBJ_308:
      iVar16 = 0x40;
      do {
        puVar11 = puVar11 + 1;
        *puVar11 = 0xfe00;
        bVar1 = iVar16 != 0;
        iVar16 = iVar16 + -1;
      } while (bVar1);
      setCopReg(0,Status,Status | 0x20000,0);
      return 0;
    }
    puVar6 = table + 0x200;
    if (-1 < (int)(uVar17 - 3)) {
      puVar6 = table;
    }
    uVar13 = (uint)puVar6[(uVar14 >> 0x18) * 2];
    uVar15 = (uint)(puVar6 + (uVar14 >> 0x18) * 2)[1];
    uVar12 = 0;
    uVar7 = uVar14 << (uVar13 & 0x1f);
    if (uVar15 != 0) {
      uVar12 = uVar7 >> (0x20 - uVar15 & 0x1f);
      bVar1 = -1 < (int)uVar7;
      uVar7 = uVar7 << (uVar15 & 0x1f);
      if (bVar1) {
        uVar12 = uVar12 - (0xffffffffU >> (0x20 - uVar15 & 0x1f));
      }
      uVar8 = uVar8 + uVar15;
    }
    uVar13 = uVar8 + uVar13;
    uVar8 = uVar13 & 0xf;
    if ((uVar13 & 0x10) != 0) {
      uVar4 = *puVar9;
      puVar9 = (u_long *)((int)puVar9 + 2);
      uVar7 = uVar7 | (uint)(ushort)uVar4 << uVar8;
    }
    uVar14 = iVar21 + uVar12;
    if ((int)(uVar17 - 2) < 1) {
      uVar14 = iVar20 + uVar12;
      if (uVar17 == 2) {
        iVar20 = iVar20 + uVar12;
      }
      else {
        uVar14 = iVar19 + uVar12;
        iVar19 = iVar19 + uVar12;
      }
    }
    else {
      iVar21 = iVar21 + uVar12;
    }
    bVar1 = uVar17 == 6;
    puVar11[1] = (ushort)iVar16 | (ushort)((uVar14 & 0xff) << 2);
    uVar17 = uVar17 + 1;
    if (bVar1) {
      uVar17 = 1;
    }
  }
  puVar5 = puVar11 + 2;
  if (-1 < (int)puVar11 + (2 - (int)puVar18)) {
    VLC_C_OBJ_370 = puVar9;
    null_00000000h_8008e530 = puVar11 + 2;
    null_00000000h_8008e534 = uVar7;
    null_00000000h_8008e538 = uVar8;
    null_00000000h_8008e53c = iVar16;
    null_00000000h_8008e540 = uVar17;
    null_00000000h_8008e544 = iVar19;
    null_00000000h_8008e548 = iVar20;
    null_00000000h_8008e54c = iVar21;
    return 1;
  }
VLC_C_OBJ_200:
  puVar10 = puVar5;
  uVar13 = *(uint *)(table + (uVar7 >> 0x13) * 4 + 0x400);
  if (uVar13 == 0) {
    uVar7 = uVar7 << 8;
    uVar14 = uVar8 + 8;
    uVar8 = uVar14 & 0xf;
    if ((uVar14 & 0x10) != 0) {
      uVar4 = *puVar9;
      puVar9 = (u_long *)((int)puVar9 + 2);
      uVar7 = uVar7 | (uint)(ushort)uVar4 << uVar8;
    }
    uVar13 = *(uint *)(table + (uVar7 >> 0x17) * 2 + 0x8400);
    uVar12 = 0;
  }
  else {
    uVar12 = *(uint *)((int)(table + (uVar7 >> 0x13) * 4 + 0x400) + 4);
  }
  uVar7 = uVar7 << (uVar13 & 0x1f);
  uVar14 = uVar8 + (uVar13 & 0xff);
  uVar8 = uVar14 & 0xf;
  if ((uVar14 & 0x10) != 0) {
    uVar4 = *puVar9;
    puVar9 = (u_long *)((int)puVar9 + 2);
    uVar7 = uVar7 | (uint)(ushort)uVar4 << uVar8;
  }
  puVar11 = puVar10;
  if (uVar13 >> 0x10 == 0x7c1f) goto VLC_C_OBJ_2E4;
  *puVar10 = (short)(uVar13 >> 0x10);
  uVar14 = uVar7;
  if (uVar13 >> 0x10 != 0xfe00) goto code_r0x8008e458;
  goto VLC_C_OBJ_E4;
code_r0x8008e458:
  puVar11 = puVar10 + 1;
  puVar5 = puVar11;
  if (uVar12 != 0) {
    if ((uVar12 & 0xffff) != 0x7c1f) {
      *puVar11 = (short)uVar12;
      if ((uVar12 & 0xffff) == 0xfe00) goto VLC_C_OBJ_E4;
      uVar13 = uVar12 >> 0x10;
      puVar11 = puVar10 + 2;
      puVar5 = puVar11;
      if (uVar13 == 0) goto VLC_C_OBJ_200;
      if (uVar13 != 0x7c1f) {
        *puVar11 = (short)(uVar12 >> 0x10);
        if (uVar13 != 0xfe00) {
          puVar5 = puVar10 + 3;
          goto VLC_C_OBJ_200;
        }
        goto VLC_C_OBJ_E4;
      }
    }
VLC_C_OBJ_2E4:
    *puVar11 = (short)(uVar7 >> 0x10);
    uVar4 = *puVar9;
    puVar9 = (u_long *)((int)puVar9 + 2);
    uVar7 = uVar7 << 0x10 | (uint)(ushort)uVar4 << uVar8;
    puVar5 = puVar11 + 1;
  }
  goto VLC_C_OBJ_200;
}



void DecDCTvlcBuild(u_short *table)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  ushort *puVar4;
  int iVar5;
  byte *pbVar6;
  byte *pbVar7;
  
  iVar3 = 0;
  pbVar6 = &null_07h_800a434c;
  while( true ) {
    bVar1 = *pbVar6;
    uVar2 = (uint)bVar1;
    pbVar7 = pbVar6 + 1;
    if (uVar2 < 0xf0) {
      if (iVar3 == 0) {
        do {
          bVar1 = *pbVar7;
          pbVar7 = pbVar7 + 1;
          uVar2 = uVar2 - 1;
          *(byte *)table = bVar1;
          table = (u_short *)((int)table + 1);
        } while (-1 < (int)uVar2);
        BUILD_OBJ_B0();
        return;
      }
      do {
        uVar2 = uVar2 - 1;
        *(undefined1 *)table = *(undefined1 *)((int)table - iVar3);
        table = (u_short *)((int)table + 1);
      } while (-1 < (int)uVar2);
      BUILD_OBJ_B0();
      return;
    }
    if (uVar2 == 0xf0) break;
    pbVar6 = pbVar6 + 2;
    iVar3 = CONCAT11(bVar1,*pbVar7) - 0xf0ff;
    iVar5 = 4;
    if (iVar3 == 0xf00) {
      puVar4 = table + 4;
      do {
        iVar5 = iVar5 + 1;
        *puVar4 = *puVar4 ^ puVar4[-4];
        puVar4 = puVar4 + 1;
      } while (iVar5 < 0x8800);
      return;
    }
  }
  BUILD_OBJ_B0();
  return;
}



void BUILD_OBJ_B0(int param_1,undefined4 param_2,byte *param_3,byte *param_4)

{
  byte bVar1;
  uint uVar2;
  int in_v1;
  ushort *puVar3;
  int iVar4;
  byte *pbVar5;
  int in_t0;
  int in_t1;
  uint in_t2;
  
  while( true ) {
    iVar4 = 4;
    if (in_v1 == in_t1) {
      puVar3 = (ushort *)(param_1 + 8);
      do {
        iVar4 = iVar4 + 1;
        *puVar3 = *puVar3 ^ puVar3[-4];
        puVar3 = puVar3 + 1;
      } while (iVar4 < 0x8800);
      return;
    }
    bVar1 = *param_4;
    uVar2 = (uint)bVar1;
    pbVar5 = param_4 + 1;
    if (uVar2 < 0xf0) break;
    if (uVar2 == in_t2) {
      BUILD_OBJ_B0();
      return;
    }
    param_4 = param_4 + 2;
    in_v1 = (uint)CONCAT11(bVar1,*pbVar5) + in_t0;
  }
  if (in_v1 == 0) {
    do {
      bVar1 = *pbVar5;
      pbVar5 = pbVar5 + 1;
      uVar2 = uVar2 - 1;
      *param_3 = bVar1;
      param_3 = param_3 + 1;
    } while (-1 < (int)uVar2);
    BUILD_OBJ_B0();
    return;
  }
  do {
    uVar2 = uVar2 - 1;
    *param_3 = param_3[-in_v1];
    param_3 = param_3 + 1;
  } while (-1 < (int)uVar2);
  BUILD_OBJ_B0();
  return;
}



// Possible SNMAIN.OBJ/__SN_ENTRY_POINT

void start(void)

{
  dword *pdVar1;
  code *pcVar2;
  undefined4 unaff_s0;
  undefined **ppuVar3;
  undefined4 unaff_s1;
  int iVar4;
  uint uVar5;
  undefined4 unaff_retaddr;
  undefined4 uVar6;
  
  pdVar1 = &g_pCurrentInputState;
  do {
    *pdVar1 = 0;
    pdVar1 = pdVar1 + 1;
  } while (pdVar1 < &g_BLBHeaderBase);
  uVar5 = null_00200000h_800a60b0 - 8U | 0x80000000;
  null_00000000h_800a5164 = ((null_00200000h_800a60b0 - 8U) - null_00004000h_800a60b4) - 0xae3e0;
  null_00000000h_800a5160 = &g_BLBHeaderBase;
  null____800a6164 = unaff_retaddr;
  InitHeap((ulong *)&DAT_800ae3e4,null_00000000h_800a5164);
  uVar6 = 0x8008e6dc;
  main();
  iVar4 = null_00000000h_800a515c;
  trap(1);
  *(undefined4 *)(uVar5 - 0xc) = unaff_s0;
  *(undefined4 *)(uVar5 - 8) = unaff_s1;
  *(undefined4 *)(uVar5 - 4) = uVar6;
  if (iVar4 == 0) {
    null_00000000h_800a515c = 1;
    ppuVar3 = &PTR_FUN_800907d0;
    iVar4 = 4;
    do {
      pcVar2 = (code *)*ppuVar3;
      ppuVar3 = ppuVar3 + 1;
      iVar4 = iVar4 + -1;
      (*pcVar2)();
    } while (iVar4 != 0);
  }
  return;
}



void __main(void)

{
  code *pcVar1;
  undefined **ppuVar2;
  int iVar3;
  
  if (null_00000000h_800a515c == 0) {
    null_00000000h_800a515c = 1;
    ppuVar2 = &PTR_FUN_800907d0;
    iVar3 = 4;
    do {
      pcVar1 = (code *)*ppuVar2;
      ppuVar2 = ppuVar2 + 1;
      iVar3 = iVar3 + -1;
      (*pcVar1)();
    } while (iVar3 != 0);
  }
  return;
}



void __do_global_dtors(void)

{
  code *pcVar1;
  undefined **ppuVar2;
  int iVar3;
  
  if (null_00000000h_800a515c != 0) {
    ppuVar2 = &PTR_FUN_800907e0;
    iVar3 = 3;
    do {
      pcVar1 = (code *)*ppuVar2;
      ppuVar2 = ppuVar2 + 1;
      iVar3 = iVar3 + -1;
      (*pcVar1)();
    } while (iVar3 != 0);
  }
  return;
}



void InitHeap(ulong *param_1,ulong param_2)

{
  (*(code *)&LAB_000000a0)();
  return;
}



void __builtin_delete(void *param_1)

{
  if (param_1 != (void *)0x0) {
    free(param_1);
  }
  return;
}



void free(void *param_1)

{
  (*(code *)&LAB_000000a0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible S_I.OBJ/SpuInit

void SsUtReverbOff(void)

{
  _SpuInit();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _SpuInit(void)

{
  undefined2 *puVar1;
  int iVar2;
  int in_a0;
  
  ResetCallback();
  _spu_init();
  if (in_a0 == 0) {
    iVar2 = 0x17;
    puVar1 = &null_C000h_800a51ea;
    do {
      *puVar1 = 0xc000;
      iVar2 = iVar2 + -1;
      puVar1 = puVar1 + -1;
    } while (-1 < iVar2);
  }
  SpuStart();
  null_00000000h_800a5194 = 0;
  null_00000000h_800a5198 = 0;
  null_00000000h_800a51a4 = 0;
  null_0000h_800a51a8 = 0;
  null_0000h_800a51aa = 0;
  null_00000000h_800a51ac = 0;
  null_00000000h_800a51b0 = 0;
  null_00000000h_800a519c = null_0000FFFEh_800a565c;
  _spu_FsetRXX(0xd1,null_0000FFFEh_800a565c,0);
  null_00000000h_800a5650 = 0;
  null_00000000h_800a5654 = 0;
  null_00000000h_800a5658 = 0;
  null_00000000h_800a5190 = 0;
  null_00000000h_800a5610 = 0;
  null_00000000h_800a518c = 0;
  null_00000000h_800a51b8 = 0;
  null_00000000h_800a51b4 = 0;
  null_00000000h_800a55ec = 0;
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void SpuStart(void)

{
  if (null_00000000h_800a55f0 == 0) {
    null_00000000h_800a55f0 = 1;
    FUN_80086710();
    _SpuDataCallback(_spu_FiDMA);
    null_00000000h_800a5188 = OpenEvent(0xf0000009,0x20,0x2000,0);
    EnableEvent();
    FUN_80086720();
  }
  return;
}



void OpenEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void EnableEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



undefined4 _spu_init(int param_1)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  undefined2 *puVar6;
  
  *(uint *)PTR_DMA_DPCR_800a5604 = *(uint *)PTR_DMA_DPCR_800a5604 | 0xb0000;
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  null_00000000h_800a5610 = 0;
  null_00000000h_800a5614 = 0;
  null_0000h_800a560c = 0;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  *(undefined2 *)(puVar1 + 0x1aa) = 0;
  _spu_Fw1ts();
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  puVar2 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  if ((*(ushort *)(puVar1 + 0x1ae) & 0x7ff) != 0) {
    uVar4 = 1;
    do {
      if (0xf00 < uVar4) {
        printf("SPU:T/O [%s]\n","wait (reset)");
        uVar3 = SPU_OBJ_DC(0);
        return uVar3;
      }
      uVar4 = uVar4 + 1;
    } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae) & 0x7ff) != 0);
  }
  iVar5 = 0;
  puVar6 = &null____800acb80;
  null_00000002h_800a5618 = 2;
  null_00000003h_800a561c = 3;
  null_00000008h_800a5620 = 8;
  null_00000007h_800a5624 = 7;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ac) = 4;
  *(undefined2 *)(puVar2 + 0x184) = 0;
  *(undefined2 *)(puVar2 + 0x186) = 0;
  *(undefined2 *)(puVar2 + 0x18c) = 0xffff;
  *(undefined2 *)(puVar2 + 0x18e) = 0xffff;
  *(undefined2 *)(puVar2 + 0x198) = 0;
  *(undefined2 *)(puVar2 + 0x19a) = 0;
  do {
    *puVar6 = 0;
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    iVar5 = iVar5 + 1;
    puVar6 = puVar6 + 1;
  } while (iVar5 < 10);
  if (param_1 == 0) {
    null_0000h_800a560c = 0x200;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 400) = 0;
    *(undefined2 *)(puVar1 + 0x192) = 0;
    *(undefined2 *)(puVar1 + 0x194) = 0;
    *(undefined2 *)(puVar1 + 0x196) = 0;
    *(undefined2 *)(puVar1 + 0x1b0) = 0;
    *(undefined2 *)(puVar1 + 0x1b2) = 0;
    *(undefined2 *)(puVar1 + 0x1b4) = 0;
    *(undefined2 *)(puVar1 + 0x1b6) = 0;
    _spu_FwriteByIO(&DAT_800a5634,0x10);
    iVar5 = 0;
    puVar6 = (undefined2 *)PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    do {
      *puVar6 = 0;
      puVar6[1] = 0;
      puVar6[2] = 0x3fff;
      puVar6[3] = 0x200;
      puVar6[4] = 0;
      puVar6[5] = 0;
      puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
      iVar5 = iVar5 + 1;
      puVar6 = puVar6 + 8;
    } while (iVar5 < 0x18);
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x188) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18a) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x18c) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18e) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
  }
  null_00000001h_800a5628 = 1;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) = 0xc000;
  null_00000000h_800a562c = 0;
  null_00000000h_800a5630 = 0;
  return 0;
}



undefined4 SPU_OBJ_DC(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined2 *puVar3;
  int unaff_s0;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  puVar3 = &null____800acb80;
  null_00000002h_800a5618 = 2;
  null_00000003h_800a561c = 3;
  null_00000008h_800a5620 = 8;
  null_00000007h_800a5624 = 7;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ac) = 4;
  *(undefined2 *)(puVar1 + 0x184) = 0;
  *(undefined2 *)(puVar1 + 0x186) = 0;
  *(undefined2 *)(puVar1 + 0x18c) = 0xffff;
  *(undefined2 *)(puVar1 + 0x18e) = 0xffff;
  *(undefined2 *)(puVar1 + 0x198) = 0;
  *(undefined2 *)(puVar1 + 0x19a) = 0;
  do {
    *puVar3 = 0;
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    param_1 = param_1 + 1;
    puVar3 = puVar3 + 1;
  } while (param_1 < 10);
  if (unaff_s0 == 0) {
    null_0000h_800a560c = 0x200;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 400) = 0;
    *(undefined2 *)(puVar1 + 0x192) = 0;
    *(undefined2 *)(puVar1 + 0x194) = 0;
    *(undefined2 *)(puVar1 + 0x196) = 0;
    *(undefined2 *)(puVar1 + 0x1b0) = 0;
    *(undefined2 *)(puVar1 + 0x1b2) = 0;
    *(undefined2 *)(puVar1 + 0x1b4) = 0;
    *(undefined2 *)(puVar1 + 0x1b6) = 0;
    _spu_FwriteByIO(&DAT_800a5634,0x10);
    iVar2 = 0;
    puVar3 = (undefined2 *)PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    do {
      *puVar3 = 0;
      puVar3[1] = 0;
      puVar3[2] = 0x3fff;
      puVar3[3] = 0x200;
      puVar3[4] = 0;
      puVar3[5] = 0;
      puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
      iVar2 = iVar2 + 1;
      puVar3 = puVar3 + 8;
    } while (iVar2 < 0x18);
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x188) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18a) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x18c) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18e) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
  }
  null_00000001h_800a5628 = 1;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) = 0xc000;
  null_00000000h_800a562c = 0;
  null_00000000h_800a5630 = 0;
  return 0;
}



void _spu_FwriteByIO(undefined2 *param_1,uint param_2)

{
  ushort uVar1;
  undefined2 uVar2;
  ushort uVar3;
  bool bVar4;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  
  uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae);
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) = null_0000h_800a560c;
  _spu_Fw1ts();
  bVar4 = param_2 < 0x41;
  if (param_2 != 0) {
    do {
      puVar5 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
      uVar8 = 0x40;
      if (bVar4) {
        uVar8 = param_2;
      }
      iVar6 = 0;
      if (0 < (int)uVar8) {
        do {
          uVar2 = *param_1;
          param_1 = param_1 + 1;
          iVar6 = iVar6 + 2;
          *(undefined2 *)(puVar5 + 0x1a8) = uVar2;
        } while (iVar6 < (int)uVar8);
      }
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
           *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf | 0x10;
      _spu_Fw1ts();
      if ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae) & 0x400) != 0) {
        uVar7 = 1;
        do {
          if (0xf00 < uVar7) {
            printf("SPU:T/O [%s]\n","wait (wrdy H -> L)");
            SPU_OBJ_3AC();
            return;
          }
          uVar7 = uVar7 + 1;
        } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae) & 0x400) != 0);
      }
      param_2 = param_2 - uVar8;
      _spu_Fw1ts();
      _spu_Fw1ts();
      bVar4 = param_2 < 0x41;
    } while (param_2 != 0);
  }
  puVar5 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
       *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf;
  uVar3 = *(ushort *)(puVar5 + 0x1ae);
  uVar8 = 1;
  while( true ) {
    if ((uVar3 & 0x7ff) == (uVar1 & 0x7ff)) {
      return;
    }
    if (0xf00 < uVar8) break;
    uVar3 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae);
    uVar8 = uVar8 + 1;
  }
  printf("SPU:T/O [%s]\n","wait (dmaf clear/W)");
  SPU_OBJ_440();
  return;
}



void SPU_OBJ_3AC(void)

{
  undefined2 uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  uint uVar5;
  uint unaff_s0;
  uint unaff_s1;
  undefined2 *unaff_s2;
  ushort unaff_s3;
  
  do {
    do {
      unaff_s1 = unaff_s1 - unaff_s0;
      _spu_Fw1ts();
      _spu_Fw1ts();
      puVar3 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
      if (unaff_s1 == 0) {
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf;
        uVar2 = *(ushort *)(puVar3 + 0x1ae);
        uVar5 = 1;
        while( true ) {
          if ((uVar2 & 0x7ff) == unaff_s3) {
            return;
          }
          if (0xf00 < uVar5) break;
          uVar2 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae);
          uVar5 = uVar5 + 1;
        }
        printf("SPU:T/O [%s]\n","wait (dmaf clear/W)");
        SPU_OBJ_440();
        return;
      }
      unaff_s0 = 0x40;
      if (unaff_s1 < 0x41) {
        unaff_s0 = unaff_s1;
      }
      iVar4 = 0;
      if (0 < (int)unaff_s0) {
        do {
          uVar1 = *unaff_s2;
          unaff_s2 = unaff_s2 + 1;
          iVar4 = iVar4 + 2;
          *(undefined2 *)(puVar3 + 0x1a8) = uVar1;
        } while (iVar4 < (int)unaff_s0);
      }
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
           *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf | 0x10;
      _spu_Fw1ts();
    } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae) & 0x400) == 0);
    uVar5 = 1;
    do {
      if (0xf00 < uVar5) {
        printf("SPU:T/O [%s]\n","wait (wrdy H -> L)");
        SPU_OBJ_3AC();
        return;
      }
      uVar5 = uVar5 + 1;
    } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1ae) & 0x400) != 0);
  } while( true );
}



void SPU_OBJ_440(void)

{
  return;
}



void _spu_FiDMA(void)

{
  undefined *puVar1;
  uint uVar2;
  
  if (null_00000000h_800a5644 == 0) {
    _spu_Fw1ts();
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
       *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf;
  if ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0) {
    uVar2 = 1;
    do {
      if (0xf00 < uVar2) break;
      uVar2 = uVar2 + 1;
    } while ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0);
  }
  if (null_00000000h_800a562c == (code *)0x0) {
    DeliverEvent(0xf0000009,0x20);
    return;
  }
  (*null_00000000h_800a562c)();
  SPU_OBJ_510();
  return;
}



void SPU_OBJ_510(void)

{
  return;
}



void _spu_Fr_(undefined4 param_1,undefined2 param_2,int param_3)

{
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) = param_2;
  _spu_Fw1ts();
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
       *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 0x30;
  _spu_Fw1ts();
  _spu_FsetDelayR();
  *(undefined4 *)PTR_DMA_SPU_MADR_800a55f8 = param_1;
  *(uint *)PTR_DMA_SPU_BCR_800a55fc = param_3 << 0x10 | 0x10;
  null_00000000h_800a5644 = 1;
  *(undefined4 *)PTR_DMA_SPU_CHCR_800a5600 = 0x1000200;
  return;
}



undefined4 _spu_t(int param_1,uint param_2,uint param_3)

{
  ushort uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  
  if (param_1 == 1) {
    null_00000000h_800a5644 = 0;
    if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) != null_0000h_800a560c) {
      uVar3 = 1;
      do {
        if (0xf00 < uVar3) {
          null_00000000h_800a5644 = 0;
          return 0xfffffffe;
        }
        uVar3 = uVar3 + 1;
      } while (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) != null_0000h_800a560c);
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) & 0xffcf | 0x20;
    uVar2 = SPU_OBJ_848();
    return uVar2;
  }
  if (param_1 < 2) {
    if (param_1 != 0) {
      uVar2 = SPU_OBJ_848();
      return uVar2;
    }
    null_00000000h_800a5644 = 1;
    if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) != null_0000h_800a560c) {
      uVar3 = 1;
      do {
        if (0xf00 < uVar3) {
          null_00000000h_800a5644 = 1;
          return 0xfffffffe;
        }
        uVar3 = uVar3 + 1;
      } while (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) != null_0000h_800a560c);
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 0x30;
    uVar2 = SPU_OBJ_848();
    return uVar2;
  }
  if (param_1 == 2) {
    null_0000h_800a560c = (short)(param_2 >> (null_00000003h_800a561c & 0x1f));
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1a6) = null_0000h_800a560c;
    uVar2 = SPU_OBJ_848();
    return uVar2;
  }
  if (param_1 == 3) {
    uVar4 = 0x20;
    if (null_00000000h_800a5644 == 1) {
      uVar4 = 0x30;
    }
    uVar3 = 1;
    uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa);
    while ((uVar1 & 0x30) != uVar4) {
      if (0xf00 < uVar3) {
        return 0xfffffffe;
      }
      uVar3 = uVar3 + 1;
      uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa);
    }
    if (null_00000000h_800a5644 != 1) {
      _spu_FsetDelayW();
      null_00000000h_800a564c = (param_3 >> 6) + (uint)((param_3 & 0x3f) != 0);
      null_00000000h_800a5648 = param_2;
      *(uint *)PTR_DMA_SPU_MADR_800a55f8 = param_2;
      *(uint *)PTR_DMA_SPU_BCR_800a55fc = null_00000000h_800a564c << 0x10 | 0x10;
      uVar2 = 0x1000201;
      if (null_00000000h_800a5644 == 1) {
        uVar2 = 0x1000200;
      }
      *(undefined4 *)PTR_DMA_SPU_CHCR_800a5600 = uVar2;
      return 0;
    }
    _spu_FsetDelayR();
    uVar2 = SPU_OBJ_7C0();
    return uVar2;
  }
  uVar2 = SPU_OBJ_848();
  return uVar2;
}



undefined4 SPU_OBJ_7C0(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *unaff_s0;
  
  null_00000000h_800a5648 = unaff_s0[-1];
  null_00000000h_800a564c = (*unaff_s0 >> 6) + (uint)((*unaff_s0 & 0x3f) != 0);
  *(uint *)PTR_DMA_SPU_MADR_800a55f8 = null_00000000h_800a5648;
  *(uint *)PTR_DMA_SPU_BCR_800a55fc = null_00000000h_800a564c << 0x10 | 0x10;
  param_3 = param_3 | 0x201;
  if (null_00000000h_800a5644 == 1) {
    param_3 = 0x1000200;
  }
  *(uint *)PTR_DMA_SPU_CHCR_800a5600 = param_3;
  return 0;
}



void SPU_OBJ_848(void)

{
  return;
}



undefined4 _spu_Fw(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  if (null_00000000h_800a5610 == 0) {
    _spu_t(2,(uint)null_0000h_800a560c << (null_00000003h_800a561c & 0x1f));
    _spu_t(1);
    _spu_t(3,param_1,param_2);
    uVar1 = SPU_OBJ_8CC();
    return uVar1;
  }
  _spu_FwriteByIO(param_1,param_2);
  return param_2;
}



void SPU_OBJ_8CC(void)

{
  return;
}



undefined4 _spu_Fr(undefined4 param_1,undefined4 param_2)

{
  _spu_t(2,(uint)null_0000h_800a560c << (null_00000003h_800a561c & 0x1f));
  _spu_t(0);
  _spu_t(3,param_1,param_2);
  return param_2;
}



void _spu_FsetRXX(int param_1,uint param_2,int param_3)

{
  if (param_3 == 0) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_1 * 2) = (short)param_2;
    SPU_OBJ_98C();
    return;
  }
  *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_1 * 2) =
       (short)(param_2 >> (null_00000003h_800a561c & 0x1f));
  return;
}



void SPU_OBJ_98C(void)

{
  return;
}



uint _spu_FsetRXXa(int param_1,uint param_2)

{
  uint uVar1;
  
  if (null_00000002h_800a5618 != 0) {
    if (null_00000008h_800a5620 == 0) {
      trap(0x1c00);
    }
    if (param_2 % null_00000008h_800a5620 != 0) {
      param_2 = param_2 + null_00000008h_800a5620 & ~null_00000007h_800a5624;
    }
  }
  if (param_1 != -2) {
    if (param_1 == -1) {
      uVar1 = SPU_OBJ_A30();
      return uVar1;
    }
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_1 * 2) =
         (short)(param_2 >> (null_00000003h_800a561c & 0x1f));
    return param_2;
  }
  uVar1 = SPU_OBJ_A30();
  return uVar1;
}



void SPU_OBJ_A30(void)

{
  return;
}



uint _spu_FgetRXXa(int param_1,int param_2)

{
  uint uVar1;
  
  if (param_2 != -1) {
    uVar1 = SPU_OBJ_A6C();
    return uVar1;
  }
  return (uint)*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_1 * 2);
}



void SPU_OBJ_A6C(void)

{
  return;
}



void _spu_FsetPCR(int param_1)

{
  *(uint *)PTR_DMA_DPCR_800a5604 = *(uint *)PTR_DMA_DPCR_800a5604 & 0xfff8ffff;
  if (param_1 != 0) {
    SPU_OBJ_AC4(0x30000);
    return;
  }
  *(uint *)PTR_DMA_DPCR_800a5604 = *(uint *)PTR_DMA_DPCR_800a5604 | 0x50000;
  return;
}



void SPU_OBJ_AC4(uint param_1)

{
  uint *in_v0;
  uint in_v1;
  
  *in_v0 = in_v1 | param_1;
  return;
}



void _spu_FsetDelayW(void)

{
  *(uint *)PTR_SPU_DELAY_800a5608 = *(uint *)PTR_SPU_DELAY_800a5608 & 0xf0ffffff | 0x20000000;
  return;
}



void _spu_FsetDelayR(void)

{
  *(uint *)PTR_SPU_DELAY_800a5608 = *(uint *)PTR_SPU_DELAY_800a5608 & 0xf0ffffff | 0x22000000;
  return;
}



void _spu_Fw1ts(void)

{
  SPU_OBJ_B74();
  return;
}



void SPU_OBJ_B74(void)

{
  undefined4 local_res0;
  
  for (; local_res0 < 0x3c; local_res0 = local_res0 + 1) {
  }
  return;
}



void _SpuDataCallback(undefined4 param_1)

{
  DMACallback(4,param_1);
  return;
}



void CloseEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void DisableEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void SpuSetVoiceAttr(SpuVoiceAttr *arg)

{
  _SpuRSetVoiceAttr((long)arg,0,(SpuVoiceAttr *)0x17);
  return;
}



void SpuSetKey(long on_off,ulong voice_bit)

{
  undefined *puVar1;
  uint uVar2;
  ushort uVar3;
  ushort uVar4;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  uVar2 = voice_bit & 0xffffff;
  uVar3 = (ushort)uVar2;
  uVar4 = (ushort)(uVar2 >> 0x10);
  if (on_off == 0) {
    if ((null_00000000h_800a55ec & 1) == 0) {
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x18c) = uVar3;
      *(ushort *)(puVar1 + 0x18e) = uVar4;
      null_00000000h_800a518c = null_00000000h_800a518c & ~uVar2;
    }
    else {
      null_00000000h_800a51b8 = null_00000000h_800a51b8 | 1;
      null_00000000h_800a51b4 = null_00000000h_800a51b4 & ~uVar2;
      if ((null____800acb80 & uVar2) != 0) {
        null____800acb80 = null____800acb80 & (ushort)~uVar2;
      }
      null____800acb84 = uVar3;
      null____800acb86 = uVar4;
      if (((uint)null____800acb82 & uVar2 >> 0x10) != 0) {
        null____800acb82 = null____800acb82 & ~uVar4;
        S_SK_OBJ_1F4();
        return;
      }
    }
  }
  else if (on_off == 1) {
    if ((null_00000000h_800a55ec & 1) == 0) {
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x188) = uVar3;
      *(ushort *)(puVar1 + 0x18a) = uVar4;
      S_SK_OBJ_1EC();
      return;
    }
    null_00000000h_800a51b8 = null_00000000h_800a51b8 | 1;
    null_00000000h_800a51b4 = null_00000000h_800a51b4 | uVar2;
    if ((null____800acb84 & uVar2) != 0) {
      null____800acb84 = null____800acb84 & ~uVar3;
    }
    null____800acb80 = uVar3;
    null____800acb82 = uVar4;
    if (((uint)null____800acb86 & uVar2 >> 0x10) != 0) {
      null____800acb86 = null____800acb86 & ~uVar4;
      S_SK_OBJ_1F4();
      return;
    }
  }
  return;
}



void S_SK_OBJ_1EC(void)

{
  undefined4 in_v0;
  
  null_00000000h_800a518c = in_v0;
  return;
}



void S_SK_OBJ_1F4(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x8008f870)
// WARNING: Removing unreachable block (ram,0x8008f8ac)
// WARNING: Removing unreachable block (ram,0x8008f89c)
// WARNING: Removing unreachable block (ram,0x8008f8a4)
// WARNING: Removing unreachable block (ram,0x8008f8b4)

long SpuGetKeyStatus(ulong voice_bit)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  
  uVar3 = 0;
  uVar1 = 1;
  do {
    if ((voice_bit & uVar1) != 0) {
      lVar2 = S_GKS_OBJ_2C(voice_bit,uVar3);
      return lVar2;
    }
    uVar3 = uVar3 + 1;
    uVar1 = 1 << (uVar3 & 0x1f);
  } while ((int)uVar3 < 0x18);
  lVar2 = S_GKS_OBJ_8C();
  return lVar2;
}



int S_GKS_OBJ_2C(undefined4 param_1,uint param_2)

{
  int iVar1;
  
  if (param_2 == 0xffffffff) {
    iVar1 = S_GKS_OBJ_8C();
    return iVar1;
  }
  if ((null_00000000h_800a518c & 1 << (param_2 & 0x1f)) == 0) {
    iVar1 = (uint)(*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_2 * 0x10 + 0xc) != 0) << 1;
  }
  else {
    iVar1 = 3;
    if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + param_2 * 0x10 + 0xc) != 0) {
      iVar1 = S_GKS_OBJ_8C();
      return iVar1;
    }
  }
  return iVar1;
}



void S_GKS_OBJ_8C(void)

{
  return;
}



// Possible S_W.OBJ/SpuWrite

ulong SpuRead(uchar *addr,ulong size)

{
  if (0x7eff0 < size) {
    size = 0x7eff0;
  }
  _spu_Fw(addr,size);
  if (null_00000000h_800a562c == 0) {
    null_00000001h_800a5628 = 0;
  }
  return size;
}



ulong SpuSetTransferStartAddr(ulong addr)

{
  ulong uVar1;
  
  if (addr - 0x1010 < 0x7efe9) {
    null_0000h_800a560c = _spu_FsetRXXa(0xffffffff);
    uVar1 = S_STSA_OBJ_48();
    return uVar1;
  }
  return 0;
}



void S_STSA_OBJ_48(void)

{
  return;
}



long SpuSetTransferMode(long mode)

{
  long lVar1;
  
  if ((mode != 0) && (mode == 1)) {
    lVar1 = S_STM_OBJ_1C();
    return lVar1;
  }
  null_00000000h_800a5190 = mode;
  null_00000000h_800a5610 = 0;
  return 0;
}



void S_STM_OBJ_1C(undefined4 param_1)

{
  undefined4 in_v0;
  
  null_00000000h_800a5190 = param_1;
  null_00000000h_800a5610 = in_v0;
  return;
}



long SpuIsTransferCompleted(long flag)

{
  bool bVar1;
  long lVar2;
  int iVar3;
  
  if ((null_00000000h_800a5190 != 1) && (null_00000001h_800a5628 != 1)) {
    iVar3 = TestEvent(null_00000000h_800a5188);
    if (flag == 1) {
      bVar1 = iVar3 == 0;
      iVar3 = 1;
      if (bVar1) {
        do {
          iVar3 = TestEvent(null_00000000h_800a5188);
        } while (iVar3 == 0);
        lVar2 = S_ITC_OBJ_88();
        return lVar2;
      }
    }
    else if (iVar3 != 1) {
      return iVar3;
    }
    null_00000001h_800a5628 = iVar3;
    return iVar3;
  }
  lVar2 = S_ITC_OBJ_90();
  return lVar2;
}



void S_ITC_OBJ_88(void)

{
  undefined4 in_v0;
  
  null_00000001h_800a5628 = in_v0;
  return;
}



void S_ITC_OBJ_90(void)

{
  return;
}



void TestEvent(void)

{
  (*(code *)&SUB_000000b0)();
  return;
}



void SpuSetCommonAttr(SpuCommonAttr *attr)

{
  bool bVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  uint uVar5;
  
  uVar3 = 0;
  uVar5 = attr->mask;
  bVar1 = uVar5 == 0;
  uVar4 = 0;
  if (bVar1) {
S_SCA_OBJ_30:
    switch((attr->mvolmode).left) {
    default:
S_SCA_OBJ_94:
      uVar3 = (attr->mvol).left;
      uVar2 = 0;
      break;
    case 1:
      uVar2 = 0x8000;
      break;
    case 2:
      uVar2 = 0x9000;
      break;
    case 3:
      uVar2 = 0xa000;
      break;
    case 4:
      uVar2 = 0xb000;
      break;
    case 5:
      uVar2 = 0xc000;
      break;
    case 6:
      uVar2 = 0xd000;
      break;
    case 7:
      uVar2 = 0xe000;
    }
    if (uVar2 != 0) {
      uVar3 = (attr->mvol).left;
      if (0x7f < (short)uVar3) {
        S_SCA_OBJ_CC(attr,uVar2,0x7f);
        return;
      }
      if ((short)uVar3 < 0) {
        uVar3 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar3 & 0x7fff | uVar2;
  }
  else if ((uVar5 & 1) != 0) {
    if ((uVar5 & 4) != 0) goto S_SCA_OBJ_30;
    goto S_SCA_OBJ_94;
  }
  if (bVar1) {
S_SCA_OBJ_F8:
    switch((attr->mvolmode).right) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar3 = 0x8000;
      break;
    case 2:
      uVar3 = 0x9000;
      break;
    case 3:
      uVar3 = 0xa000;
      break;
    case 4:
      uVar3 = 0xb000;
      break;
    case 5:
      uVar3 = 0xc000;
      break;
    case 6:
      uVar3 = 0xd000;
      break;
    case 7:
      uVar3 = 0xe000;
    }
  }
  else {
    if ((uVar5 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((uVar5 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    uVar4 = (attr->mvol).right;
    uVar3 = 0;
  }
  if (uVar3 != 0) {
    uVar4 = (attr->mvol).right;
    if (0x7f < (short)uVar4) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)uVar4 < 0) {
      uVar4 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar4 & 0x7fff | uVar3;
S_SCA_OBJ_1A8:
  if ((bVar1) || ((uVar5 & 0x40) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = (attr->cd).volume.left;
  }
  if ((bVar1) || ((uVar5 & 0x80) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = (attr->cd).volume.right;
  }
  if ((bVar1) || ((uVar5 & 0x400) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = (attr->ext).volume.left;
  }
  if ((bVar1) || ((uVar5 & 0x800) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = (attr->ext).volume.right;
  }
  if ((bVar1) || ((uVar5 & 0x100) != 0)) {
    if ((attr->cd).reverb == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((bVar1) || ((uVar5 & 0x200) != 0)) {
    if ((attr->cd).mix == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((bVar1) || ((uVar5 & 0x1000) != 0)) {
    if ((attr->ext).reverb == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((bVar1) || ((uVar5 & 0x2000) != 0)) {
    if ((attr->ext).mix == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_5C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0x8000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0x8000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_64(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0x9000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0x9000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_6C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xa000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0xa000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_74(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xb000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0xb000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_7C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xc000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0xc000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_84(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xd000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0xd000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_8C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xe000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = uVar1 & 0x7fff | 0xe000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8008fb04)
// WARNING: Removing unreachable block (ram,0x8008fb18)
// WARNING: Removing unreachable block (ram,0x8008fb20)
// WARNING: Removing unreachable block (ram,0x8008fb28)
// WARNING: Removing unreachable block (ram,0x8008fb2c)

void S_SCA_OBJ_94(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = *(ushort *)(param_1 + 4) & 0x7fff;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_9C(int param_1,int param_2,ushort param_3)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  if (param_2 != 0) {
    param_3 = *(ushort *)(param_1 + 4);
    if (0x7f < (short)param_3) {
      S_SCA_OBJ_CC(param_1,param_2,0x7f);
      return;
    }
    if ((short)param_3 < 0) {
      param_3 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = param_3 & 0x7fff | (ushort)param_2;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_CC(int param_1,ushort param_2,ushort param_3)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x180) = param_3 & 0x7fff | param_2;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_124(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0x8000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_12C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0x9000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_134(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0xa000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_13C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0xb000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_144(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0xc000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_14C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0xd000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_154(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 & 0x7fff | 0xe000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8008fbcc)
// WARNING: Removing unreachable block (ram,0x8008fbe0)
// WARNING: Removing unreachable block (ram,0x8008fbe8)
// WARNING: Removing unreachable block (ram,0x8008fbf0)
// WARNING: Removing unreachable block (ram,0x8008fbf4)

void S_SCA_OBJ_15C(int param_1)

{
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = *(ushort *)(param_1 + 6) & 0x7fff;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_164(int param_1,int param_2)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = in_t0 & 0x7fff;
  if (param_2 != 0) {
    uVar1 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)uVar1) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)uVar1 < 0) {
      uVar1 = 0;
    }
    uVar1 = uVar1 & 0x7fff;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = uVar1 | (ushort)param_2;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_194(int param_1,ushort param_2)

{
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x182) = in_t0 & 0x7fff | param_2;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_288(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_2DC(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_330(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_384(void)

{
  int in_v0;
  undefined2 in_v1;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  return;
}



long _SpuRSetVoiceAttr(long min_,long max_,SpuVoiceAttr *arg)

{
  bool bVar1;
  bool bVar2;
  undefined2 uVar3;
  long lVar4;
  int iVar5;
  ushort uVar6;
  ushort uVar7;
  int in_a3;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  
  uVar10 = 0;
  uVar9 = 0;
  uVar8 = *(uint *)(min_ + 4);
  bVar1 = (SpuVoiceAttr *)max_ == arg;
  bVar2 = uVar8 == 0;
  if (max_ < 0) {
    max_ = 0;
  }
  if (max_ < 0x18) {
    if (0x17 < (int)arg) {
      arg = (SpuVoiceAttr *)0x17;
    }
    if ((-1 < (int)arg) && (max_ <= (int)arg)) {
      do {
        if ((int)((int)&arg->voice + 1) <= max_) {
          if (in_a3 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
        if ((bVar1) || ((*(uint *)min_ & 1 << (max_ & 0x1fU)) != 0)) {
          if ((bVar2) || ((uVar8 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 4) =
                 *(undefined2 *)(min_ + 0x14);
          }
          if ((bVar2) || ((uVar8 & 0x40) != 0)) {
            (&null_C000h_800a51bc)[max_] = *(undefined2 *)(min_ + 0x18);
          }
          if ((bVar2) || ((uVar8 & 0x20) != 0)) {
            uVar3 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[max_] >> 8,
                                    (&null_C000h_800a51bc)[max_] & 0xff,
                                    *(ushort *)(min_ + 0x16) >> 8,*(ushort *)(min_ + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 4) = uVar3;
          }
          if ((bVar2) || ((uVar8 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) =
                 *(undefined2 *)(min_ + 0x3a);
          }
          if ((bVar2) || ((uVar8 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 10) =
                 *(undefined2 *)(min_ + 0x3c);
          }
          if (bVar2) {
SR_SV_OBJ_1C0:
            switch(*(undefined2 *)(min_ + 0xc)) {
            default:
SR_SV_OBJ_224:
              uVar10 = (uint)*(ushort *)(min_ + 8);
              uVar6 = 0;
              break;
            case 1:
              uVar6 = 0x8000;
              break;
            case 2:
              uVar6 = 0x9000;
              break;
            case 3:
              uVar6 = 0xa000;
              break;
            case 4:
              uVar6 = 0xb000;
              break;
            case 5:
              uVar6 = 0xc000;
              break;
            case 6:
              uVar6 = 0xd000;
              break;
            case 7:
              uVar6 = 0xe000;
            }
            if (uVar6 != 0) {
              uVar10 = (uint)*(short *)(min_ + 8);
              if (0x7f < (int)uVar10) {
                lVar4 = SR_SV_OBJ_25C();
                return lVar4;
              }
              if ((int)uVar10 < 0) {
                uVar10 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10) =
                 (ushort)uVar10 & 0x7fff | uVar6;
          }
          else if ((uVar8 & 1) != 0) {
            if ((uVar8 & 4) != 0) goto SR_SV_OBJ_1C0;
            goto SR_SV_OBJ_224;
          }
          if (bVar2) {
SR_SV_OBJ_290:
            switch(*(undefined2 *)(min_ + 0xe)) {
            default:
SR_SV_OBJ_2F4:
              uVar9 = (uint)*(ushort *)(min_ + 10);
              uVar6 = 0;
              break;
            case 1:
              uVar6 = 0x8000;
              break;
            case 2:
              uVar6 = 0x9000;
              break;
            case 3:
              uVar6 = 0xa000;
              break;
            case 4:
              uVar6 = 0xb000;
              break;
            case 5:
              uVar6 = 0xc000;
              break;
            case 6:
              uVar6 = 0xd000;
              break;
            case 7:
              uVar6 = 0xe000;
            }
            if (uVar6 != 0) {
              uVar9 = (uint)*(short *)(min_ + 10);
              if (0x7f < (int)uVar9) {
                lVar4 = SR_SV_OBJ_32C();
                return lVar4;
              }
              if ((int)uVar9 < 0) {
                uVar9 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 2) =
                 (ushort)uVar9 & 0x7fff | uVar6;
          }
          else if ((uVar8 & 2) != 0) {
            if ((uVar8 & 8) != 0) goto SR_SV_OBJ_290;
            goto SR_SV_OBJ_2F4;
          }
          if ((bVar2) || ((uVar8 & 0x10000) != 0)) {
            _spu_FsetRXXa(max_ << 3 | 7,*(undefined4 *)(min_ + 0x20));
          }
          if ((bVar2) || ((uVar8 & 0x80) != 0)) {
            _spu_FsetRXXa(max_ << 3 | 3,*(undefined4 *)(min_ + 0x1c));
          }
          if (bVar2) {
SR_SV_OBJ_39C:
            if ((*(int *)(min_ + 0x24) != 1) && (*(int *)(min_ + 0x24) == 5)) {
              lVar4 = SR_SV_OBJ_3C0();
              return lVar4;
            }
code_r0x800901b4:
            uVar6 = *(ushort *)(min_ + 0x30);
            if (0x7f < uVar6) {
              uVar6 = 0x7f;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) & 0xff | uVar6 << 8
            ;
          }
          else if ((uVar8 & 0x800) != 0) {
            if ((uVar8 & 0x100) != 0) goto SR_SV_OBJ_39C;
            goto code_r0x800901b4;
          }
          if ((bVar2) || ((uVar8 & 0x1000) != 0)) {
            uVar6 = *(ushort *)(min_ + 0x32);
            if (0xf < uVar6) {
              uVar6 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) & 0xff0f |
                 uVar6 << 4;
          }
          if ((bVar2) || ((uVar8 & 0x8000) != 0)) {
            uVar6 = *(ushort *)(min_ + 0x38);
            if (0xf < uVar6) {
              uVar6 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) =
                 uVar6 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 8) & 0xfff0;
          }
          if (bVar2) {
SR_SV_OBJ_4C4:
            iVar5 = *(int *)(min_ + 0x28);
            if (iVar5 == 3) {
              uVar6 = 0x100;
            }
            else if (iVar5 < 4) {
              uVar6 = 0;
              if (iVar5 != 1) {
                lVar4 = SR_SV_OBJ_514();
                return lVar4;
              }
            }
            else {
              if (iVar5 == 5) {
                lVar4 = SR_SV_OBJ_514();
                return lVar4;
              }
              uVar6 = 0x300;
              if (iVar5 != 7) {
                lVar4 = SR_SV_OBJ_514();
                return lVar4;
              }
            }
code_r0x80090308:
            uVar7 = *(ushort *)(min_ + 0x34);
            if (0x7f < uVar7) {
              uVar7 = 0x7f;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 10) & 0x3f |
                 (uVar7 | uVar6) << 6;
          }
          else if ((uVar8 & 0x2000) != 0) {
            uVar6 = 0;
            if ((uVar8 & 0x200) != 0) goto SR_SV_OBJ_4C4;
            goto code_r0x80090308;
          }
          if (bVar2) {
SR_SV_OBJ_574:
            if ((*(int *)(min_ + 0x2c) != 3) && (*(int *)(min_ + 0x2c) == 7)) {
              lVar4 = SR_SV_OBJ_598();
              return lVar4;
            }
          }
          else {
            if ((uVar8 & 0x4000) == 0) goto SR_SV_OBJ_5DC;
            if ((uVar8 & 0x400) != 0) goto SR_SV_OBJ_574;
          }
          uVar6 = *(ushort *)(min_ + 0x36);
          if (0x1f < uVar6) {
            uVar6 = 0x1f;
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 10) =
               *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + max_ * 0x10 + 10) & 0xffc0 | uVar6;
        }
SR_SV_OBJ_5DC:
        max_ = max_ + 1;
      } while( true );
    }
  }
  lVar4 = SR_SV_OBJ_608();
  return lVar4;
}



undefined4 SR_SV_OBJ_1EC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8008ffe0:
  uVar4 = 0x8000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      goto code_r0x8008ffe0;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_1F4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8008ffe8:
  uVar4 = 0x9000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      goto code_r0x8008ffe8;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_1FC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8008fff0:
  uVar4 = 0xa000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      goto code_r0x8008fff0;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_204(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8008fff8:
  uVar4 = 0xb000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      goto code_r0x8008fff8;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_20C(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x80090000:
  uVar4 = 0xc000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      goto code_r0x80090000;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_214(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x80090008:
  uVar4 = 0xd000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      goto code_r0x80090008;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_21C(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x80090010:
  uVar4 = 0xe000;
SR_SV_OBJ_22C:
  do {
    if (uVar4 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar4
    ;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      uVar4 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      goto code_r0x80090010;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_224(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint uVar6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x80090018:
  do {
    uVar6 = (uint)(ushort)unaff_s0[2];
    uVar4 = 0;
SR_SV_OBJ_22C:
    if (uVar4 != 0) {
      uVar6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)uVar6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)uVar6 < 0) {
        uVar6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) = (ushort)uVar6 & 0x7fff | uVar4;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
  } while ((unaff_s1 & 4) == 0);
SR_SV_OBJ_1C0:
  switch((short)unaff_s0[3]) {
  default:
    goto code_r0x80090018;
  case 1:
    uVar4 = 0x8000;
    break;
  case 2:
    uVar4 = 0x9000;
    break;
  case 3:
    uVar4 = 0xa000;
    break;
  case 4:
    uVar4 = 0xb000;
    break;
  case 5:
    uVar4 = 0xc000;
    break;
  case 6:
    uVar4 = 0xd000;
    break;
  case 7:
    uVar4 = 0xe000;
  }
  goto SR_SV_OBJ_22C;
}



undefined4
SR_SV_OBJ_22C(undefined4 param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
code_r0x80090020:
  do {
    if (param_2 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) =
         (ushort)unaff_s6 & 0x7fff | (ushort)param_2;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      param_2 = 0;
      goto code_r0x80090020;
    }
SR_SV_OBJ_1C0:
    switch((short)unaff_s0[3]) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      param_2 = 0x8000;
      break;
    case 2:
      param_2 = 0x9000;
      break;
    case 3:
      param_2 = 0xa000;
      break;
    case 4:
      param_2 = 0xb000;
      break;
    case 5:
      param_2 = 0xc000;
      break;
    case 6:
      param_2 = 0xd000;
      break;
    case 7:
      param_2 = 0xe000;
    }
  } while( true );
}



undefined4
SR_SV_OBJ_25C(undefined4 param_1,ushort param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2) =
         (ushort)unaff_s6 & 0x7fff | param_2;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)(ushort)unaff_s0[2];
      param_2 = 0;
    }
    else {
SR_SV_OBJ_1C0:
      switch((short)unaff_s0[3]) {
      default:
        goto SR_SV_OBJ_224;
      case 1:
        param_2 = 0x8000;
        break;
      case 2:
        param_2 = 0x9000;
        break;
      case 3:
        param_2 = 0xa000;
        break;
      case 4:
        param_2 = 0xb000;
        break;
      case 5:
        param_2 = 0xc000;
        break;
      case 6:
        param_2 = 0xd000;
        break;
      case 7:
        param_2 = 0xe000;
      }
    }
    if (param_2 != 0) {
      unaff_s6 = (uint)(short)unaff_s0[2];
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2BC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900b0:
  uVar4 = 0x8000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      goto code_r0x800900b0;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2C4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900b8:
  uVar4 = 0x9000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      goto code_r0x800900b8;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2CC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900c0:
  uVar4 = 0xa000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      goto code_r0x800900c0;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2D4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900c8:
  uVar4 = 0xb000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      goto code_r0x800900c8;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2DC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900d0:
  uVar4 = 0xc000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      goto code_r0x800900d0;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2E4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900d8:
  uVar4 = 0xd000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      goto code_r0x800900d8;
    case 7:
      uVar4 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2EC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900e0:
  uVar4 = 0xe000;
SR_SV_OBJ_2FC:
  do {
    if (uVar4 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar4 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      goto code_r0x800900e0;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2F4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint uVar6;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x800900e8:
  do {
    uVar6 = (uint)*(ushort *)((int)unaff_s0 + 10);
    uVar4 = 0;
SR_SV_OBJ_2FC:
    if (uVar4 != 0) {
      uVar6 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)uVar6) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)uVar6 < 0) {
        uVar6 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)uVar6 & 0x7fff | uVar4;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
  } while ((unaff_s1 & 8) == 0);
SR_SV_OBJ_290:
  switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
  default:
    goto code_r0x800900e8;
  case 1:
    uVar4 = 0x8000;
    break;
  case 2:
    uVar4 = 0x9000;
    break;
  case 3:
    uVar4 = 0xa000;
    break;
  case 4:
    uVar4 = 0xb000;
    break;
  case 5:
    uVar4 = 0xc000;
    break;
  case 6:
    uVar4 = 0xd000;
    break;
  case 7:
    uVar4 = 0xe000;
  }
  goto SR_SV_OBJ_2FC;
}



undefined4
SR_SV_OBJ_2FC(undefined4 param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
code_r0x800900f0:
  do {
    if (param_2 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | (ushort)param_2;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      param_2 = 0;
      goto code_r0x800900f0;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      param_2 = 0x8000;
      break;
    case 2:
      param_2 = 0x9000;
      break;
    case 3:
      param_2 = 0xa000;
      break;
    case 4:
      param_2 = 0xb000;
      break;
    case 5:
      param_2 = 0xc000;
      break;
    case 6:
      param_2 = 0xd000;
      break;
    case 7:
      param_2 = 0xe000;
    }
  } while( true );
}



undefined4
SR_SV_OBJ_32C(undefined4 param_1,ushort param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 2) =
         (ushort)unaff_s5 & 0x7fff | param_2;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff | uVar4 << 8;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      param_2 = 0;
    }
    else {
SR_SV_OBJ_290:
      switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
      default:
        goto SR_SV_OBJ_2F4;
      case 1:
        param_2 = 0x8000;
        break;
      case 2:
        param_2 = 0x9000;
        break;
      case 3:
        param_2 = 0xa000;
        break;
      case 4:
        param_2 = 0xb000;
        break;
      case 5:
        param_2 = 0xc000;
        break;
      case 6:
        param_2 = 0xd000;
        break;
      case 7:
        param_2 = 0xe000;
      }
    }
    if (param_2 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_3C0(undefined4 param_1,undefined4 param_2,ushort param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar4 = (ushort)unaff_s0[0xc];
    if (0x7f < uVar4) {
      uVar4 = 0x7f;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff |
         (uVar4 | param_3) << 8;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xff0f | uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_39C;
    } while ((unaff_s1 & 0x800) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x100) != 0) {
SR_SV_OBJ_39C:
      if (unaff_s0[9] == 1) {
        param_3 = 0;
      }
      else {
        param_3 = 0;
        if (unaff_s0[9] == 5) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_514(undefined4 param_1,undefined4 param_2,ushort param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar4 = (ushort)unaff_s0[0xd];
    if (0x7f < uVar4) {
      uVar4 = 0x7f;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0x3f |
         (uVar4 | param_3) << 6;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8009038c;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8009038c:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xff | uVar4 << 8
        ;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xff0f |
             uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xfff0;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_4C4;
    } while ((unaff_s1 & 0x2000) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x200) != 0) {
SR_SV_OBJ_4C4:
      uVar3 = unaff_s0[10];
      if (uVar3 == 3) {
        param_3 = 0x100;
      }
      else if ((int)uVar3 < 4) {
        param_3 = 0;
        if (uVar3 != 1) {
          uVar2 = SR_SV_OBJ_514();
          return uVar2;
        }
      }
      else {
        if (uVar3 == 5) {
          uVar2 = SR_SV_OBJ_514();
          return uVar2;
        }
        param_3 = 0x300;
        if (uVar3 != 7) {
          uVar2 = SR_SV_OBJ_514();
          return uVar2;
        }
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_598(undefined4 param_1,undefined4 param_2,ushort param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  ushort uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
    if (0x1f < uVar4) {
      uVar4 = 0x1f;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s3 * 2 + 10) & 0xffc0 |
         uVar4 | param_3;
    do {
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = (short)unaff_s0[5];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&null_C000h_800a51bc)[unaff_s4] = (short)unaff_s0[6];
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&null_C000h_800a51bc)[unaff_s4] >> 8,
                                (&null_C000h_800a51bc)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(short *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) = (short)unaff_s0[0xf];
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch((short)unaff_s0[3]) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)(ushort)unaff_s0[2];
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)(short)unaff_s0[2];
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10) =
             (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 2) =
             (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x800901b4;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x800901b4:
        uVar4 = (ushort)unaff_s0[0xc];
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xff | uVar4 << 8
        ;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = *(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xff0f |
             uVar4 << 4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = (ushort)unaff_s0[0xe];
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) =
             uVar4 | *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar4 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x80090308;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar3 = unaff_s0[10];
        if (uVar3 == 3) {
          uVar4 = 0x100;
        }
        else if ((int)uVar3 < 4) {
          uVar4 = 0;
          if (uVar3 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar3 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar4 = 0x300;
          if (uVar3 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x80090308:
        uVar5 = (ushort)unaff_s0[0xd];
        if (0x7f < uVar5) {
          uVar5 = 0x7f;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + unaff_s4 * 0x10 + 10) & 0x3f |
             (uVar5 | uVar4) << 6;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_574;
    } while ((unaff_s1 & 0x4000) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x400) != 0) {
SR_SV_OBJ_574:
      if (unaff_s0[0xb] == 3) {
        param_3 = 0;
      }
      else {
        param_3 = 0;
        if (unaff_s0[0xb] == 7) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
      }
    }
  } while( true );
}



void SR_SV_OBJ_608(void)

{
  return;
}



uint _spu_2pitch(int param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  undefined4 local_8;
  
  uVar1 = 0x103b;
  local_8 = param_1 * 0x103b;
  iVar3 = param_1 << 0xc;
  iVar2 = 0;
  if (param_2 >> 5 != 0) {
    local_8 = param_1 * 0x103b;
    do {
      iVar3 = local_8;
      uVar1 = uVar1 * 0x103b >> 0xc;
      local_8 = param_1 * uVar1;
      iVar2 = iVar2 + 1;
    } while (iVar2 < (int)(param_2 >> 5));
  }
  return iVar3 + ((uint)(local_8 - iVar3) >> 5) * (param_2 & 0x1f) >> 0xc;
}



uint _spu_note2pitch(uint param_1,uint param_2,uint param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  undefined4 local_8;
  
  iVar4 = ((param_3 & 0xffff) * 0x80 + (param_4 & 0xffff)) -
          ((param_1 & 0xffff) * 0x80 + (param_2 & 0xffff));
  iVar3 = iVar4;
  if (iVar4 < 0) {
    iVar3 = -iVar4;
  }
  uVar2 = iVar3 / 0x600;
  uVar1 = iVar3 % 0x600;
  if (-1 < iVar4) {
    uVar1 = S_N2P_OBJ_11C();
    return uVar1;
  }
  if (uVar1 != 0) {
    uVar2 = uVar2 + 1;
    uVar1 = 0x600 - uVar1;
  }
  uVar5 = 0x1000 >> (uVar2 & 0x1f) & 0xffff;
  uVar2 = 0x103b;
  local_8 = uVar5 * 0x103b;
  iVar4 = uVar5 << 0xc;
  iVar3 = 0;
  if ((int)uVar1 < 0) {
    uVar1 = -uVar1;
  }
  if (uVar1 >> 5 != 0) {
    local_8 = uVar5 * 0x103b;
    do {
      iVar4 = local_8;
      uVar2 = uVar2 * 0x103b >> 0xc;
      local_8 = uVar5 * uVar2;
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)(uVar1 >> 5));
  }
  uVar2 = iVar4 + ((uint)(local_8 - iVar4) >> 5) * (uVar1 & 0x1f) >> 0xc;
  uVar1 = uVar2 & 0xffff;
  if (0x3fff < uVar2) {
    uVar1 = 0x3fff;
  }
  return uVar1;
}



uint S_N2P_OBJ_11C(void)

{
  uint in_v0;
  uint in_v1;
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 local_res8;
  
  uVar3 = in_v0 & 0xffff;
  uVar1 = 0x103b;
  local_res8 = uVar3 * 0x103b;
  iVar4 = uVar3 << 0xc;
  iVar2 = 0;
  if ((int)in_v1 < 0) {
    in_v1 = -in_v1;
  }
  if (in_v1 >> 5 != 0) {
    local_res8 = uVar3 * 0x103b;
    do {
      iVar4 = local_res8;
      uVar1 = uVar1 * 0x103b >> 0xc;
      local_res8 = uVar3 * uVar1;
      iVar2 = iVar2 + 1;
    } while (iVar2 < (int)(in_v1 >> 5));
  }
  uVar3 = iVar4 + ((uint)(local_res8 - iVar4) >> 5) * (in_v1 & 0x1f) >> 0xc;
  uVar1 = uVar3 & 0xffff;
  if (0x3fff < uVar3) {
    uVar1 = 0x3fff;
  }
  return uVar1;
}



uint _spu_pitch2note(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  
  uVar6 = 0xf;
  uVar1 = (int)(~param_3 & 0xffff) >> 0xf;
  do {
    if ((uVar1 & 1) == 0) {
      uVar1 = S_N2P_OBJ_208();
      return uVar1;
    }
    uVar6 = uVar6 - 1;
    uVar1 = (int)(~param_3 & 0xffff) >> (uVar6 & 0x1f);
  } while (-1 < (int)uVar6);
  iVar7 = 0;
  uVar1 = 0x1000;
  do {
    uVar4 = uVar1 * 0x103b >> 0xc;
    iVar3 = 0;
    iVar8 = 0;
    uVar5 = uVar4 - uVar1 >> 5;
    uVar6 = uVar5;
    do {
      if ((uVar1 + iVar8 >> 0xc <= (param_3 & 0xffff)) &&
         (iVar2 = iVar7 * 0x20 + iVar3, (param_3 & 0xffff) < uVar1 + uVar6 >> 0xc))
      goto S_N2P_OBJ_2B0;
      uVar6 = uVar6 + uVar5;
      iVar3 = iVar3 + 1;
      iVar8 = iVar8 + uVar5;
    } while (iVar3 < 0x20);
    iVar7 = iVar7 + 1;
    uVar1 = uVar4;
  } while (iVar7 < 0x30);
  iVar2 = 0x600;
S_N2P_OBJ_2B0:
  iVar7 = iVar2;
  if (iVar2 < 0) {
    iVar7 = iVar2 + 0x7f;
  }
  return ((param_1 & 0xffff) + (iVar7 >> 7) + -0x90) * 0x100 |
         (param_2 & 0xffff) + iVar2 + (iVar7 >> 7) * -0x80;
}



uint S_N2P_OBJ_208(uint param_1,uint param_2)

{
  int iVar1;
  uint in_v1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint in_t8;
  int iVar9;
  
  iVar8 = 1 << (in_v1 & 0x1f);
  uVar4 = 0x1000;
  iVar6 = 0;
  iVar9 = iVar8 * 0x1000;
  do {
    uVar4 = uVar4 * 0x103b >> 0xc;
    iVar2 = 0;
    iVar7 = 0;
    uVar5 = iVar8 * uVar4 - iVar9 >> 5;
    uVar3 = uVar5;
    do {
      if (((uint)(iVar9 + iVar7) >> 0xc <= (param_1 & 0xffff)) &&
         (iVar1 = iVar6 * 0x20 + iVar2, (param_1 & 0xffff) < iVar9 + uVar3 >> 0xc))
      goto S_N2P_OBJ_2B0;
      uVar3 = uVar3 + uVar5;
      iVar2 = iVar2 + 1;
      iVar7 = iVar7 + uVar5;
    } while (iVar2 < 0x20);
    iVar6 = iVar6 + 1;
    iVar9 = iVar8 * uVar4;
  } while (iVar6 < 0x30);
  iVar1 = 0x600;
S_N2P_OBJ_2B0:
  iVar6 = iVar1;
  if (iVar1 < 0) {
    iVar6 = iVar1 + 0x7f;
  }
  return ((in_t8 & 0xffff) + (iVar6 >> 7) + (in_v1 - 0xc) * 0xc) * 0x100 |
         (param_2 & 0xffff) + iVar1 + (iVar6 >> 7) * -0x80;
}



void SpuSetVoiceVolume(int vNum,short volL,short volR)

{
  ushort *puVar1;
  
  puVar1 = (ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + vNum * 0x10);
  *puVar1 = volL & 0x7fff;
  puVar1[1] = volR & 0x7fff;
  _spu_Fw1ts();
  return;
}



void SpuSetVoicePitch(int vNum,ushort pitch)

{
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + vNum * 0x10 + 4) = pitch;
  _spu_Fw1ts();
  return;
}



void SpuGetVoicePitch(int vNum,ushort *pitch)

{
  *pitch = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + vNum * 0x10 + 4);
  return;
}



// Possible S_SCCV.OBJ/SpuSetCommonCDVolume

void FUN_800907b4(undefined2 param_1,undefined2 param_2)

{
  undefined *puVar1;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800a55f4;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800a55f4 + 0x1b0) = param_1;
  *(undefined2 *)(puVar1 + 0x1b2) = param_2;
  return;
}


